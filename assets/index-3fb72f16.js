function sz(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function _s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sD={exports:{}},$0={},oD={exports:{}},Ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp=Symbol.for("react.element"),oz=Symbol.for("react.portal"),az=Symbol.for("react.fragment"),lz=Symbol.for("react.strict_mode"),uz=Symbol.for("react.profiler"),cz=Symbol.for("react.provider"),fz=Symbol.for("react.context"),dz=Symbol.for("react.forward_ref"),hz=Symbol.for("react.suspense"),pz=Symbol.for("react.memo"),mz=Symbol.for("react.lazy"),L2=Symbol.iterator;function gz(t){return t===null||typeof t!="object"?null:(t=L2&&t[L2]||t["@@iterator"],typeof t=="function"?t:null)}var aD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lD=Object.assign,uD={};function Of(t,e,n){this.props=t,this.context=e,this.refs=uD,this.updater=n||aD}Of.prototype.isReactComponent={};Of.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Of.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cD(){}cD.prototype=Of.prototype;function _b(t,e,n){this.props=t,this.context=e,this.refs=uD,this.updater=n||aD}var Sb=_b.prototype=new cD;Sb.constructor=_b;lD(Sb,Of.prototype);Sb.isPureReactComponent=!0;var O2=Array.isArray,fD=Object.prototype.hasOwnProperty,wb={current:null},dD={key:!0,ref:!0,__self:!0,__source:!0};function hD(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)fD.call(e,r)&&!dD.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Pp,type:t,key:s,ref:o,props:i,_owner:wb.current}}function vz(t,e){return{$$typeof:Pp,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function bb(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pp}function yz(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var k2=/\/+/g;function hx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?yz(""+t.key):e.toString(36)}function Pv(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pp:case oz:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+hx(o,0):r,O2(i)?(n="",t!=null&&(n=t.replace(k2,"$&/")+"/"),Pv(i,e,n,"",function(u){return u})):i!=null&&(bb(i)&&(i=vz(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(k2,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",O2(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+hx(s,a);o+=Pv(s,e,n,l,i)}else if(l=gz(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+hx(s,a++),o+=Pv(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rg(t,e,n){if(t==null)return t;var r=[],i=0;return Pv(t,r,"","",function(s){return e.call(n,s,i++)}),r}function xz(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var si={current:null},Cv={transition:null},_z={ReactCurrentDispatcher:si,ReactCurrentBatchConfig:Cv,ReactCurrentOwner:wb};Ut.Children={map:rg,forEach:function(t,e,n){rg(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rg(t,function(){e++}),e},toArray:function(t){return rg(t,function(e){return e})||[]},only:function(t){if(!bb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ut.Component=Of;Ut.Fragment=az;Ut.Profiler=uz;Ut.PureComponent=_b;Ut.StrictMode=lz;Ut.Suspense=hz;Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_z;Ut.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=lD({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=wb.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)fD.call(e,l)&&!dD.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Pp,type:t.type,key:i,ref:s,props:r,_owner:o}};Ut.createContext=function(t){return t={$$typeof:fz,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cz,_context:t},t.Consumer=t};Ut.createElement=hD;Ut.createFactory=function(t){var e=hD.bind(null,t);return e.type=t,e};Ut.createRef=function(){return{current:null}};Ut.forwardRef=function(t){return{$$typeof:dz,render:t}};Ut.isValidElement=bb;Ut.lazy=function(t){return{$$typeof:mz,_payload:{_status:-1,_result:t},_init:xz}};Ut.memo=function(t,e){return{$$typeof:pz,type:t,compare:e===void 0?null:e}};Ut.startTransition=function(t){var e=Cv.transition;Cv.transition={};try{t()}finally{Cv.transition=e}};Ut.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Ut.useCallback=function(t,e){return si.current.useCallback(t,e)};Ut.useContext=function(t){return si.current.useContext(t)};Ut.useDebugValue=function(){};Ut.useDeferredValue=function(t){return si.current.useDeferredValue(t)};Ut.useEffect=function(t,e){return si.current.useEffect(t,e)};Ut.useId=function(){return si.current.useId()};Ut.useImperativeHandle=function(t,e,n){return si.current.useImperativeHandle(t,e,n)};Ut.useInsertionEffect=function(t,e){return si.current.useInsertionEffect(t,e)};Ut.useLayoutEffect=function(t,e){return si.current.useLayoutEffect(t,e)};Ut.useMemo=function(t,e){return si.current.useMemo(t,e)};Ut.useReducer=function(t,e,n){return si.current.useReducer(t,e,n)};Ut.useRef=function(t){return si.current.useRef(t)};Ut.useState=function(t){return si.current.useState(t)};Ut.useSyncExternalStore=function(t,e,n){return si.current.useSyncExternalStore(t,e,n)};Ut.useTransition=function(){return si.current.useTransition()};Ut.version="18.2.0";oD.exports=Ut;var R=oD.exports;const Z=_s(R),nS=sz({__proto__:null,default:Z},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sz=R,wz=Symbol.for("react.element"),bz=Symbol.for("react.fragment"),Mz=Object.prototype.hasOwnProperty,Ez=Sz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Tz={key:!0,ref:!0,__self:!0,__source:!0};function pD(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Mz.call(e,r)&&!Tz.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:wz,type:t,key:s,ref:o,props:i,_owner:Ez.current}}$0.Fragment=bz;$0.jsx=pD;$0.jsxs=pD;sD.exports=$0;var Ie=sD.exports,rS={},mD={exports:{}},Hi={},gD={exports:{}},vD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,j){var V=F.length;F.push(j);e:for(;0<V;){var ce=V-1>>>1,ae=F[ce];if(0<i(ae,j))F[ce]=j,F[V]=ae,V=ce;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var j=F[0],V=F.pop();if(V!==j){F[0]=V;e:for(var ce=0,ae=F.length,fe=ae>>>1;ce<fe;){var de=2*(ce+1)-1,De=F[de],Ee=de+1,J=F[Ee];if(0>i(De,V))Ee<ae&&0>i(J,De)?(F[ce]=J,F[Ee]=V,ce=Ee):(F[ce]=De,F[de]=V,ce=de);else if(Ee<ae&&0>i(J,V))F[ce]=J,F[Ee]=V,ce=Ee;else break e}}return j}function i(F,j){var V=F.sortIndex-j.sortIndex;return V!==0?V:F.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,g=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=F)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function M(F){if(_=!1,w(F),!v)if(n(l)!==null)v=!0,Q(I);else{var j=n(u);j!==null&&ee(M,j.startTime-F)}}function I(F,j){v=!1,_&&(_=!1,m(A),A=-1),g=!0;var V=p;try{for(w(j),h=n(l);h!==null&&(!(h.expirationTime>j)||F&&!O());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,p=h.priorityLevel;var ae=ce(h.expirationTime<=j);j=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(l)&&r(l),w(j)}else r(l);h=n(l)}if(h!==null)var fe=!0;else{var de=n(u);de!==null&&ee(M,de.startTime-j),fe=!1}return fe}finally{h=null,p=V,g=!1}}var P=!1,D=null,A=-1,T=5,E=-1;function O(){return!(t.unstable_now()-E<T)}function N(){if(D!==null){var F=t.unstable_now();E=F;var j=!0;try{j=D(!0,F)}finally{j?H():(P=!1,D=null)}}else P=!1}var H;if(typeof S=="function")H=function(){S(N)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Y=K.port2;K.port1.onmessage=N,H=function(){Y.postMessage(null)}}else H=function(){x(N,0)};function Q(F){D=F,P||(P=!0,H())}function ee(F,j){A=x(function(){F(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Q(I))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var V=p;p=j;try{return F()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,j){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=p;p=F;try{return j()}finally{p=V}},t.unstable_scheduleCallback=function(F,j,V){var ce=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ce+V:ce):V=ce,F){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=V+ae,F={id:d++,callback:j,priorityLevel:F,startTime:V,expirationTime:ae,sortIndex:-1},V>ce?(F.sortIndex=V,e(u,F),n(l)===null&&F===n(u)&&(_?(m(A),A=-1):_=!0,ee(M,V-ce))):(F.sortIndex=ae,e(l,F),v||g||(v=!0,Q(I))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var j=p;return function(){var V=p;p=j;try{return F.apply(this,arguments)}finally{p=V}}}})(vD);gD.exports=vD;var Pz=gD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yD=R,Bi=Pz;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xD=new Set,Nh={};function Pu(t,e){gf(t,e),gf(t+"Capture",e)}function gf(t,e){for(Nh[t]=e,t=0;t<e.length;t++)xD.add(e[t])}var ra=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iS=Object.prototype.hasOwnProperty,Cz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,U2={},N2={};function Az(t){return iS.call(N2,t)?!0:iS.call(U2,t)?!1:Cz.test(t)?N2[t]=!0:(U2[t]=!0,!1)}function Rz(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Iz(t,e,n,r){if(e===null||typeof e>"u"||Rz(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function oi(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ir[t]=new oi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ir[e]=new oi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ir[t]=new oi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ir[t]=new oi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ir[t]=new oi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ir[t]=new oi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ir[t]=new oi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ir[t]=new oi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ir[t]=new oi(t,5,!1,t.toLowerCase(),null,!1,!1)});var Mb=/[\-:]([a-z])/g;function Eb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Mb,Eb);Ir[e]=new oi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Mb,Eb);Ir[e]=new oi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Mb,Eb);Ir[e]=new oi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ir[t]=new oi(t,1,!1,t.toLowerCase(),null,!1,!1)});Ir.xlinkHref=new oi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ir[t]=new oi(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tb(t,e,n,r){var i=Ir.hasOwnProperty(e)?Ir[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Iz(e,n,i,r)&&(n=null),r||i===null?Az(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var da=yD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ig=Symbol.for("react.element"),Uc=Symbol.for("react.portal"),Nc=Symbol.for("react.fragment"),Pb=Symbol.for("react.strict_mode"),sS=Symbol.for("react.profiler"),_D=Symbol.for("react.provider"),SD=Symbol.for("react.context"),Cb=Symbol.for("react.forward_ref"),oS=Symbol.for("react.suspense"),aS=Symbol.for("react.suspense_list"),Ab=Symbol.for("react.memo"),Na=Symbol.for("react.lazy"),wD=Symbol.for("react.offscreen"),F2=Symbol.iterator;function Ed(t){return t===null||typeof t!="object"?null:(t=F2&&t[F2]||t["@@iterator"],typeof t=="function"?t:null)}var In=Object.assign,px;function sh(t){if(px===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);px=e&&e[1]||""}return`
`+px+t}var mx=!1;function gx(t,e){if(!t||mx)return"";mx=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{mx=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?sh(t):""}function Dz(t){switch(t.tag){case 5:return sh(t.type);case 16:return sh("Lazy");case 13:return sh("Suspense");case 19:return sh("SuspenseList");case 0:case 2:case 15:return t=gx(t.type,!1),t;case 11:return t=gx(t.type.render,!1),t;case 1:return t=gx(t.type,!0),t;default:return""}}function lS(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Nc:return"Fragment";case Uc:return"Portal";case sS:return"Profiler";case Pb:return"StrictMode";case oS:return"Suspense";case aS:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case SD:return(t.displayName||"Context")+".Consumer";case _D:return(t._context.displayName||"Context")+".Provider";case Cb:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ab:return e=t.displayName||null,e!==null?e:lS(t.type)||"Memo";case Na:e=t._payload,t=t._init;try{return lS(t(e))}catch{}}return null}function Lz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lS(e);case 8:return e===Pb?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function nl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bD(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Oz(t){var e=bD(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sg(t){t._valueTracker||(t._valueTracker=Oz(t))}function MD(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bD(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function n0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function uS(t,e){var n=e.checked;return In({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function z2(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=nl(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ED(t,e){e=e.checked,e!=null&&Tb(t,"checked",e,!1)}function cS(t,e){ED(t,e);var n=nl(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fS(t,e.type,n):e.hasOwnProperty("defaultValue")&&fS(t,e.type,nl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function B2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fS(t,e,n){(e!=="number"||n0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var oh=Array.isArray;function sf(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+nl(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function dS(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return In({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function H2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Fe(92));if(oh(n)){if(1<n.length)throw Error(Fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:nl(n)}}function TD(t,e){var n=nl(e.value),r=nl(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function V2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function PD(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hS(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?PD(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var og,CD=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(og=og||document.createElement("div"),og.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=og.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Fh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kz=["Webkit","ms","Moz","O"];Object.keys(ph).forEach(function(t){kz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ph[e]=ph[t]})});function AD(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ph.hasOwnProperty(t)&&ph[t]?(""+e).trim():e+"px"}function RD(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=AD(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Uz=In({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pS(t,e){if(e){if(Uz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Fe(62))}}function mS(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gS=null;function Rb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vS=null,of=null,af=null;function G2(t){if(t=Rp(t)){if(typeof vS!="function")throw Error(Fe(280));var e=t.stateNode;e&&(e=q0(e),vS(t.stateNode,t.type,e))}}function ID(t){of?af?af.push(t):af=[t]:of=t}function DD(){if(of){var t=of,e=af;if(af=of=null,G2(t),e)for(t=0;t<e.length;t++)G2(e[t])}}function LD(t,e){return t(e)}function OD(){}var vx=!1;function kD(t,e,n){if(vx)return t(e,n);vx=!0;try{return LD(t,e,n)}finally{vx=!1,(of!==null||af!==null)&&(OD(),DD())}}function zh(t,e){var n=t.stateNode;if(n===null)return null;var r=q0(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Fe(231,e,typeof n));return n}var yS=!1;if(ra)try{var Td={};Object.defineProperty(Td,"passive",{get:function(){yS=!0}}),window.addEventListener("test",Td,Td),window.removeEventListener("test",Td,Td)}catch{yS=!1}function Nz(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var mh=!1,r0=null,i0=!1,xS=null,Fz={onError:function(t){mh=!0,r0=t}};function zz(t,e,n,r,i,s,o,a,l){mh=!1,r0=null,Nz.apply(Fz,arguments)}function Bz(t,e,n,r,i,s,o,a,l){if(zz.apply(this,arguments),mh){if(mh){var u=r0;mh=!1,r0=null}else throw Error(Fe(198));i0||(i0=!0,xS=u)}}function Cu(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function UD(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function W2(t){if(Cu(t)!==t)throw Error(Fe(188))}function Hz(t){var e=t.alternate;if(!e){if(e=Cu(t),e===null)throw Error(Fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return W2(i),t;if(s===r)return W2(i),e;s=s.sibling}throw Error(Fe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Fe(189))}}if(n.alternate!==r)throw Error(Fe(190))}if(n.tag!==3)throw Error(Fe(188));return n.stateNode.current===n?t:e}function ND(t){return t=Hz(t),t!==null?FD(t):null}function FD(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=FD(t);if(e!==null)return e;t=t.sibling}return null}var zD=Bi.unstable_scheduleCallback,$2=Bi.unstable_cancelCallback,Vz=Bi.unstable_shouldYield,Gz=Bi.unstable_requestPaint,Gn=Bi.unstable_now,Wz=Bi.unstable_getCurrentPriorityLevel,Ib=Bi.unstable_ImmediatePriority,BD=Bi.unstable_UserBlockingPriority,s0=Bi.unstable_NormalPriority,$z=Bi.unstable_LowPriority,HD=Bi.unstable_IdlePriority,j0=null,xo=null;function jz(t){if(xo&&typeof xo.onCommitFiberRoot=="function")try{xo.onCommitFiberRoot(j0,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:Yz,Xz=Math.log,Kz=Math.LN2;function Yz(t){return t>>>=0,t===0?32:31-(Xz(t)/Kz|0)|0}var ag=64,lg=4194304;function ah(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function o0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ah(a):(s&=o,s!==0&&(r=ah(s)))}else o=n&~i,o!==0?r=ah(o):s!==0&&(r=ah(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Vs(e),i=1<<n,r|=t[n],e&=~i;return r}function qz(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zz(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Vs(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=qz(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function _S(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VD(){var t=ag;return ag<<=1,!(ag&4194240)&&(ag=64),t}function yx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cp(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Vs(e),t[e]=n}function Qz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Vs(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Db(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Vs(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var nn=0;function GD(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WD,Lb,$D,jD,XD,SS=!1,ug=[],$a=null,ja=null,Xa=null,Bh=new Map,Hh=new Map,Ba=[],Jz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function j2(t,e){switch(t){case"focusin":case"focusout":$a=null;break;case"dragenter":case"dragleave":ja=null;break;case"mouseover":case"mouseout":Xa=null;break;case"pointerover":case"pointerout":Bh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hh.delete(e.pointerId)}}function Pd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Rp(e),e!==null&&Lb(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function eB(t,e,n,r,i){switch(e){case"focusin":return $a=Pd($a,t,e,n,r,i),!0;case"dragenter":return ja=Pd(ja,t,e,n,r,i),!0;case"mouseover":return Xa=Pd(Xa,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Bh.set(s,Pd(Bh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Hh.set(s,Pd(Hh.get(s)||null,t,e,n,r,i)),!0}return!1}function KD(t){var e=Yl(t.target);if(e!==null){var n=Cu(e);if(n!==null){if(e=n.tag,e===13){if(e=UD(n),e!==null){t.blockedOn=e,XD(t.priority,function(){$D(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Av(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wS(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gS=r,n.target.dispatchEvent(r),gS=null}else return e=Rp(n),e!==null&&Lb(e),t.blockedOn=n,!1;e.shift()}return!0}function X2(t,e,n){Av(t)&&n.delete(e)}function tB(){SS=!1,$a!==null&&Av($a)&&($a=null),ja!==null&&Av(ja)&&(ja=null),Xa!==null&&Av(Xa)&&(Xa=null),Bh.forEach(X2),Hh.forEach(X2)}function Cd(t,e){t.blockedOn===e&&(t.blockedOn=null,SS||(SS=!0,Bi.unstable_scheduleCallback(Bi.unstable_NormalPriority,tB)))}function Vh(t){function e(i){return Cd(i,t)}if(0<ug.length){Cd(ug[0],t);for(var n=1;n<ug.length;n++){var r=ug[n];r.blockedOn===t&&(r.blockedOn=null)}}for($a!==null&&Cd($a,t),ja!==null&&Cd(ja,t),Xa!==null&&Cd(Xa,t),Bh.forEach(e),Hh.forEach(e),n=0;n<Ba.length;n++)r=Ba[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ba.length&&(n=Ba[0],n.blockedOn===null);)KD(n),n.blockedOn===null&&Ba.shift()}var lf=da.ReactCurrentBatchConfig,a0=!0;function nB(t,e,n,r){var i=nn,s=lf.transition;lf.transition=null;try{nn=1,Ob(t,e,n,r)}finally{nn=i,lf.transition=s}}function rB(t,e,n,r){var i=nn,s=lf.transition;lf.transition=null;try{nn=4,Ob(t,e,n,r)}finally{nn=i,lf.transition=s}}function Ob(t,e,n,r){if(a0){var i=wS(t,e,n,r);if(i===null)Cx(t,e,r,l0,n),j2(t,r);else if(eB(i,t,e,n,r))r.stopPropagation();else if(j2(t,r),e&4&&-1<Jz.indexOf(t)){for(;i!==null;){var s=Rp(i);if(s!==null&&WD(s),s=wS(t,e,n,r),s===null&&Cx(t,e,r,l0,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Cx(t,e,r,null,n)}}var l0=null;function wS(t,e,n,r){if(l0=null,t=Rb(r),t=Yl(t),t!==null)if(e=Cu(t),e===null)t=null;else if(n=e.tag,n===13){if(t=UD(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return l0=t,null}function YD(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wz()){case Ib:return 1;case BD:return 4;case s0:case $z:return 16;case HD:return 536870912;default:return 16}default:return 16}}var Va=null,kb=null,Rv=null;function qD(){if(Rv)return Rv;var t,e=kb,n=e.length,r,i="value"in Va?Va.value:Va.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Rv=i.slice(t,1<r?1-r:void 0)}function Iv(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function cg(){return!0}function K2(){return!1}function Vi(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?cg:K2,this.isPropagationStopped=K2,this}return In(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=cg)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=cg)},persist:function(){},isPersistent:cg}),e}var kf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ub=Vi(kf),Ap=In({},kf,{view:0,detail:0}),iB=Vi(Ap),xx,_x,Ad,X0=In({},Ap,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ad&&(Ad&&t.type==="mousemove"?(xx=t.screenX-Ad.screenX,_x=t.screenY-Ad.screenY):_x=xx=0,Ad=t),xx)},movementY:function(t){return"movementY"in t?t.movementY:_x}}),Y2=Vi(X0),sB=In({},X0,{dataTransfer:0}),oB=Vi(sB),aB=In({},Ap,{relatedTarget:0}),Sx=Vi(aB),lB=In({},kf,{animationName:0,elapsedTime:0,pseudoElement:0}),uB=Vi(lB),cB=In({},kf,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fB=Vi(cB),dB=In({},kf,{data:0}),q2=Vi(dB),hB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=mB[t])?!!e[t]:!1}function Nb(){return gB}var vB=In({},Ap,{key:function(t){if(t.key){var e=hB[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Iv(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?pB[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nb,charCode:function(t){return t.type==="keypress"?Iv(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Iv(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),yB=Vi(vB),xB=In({},X0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z2=Vi(xB),_B=In({},Ap,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nb}),SB=Vi(_B),wB=In({},kf,{propertyName:0,elapsedTime:0,pseudoElement:0}),bB=Vi(wB),MB=In({},X0,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EB=Vi(MB),TB=[9,13,27,32],Fb=ra&&"CompositionEvent"in window,gh=null;ra&&"documentMode"in document&&(gh=document.documentMode);var PB=ra&&"TextEvent"in window&&!gh,ZD=ra&&(!Fb||gh&&8<gh&&11>=gh),Q2=String.fromCharCode(32),J2=!1;function QD(t,e){switch(t){case"keyup":return TB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JD(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fc=!1;function CB(t,e){switch(t){case"compositionend":return JD(e);case"keypress":return e.which!==32?null:(J2=!0,Q2);case"textInput":return t=e.data,t===Q2&&J2?null:t;default:return null}}function AB(t,e){if(Fc)return t==="compositionend"||!Fb&&QD(t,e)?(t=qD(),Rv=kb=Va=null,Fc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ZD&&e.locale!=="ko"?null:e.data;default:return null}}var RB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eP(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!RB[t.type]:e==="textarea"}function eL(t,e,n,r){ID(r),e=u0(e,"onChange"),0<e.length&&(n=new Ub("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var vh=null,Gh=null;function IB(t){fL(t,0)}function K0(t){var e=Hc(t);if(MD(e))return t}function DB(t,e){if(t==="change")return e}var tL=!1;if(ra){var wx;if(ra){var bx="oninput"in document;if(!bx){var tP=document.createElement("div");tP.setAttribute("oninput","return;"),bx=typeof tP.oninput=="function"}wx=bx}else wx=!1;tL=wx&&(!document.documentMode||9<document.documentMode)}function nP(){vh&&(vh.detachEvent("onpropertychange",nL),Gh=vh=null)}function nL(t){if(t.propertyName==="value"&&K0(Gh)){var e=[];eL(e,Gh,t,Rb(t)),kD(IB,e)}}function LB(t,e,n){t==="focusin"?(nP(),vh=e,Gh=n,vh.attachEvent("onpropertychange",nL)):t==="focusout"&&nP()}function OB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return K0(Gh)}function kB(t,e){if(t==="click")return K0(e)}function UB(t,e){if(t==="input"||t==="change")return K0(e)}function NB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var js=typeof Object.is=="function"?Object.is:NB;function Wh(t,e){if(js(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!iS.call(e,i)||!js(t[i],e[i]))return!1}return!0}function rP(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iP(t,e){var n=rP(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rP(n)}}function rL(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?rL(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iL(){for(var t=window,e=n0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=n0(t.document)}return e}function zb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function FB(t){var e=iL(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&rL(n.ownerDocument.documentElement,n)){if(r!==null&&zb(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=iP(n,s);var o=iP(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var zB=ra&&"documentMode"in document&&11>=document.documentMode,zc=null,bS=null,yh=null,MS=!1;function sP(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;MS||zc==null||zc!==n0(r)||(r=zc,"selectionStart"in r&&zb(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yh&&Wh(yh,r)||(yh=r,r=u0(bS,"onSelect"),0<r.length&&(e=new Ub("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=zc)))}function fg(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bc={animationend:fg("Animation","AnimationEnd"),animationiteration:fg("Animation","AnimationIteration"),animationstart:fg("Animation","AnimationStart"),transitionend:fg("Transition","TransitionEnd")},Mx={},sL={};ra&&(sL=document.createElement("div").style,"AnimationEvent"in window||(delete Bc.animationend.animation,delete Bc.animationiteration.animation,delete Bc.animationstart.animation),"TransitionEvent"in window||delete Bc.transitionend.transition);function Y0(t){if(Mx[t])return Mx[t];if(!Bc[t])return t;var e=Bc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sL)return Mx[t]=e[n];return t}var oL=Y0("animationend"),aL=Y0("animationiteration"),lL=Y0("animationstart"),uL=Y0("transitionend"),cL=new Map,oP="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cl(t,e){cL.set(t,e),Pu(e,[t])}for(var Ex=0;Ex<oP.length;Ex++){var Tx=oP[Ex],BB=Tx.toLowerCase(),HB=Tx[0].toUpperCase()+Tx.slice(1);cl(BB,"on"+HB)}cl(oL,"onAnimationEnd");cl(aL,"onAnimationIteration");cl(lL,"onAnimationStart");cl("dblclick","onDoubleClick");cl("focusin","onFocus");cl("focusout","onBlur");cl(uL,"onTransitionEnd");gf("onMouseEnter",["mouseout","mouseover"]);gf("onMouseLeave",["mouseout","mouseover"]);gf("onPointerEnter",["pointerout","pointerover"]);gf("onPointerLeave",["pointerout","pointerover"]);Pu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VB=new Set("cancel close invalid load scroll toggle".split(" ").concat(lh));function aP(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Bz(r,e,void 0,t),t.currentTarget=null}function fL(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;aP(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;aP(i,a,u),s=l}}}if(i0)throw t=xS,i0=!1,xS=null,t}function mn(t,e){var n=e[AS];n===void 0&&(n=e[AS]=new Set);var r=t+"__bubble";n.has(r)||(dL(e,t,2,!1),n.add(r))}function Px(t,e,n){var r=0;e&&(r|=4),dL(n,t,r,e)}var dg="_reactListening"+Math.random().toString(36).slice(2);function $h(t){if(!t[dg]){t[dg]=!0,xD.forEach(function(n){n!=="selectionchange"&&(VB.has(n)||Px(n,!1,t),Px(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[dg]||(e[dg]=!0,Px("selectionchange",!1,e))}}function dL(t,e,n,r){switch(YD(e)){case 1:var i=nB;break;case 4:i=rB;break;default:i=Ob}n=i.bind(null,e,n,t),i=void 0,!yS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Cx(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Yl(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}kD(function(){var u=s,d=Rb(n),h=[];e:{var p=cL.get(t);if(p!==void 0){var g=Ub,v=t;switch(t){case"keypress":if(Iv(n)===0)break e;case"keydown":case"keyup":g=yB;break;case"focusin":v="focus",g=Sx;break;case"focusout":v="blur",g=Sx;break;case"beforeblur":case"afterblur":g=Sx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Y2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=oB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=SB;break;case oL:case aL:case lL:g=uB;break;case uL:g=bB;break;case"scroll":g=iB;break;case"wheel":g=EB;break;case"copy":case"cut":case"paste":g=fB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Z2}var _=(e&4)!==0,x=!_&&t==="scroll",m=_?p!==null?p+"Capture":null:p;_=[];for(var S=u,w;S!==null;){w=S;var M=w.stateNode;if(w.tag===5&&M!==null&&(w=M,m!==null&&(M=zh(S,m),M!=null&&_.push(jh(S,M,w)))),x)break;S=S.return}0<_.length&&(p=new g(p,v,null,n,d),h.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&n!==gS&&(v=n.relatedTarget||n.fromElement)&&(Yl(v)||v[ia]))break e;if((g||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,g?(v=n.relatedTarget||n.toElement,g=u,v=v?Yl(v):null,v!==null&&(x=Cu(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(g=null,v=u),g!==v)){if(_=Y2,M="onMouseLeave",m="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(_=Z2,M="onPointerLeave",m="onPointerEnter",S="pointer"),x=g==null?p:Hc(g),w=v==null?p:Hc(v),p=new _(M,S+"leave",g,n,d),p.target=x,p.relatedTarget=w,M=null,Yl(d)===u&&(_=new _(m,S+"enter",v,n,d),_.target=w,_.relatedTarget=x,M=_),x=M,g&&v)t:{for(_=g,m=v,S=0,w=_;w;w=Ju(w))S++;for(w=0,M=m;M;M=Ju(M))w++;for(;0<S-w;)_=Ju(_),S--;for(;0<w-S;)m=Ju(m),w--;for(;S--;){if(_===m||m!==null&&_===m.alternate)break t;_=Ju(_),m=Ju(m)}_=null}else _=null;g!==null&&lP(h,p,g,_,!1),v!==null&&x!==null&&lP(h,x,v,_,!0)}}e:{if(p=u?Hc(u):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var I=DB;else if(eP(p))if(tL)I=UB;else{I=OB;var P=LB}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(I=kB);if(I&&(I=I(t,u))){eL(h,I,n,d);break e}P&&P(t,p,u),t==="focusout"&&(P=p._wrapperState)&&P.controlled&&p.type==="number"&&fS(p,"number",p.value)}switch(P=u?Hc(u):window,t){case"focusin":(eP(P)||P.contentEditable==="true")&&(zc=P,bS=u,yh=null);break;case"focusout":yh=bS=zc=null;break;case"mousedown":MS=!0;break;case"contextmenu":case"mouseup":case"dragend":MS=!1,sP(h,n,d);break;case"selectionchange":if(zB)break;case"keydown":case"keyup":sP(h,n,d)}var D;if(Fb)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Fc?QD(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(ZD&&n.locale!=="ko"&&(Fc||A!=="onCompositionStart"?A==="onCompositionEnd"&&Fc&&(D=qD()):(Va=d,kb="value"in Va?Va.value:Va.textContent,Fc=!0)),P=u0(u,A),0<P.length&&(A=new q2(A,t,null,n,d),h.push({event:A,listeners:P}),D?A.data=D:(D=JD(n),D!==null&&(A.data=D)))),(D=PB?CB(t,n):AB(t,n))&&(u=u0(u,"onBeforeInput"),0<u.length&&(d=new q2("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=D))}fL(h,e)})}function jh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function u0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=zh(t,n),s!=null&&r.unshift(jh(t,s,i)),s=zh(t,e),s!=null&&r.push(jh(t,s,i))),t=t.return}return r}function Ju(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lP(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=zh(n,s),l!=null&&o.unshift(jh(n,l,a))):i||(l=zh(n,s),l!=null&&o.push(jh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GB=/\r\n?/g,WB=/\u0000|\uFFFD/g;function uP(t){return(typeof t=="string"?t:""+t).replace(GB,`
`).replace(WB,"")}function hg(t,e,n){if(e=uP(e),uP(t)!==e&&n)throw Error(Fe(425))}function c0(){}var ES=null,TS=null;function PS(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var CS=typeof setTimeout=="function"?setTimeout:void 0,$B=typeof clearTimeout=="function"?clearTimeout:void 0,cP=typeof Promise=="function"?Promise:void 0,jB=typeof queueMicrotask=="function"?queueMicrotask:typeof cP<"u"?function(t){return cP.resolve(null).then(t).catch(XB)}:CS;function XB(t){setTimeout(function(){throw t})}function Ax(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Vh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Vh(e)}function Ka(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fP(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Uf=Math.random().toString(36).slice(2),go="__reactFiber$"+Uf,Xh="__reactProps$"+Uf,ia="__reactContainer$"+Uf,AS="__reactEvents$"+Uf,KB="__reactListeners$"+Uf,YB="__reactHandles$"+Uf;function Yl(t){var e=t[go];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ia]||n[go]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fP(t);t!==null;){if(n=t[go])return n;t=fP(t)}return e}t=n,n=t.parentNode}return null}function Rp(t){return t=t[go]||t[ia],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function q0(t){return t[Xh]||null}var RS=[],Vc=-1;function fl(t){return{current:t}}function yn(t){0>Vc||(t.current=RS[Vc],RS[Vc]=null,Vc--)}function dn(t,e){Vc++,RS[Vc]=t.current,t.current=e}var rl={},jr=fl(rl),xi=fl(!1),mu=rl;function vf(t,e){var n=t.type.contextTypes;if(!n)return rl;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function _i(t){return t=t.childContextTypes,t!=null}function f0(){yn(xi),yn(jr)}function dP(t,e,n){if(jr.current!==rl)throw Error(Fe(168));dn(jr,e),dn(xi,n)}function hL(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Fe(108,Lz(t)||"Unknown",i));return In({},n,r)}function d0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||rl,mu=jr.current,dn(jr,t),dn(xi,xi.current),!0}function hP(t,e,n){var r=t.stateNode;if(!r)throw Error(Fe(169));n?(t=hL(t,e,mu),r.__reactInternalMemoizedMergedChildContext=t,yn(xi),yn(jr),dn(jr,t)):yn(xi),dn(xi,n)}var $o=null,Z0=!1,Rx=!1;function pL(t){$o===null?$o=[t]:$o.push(t)}function qB(t){Z0=!0,pL(t)}function dl(){if(!Rx&&$o!==null){Rx=!0;var t=0,e=nn;try{var n=$o;for(nn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$o=null,Z0=!1}catch(i){throw $o!==null&&($o=$o.slice(t+1)),zD(Ib,dl),i}finally{nn=e,Rx=!1}}return null}var Gc=[],Wc=0,h0=null,p0=0,ls=[],us=0,gu=null,Yo=1,qo="";function Fl(t,e){Gc[Wc++]=p0,Gc[Wc++]=h0,h0=t,p0=e}function mL(t,e,n){ls[us++]=Yo,ls[us++]=qo,ls[us++]=gu,gu=t;var r=Yo;t=qo;var i=32-Vs(r)-1;r&=~(1<<i),n+=1;var s=32-Vs(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yo=1<<32-Vs(e)+i|n<<i|r,qo=s+t}else Yo=1<<s|n<<i|r,qo=t}function Bb(t){t.return!==null&&(Fl(t,1),mL(t,1,0))}function Hb(t){for(;t===h0;)h0=Gc[--Wc],Gc[Wc]=null,p0=Gc[--Wc],Gc[Wc]=null;for(;t===gu;)gu=ls[--us],ls[us]=null,qo=ls[--us],ls[us]=null,Yo=ls[--us],ls[us]=null}var Ni=null,Oi=null,bn=!1,Bs=null;function gL(t,e){var n=fs(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function pP(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ni=t,Oi=Ka(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ni=t,Oi=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gu!==null?{id:Yo,overflow:qo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fs(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ni=t,Oi=null,!0):!1;default:return!1}}function IS(t){return(t.mode&1)!==0&&(t.flags&128)===0}function DS(t){if(bn){var e=Oi;if(e){var n=e;if(!pP(t,e)){if(IS(t))throw Error(Fe(418));e=Ka(n.nextSibling);var r=Ni;e&&pP(t,e)?gL(r,n):(t.flags=t.flags&-4097|2,bn=!1,Ni=t)}}else{if(IS(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,bn=!1,Ni=t}}}function mP(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ni=t}function pg(t){if(t!==Ni)return!1;if(!bn)return mP(t),bn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!PS(t.type,t.memoizedProps)),e&&(e=Oi)){if(IS(t))throw vL(),Error(Fe(418));for(;e;)gL(t,e),e=Ka(e.nextSibling)}if(mP(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Oi=Ka(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Oi=null}}else Oi=Ni?Ka(t.stateNode.nextSibling):null;return!0}function vL(){for(var t=Oi;t;)t=Ka(t.nextSibling)}function yf(){Oi=Ni=null,bn=!1}function Vb(t){Bs===null?Bs=[t]:Bs.push(t)}var ZB=da.ReactCurrentBatchConfig;function Ns(t,e){if(t&&t.defaultProps){e=In({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var m0=fl(null),g0=null,$c=null,Gb=null;function Wb(){Gb=$c=g0=null}function $b(t){var e=m0.current;yn(m0),t._currentValue=e}function LS(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function uf(t,e){g0=t,Gb=$c=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(vi=!0),t.firstContext=null)}function gs(t){var e=t._currentValue;if(Gb!==t)if(t={context:t,memoizedValue:e,next:null},$c===null){if(g0===null)throw Error(Fe(308));$c=t,g0.dependencies={lanes:0,firstContext:t}}else $c=$c.next=t;return e}var ql=null;function jb(t){ql===null?ql=[t]:ql.push(t)}function yL(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,jb(e)):(n.next=i.next,i.next=n),e.interleaved=n,sa(t,r)}function sa(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fa=!1;function Xb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xL(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ya(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ft&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sa(t,n)}return i=r.interleaved,i===null?(e.next=e,jb(r)):(e.next=i.next,i.next=e),r.interleaved=e,sa(t,n)}function Dv(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Db(t,n)}}function gP(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function v0(t,e,n,r){var i=t.updateQueue;Fa=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,d=u=l=null,a=s;do{var p=a.lane,g=a.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,_=a;switch(p=e,g=n,_.tag){case 1:if(v=_.payload,typeof v=="function"){h=v.call(g,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=_.payload,p=typeof v=="function"?v.call(g,h,p):v,p==null)break e;h=In({},h,p);break e;case 2:Fa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else g={eventTime:g,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(u=d=g,l=h):d=d.next=g,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(1);if(d===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);yu|=o,t.lanes=o,t.memoizedState=h}}function vP(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Fe(191,i));i.call(r)}}}var _L=new yD.Component().refs;function OS(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:In({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Q0={isMounted:function(t){return(t=t._reactInternals)?Cu(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ii(),i=Za(t),s=Qo(r,i);s.payload=e,n!=null&&(s.callback=n),e=Ya(t,s,i),e!==null&&(Gs(e,t,i,r),Dv(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ii(),i=Za(t),s=Qo(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ya(t,s,i),e!==null&&(Gs(e,t,i,r),Dv(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ii(),r=Za(t),i=Qo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ya(t,i,r),e!==null&&(Gs(e,t,r,n),Dv(e,t,r))}};function yP(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Wh(n,r)||!Wh(i,s):!0}function SL(t,e,n){var r=!1,i=rl,s=e.contextType;return typeof s=="object"&&s!==null?s=gs(s):(i=_i(e)?mu:jr.current,r=e.contextTypes,s=(r=r!=null)?vf(t,i):rl),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Q0,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function xP(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Q0.enqueueReplaceState(e,e.state,null)}function kS(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=_L,Xb(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=gs(s):(s=_i(e)?mu:jr.current,i.context=vf(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(OS(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Q0.enqueueReplaceState(i,i.state,null),v0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Rd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Fe(309));var r=n.stateNode}if(!r)throw Error(Fe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===_L&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Fe(284));if(!n._owner)throw Error(Fe(290,t))}return t}function mg(t,e){throw t=Object.prototype.toString.call(e),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _P(t){var e=t._init;return e(t._payload)}function wL(t){function e(m,S){if(t){var w=m.deletions;w===null?(m.deletions=[S],m.flags|=16):w.push(S)}}function n(m,S){if(!t)return null;for(;S!==null;)e(m,S),S=S.sibling;return null}function r(m,S){for(m=new Map;S!==null;)S.key!==null?m.set(S.key,S):m.set(S.index,S),S=S.sibling;return m}function i(m,S){return m=Qa(m,S),m.index=0,m.sibling=null,m}function s(m,S,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<S?(m.flags|=2,S):w):(m.flags|=2,S)):(m.flags|=1048576,S)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,S,w,M){return S===null||S.tag!==6?(S=Nx(w,m.mode,M),S.return=m,S):(S=i(S,w),S.return=m,S)}function l(m,S,w,M){var I=w.type;return I===Nc?d(m,S,w.props.children,M,w.key):S!==null&&(S.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Na&&_P(I)===S.type)?(M=i(S,w.props),M.ref=Rd(m,S,w),M.return=m,M):(M=Fv(w.type,w.key,w.props,null,m.mode,M),M.ref=Rd(m,S,w),M.return=m,M)}function u(m,S,w,M){return S===null||S.tag!==4||S.stateNode.containerInfo!==w.containerInfo||S.stateNode.implementation!==w.implementation?(S=Fx(w,m.mode,M),S.return=m,S):(S=i(S,w.children||[]),S.return=m,S)}function d(m,S,w,M,I){return S===null||S.tag!==7?(S=ou(w,m.mode,M,I),S.return=m,S):(S=i(S,w),S.return=m,S)}function h(m,S,w){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Nx(""+S,m.mode,w),S.return=m,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ig:return w=Fv(S.type,S.key,S.props,null,m.mode,w),w.ref=Rd(m,null,S),w.return=m,w;case Uc:return S=Fx(S,m.mode,w),S.return=m,S;case Na:var M=S._init;return h(m,M(S._payload),w)}if(oh(S)||Ed(S))return S=ou(S,m.mode,w,null),S.return=m,S;mg(m,S)}return null}function p(m,S,w,M){var I=S!==null?S.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return I!==null?null:a(m,S,""+w,M);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ig:return w.key===I?l(m,S,w,M):null;case Uc:return w.key===I?u(m,S,w,M):null;case Na:return I=w._init,p(m,S,I(w._payload),M)}if(oh(w)||Ed(w))return I!==null?null:d(m,S,w,M,null);mg(m,w)}return null}function g(m,S,w,M,I){if(typeof M=="string"&&M!==""||typeof M=="number")return m=m.get(w)||null,a(S,m,""+M,I);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case ig:return m=m.get(M.key===null?w:M.key)||null,l(S,m,M,I);case Uc:return m=m.get(M.key===null?w:M.key)||null,u(S,m,M,I);case Na:var P=M._init;return g(m,S,w,P(M._payload),I)}if(oh(M)||Ed(M))return m=m.get(w)||null,d(S,m,M,I,null);mg(S,M)}return null}function v(m,S,w,M){for(var I=null,P=null,D=S,A=S=0,T=null;D!==null&&A<w.length;A++){D.index>A?(T=D,D=null):T=D.sibling;var E=p(m,D,w[A],M);if(E===null){D===null&&(D=T);break}t&&D&&E.alternate===null&&e(m,D),S=s(E,S,A),P===null?I=E:P.sibling=E,P=E,D=T}if(A===w.length)return n(m,D),bn&&Fl(m,A),I;if(D===null){for(;A<w.length;A++)D=h(m,w[A],M),D!==null&&(S=s(D,S,A),P===null?I=D:P.sibling=D,P=D);return bn&&Fl(m,A),I}for(D=r(m,D);A<w.length;A++)T=g(D,m,A,w[A],M),T!==null&&(t&&T.alternate!==null&&D.delete(T.key===null?A:T.key),S=s(T,S,A),P===null?I=T:P.sibling=T,P=T);return t&&D.forEach(function(O){return e(m,O)}),bn&&Fl(m,A),I}function _(m,S,w,M){var I=Ed(w);if(typeof I!="function")throw Error(Fe(150));if(w=I.call(w),w==null)throw Error(Fe(151));for(var P=I=null,D=S,A=S=0,T=null,E=w.next();D!==null&&!E.done;A++,E=w.next()){D.index>A?(T=D,D=null):T=D.sibling;var O=p(m,D,E.value,M);if(O===null){D===null&&(D=T);break}t&&D&&O.alternate===null&&e(m,D),S=s(O,S,A),P===null?I=O:P.sibling=O,P=O,D=T}if(E.done)return n(m,D),bn&&Fl(m,A),I;if(D===null){for(;!E.done;A++,E=w.next())E=h(m,E.value,M),E!==null&&(S=s(E,S,A),P===null?I=E:P.sibling=E,P=E);return bn&&Fl(m,A),I}for(D=r(m,D);!E.done;A++,E=w.next())E=g(D,m,A,E.value,M),E!==null&&(t&&E.alternate!==null&&D.delete(E.key===null?A:E.key),S=s(E,S,A),P===null?I=E:P.sibling=E,P=E);return t&&D.forEach(function(N){return e(m,N)}),bn&&Fl(m,A),I}function x(m,S,w,M){if(typeof w=="object"&&w!==null&&w.type===Nc&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ig:e:{for(var I=w.key,P=S;P!==null;){if(P.key===I){if(I=w.type,I===Nc){if(P.tag===7){n(m,P.sibling),S=i(P,w.props.children),S.return=m,m=S;break e}}else if(P.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Na&&_P(I)===P.type){n(m,P.sibling),S=i(P,w.props),S.ref=Rd(m,P,w),S.return=m,m=S;break e}n(m,P);break}else e(m,P);P=P.sibling}w.type===Nc?(S=ou(w.props.children,m.mode,M,w.key),S.return=m,m=S):(M=Fv(w.type,w.key,w.props,null,m.mode,M),M.ref=Rd(m,S,w),M.return=m,m=M)}return o(m);case Uc:e:{for(P=w.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===w.containerInfo&&S.stateNode.implementation===w.implementation){n(m,S.sibling),S=i(S,w.children||[]),S.return=m,m=S;break e}else{n(m,S);break}else e(m,S);S=S.sibling}S=Fx(w,m.mode,M),S.return=m,m=S}return o(m);case Na:return P=w._init,x(m,S,P(w._payload),M)}if(oh(w))return v(m,S,w,M);if(Ed(w))return _(m,S,w,M);mg(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,S!==null&&S.tag===6?(n(m,S.sibling),S=i(S,w),S.return=m,m=S):(n(m,S),S=Nx(w,m.mode,M),S.return=m,m=S),o(m)):n(m,S)}return x}var xf=wL(!0),bL=wL(!1),Ip={},_o=fl(Ip),Kh=fl(Ip),Yh=fl(Ip);function Zl(t){if(t===Ip)throw Error(Fe(174));return t}function Kb(t,e){switch(dn(Yh,e),dn(Kh,t),dn(_o,Ip),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:hS(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=hS(e,t)}yn(_o),dn(_o,e)}function _f(){yn(_o),yn(Kh),yn(Yh)}function ML(t){Zl(Yh.current);var e=Zl(_o.current),n=hS(e,t.type);e!==n&&(dn(Kh,t),dn(_o,n))}function Yb(t){Kh.current===t&&(yn(_o),yn(Kh))}var Pn=fl(0);function y0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ix=[];function qb(){for(var t=0;t<Ix.length;t++)Ix[t]._workInProgressVersionPrimary=null;Ix.length=0}var Lv=da.ReactCurrentDispatcher,Dx=da.ReactCurrentBatchConfig,vu=0,Rn=null,rr=null,vr=null,x0=!1,xh=!1,qh=0,QB=0;function Nr(){throw Error(Fe(321))}function Zb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!js(t[n],e[n]))return!1;return!0}function Qb(t,e,n,r,i,s){if(vu=s,Rn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Lv.current=t===null||t.memoizedState===null?n5:r5,t=n(r,i),xh){s=0;do{if(xh=!1,qh=0,25<=s)throw Error(Fe(301));s+=1,vr=rr=null,e.updateQueue=null,Lv.current=i5,t=n(r,i)}while(xh)}if(Lv.current=_0,e=rr!==null&&rr.next!==null,vu=0,vr=rr=Rn=null,x0=!1,e)throw Error(Fe(300));return t}function Jb(){var t=qh!==0;return qh=0,t}function ho(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vr===null?Rn.memoizedState=vr=t:vr=vr.next=t,vr}function vs(){if(rr===null){var t=Rn.alternate;t=t!==null?t.memoizedState:null}else t=rr.next;var e=vr===null?Rn.memoizedState:vr.next;if(e!==null)vr=e,rr=t;else{if(t===null)throw Error(Fe(310));rr=t,t={memoizedState:rr.memoizedState,baseState:rr.baseState,baseQueue:rr.baseQueue,queue:rr.queue,next:null},vr===null?Rn.memoizedState=vr=t:vr=vr.next=t}return vr}function Zh(t,e){return typeof e=="function"?e(t):e}function Lx(t){var e=vs(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=rr,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var d=u.lane;if((vu&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Rn.lanes|=d,yu|=d}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,js(r,e.memoizedState)||(vi=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Rn.lanes|=s,yu|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ox(t){var e=vs(),n=e.queue;if(n===null)throw Error(Fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);js(s,e.memoizedState)||(vi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function EL(){}function TL(t,e){var n=Rn,r=vs(),i=e(),s=!js(r.memoizedState,i);if(s&&(r.memoizedState=i,vi=!0),r=r.queue,eM(AL.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||vr!==null&&vr.memoizedState.tag&1){if(n.flags|=2048,Qh(9,CL.bind(null,n,r,i,e),void 0,null),xr===null)throw Error(Fe(349));vu&30||PL(n,e,i)}return i}function PL(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function CL(t,e,n,r){e.value=n,e.getSnapshot=r,RL(e)&&IL(t)}function AL(t,e,n){return n(function(){RL(e)&&IL(t)})}function RL(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!js(t,n)}catch{return!0}}function IL(t){var e=sa(t,1);e!==null&&Gs(e,t,1,-1)}function SP(t){var e=ho();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zh,lastRenderedState:t},e.queue=t,t=t.dispatch=t5.bind(null,Rn,t),[e.memoizedState,t]}function Qh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Rn.updateQueue,e===null?(e={lastEffect:null,stores:null},Rn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function DL(){return vs().memoizedState}function Ov(t,e,n,r){var i=ho();Rn.flags|=t,i.memoizedState=Qh(1|e,n,void 0,r===void 0?null:r)}function J0(t,e,n,r){var i=vs();r=r===void 0?null:r;var s=void 0;if(rr!==null){var o=rr.memoizedState;if(s=o.destroy,r!==null&&Zb(r,o.deps)){i.memoizedState=Qh(e,n,s,r);return}}Rn.flags|=t,i.memoizedState=Qh(1|e,n,s,r)}function wP(t,e){return Ov(8390656,8,t,e)}function eM(t,e){return J0(2048,8,t,e)}function LL(t,e){return J0(4,2,t,e)}function OL(t,e){return J0(4,4,t,e)}function kL(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function UL(t,e,n){return n=n!=null?n.concat([t]):null,J0(4,4,kL.bind(null,e,t),n)}function tM(){}function NL(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zb(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function FL(t,e){var n=vs();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Zb(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function zL(t,e,n){return vu&21?(js(n,e)||(n=VD(),Rn.lanes|=n,yu|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,vi=!0),t.memoizedState=n)}function JB(t,e){var n=nn;nn=n!==0&&4>n?n:4,t(!0);var r=Dx.transition;Dx.transition={};try{t(!1),e()}finally{nn=n,Dx.transition=r}}function BL(){return vs().memoizedState}function e5(t,e,n){var r=Za(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},HL(t))VL(e,n);else if(n=yL(t,e,n,r),n!==null){var i=ii();Gs(n,t,r,i),GL(n,e,r)}}function t5(t,e,n){var r=Za(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(HL(t))VL(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,js(a,o)){var l=e.interleaved;l===null?(i.next=i,jb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=yL(t,e,i,r),n!==null&&(i=ii(),Gs(n,t,r,i),GL(n,e,r))}}function HL(t){var e=t.alternate;return t===Rn||e!==null&&e===Rn}function VL(t,e){xh=x0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function GL(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Db(t,n)}}var _0={readContext:gs,useCallback:Nr,useContext:Nr,useEffect:Nr,useImperativeHandle:Nr,useInsertionEffect:Nr,useLayoutEffect:Nr,useMemo:Nr,useReducer:Nr,useRef:Nr,useState:Nr,useDebugValue:Nr,useDeferredValue:Nr,useTransition:Nr,useMutableSource:Nr,useSyncExternalStore:Nr,useId:Nr,unstable_isNewReconciler:!1},n5={readContext:gs,useCallback:function(t,e){return ho().memoizedState=[t,e===void 0?null:e],t},useContext:gs,useEffect:wP,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ov(4194308,4,kL.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ov(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ov(4,2,t,e)},useMemo:function(t,e){var n=ho();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ho();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=e5.bind(null,Rn,t),[r.memoizedState,t]},useRef:function(t){var e=ho();return t={current:t},e.memoizedState=t},useState:SP,useDebugValue:tM,useDeferredValue:function(t){return ho().memoizedState=t},useTransition:function(){var t=SP(!1),e=t[0];return t=JB.bind(null,t[1]),ho().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Rn,i=ho();if(bn){if(n===void 0)throw Error(Fe(407));n=n()}else{if(n=e(),xr===null)throw Error(Fe(349));vu&30||PL(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,wP(AL.bind(null,r,s,t),[t]),r.flags|=2048,Qh(9,CL.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ho(),e=xr.identifierPrefix;if(bn){var n=qo,r=Yo;n=(r&~(1<<32-Vs(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=qh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=QB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},r5={readContext:gs,useCallback:NL,useContext:gs,useEffect:eM,useImperativeHandle:UL,useInsertionEffect:LL,useLayoutEffect:OL,useMemo:FL,useReducer:Lx,useRef:DL,useState:function(){return Lx(Zh)},useDebugValue:tM,useDeferredValue:function(t){var e=vs();return zL(e,rr.memoizedState,t)},useTransition:function(){var t=Lx(Zh)[0],e=vs().memoizedState;return[t,e]},useMutableSource:EL,useSyncExternalStore:TL,useId:BL,unstable_isNewReconciler:!1},i5={readContext:gs,useCallback:NL,useContext:gs,useEffect:eM,useImperativeHandle:UL,useInsertionEffect:LL,useLayoutEffect:OL,useMemo:FL,useReducer:Ox,useRef:DL,useState:function(){return Ox(Zh)},useDebugValue:tM,useDeferredValue:function(t){var e=vs();return rr===null?e.memoizedState=t:zL(e,rr.memoizedState,t)},useTransition:function(){var t=Ox(Zh)[0],e=vs().memoizedState;return[t,e]},useMutableSource:EL,useSyncExternalStore:TL,useId:BL,unstable_isNewReconciler:!1};function Sf(t,e){try{var n="",r=e;do n+=Dz(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function kx(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function US(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var s5=typeof WeakMap=="function"?WeakMap:Map;function WL(t,e,n){n=Qo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){w0||(w0=!0,jS=r),US(t,e)},n}function $L(t,e,n){n=Qo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){US(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){US(t,e),typeof r!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function bP(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new s5;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=x5.bind(null,t,e,n),e.then(t,t))}function MP(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function EP(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qo(-1,1),e.tag=2,Ya(n,e,1))),n.lanes|=1),t)}var o5=da.ReactCurrentOwner,vi=!1;function ei(t,e,n,r){e.child=t===null?bL(e,null,n,r):xf(e,t.child,n,r)}function TP(t,e,n,r,i){n=n.render;var s=e.ref;return uf(e,i),r=Qb(t,e,n,r,s,i),n=Jb(),t!==null&&!vi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oa(t,e,i)):(bn&&n&&Bb(e),e.flags|=1,ei(t,e,r,i),e.child)}function PP(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!uM(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,jL(t,e,s,r,i)):(t=Fv(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wh,n(o,r)&&t.ref===e.ref)return oa(t,e,i)}return e.flags|=1,t=Qa(s,r),t.ref=e.ref,t.return=e,e.child=t}function jL(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Wh(s,r)&&t.ref===e.ref)if(vi=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(vi=!0);else return e.lanes=t.lanes,oa(t,e,i)}return NS(t,e,n,r,i)}function XL(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},dn(Xc,Di),Di|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,dn(Xc,Di),Di|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,dn(Xc,Di),Di|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,dn(Xc,Di),Di|=r;return ei(t,e,i,n),e.child}function KL(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function NS(t,e,n,r,i){var s=_i(n)?mu:jr.current;return s=vf(e,s),uf(e,i),n=Qb(t,e,n,r,s,i),r=Jb(),t!==null&&!vi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oa(t,e,i)):(bn&&r&&Bb(e),e.flags|=1,ei(t,e,n,i),e.child)}function CP(t,e,n,r,i){if(_i(n)){var s=!0;d0(e)}else s=!1;if(uf(e,i),e.stateNode===null)kv(t,e),SL(e,n,r),kS(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gs(u):(u=_i(n)?mu:jr.current,u=vf(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&xP(e,o,r,u),Fa=!1;var p=e.memoizedState;o.state=p,v0(e,r,o,i),l=e.memoizedState,a!==r||p!==l||xi.current||Fa?(typeof d=="function"&&(OS(e,n,d,r),l=e.memoizedState),(a=Fa||yP(e,n,a,r,p,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xL(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ns(e.type,a),o.props=u,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=gs(l):(l=_i(n)?mu:jr.current,l=vf(e,l));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&xP(e,o,r,l),Fa=!1,p=e.memoizedState,o.state=p,v0(e,r,o,i);var v=e.memoizedState;a!==h||p!==v||xi.current||Fa?(typeof g=="function"&&(OS(e,n,g,r),v=e.memoizedState),(u=Fa||yP(e,n,u,r,p,v,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return FS(t,e,n,r,s,i)}function FS(t,e,n,r,i,s){KL(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hP(e,n,!1),oa(t,e,s);r=e.stateNode,o5.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xf(e,t.child,null,s),e.child=xf(e,null,a,s)):ei(t,e,a,s),e.memoizedState=r.state,i&&hP(e,n,!0),e.child}function YL(t){var e=t.stateNode;e.pendingContext?dP(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dP(t,e.context,!1),Kb(t,e.containerInfo)}function AP(t,e,n,r,i){return yf(),Vb(i),e.flags|=256,ei(t,e,n,r),e.child}var zS={dehydrated:null,treeContext:null,retryLane:0};function BS(t){return{baseLanes:t,cachePool:null,transitions:null}}function qL(t,e,n){var r=e.pendingProps,i=Pn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),dn(Pn,i&1),t===null)return DS(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ny(o,r,0,null),t=ou(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=BS(n),e.memoizedState=zS,t):nM(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return a5(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=Qa(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Qa(a,s):(s=ou(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?BS(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=zS,r}return s=t.child,t=s.sibling,r=Qa(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function nM(t,e){return e=ny({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gg(t,e,n,r){return r!==null&&Vb(r),xf(e,t.child,null,n),t=nM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function a5(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=kx(Error(Fe(422))),gg(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=ny({mode:"visible",children:r.children},i,0,null),s=ou(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xf(e,t.child,null,o),e.child.memoizedState=BS(o),e.memoizedState=zS,s);if(!(e.mode&1))return gg(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Fe(419)),r=kx(s,r,void 0),gg(t,e,o,r)}if(a=(o&t.childLanes)!==0,vi||a){if(r=xr,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,sa(t,i),Gs(r,t,i,-1))}return lM(),r=kx(Error(Fe(421))),gg(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=_5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Oi=Ka(i.nextSibling),Ni=e,bn=!0,Bs=null,t!==null&&(ls[us++]=Yo,ls[us++]=qo,ls[us++]=gu,Yo=t.id,qo=t.overflow,gu=e),e=nM(e,r.children),e.flags|=4096,e)}function RP(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),LS(t.return,e,n)}function Ux(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function ZL(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ei(t,e,r.children,n),r=Pn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&RP(t,n,e);else if(t.tag===19)RP(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(dn(Pn,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&y0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ux(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&y0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ux(e,!0,n,null,s);break;case"together":Ux(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kv(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oa(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),yu|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Fe(153));if(e.child!==null){for(t=e.child,n=Qa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Qa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function l5(t,e,n){switch(e.tag){case 3:YL(e),yf();break;case 5:ML(e);break;case 1:_i(e.type)&&d0(e);break;case 4:Kb(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;dn(m0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(dn(Pn,Pn.current&1),e.flags|=128,null):n&e.child.childLanes?qL(t,e,n):(dn(Pn,Pn.current&1),t=oa(t,e,n),t!==null?t.sibling:null);dn(Pn,Pn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ZL(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),dn(Pn,Pn.current),r)break;return null;case 22:case 23:return e.lanes=0,XL(t,e,n)}return oa(t,e,n)}var QL,HS,JL,e4;QL=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};HS=function(){};JL=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Zl(_o.current);var s=null;switch(n){case"input":i=uS(t,i),r=uS(t,r),s=[];break;case"select":i=In({},i,{value:void 0}),r=In({},r,{value:void 0}),s=[];break;case"textarea":i=dS(t,i),r=dS(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=c0)}pS(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Nh.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Nh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&mn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};e4=function(t,e,n,r){n!==r&&(e.flags|=4)};function Id(t,e){if(!bn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Fr(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function u5(t,e,n){var r=e.pendingProps;switch(Hb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(e),null;case 1:return _i(e.type)&&f0(),Fr(e),null;case 3:return r=e.stateNode,_f(),yn(xi),yn(jr),qb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pg(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Bs!==null&&(YS(Bs),Bs=null))),HS(t,e),Fr(e),null;case 5:Yb(e);var i=Zl(Yh.current);if(n=e.type,t!==null&&e.stateNode!=null)JL(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Fe(166));return Fr(e),null}if(t=Zl(_o.current),pg(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[go]=e,r[Xh]=s,t=(e.mode&1)!==0,n){case"dialog":mn("cancel",r),mn("close",r);break;case"iframe":case"object":case"embed":mn("load",r);break;case"video":case"audio":for(i=0;i<lh.length;i++)mn(lh[i],r);break;case"source":mn("error",r);break;case"img":case"image":case"link":mn("error",r),mn("load",r);break;case"details":mn("toggle",r);break;case"input":z2(r,s),mn("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},mn("invalid",r);break;case"textarea":H2(r,s),mn("invalid",r)}pS(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&hg(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&hg(r.textContent,a,t),i=["children",""+a]):Nh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&mn("scroll",r)}switch(n){case"input":sg(r),B2(r,s,!0);break;case"textarea":sg(r),V2(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=c0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=PD(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[go]=e,t[Xh]=r,QL(t,e,!1,!1),e.stateNode=t;e:{switch(o=mS(n,r),n){case"dialog":mn("cancel",t),mn("close",t),i=r;break;case"iframe":case"object":case"embed":mn("load",t),i=r;break;case"video":case"audio":for(i=0;i<lh.length;i++)mn(lh[i],t);i=r;break;case"source":mn("error",t),i=r;break;case"img":case"image":case"link":mn("error",t),mn("load",t),i=r;break;case"details":mn("toggle",t),i=r;break;case"input":z2(t,r),i=uS(t,r),mn("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=In({},r,{value:void 0}),mn("invalid",t);break;case"textarea":H2(t,r),i=dS(t,r),mn("invalid",t);break;default:i=r}pS(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?RD(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&CD(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Fh(t,l):typeof l=="number"&&Fh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Nh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&mn("scroll",t):l!=null&&Tb(t,s,l,o))}switch(n){case"input":sg(t),B2(t,r,!1);break;case"textarea":sg(t),V2(t);break;case"option":r.value!=null&&t.setAttribute("value",""+nl(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?sf(t,!!r.multiple,s,!1):r.defaultValue!=null&&sf(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=c0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Fr(e),null;case 6:if(t&&e.stateNode!=null)e4(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Fe(166));if(n=Zl(Yh.current),Zl(_o.current),pg(e)){if(r=e.stateNode,n=e.memoizedProps,r[go]=e,(s=r.nodeValue!==n)&&(t=Ni,t!==null))switch(t.tag){case 3:hg(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&hg(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[go]=e,e.stateNode=r}return Fr(e),null;case 13:if(yn(Pn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bn&&Oi!==null&&e.mode&1&&!(e.flags&128))vL(),yf(),e.flags|=98560,s=!1;else if(s=pg(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Fe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Fe(317));s[go]=e}else yf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Fr(e),s=!1}else Bs!==null&&(YS(Bs),Bs=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pn.current&1?sr===0&&(sr=3):lM())),e.updateQueue!==null&&(e.flags|=4),Fr(e),null);case 4:return _f(),HS(t,e),t===null&&$h(e.stateNode.containerInfo),Fr(e),null;case 10:return $b(e.type._context),Fr(e),null;case 17:return _i(e.type)&&f0(),Fr(e),null;case 19:if(yn(Pn),s=e.memoizedState,s===null)return Fr(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Id(s,!1);else{if(sr!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=y0(t),o!==null){for(e.flags|=128,Id(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return dn(Pn,Pn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Gn()>wf&&(e.flags|=128,r=!0,Id(s,!1),e.lanes=4194304)}else{if(!r)if(t=y0(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Id(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bn)return Fr(e),null}else 2*Gn()-s.renderingStartTime>wf&&n!==1073741824&&(e.flags|=128,r=!0,Id(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Gn(),e.sibling=null,n=Pn.current,dn(Pn,r?n&1|2:n&1),e):(Fr(e),null);case 22:case 23:return aM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Di&1073741824&&(Fr(e),e.subtreeFlags&6&&(e.flags|=8192)):Fr(e),null;case 24:return null;case 25:return null}throw Error(Fe(156,e.tag))}function c5(t,e){switch(Hb(e),e.tag){case 1:return _i(e.type)&&f0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _f(),yn(xi),yn(jr),qb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Yb(e),null;case 13:if(yn(Pn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Fe(340));yf()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return yn(Pn),null;case 4:return _f(),null;case 10:return $b(e.type._context),null;case 22:case 23:return aM(),null;case 24:return null;default:return null}}var vg=!1,Gr=!1,f5=typeof WeakSet=="function"?WeakSet:Set,qe=null;function jc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Un(t,e,r)}else n.current=null}function VS(t,e,n){try{n()}catch(r){Un(t,e,r)}}var IP=!1;function d5(t,e){if(ES=a0,t=iL(),zb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,d=0,h=t,p=null;t:for(;;){for(var g;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(g=h.firstChild)!==null;)p=h,h=g;for(;;){if(h===t)break t;if(p===n&&++u===i&&(a=o),p===s&&++d===r&&(l=o),(g=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=g}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(TS={focusedElem:t,selectionRange:n},a0=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var _=v.memoizedProps,x=v.memoizedState,m=e.stateNode,S=m.getSnapshotBeforeUpdate(e.elementType===e.type?_:Ns(e.type,_),x);m.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(M){Un(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return v=IP,IP=!1,v}function _h(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&VS(e,n,s)}i=i.next}while(i!==r)}}function ey(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function GS(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function t4(t){var e=t.alternate;e!==null&&(t.alternate=null,t4(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[go],delete e[Xh],delete e[AS],delete e[KB],delete e[YB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function n4(t){return t.tag===5||t.tag===3||t.tag===4}function DP(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||n4(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function WS(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=c0));else if(r!==4&&(t=t.child,t!==null))for(WS(t,e,n),t=t.sibling;t!==null;)WS(t,e,n),t=t.sibling}function $S(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($S(t,e,n),t=t.sibling;t!==null;)$S(t,e,n),t=t.sibling}var Pr=null,zs=!1;function Pa(t,e,n){for(n=n.child;n!==null;)r4(t,e,n),n=n.sibling}function r4(t,e,n){if(xo&&typeof xo.onCommitFiberUnmount=="function")try{xo.onCommitFiberUnmount(j0,n)}catch{}switch(n.tag){case 5:Gr||jc(n,e);case 6:var r=Pr,i=zs;Pr=null,Pa(t,e,n),Pr=r,zs=i,Pr!==null&&(zs?(t=Pr,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pr.removeChild(n.stateNode));break;case 18:Pr!==null&&(zs?(t=Pr,n=n.stateNode,t.nodeType===8?Ax(t.parentNode,n):t.nodeType===1&&Ax(t,n),Vh(t)):Ax(Pr,n.stateNode));break;case 4:r=Pr,i=zs,Pr=n.stateNode.containerInfo,zs=!0,Pa(t,e,n),Pr=r,zs=i;break;case 0:case 11:case 14:case 15:if(!Gr&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&VS(n,e,o),i=i.next}while(i!==r)}Pa(t,e,n);break;case 1:if(!Gr&&(jc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Un(n,e,a)}Pa(t,e,n);break;case 21:Pa(t,e,n);break;case 22:n.mode&1?(Gr=(r=Gr)||n.memoizedState!==null,Pa(t,e,n),Gr=r):Pa(t,e,n);break;default:Pa(t,e,n)}}function LP(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new f5),e.forEach(function(r){var i=S5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Is(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Pr=a.stateNode,zs=!1;break e;case 3:Pr=a.stateNode.containerInfo,zs=!0;break e;case 4:Pr=a.stateNode.containerInfo,zs=!0;break e}a=a.return}if(Pr===null)throw Error(Fe(160));r4(s,o,i),Pr=null,zs=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Un(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)i4(e,t),e=e.sibling}function i4(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Is(e,t),ao(t),r&4){try{_h(3,t,t.return),ey(3,t)}catch(_){Un(t,t.return,_)}try{_h(5,t,t.return)}catch(_){Un(t,t.return,_)}}break;case 1:Is(e,t),ao(t),r&512&&n!==null&&jc(n,n.return);break;case 5:if(Is(e,t),ao(t),r&512&&n!==null&&jc(n,n.return),t.flags&32){var i=t.stateNode;try{Fh(i,"")}catch(_){Un(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ED(i,s),mS(a,o);var u=mS(a,s);for(o=0;o<l.length;o+=2){var d=l[o],h=l[o+1];d==="style"?RD(i,h):d==="dangerouslySetInnerHTML"?CD(i,h):d==="children"?Fh(i,h):Tb(i,d,h,u)}switch(a){case"input":cS(i,s);break;case"textarea":TD(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?sf(i,!!s.multiple,g,!1):p!==!!s.multiple&&(s.defaultValue!=null?sf(i,!!s.multiple,s.defaultValue,!0):sf(i,!!s.multiple,s.multiple?[]:"",!1))}i[Xh]=s}catch(_){Un(t,t.return,_)}}break;case 6:if(Is(e,t),ao(t),r&4){if(t.stateNode===null)throw Error(Fe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){Un(t,t.return,_)}}break;case 3:if(Is(e,t),ao(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vh(e.containerInfo)}catch(_){Un(t,t.return,_)}break;case 4:Is(e,t),ao(t);break;case 13:Is(e,t),ao(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(sM=Gn())),r&4&&LP(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Gr=(u=Gr)||d,Is(e,t),Gr=u):Is(e,t),ao(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(qe=t,d=t.child;d!==null;){for(h=qe=d;qe!==null;){switch(p=qe,g=p.child,p.tag){case 0:case 11:case 14:case 15:_h(4,p,p.return);break;case 1:jc(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(_){Un(r,n,_)}}break;case 5:jc(p,p.return);break;case 22:if(p.memoizedState!==null){kP(h);continue}}g!==null?(g.return=p,qe=g):kP(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=AD("display",o))}catch(_){Un(t,t.return,_)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){Un(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Is(e,t),ao(t),r&4&&LP(t);break;case 21:break;default:Is(e,t),ao(t)}}function ao(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(n4(n)){var r=n;break e}n=n.return}throw Error(Fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Fh(i,""),r.flags&=-33);var s=DP(t);$S(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=DP(t);WS(t,a,o);break;default:throw Error(Fe(161))}}catch(l){Un(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function h5(t,e,n){qe=t,s4(t)}function s4(t,e,n){for(var r=(t.mode&1)!==0;qe!==null;){var i=qe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||vg;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Gr;a=vg;var u=Gr;if(vg=o,(Gr=l)&&!u)for(qe=i;qe!==null;)o=qe,l=o.child,o.tag===22&&o.memoizedState!==null?UP(i):l!==null?(l.return=o,qe=l):UP(i);for(;s!==null;)qe=s,s4(s),s=s.sibling;qe=i,vg=a,Gr=u}OP(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,qe=s):OP(t)}}function OP(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Gr||ey(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Gr)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ns(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vP(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vP(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Vh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}Gr||e.flags&512&&GS(e)}catch(p){Un(e,e.return,p)}}if(e===t){qe=null;break}if(n=e.sibling,n!==null){n.return=e.return,qe=n;break}qe=e.return}}function kP(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,qe=n;break}qe=e.return}}function UP(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ey(4,e)}catch(l){Un(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Un(e,i,l)}}var s=e.return;try{GS(e)}catch(l){Un(e,s,l)}break;case 5:var o=e.return;try{GS(e)}catch(l){Un(e,o,l)}}}catch(l){Un(e,e.return,l)}if(e===t){qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qe=a;break}qe=e.return}}var p5=Math.ceil,S0=da.ReactCurrentDispatcher,rM=da.ReactCurrentOwner,hs=da.ReactCurrentBatchConfig,Ft=0,xr=null,Zn=null,Rr=0,Di=0,Xc=fl(0),sr=0,Jh=null,yu=0,ty=0,iM=0,Sh=null,mi=null,sM=0,wf=1/0,Wo=null,w0=!1,jS=null,qa=null,yg=!1,Ga=null,b0=0,wh=0,XS=null,Uv=-1,Nv=0;function ii(){return Ft&6?Gn():Uv!==-1?Uv:Uv=Gn()}function Za(t){return t.mode&1?Ft&2&&Rr!==0?Rr&-Rr:ZB.transition!==null?(Nv===0&&(Nv=VD()),Nv):(t=nn,t!==0||(t=window.event,t=t===void 0?16:YD(t.type)),t):1}function Gs(t,e,n,r){if(50<wh)throw wh=0,XS=null,Error(Fe(185));Cp(t,n,r),(!(Ft&2)||t!==xr)&&(t===xr&&(!(Ft&2)&&(ty|=n),sr===4&&Ha(t,Rr)),Si(t,r),n===1&&Ft===0&&!(e.mode&1)&&(wf=Gn()+500,Z0&&dl()))}function Si(t,e){var n=t.callbackNode;Zz(t,e);var r=o0(t,t===xr?Rr:0);if(r===0)n!==null&&$2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$2(n),e===1)t.tag===0?qB(NP.bind(null,t)):pL(NP.bind(null,t)),jB(function(){!(Ft&6)&&dl()}),n=null;else{switch(GD(r)){case 1:n=Ib;break;case 4:n=BD;break;case 16:n=s0;break;case 536870912:n=HD;break;default:n=s0}n=h4(n,o4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function o4(t,e){if(Uv=-1,Nv=0,Ft&6)throw Error(Fe(327));var n=t.callbackNode;if(cf()&&t.callbackNode!==n)return null;var r=o0(t,t===xr?Rr:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=M0(t,r);else{e=r;var i=Ft;Ft|=2;var s=l4();(xr!==t||Rr!==e)&&(Wo=null,wf=Gn()+500,su(t,e));do try{v5();break}catch(a){a4(t,a)}while(1);Wb(),S0.current=s,Ft=i,Zn!==null?e=0:(xr=null,Rr=0,e=sr)}if(e!==0){if(e===2&&(i=_S(t),i!==0&&(r=i,e=KS(t,i))),e===1)throw n=Jh,su(t,0),Ha(t,r),Si(t,Gn()),n;if(e===6)Ha(t,r);else{if(i=t.current.alternate,!(r&30)&&!m5(i)&&(e=M0(t,r),e===2&&(s=_S(t),s!==0&&(r=s,e=KS(t,s))),e===1))throw n=Jh,su(t,0),Ha(t,r),Si(t,Gn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Fe(345));case 2:zl(t,mi,Wo);break;case 3:if(Ha(t,r),(r&130023424)===r&&(e=sM+500-Gn(),10<e)){if(o0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ii(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=CS(zl.bind(null,t,mi,Wo),e);break}zl(t,mi,Wo);break;case 4:if(Ha(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Vs(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*p5(r/1960))-r,10<r){t.timeoutHandle=CS(zl.bind(null,t,mi,Wo),r);break}zl(t,mi,Wo);break;case 5:zl(t,mi,Wo);break;default:throw Error(Fe(329))}}}return Si(t,Gn()),t.callbackNode===n?o4.bind(null,t):null}function KS(t,e){var n=Sh;return t.current.memoizedState.isDehydrated&&(su(t,e).flags|=256),t=M0(t,e),t!==2&&(e=mi,mi=n,e!==null&&YS(e)),t}function YS(t){mi===null?mi=t:mi.push.apply(mi,t)}function m5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!js(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ha(t,e){for(e&=~iM,e&=~ty,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Vs(e),r=1<<n;t[n]=-1,e&=~r}}function NP(t){if(Ft&6)throw Error(Fe(327));cf();var e=o0(t,0);if(!(e&1))return Si(t,Gn()),null;var n=M0(t,e);if(t.tag!==0&&n===2){var r=_S(t);r!==0&&(e=r,n=KS(t,r))}if(n===1)throw n=Jh,su(t,0),Ha(t,e),Si(t,Gn()),n;if(n===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,zl(t,mi,Wo),Si(t,Gn()),null}function oM(t,e){var n=Ft;Ft|=1;try{return t(e)}finally{Ft=n,Ft===0&&(wf=Gn()+500,Z0&&dl())}}function xu(t){Ga!==null&&Ga.tag===0&&!(Ft&6)&&cf();var e=Ft;Ft|=1;var n=hs.transition,r=nn;try{if(hs.transition=null,nn=1,t)return t()}finally{nn=r,hs.transition=n,Ft=e,!(Ft&6)&&dl()}}function aM(){Di=Xc.current,yn(Xc)}function su(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,$B(n)),Zn!==null)for(n=Zn.return;n!==null;){var r=n;switch(Hb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&f0();break;case 3:_f(),yn(xi),yn(jr),qb();break;case 5:Yb(r);break;case 4:_f();break;case 13:yn(Pn);break;case 19:yn(Pn);break;case 10:$b(r.type._context);break;case 22:case 23:aM()}n=n.return}if(xr=t,Zn=t=Qa(t.current,null),Rr=Di=e,sr=0,Jh=null,iM=ty=yu=0,mi=Sh=null,ql!==null){for(e=0;e<ql.length;e++)if(n=ql[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ql=null}return t}function a4(t,e){do{var n=Zn;try{if(Wb(),Lv.current=_0,x0){for(var r=Rn.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}x0=!1}if(vu=0,vr=rr=Rn=null,xh=!1,qh=0,rM.current=null,n===null||n.return===null){sr=1,Jh=e,Zn=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Rr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=a,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=MP(o);if(g!==null){g.flags&=-257,EP(g,o,a,s,e),g.mode&1&&bP(s,u,e),e=g,l=u;var v=e.updateQueue;if(v===null){var _=new Set;_.add(l),e.updateQueue=_}else v.add(l);break e}else{if(!(e&1)){bP(s,u,e),lM();break e}l=Error(Fe(426))}}else if(bn&&a.mode&1){var x=MP(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),EP(x,o,a,s,e),Vb(Sf(l,a));break e}}s=l=Sf(l,a),sr!==4&&(sr=2),Sh===null?Sh=[s]:Sh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=WL(s,l,e);gP(s,m);break e;case 1:a=l;var S=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(qa===null||!qa.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var M=$L(s,a,e);gP(s,M);break e}}s=s.return}while(s!==null)}c4(n)}catch(I){e=I,Zn===n&&n!==null&&(Zn=n=n.return);continue}break}while(1)}function l4(){var t=S0.current;return S0.current=_0,t===null?_0:t}function lM(){(sr===0||sr===3||sr===2)&&(sr=4),xr===null||!(yu&268435455)&&!(ty&268435455)||Ha(xr,Rr)}function M0(t,e){var n=Ft;Ft|=2;var r=l4();(xr!==t||Rr!==e)&&(Wo=null,su(t,e));do try{g5();break}catch(i){a4(t,i)}while(1);if(Wb(),Ft=n,S0.current=r,Zn!==null)throw Error(Fe(261));return xr=null,Rr=0,sr}function g5(){for(;Zn!==null;)u4(Zn)}function v5(){for(;Zn!==null&&!Vz();)u4(Zn)}function u4(t){var e=d4(t.alternate,t,Di);t.memoizedProps=t.pendingProps,e===null?c4(t):Zn=e,rM.current=null}function c4(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=c5(n,e),n!==null){n.flags&=32767,Zn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{sr=6,Zn=null;return}}else if(n=u5(n,e,Di),n!==null){Zn=n;return}if(e=e.sibling,e!==null){Zn=e;return}Zn=e=t}while(e!==null);sr===0&&(sr=5)}function zl(t,e,n){var r=nn,i=hs.transition;try{hs.transition=null,nn=1,y5(t,e,n,r)}finally{hs.transition=i,nn=r}return null}function y5(t,e,n,r){do cf();while(Ga!==null);if(Ft&6)throw Error(Fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Qz(t,s),t===xr&&(Zn=xr=null,Rr=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yg||(yg=!0,h4(s0,function(){return cf(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hs.transition,hs.transition=null;var o=nn;nn=1;var a=Ft;Ft|=4,rM.current=null,d5(t,n),i4(n,t),FB(TS),a0=!!ES,TS=ES=null,t.current=n,h5(n),Gz(),Ft=a,nn=o,hs.transition=s}else t.current=n;if(yg&&(yg=!1,Ga=t,b0=i),s=t.pendingLanes,s===0&&(qa=null),jz(n.stateNode),Si(t,Gn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(w0)throw w0=!1,t=jS,jS=null,t;return b0&1&&t.tag!==0&&cf(),s=t.pendingLanes,s&1?t===XS?wh++:(wh=0,XS=t):wh=0,dl(),null}function cf(){if(Ga!==null){var t=GD(b0),e=hs.transition,n=nn;try{if(hs.transition=null,nn=16>t?16:t,Ga===null)var r=!1;else{if(t=Ga,Ga=null,b0=0,Ft&6)throw Error(Fe(331));var i=Ft;for(Ft|=4,qe=t.current;qe!==null;){var s=qe,o=s.child;if(qe.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(qe=u;qe!==null;){var d=qe;switch(d.tag){case 0:case 11:case 15:_h(8,d,s)}var h=d.child;if(h!==null)h.return=d,qe=h;else for(;qe!==null;){d=qe;var p=d.sibling,g=d.return;if(t4(d),d===u){qe=null;break}if(p!==null){p.return=g,qe=p;break}qe=g}}}var v=s.alternate;if(v!==null){var _=v.child;if(_!==null){v.child=null;do{var x=_.sibling;_.sibling=null,_=x}while(_!==null)}}qe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,qe=o;else e:for(;qe!==null;){if(s=qe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:_h(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,qe=m;break e}qe=s.return}}var S=t.current;for(qe=S;qe!==null;){o=qe;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,qe=w;else e:for(o=S;qe!==null;){if(a=qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ey(9,a)}}catch(I){Un(a,a.return,I)}if(a===o){qe=null;break e}var M=a.sibling;if(M!==null){M.return=a.return,qe=M;break e}qe=a.return}}if(Ft=i,dl(),xo&&typeof xo.onPostCommitFiberRoot=="function")try{xo.onPostCommitFiberRoot(j0,t)}catch{}r=!0}return r}finally{nn=n,hs.transition=e}}return!1}function FP(t,e,n){e=Sf(n,e),e=WL(t,e,1),t=Ya(t,e,1),e=ii(),t!==null&&(Cp(t,1,e),Si(t,e))}function Un(t,e,n){if(t.tag===3)FP(t,t,n);else for(;e!==null;){if(e.tag===3){FP(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qa===null||!qa.has(r))){t=Sf(n,t),t=$L(e,t,1),e=Ya(e,t,1),t=ii(),e!==null&&(Cp(e,1,t),Si(e,t));break}}e=e.return}}function x5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ii(),t.pingedLanes|=t.suspendedLanes&n,xr===t&&(Rr&n)===n&&(sr===4||sr===3&&(Rr&130023424)===Rr&&500>Gn()-sM?su(t,0):iM|=n),Si(t,e)}function f4(t,e){e===0&&(t.mode&1?(e=lg,lg<<=1,!(lg&130023424)&&(lg=4194304)):e=1);var n=ii();t=sa(t,e),t!==null&&(Cp(t,e,n),Si(t,n))}function _5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),f4(t,n)}function S5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Fe(314))}r!==null&&r.delete(e),f4(t,n)}var d4;d4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||xi.current)vi=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return vi=!1,l5(t,e,n);vi=!!(t.flags&131072)}else vi=!1,bn&&e.flags&1048576&&mL(e,p0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kv(t,e),t=e.pendingProps;var i=vf(e,jr.current);uf(e,n),i=Qb(null,e,r,t,i,n);var s=Jb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_i(r)?(s=!0,d0(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xb(e),i.updater=Q0,e.stateNode=i,i._reactInternals=e,kS(e,r,t,n),e=FS(null,e,r,!0,s,n)):(e.tag=0,bn&&s&&Bb(e),ei(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kv(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=b5(r),t=Ns(r,t),i){case 0:e=NS(null,e,r,t,n);break e;case 1:e=CP(null,e,r,t,n);break e;case 11:e=TP(null,e,r,t,n);break e;case 14:e=PP(null,e,r,Ns(r.type,t),n);break e}throw Error(Fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ns(r,i),NS(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ns(r,i),CP(t,e,r,i,n);case 3:e:{if(YL(e),t===null)throw Error(Fe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,xL(t,e),v0(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Sf(Error(Fe(423)),e),e=AP(t,e,r,n,i);break e}else if(r!==i){i=Sf(Error(Fe(424)),e),e=AP(t,e,r,n,i);break e}else for(Oi=Ka(e.stateNode.containerInfo.firstChild),Ni=e,bn=!0,Bs=null,n=bL(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(yf(),r===i){e=oa(t,e,n);break e}ei(t,e,r,n)}e=e.child}return e;case 5:return ML(e),t===null&&DS(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,PS(r,i)?o=null:s!==null&&PS(r,s)&&(e.flags|=32),KL(t,e),ei(t,e,o,n),e.child;case 6:return t===null&&DS(e),null;case 13:return qL(t,e,n);case 4:return Kb(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xf(e,null,r,n):ei(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ns(r,i),TP(t,e,r,i,n);case 7:return ei(t,e,e.pendingProps,n),e.child;case 8:return ei(t,e,e.pendingProps.children,n),e.child;case 12:return ei(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,dn(m0,r._currentValue),r._currentValue=o,s!==null)if(js(s.value,o)){if(s.children===i.children&&!xi.current){e=oa(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Qo(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),LS(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Fe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),LS(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ei(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,uf(e,n),i=gs(i),r=r(i),e.flags|=1,ei(t,e,r,n),e.child;case 14:return r=e.type,i=Ns(r,e.pendingProps),i=Ns(r.type,i),PP(t,e,r,i,n);case 15:return jL(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ns(r,i),kv(t,e),e.tag=1,_i(r)?(t=!0,d0(e)):t=!1,uf(e,n),SL(e,r,i),kS(e,r,i,n),FS(null,e,r,!0,t,n);case 19:return ZL(t,e,n);case 22:return XL(t,e,n)}throw Error(Fe(156,e.tag))};function h4(t,e){return zD(t,e)}function w5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fs(t,e,n,r){return new w5(t,e,n,r)}function uM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b5(t){if(typeof t=="function")return uM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cb)return 11;if(t===Ab)return 14}return 2}function Qa(t,e){var n=t.alternate;return n===null?(n=fs(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fv(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")uM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Nc:return ou(n.children,i,s,e);case Pb:o=8,i|=8;break;case sS:return t=fs(12,n,e,i|2),t.elementType=sS,t.lanes=s,t;case oS:return t=fs(13,n,e,i),t.elementType=oS,t.lanes=s,t;case aS:return t=fs(19,n,e,i),t.elementType=aS,t.lanes=s,t;case wD:return ny(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _D:o=10;break e;case SD:o=9;break e;case Cb:o=11;break e;case Ab:o=14;break e;case Na:o=16,r=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return e=fs(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ou(t,e,n,r){return t=fs(7,t,r,e),t.lanes=n,t}function ny(t,e,n,r){return t=fs(22,t,r,e),t.elementType=wD,t.lanes=n,t.stateNode={isHidden:!1},t}function Nx(t,e,n){return t=fs(6,t,null,e),t.lanes=n,t}function Fx(t,e,n){return e=fs(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function M5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yx(0),this.expirationTimes=yx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yx(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function cM(t,e,n,r,i,s,o,a,l){return t=new M5(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=fs(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xb(s),t}function E5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function p4(t){if(!t)return rl;t=t._reactInternals;e:{if(Cu(t)!==t||t.tag!==1)throw Error(Fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_i(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Fe(171))}if(t.tag===1){var n=t.type;if(_i(n))return hL(t,n,e)}return e}function m4(t,e,n,r,i,s,o,a,l){return t=cM(n,r,!0,t,i,s,o,a,l),t.context=p4(null),n=t.current,r=ii(),i=Za(n),s=Qo(r,i),s.callback=e??null,Ya(n,s,i),t.current.lanes=i,Cp(t,i,r),Si(t,r),t}function ry(t,e,n,r){var i=e.current,s=ii(),o=Za(i);return n=p4(n),e.context===null?e.context=n:e.pendingContext=n,e=Qo(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ya(i,e,o),t!==null&&(Gs(t,i,o,s),Dv(t,i,o)),o}function E0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function zP(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fM(t,e){zP(t,e),(t=t.alternate)&&zP(t,e)}function T5(){return null}var g4=typeof reportError=="function"?reportError:function(t){console.error(t)};function dM(t){this._internalRoot=t}iy.prototype.render=dM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Fe(409));ry(t,e,null,null)};iy.prototype.unmount=dM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xu(function(){ry(null,t,null,null)}),e[ia]=null}};function iy(t){this._internalRoot=t}iy.prototype.unstable_scheduleHydration=function(t){if(t){var e=jD();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ba.length&&e!==0&&e<Ba[n].priority;n++);Ba.splice(n,0,t),n===0&&KD(t)}};function hM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function BP(){}function P5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=E0(o);s.call(u)}}var o=m4(e,r,t,0,null,!1,!1,"",BP);return t._reactRootContainer=o,t[ia]=o.current,$h(t.nodeType===8?t.parentNode:t),xu(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=E0(l);a.call(u)}}var l=cM(t,0,!1,null,null,!1,!1,"",BP);return t._reactRootContainer=l,t[ia]=l.current,$h(t.nodeType===8?t.parentNode:t),xu(function(){ry(e,l,n,r)}),l}function oy(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=E0(o);a.call(l)}}ry(e,o,t,i)}else o=P5(n,e,t,i,r);return E0(o)}WD=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ah(e.pendingLanes);n!==0&&(Db(e,n|1),Si(e,Gn()),!(Ft&6)&&(wf=Gn()+500,dl()))}break;case 13:xu(function(){var r=sa(t,1);if(r!==null){var i=ii();Gs(r,t,1,i)}}),fM(t,1)}};Lb=function(t){if(t.tag===13){var e=sa(t,134217728);if(e!==null){var n=ii();Gs(e,t,134217728,n)}fM(t,134217728)}};$D=function(t){if(t.tag===13){var e=Za(t),n=sa(t,e);if(n!==null){var r=ii();Gs(n,t,e,r)}fM(t,e)}};jD=function(){return nn};XD=function(t,e){var n=nn;try{return nn=t,e()}finally{nn=n}};vS=function(t,e,n){switch(e){case"input":if(cS(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=q0(r);if(!i)throw Error(Fe(90));MD(r),cS(r,i)}}}break;case"textarea":TD(t,n);break;case"select":e=n.value,e!=null&&sf(t,!!n.multiple,e,!1)}};LD=oM;OD=xu;var C5={usingClientEntryPoint:!1,Events:[Rp,Hc,q0,ID,DD,oM]},Dd={findFiberByHostInstance:Yl,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},A5={bundleType:Dd.bundleType,version:Dd.version,rendererPackageName:Dd.rendererPackageName,rendererConfig:Dd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ND(t),t===null?null:t.stateNode},findFiberByHostInstance:Dd.findFiberByHostInstance||T5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xg.isDisabled&&xg.supportsFiber)try{j0=xg.inject(A5),xo=xg}catch{}}Hi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C5;Hi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hM(e))throw Error(Fe(200));return E5(t,e,null,n)};Hi.createRoot=function(t,e){if(!hM(t))throw Error(Fe(299));var n=!1,r="",i=g4;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=cM(t,1,!1,null,null,n,!1,r,i),t[ia]=e.current,$h(t.nodeType===8?t.parentNode:t),new dM(e)};Hi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=ND(e),t=t===null?null:t.stateNode,t};Hi.flushSync=function(t){return xu(t)};Hi.hydrate=function(t,e,n){if(!sy(e))throw Error(Fe(200));return oy(null,t,e,!0,n)};Hi.hydrateRoot=function(t,e,n){if(!hM(t))throw Error(Fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=g4;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=m4(e,null,t,1,n??null,i,!1,s,o),t[ia]=e.current,$h(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new iy(e)};Hi.render=function(t,e,n){if(!sy(e))throw Error(Fe(200));return oy(null,t,e,!1,n)};Hi.unmountComponentAtNode=function(t){if(!sy(t))throw Error(Fe(40));return t._reactRootContainer?(xu(function(){oy(null,null,t,!1,function(){t._reactRootContainer=null,t[ia]=null})}),!0):!1};Hi.unstable_batchedUpdates=oM;Hi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sy(n))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return oy(t,e,n,!1,r)};Hi.version="18.2.0-next-9e3b772b8-20220608";function v4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(v4)}catch(t){console.error(t)}}v4(),mD.exports=Hi;var y4=mD.exports;const x4=_s(y4);var _4,HP=y4;_4=rS.createRoot=HP.createRoot,rS.hydrateRoot=HP.hydrateRoot;/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Au="152",Bl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Hl={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},S4=0,qS=1,w4=2,R5=3,b4=0,ay=1,bh=2,Fs=3,Mo=0,or=1,Wr=2,I5=2,xn=0,au=1,ep=2,ZS=3,QS=4,M4=5,$l=100,E4=101,T4=102,JS=103,ew=104,P4=200,C4=201,A4=202,R4=203,pM=204,mM=205,I4=206,D4=207,L4=208,O4=209,k4=210,gM=0,vM=1,T0=2,tp=3,np=4,yM=5,xM=6,ly=7,Dp=0,U4=1,N4=2,Ws=0,F4=1,z4=2,B4=3,_M=4,H4=5,uy=300,il=301,sl=302,rp=303,ip=304,Nf=306,aa=1e3,ir=1001,sp=1002,kt=1003,P0=1004,D5=1004,Mh=1005,L5=1005,ot=1006,SM=1007,O5=1007,ol=1008,k5=1008,pn=1009,V4=1010,G4=1011,wM=1012,W4=1013,Zo=1014,Nn=1015,wi=1016,$4=1017,j4=1018,Ja=1020,X4=1021,vn=1023,cy=1024,K4=1025,el=1026,al=1027,bM=1028,Y4=1029,MM=1030,q4=1031,Z4=1033,zv=33776,Bv=33777,Hv=33778,Vv=33779,tw=35840,nw=35841,rw=35842,iw=35843,Q4=36196,sw=37492,ow=37496,aw=37808,lw=37809,uw=37810,cw=37811,fw=37812,dw=37813,hw=37814,pw=37815,mw=37816,gw=37817,vw=37818,yw=37819,xw=37820,_w=37821,Gv=36492,J4=36283,Sw=36284,ww=36285,bw=36286,eO=2200,tO=2201,nO=2202,op=2300,ap=2301,Wv=2302,Ql=2400,Jl=2401,lp=2402,fy=2500,EM=2501,U5=0,N5=1,F5=2,Lp=3e3,ps=3001,_r=3200,Eo=3201,ha=0,rO=1,tl="",wt="srgb",Xs="srgb-linear",TM="display-p3",z5=0,$v=7680,B5=7681,H5=7682,V5=7683,G5=34055,W5=34056,$5=5386,j5=512,X5=513,K5=514,Y5=515,q5=516,Z5=517,Q5=518,iO=519,up=35044,J5=35048,e6=35040,t6=35045,n6=35049,r6=35041,i6=35046,s6=35050,o6=35042,a6="100",C0="300 es",A0=1035;class Gi{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}const zr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let VP=1234567;const lu=Math.PI/180,bf=180/Math.PI;function Fi(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(zr[t&255]+zr[t>>8&255]+zr[t>>16&255]+zr[t>>24&255]+"-"+zr[e&255]+zr[e>>8&255]+"-"+zr[e>>16&15|64]+zr[e>>24&255]+"-"+zr[n&63|128]+zr[n>>8&255]+"-"+zr[n>>16&255]+zr[n>>24&255]+zr[r&255]+zr[r>>8&255]+zr[r>>16&255]+zr[r>>24&255]).toLowerCase()}function Fn(t,e,n){return Math.max(e,Math.min(n,t))}function PM(t,e){return(t%e+e)%e}function l6(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function u6(t,e,n){return t!==e?(n-t)/(e-t):0}function Eh(t,e,n){return(1-n)*t+n*e}function c6(t,e,n,r){return Eh(t,e,1-Math.exp(-n*r))}function f6(t,e=1){return e-Math.abs(PM(t,e*2)-e)}function d6(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function h6(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function p6(t,e){return t+Math.floor(Math.random()*(e-t+1))}function m6(t,e){return t+Math.random()*(e-t)}function g6(t){return t*(.5-Math.random())}function v6(t){t!==void 0&&(VP=t);let e=VP+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function y6(t){return t*lu}function x6(t){return t*bf}function Mw(t){return(t&t-1)===0&&t!==0}function sO(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function oO(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function _6(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+r)/2),d=o((e+r)/2),h=s((e-r)/2),p=o((e-r)/2),g=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":t.set(a*d,l*h,l*p,a*u);break;case"YZY":t.set(l*p,a*d,l*h,a*u);break;case"ZXZ":t.set(l*h,l*p,a*d,a*u);break;case"XZX":t.set(a*d,l*v,l*g,a*u);break;case"YXY":t.set(l*g,a*d,l*v,a*u);break;case"ZYZ":t.set(l*v,l*g,a*d,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function ki(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Tt(t,e){switch(e.constructor){case Float32Array:return t;case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const dy={DEG2RAD:lu,RAD2DEG:bf,generateUUID:Fi,clamp:Fn,euclideanModulo:PM,mapLinear:l6,inverseLerp:u6,lerp:Eh,damp:c6,pingpong:f6,smoothstep:d6,smootherstep:h6,randInt:p6,randFloat:m6,randFloatSpread:g6,seededRandom:v6,degToRad:y6,radToDeg:x6,isPowerOfTwo:Mw,ceilPowerOfTwo:sO,floorPowerOfTwo:oO,setQuaternionFromProperEuler:_6,normalize:Tt,denormalize:ki};class ue{constructor(e=0,n=0){ue.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Fn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Rt{constructor(){Rt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,n,r,i,s,o,a,l,u){const d=this.elements;return d[0]=e,d[1]=i,d[2]=a,d[3]=n,d[4]=s,d[5]=l,d[6]=r,d[7]=o,d[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],d=r[4],h=r[7],p=r[2],g=r[5],v=r[8],_=i[0],x=i[3],m=i[6],S=i[1],w=i[4],M=i[7],I=i[2],P=i[5],D=i[8];return s[0]=o*_+a*S+l*I,s[3]=o*x+a*w+l*P,s[6]=o*m+a*M+l*D,s[1]=u*_+d*S+h*I,s[4]=u*x+d*w+h*P,s[7]=u*m+d*M+h*D,s[2]=p*_+g*S+v*I,s[5]=p*x+g*w+v*P,s[8]=p*m+g*M+v*D,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8];return n*o*d-n*a*u-r*s*d+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8],h=d*o-a*u,p=a*l-d*s,g=u*s-o*l,v=n*h+r*p+i*g;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const _=1/v;return e[0]=h*_,e[1]=(i*u-d*r)*_,e[2]=(a*r-i*o)*_,e[3]=p*_,e[4]=(d*n-i*l)*_,e[5]=(i*s-a*n)*_,e[6]=g*_,e[7]=(r*l-u*n)*_,e[8]=(o*n-r*s)*_,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(zx.makeScale(e,n)),this}rotate(e){return this.premultiply(zx.makeRotation(-e)),this}translate(e,n){return this.premultiply(zx.makeTranslation(e,n)),this}makeTranslation(e,n){return this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const zx=new Rt;function aO(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const S6={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Kc(t,e){return new S6[t](e)}function cp(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const GP={};function Th(t){t in GP||(GP[t]=!0,console.warn(t))}function ff(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Bx(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const w6=new Rt().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),b6=new Rt().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function M6(t){return t.convertSRGBToLinear().applyMatrix3(b6)}function E6(t){return t.applyMatrix3(w6).convertLinearToSRGB()}const T6={[Xs]:t=>t,[wt]:t=>t.convertSRGBToLinear(),[TM]:M6},P6={[Xs]:t=>t,[wt]:t=>t.convertLinearToSRGB(),[TM]:E6},ss={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Xs},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=T6[e],i=P6[n];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let ec;class CM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{ec===void 0&&(ec=cp("canvas")),ec.width=e.width,ec.height=e.height;const r=ec.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=ec}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=cp("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=ff(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(ff(n[r]/255)*255):n[r]=ff(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class eu{constructor(e=null){this.isSource=!0,this.uuid=Fi(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Hx(i[o].image)):s.push(Hx(i[o]))}else s=Hx(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function Hx(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?CM.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let C6=0,Bn=class jv extends Gi{constructor(e=jv.DEFAULT_IMAGE,n=jv.DEFAULT_MAPPING,r=ir,i=ir,s=ot,o=ol,a=vn,l=pn,u=jv.DEFAULT_ANISOTROPY,d=tl){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:C6++}),this.uuid=Fi(),this.name="",this.source=new eu(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new ue(0,0),this.repeat=new ue(1,1),this.center=new ue(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof d=="string"?this.colorSpace=d:(Th("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=d===ps?wt:tl),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==uy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case aa:e.x=e.x-Math.floor(e.x);break;case ir:e.x=e.x<0?0:1;break;case sp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case aa:e.y=e.y-Math.floor(e.y);break;case ir:e.y=e.y<0?0:1;break;case sp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Th("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===wt?ps:Lp}set encoding(e){Th("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===ps?wt:tl}};Bn.DEFAULT_IMAGE=null;Bn.DEFAULT_MAPPING=uy;Bn.DEFAULT_ANISOTROPY=1;class bt{constructor(e=0,n=0,r=0,i=1){bt.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,u=l[0],d=l[4],h=l[8],p=l[1],g=l[5],v=l[9],_=l[2],x=l[6],m=l[10];if(Math.abs(d-p)<.01&&Math.abs(h-_)<.01&&Math.abs(v-x)<.01){if(Math.abs(d+p)<.1&&Math.abs(h+_)<.1&&Math.abs(v+x)<.1&&Math.abs(u+g+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(u+1)/2,M=(g+1)/2,I=(m+1)/2,P=(d+p)/4,D=(h+_)/4,A=(v+x)/4;return w>M&&w>I?w<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(w),i=P/r,s=D/r):M>I?M<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(M),r=P/i,s=A/i):I<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(I),r=D/s,i=A/s),this.set(r,i,s,n),this}let S=Math.sqrt((x-v)*(x-v)+(h-_)*(h-_)+(p-d)*(p-d));return Math.abs(S)<.001&&(S=1),this.x=(x-v)/S,this.y=(h-_)/S,this.z=(p-d)/S,this.w=Math.acos((u+g+m-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Lt extends Gi{constructor(e=1,n=1,r={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new bt(0,0,e,n),this.scissorTest=!1,this.viewport=new bt(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(Th("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===ps?wt:tl),this.texture=new Bn(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:ot,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new eu(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class hy extends Bn{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=kt,this.minFilter=kt,this.wrapR=ir,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class A6 extends Lt{constructor(e=1,n=1,r=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new hy(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class uu extends Bn{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=kt,this.minFilter=kt,this.wrapR=ir,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class R6 extends Lt{constructor(e=1,n=1,r=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new uu(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class lO extends Lt{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}return this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class Wn{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],u=r[i+1],d=r[i+2],h=r[i+3];const p=s[o+0],g=s[o+1],v=s[o+2],_=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=d,e[n+3]=h;return}if(a===1){e[n+0]=p,e[n+1]=g,e[n+2]=v,e[n+3]=_;return}if(h!==_||l!==p||u!==g||d!==v){let x=1-a;const m=l*p+u*g+d*v+h*_,S=m>=0?1:-1,w=1-m*m;if(w>Number.EPSILON){const I=Math.sqrt(w),P=Math.atan2(I,m*S);x=Math.sin(x*P)/I,a=Math.sin(a*P)/I}const M=a*S;if(l=l*x+p*M,u=u*x+g*M,d=d*x+v*M,h=h*x+_*M,x===1-a){const I=1/Math.sqrt(l*l+u*u+d*d+h*h);l*=I,u*=I,d*=I,h*=I}}e[n]=l,e[n+1]=u,e[n+2]=d,e[n+3]=h}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],d=r[i+3],h=s[o],p=s[o+1],g=s[o+2],v=s[o+3];return e[n]=a*v+d*h+l*g-u*p,e[n+1]=l*v+d*p+u*h-a*g,e[n+2]=u*v+d*g+a*p-l*h,e[n+3]=d*v-a*h-l*p-u*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),d=a(i/2),h=a(s/2),p=l(r/2),g=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=p*d*h+u*g*v,this._y=u*g*h-p*d*v,this._z=u*d*v+p*g*h,this._w=u*d*h-p*g*v;break;case"YXZ":this._x=p*d*h+u*g*v,this._y=u*g*h-p*d*v,this._z=u*d*v-p*g*h,this._w=u*d*h+p*g*v;break;case"ZXY":this._x=p*d*h-u*g*v,this._y=u*g*h+p*d*v,this._z=u*d*v+p*g*h,this._w=u*d*h-p*g*v;break;case"ZYX":this._x=p*d*h-u*g*v,this._y=u*g*h+p*d*v,this._z=u*d*v-p*g*h,this._w=u*d*h+p*g*v;break;case"YZX":this._x=p*d*h+u*g*v,this._y=u*g*h+p*d*v,this._z=u*d*v-p*g*h,this._w=u*d*h-p*g*v;break;case"XZY":this._x=p*d*h-u*g*v,this._y=u*g*h-p*d*v,this._z=u*d*v+p*g*h,this._w=u*d*h+p*g*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],d=n[6],h=n[10],p=r+a+h;if(p>0){const g=.5/Math.sqrt(p+1);this._w=.25/g,this._x=(d-l)*g,this._y=(s-u)*g,this._z=(o-i)*g}else if(r>a&&r>h){const g=2*Math.sqrt(1+r-a-h);this._w=(d-l)/g,this._x=.25*g,this._y=(i+o)/g,this._z=(s+u)/g}else if(a>h){const g=2*Math.sqrt(1+a-r-h);this._w=(s-u)/g,this._x=(i+o)/g,this._y=.25*g,this._z=(l+d)/g}else{const g=2*Math.sqrt(1+h-r-a);this._w=(o-i)/g,this._x=(s+u)/g,this._y=(l+d)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Fn(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,d=n._w;return this._x=r*d+o*a+i*u-s*l,this._y=i*d+o*l+s*a-r*u,this._z=s*d+o*u+r*l-i*a,this._w=o*d-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-n;return this._w=g*o+n*this._w,this._x=g*r+n*this._x,this._y=g*i+n*this._y,this._z=g*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),d=Math.atan2(u,a),h=Math.sin((1-n)*d)/u,p=Math.sin(n*d)/u;return this._w=o*h+this._w*p,this._x=r*h+this._x*p,this._y=i*h+this._y*p,this._z=s*h+this._z*p,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class B{constructor(e=0,n=0,r=0){B.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(WP.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(WP.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*n+o*i-a*r,d=l*r+a*n-s*i,h=l*i+s*r-o*n,p=-s*n-o*r-a*i;return this.x=u*l+p*-s+d*-a-h*-o,this.y=d*l+p*-o+h*-s-u*-a,this.z=h*l+p*-a+u*-o-d*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Vx.copy(this).projectOnVector(e),this.sub(Vx)}reflect(e){return this.sub(Vx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Fn(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Vx=new B,WP=new Wn;class Wi{constructor(e=new B(1/0,1/0,1/0),n=new B(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Uo.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Uo.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Uo.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),tc.copy(e.boundingBox),tc.applyMatrix4(e.matrixWorld),this.union(tc);else{const i=e.geometry;if(i!==void 0)if(n&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Uo.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Uo)}else i.boundingBox===null&&i.computeBoundingBox(),tc.copy(i.boundingBox),tc.applyMatrix4(e.matrixWorld),this.union(tc)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Uo),Uo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ld),_g.subVectors(this.max,Ld),nc.subVectors(e.a,Ld),rc.subVectors(e.b,Ld),ic.subVectors(e.c,Ld),Ca.subVectors(rc,nc),Aa.subVectors(ic,rc),Al.subVectors(nc,ic);let n=[0,-Ca.z,Ca.y,0,-Aa.z,Aa.y,0,-Al.z,Al.y,Ca.z,0,-Ca.x,Aa.z,0,-Aa.x,Al.z,0,-Al.x,-Ca.y,Ca.x,0,-Aa.y,Aa.x,0,-Al.y,Al.x,0];return!Gx(n,nc,rc,ic,_g)||(n=[1,0,0,0,1,0,0,0,1],!Gx(n,nc,rc,ic,_g))?!1:(Sg.crossVectors(Ca,Aa),n=[Sg.x,Sg.y,Sg.z],Gx(n,nc,rc,ic,_g))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Uo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Uo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ko[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ko[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ko[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ko[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ko[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ko[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ko[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ko[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ko),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ko=[new B,new B,new B,new B,new B,new B,new B,new B],Uo=new B,tc=new Wi,nc=new B,rc=new B,ic=new B,Ca=new B,Aa=new B,Al=new B,Ld=new B,_g=new B,Sg=new B,Rl=new B;function Gx(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){Rl.fromArray(t,s);const a=i.x*Math.abs(Rl.x)+i.y*Math.abs(Rl.y)+i.z*Math.abs(Rl.z),l=e.dot(Rl),u=n.dot(Rl),d=r.dot(Rl);if(Math.max(-Math.max(l,u,d),Math.min(l,u,d))>a)return!1}return!0}const I6=new Wi,Od=new B,Wx=new B;let Ss=class{constructor(e=new B,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):I6.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Od.subVectors(e,this.center);const n=Od.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(Od,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Wx.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Od.copy(e.center).add(Wx)),this.expandByPoint(Od.copy(e.center).sub(Wx))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const No=new B,$x=new B,wg=new B,Ra=new B,jx=new B,bg=new B,Xx=new B;class Op{constructor(e=new B,n=new B(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,No)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=No.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(No.copy(this.origin).addScaledVector(this.direction,n),No.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){$x.copy(e).add(n).multiplyScalar(.5),wg.copy(n).sub(e).normalize(),Ra.copy(this.origin).sub($x);const s=e.distanceTo(n)*.5,o=-this.direction.dot(wg),a=Ra.dot(this.direction),l=-Ra.dot(wg),u=Ra.lengthSq(),d=Math.abs(1-o*o);let h,p,g,v;if(d>0)if(h=o*l-a,p=o*a-l,v=s*d,h>=0)if(p>=-v)if(p<=v){const _=1/d;h*=_,p*=_,g=h*(h+o*p+2*a)+p*(o*h+p+2*l)+u}else p=s,h=Math.max(0,-(o*p+a)),g=-h*h+p*(p+2*l)+u;else p=-s,h=Math.max(0,-(o*p+a)),g=-h*h+p*(p+2*l)+u;else p<=-v?(h=Math.max(0,-(-o*s+a)),p=h>0?-s:Math.min(Math.max(-s,-l),s),g=-h*h+p*(p+2*l)+u):p<=v?(h=0,p=Math.min(Math.max(-s,-l),s),g=p*(p+2*l)+u):(h=Math.max(0,-(o*s+a)),p=h>0?s:Math.min(Math.max(-s,-l),s),g=-h*h+p*(p+2*l)+u);else p=o>0?-s:s,h=Math.max(0,-(o*p+a)),g=-h*h+p*(p+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy($x).addScaledVector(wg,p),g}intersectSphere(e,n){No.subVectors(e.center,this.origin);const r=No.dot(this.direction),i=No.dot(No)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const u=1/this.direction.x,d=1/this.direction.y,h=1/this.direction.z,p=this.origin;return u>=0?(r=(e.min.x-p.x)*u,i=(e.max.x-p.x)*u):(r=(e.max.x-p.x)*u,i=(e.min.x-p.x)*u),d>=0?(s=(e.min.y-p.y)*d,o=(e.max.y-p.y)*d):(s=(e.max.y-p.y)*d,o=(e.min.y-p.y)*d),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-p.z)*h,l=(e.max.z-p.z)*h):(a=(e.max.z-p.z)*h,l=(e.min.z-p.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,No)!==null}intersectTriangle(e,n,r,i,s){jx.subVectors(n,e),bg.subVectors(r,e),Xx.crossVectors(jx,bg);let o=this.direction.dot(Xx),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Ra.subVectors(this.origin,e);const l=a*this.direction.dot(bg.crossVectors(Ra,bg));if(l<0)return null;const u=a*this.direction.dot(jx.cross(Ra));if(u<0||l+u>o)return null;const d=-a*Ra.dot(Xx);return d<0?null:this.at(d/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class at{constructor(){at.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,n,r,i,s,o,a,l,u,d,h,p,g,v,_,x){const m=this.elements;return m[0]=e,m[4]=n,m[8]=r,m[12]=i,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=u,m[6]=d,m[10]=h,m[14]=p,m[3]=g,m[7]=v,m[11]=_,m[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new at().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/sc.setFromMatrixColumn(e,0).length(),s=1/sc.setFromMatrixColumn(e,1).length(),o=1/sc.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),d=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const p=o*d,g=o*h,v=a*d,_=a*h;n[0]=l*d,n[4]=-l*h,n[8]=u,n[1]=g+v*u,n[5]=p-_*u,n[9]=-a*l,n[2]=_-p*u,n[6]=v+g*u,n[10]=o*l}else if(e.order==="YXZ"){const p=l*d,g=l*h,v=u*d,_=u*h;n[0]=p+_*a,n[4]=v*a-g,n[8]=o*u,n[1]=o*h,n[5]=o*d,n[9]=-a,n[2]=g*a-v,n[6]=_+p*a,n[10]=o*l}else if(e.order==="ZXY"){const p=l*d,g=l*h,v=u*d,_=u*h;n[0]=p-_*a,n[4]=-o*h,n[8]=v+g*a,n[1]=g+v*a,n[5]=o*d,n[9]=_-p*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const p=o*d,g=o*h,v=a*d,_=a*h;n[0]=l*d,n[4]=v*u-g,n[8]=p*u+_,n[1]=l*h,n[5]=_*u+p,n[9]=g*u-v,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const p=o*l,g=o*u,v=a*l,_=a*u;n[0]=l*d,n[4]=_-p*h,n[8]=v*h+g,n[1]=h,n[5]=o*d,n[9]=-a*d,n[2]=-u*d,n[6]=g*h+v,n[10]=p-_*h}else if(e.order==="XZY"){const p=o*l,g=o*u,v=a*l,_=a*u;n[0]=l*d,n[4]=-h,n[8]=u*d,n[1]=p*h+_,n[5]=o*d,n[9]=g*h-v,n[2]=v*h-g,n[6]=a*d,n[10]=_*h+p}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(D6,e,L6)}lookAt(e,n,r){const i=this.elements;return Ri.subVectors(e,n),Ri.lengthSq()===0&&(Ri.z=1),Ri.normalize(),Ia.crossVectors(r,Ri),Ia.lengthSq()===0&&(Math.abs(r.z)===1?Ri.x+=1e-4:Ri.z+=1e-4,Ri.normalize(),Ia.crossVectors(r,Ri)),Ia.normalize(),Mg.crossVectors(Ri,Ia),i[0]=Ia.x,i[4]=Mg.x,i[8]=Ri.x,i[1]=Ia.y,i[5]=Mg.y,i[9]=Ri.y,i[2]=Ia.z,i[6]=Mg.z,i[10]=Ri.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],d=r[1],h=r[5],p=r[9],g=r[13],v=r[2],_=r[6],x=r[10],m=r[14],S=r[3],w=r[7],M=r[11],I=r[15],P=i[0],D=i[4],A=i[8],T=i[12],E=i[1],O=i[5],N=i[9],H=i[13],K=i[2],Y=i[6],Q=i[10],ee=i[14],F=i[3],j=i[7],V=i[11],ce=i[15];return s[0]=o*P+a*E+l*K+u*F,s[4]=o*D+a*O+l*Y+u*j,s[8]=o*A+a*N+l*Q+u*V,s[12]=o*T+a*H+l*ee+u*ce,s[1]=d*P+h*E+p*K+g*F,s[5]=d*D+h*O+p*Y+g*j,s[9]=d*A+h*N+p*Q+g*V,s[13]=d*T+h*H+p*ee+g*ce,s[2]=v*P+_*E+x*K+m*F,s[6]=v*D+_*O+x*Y+m*j,s[10]=v*A+_*N+x*Q+m*V,s[14]=v*T+_*H+x*ee+m*ce,s[3]=S*P+w*E+M*K+I*F,s[7]=S*D+w*O+M*Y+I*j,s[11]=S*A+w*N+M*Q+I*V,s[15]=S*T+w*H+M*ee+I*ce,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],d=e[2],h=e[6],p=e[10],g=e[14],v=e[3],_=e[7],x=e[11],m=e[15];return v*(+s*l*h-i*u*h-s*a*p+r*u*p+i*a*g-r*l*g)+_*(+n*l*g-n*u*p+s*o*p-i*o*g+i*u*d-s*l*d)+x*(+n*u*h-n*a*g-s*o*h+r*o*g+s*a*d-r*u*d)+m*(-i*a*d-n*l*h+n*a*p+i*o*h-r*o*p+r*l*d)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],d=e[8],h=e[9],p=e[10],g=e[11],v=e[12],_=e[13],x=e[14],m=e[15],S=h*x*u-_*p*u+_*l*g-a*x*g-h*l*m+a*p*m,w=v*p*u-d*x*u-v*l*g+o*x*g+d*l*m-o*p*m,M=d*_*u-v*h*u+v*a*g-o*_*g-d*a*m+o*h*m,I=v*h*l-d*_*l-v*a*p+o*_*p+d*a*x-o*h*x,P=n*S+r*w+i*M+s*I;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const D=1/P;return e[0]=S*D,e[1]=(_*p*s-h*x*s-_*i*g+r*x*g+h*i*m-r*p*m)*D,e[2]=(a*x*s-_*l*s+_*i*u-r*x*u-a*i*m+r*l*m)*D,e[3]=(h*l*s-a*p*s-h*i*u+r*p*u+a*i*g-r*l*g)*D,e[4]=w*D,e[5]=(d*x*s-v*p*s+v*i*g-n*x*g-d*i*m+n*p*m)*D,e[6]=(v*l*s-o*x*s-v*i*u+n*x*u+o*i*m-n*l*m)*D,e[7]=(o*p*s-d*l*s+d*i*u-n*p*u-o*i*g+n*l*g)*D,e[8]=M*D,e[9]=(v*h*s-d*_*s-v*r*g+n*_*g+d*r*m-n*h*m)*D,e[10]=(o*_*s-v*a*s+v*r*u-n*_*u-o*r*m+n*a*m)*D,e[11]=(d*a*s-o*h*s-d*r*u+n*h*u+o*r*g-n*a*g)*D,e[12]=I*D,e[13]=(d*_*i-v*h*i+v*r*p-n*_*p-d*r*x+n*h*x)*D,e[14]=(v*a*i-o*_*i-v*r*l+n*_*l+o*r*x-n*a*x)*D,e[15]=(o*h*i-d*a*i+d*r*l-n*h*l-o*r*p+n*a*p)*D,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,d=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,d*a+r,d*l-i*o,0,u*l-i*a,d*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,d=o+o,h=a+a,p=s*u,g=s*d,v=s*h,_=o*d,x=o*h,m=a*h,S=l*u,w=l*d,M=l*h,I=r.x,P=r.y,D=r.z;return i[0]=(1-(_+m))*I,i[1]=(g+M)*I,i[2]=(v-w)*I,i[3]=0,i[4]=(g-M)*P,i[5]=(1-(p+m))*P,i[6]=(x+S)*P,i[7]=0,i[8]=(v+w)*D,i[9]=(x-S)*D,i[10]=(1-(p+_))*D,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=sc.set(i[0],i[1],i[2]).length();const o=sc.set(i[4],i[5],i[6]).length(),a=sc.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ds.copy(this);const u=1/s,d=1/o,h=1/a;return Ds.elements[0]*=u,Ds.elements[1]*=u,Ds.elements[2]*=u,Ds.elements[4]*=d,Ds.elements[5]*=d,Ds.elements[6]*=d,Ds.elements[8]*=h,Ds.elements[9]*=h,Ds.elements[10]*=h,n.setFromRotationMatrix(Ds),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o){const a=this.elements,l=2*s/(n-e),u=2*s/(r-i),d=(n+e)/(n-e),h=(r+i)/(r-i),p=-(o+s)/(o-s),g=-2*o*s/(o-s);return a[0]=l,a[4]=0,a[8]=d,a[12]=0,a[1]=0,a[5]=u,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=p,a[14]=g,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,n,r,i,s,o){const a=this.elements,l=1/(n-e),u=1/(r-i),d=1/(o-s),h=(n+e)*l,p=(r+i)*u,g=(o+s)*d;return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-p,a[2]=0,a[6]=0,a[10]=-2*d,a[14]=-g,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const sc=new B,Ds=new at,D6=new B(0,0,0),L6=new B(1,1,1),Ia=new B,Mg=new B,Ri=new B,$P=new at,jP=new Wn;class Ff{constructor(e=0,n=0,r=0,i=Ff.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],d=i[9],h=i[2],p=i[6],g=i[10];switch(n){case"XYZ":this._y=Math.asin(Fn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-d,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(p,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Fn(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Fn(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(-h,g),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Fn(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(p,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Fn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-d,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-Fn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(p,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-d,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return $P.makeRotationFromQuaternion(e),this.setFromRotationMatrix($P,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return jP.setFromEuler(this),this.setFromQuaternion(jP,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ff.DEFAULT_ORDER="XYZ";class cu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let O6=0;const XP=new B,oc=new Wn,Fo=new at,Eg=new B,kd=new B,k6=new B,U6=new Wn,KP=new B(1,0,0),YP=new B(0,1,0),qP=new B(0,0,1),N6={type:"added"},ZP={type:"removed"};class Gt extends Gi{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:O6++}),this.uuid=Fi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Gt.DEFAULT_UP.clone();const e=new B,n=new Ff,r=new Wn,i=new B(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new at},normalMatrix:{value:new Rt}}),this.matrix=new at,this.matrixWorld=new at,this.matrixAutoUpdate=Gt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new cu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return oc.setFromAxisAngle(e,n),this.quaternion.multiply(oc),this}rotateOnWorldAxis(e,n){return oc.setFromAxisAngle(e,n),this.quaternion.premultiply(oc),this}rotateX(e){return this.rotateOnAxis(KP,e)}rotateY(e){return this.rotateOnAxis(YP,e)}rotateZ(e){return this.rotateOnAxis(qP,e)}translateOnAxis(e,n){return XP.copy(e).applyQuaternion(this.quaternion),this.position.add(XP.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(KP,e)}translateY(e){return this.translateOnAxis(YP,e)}translateZ(e){return this.translateOnAxis(qP,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fo.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?Eg.copy(e):Eg.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),kd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fo.lookAt(kd,Eg,this.up):Fo.lookAt(Eg,kd,this.up),this.quaternion.setFromRotationMatrix(Fo),i&&(Fo.extractRotation(i.matrixWorld),oc.setFromRotationMatrix(Fo),this.quaternion.premultiply(oc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(N6)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(ZP)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(ZP)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,n);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kd,e,k6),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(kd,U6,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,d=l.length;u<d;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),d=o(e.images),h=o(e.shapes),p=o(e.skeletons),g=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),d.length>0&&(r.images=d),h.length>0&&(r.shapes=h),p.length>0&&(r.skeletons=p),g.length>0&&(r.animations=g),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const u in a){const d=a[u];delete d.metadata,l.push(d)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}Gt.DEFAULT_UP=new B(0,1,0);Gt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Gt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ls=new B,zo=new B,Kx=new B,Bo=new B,ac=new B,lc=new B,QP=new B,Yx=new B,qx=new B,Zx=new B;let Tg=!1;class gi{constructor(e=new B,n=new B,r=new B){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),Ls.subVectors(e,n),i.cross(Ls);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){Ls.subVectors(i,n),zo.subVectors(r,n),Kx.subVectors(e,n);const o=Ls.dot(Ls),a=Ls.dot(zo),l=Ls.dot(Kx),u=zo.dot(zo),d=zo.dot(Kx),h=o*u-a*a;if(h===0)return s.set(-2,-1,-1);const p=1/h,g=(u*l-a*d)*p,v=(o*d-a*l)*p;return s.set(1-g-v,v,g)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Bo),Bo.x>=0&&Bo.y>=0&&Bo.x+Bo.y<=1}static getUV(e,n,r,i,s,o,a,l){return Tg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Tg=!0),this.getInterpolation(e,n,r,i,s,o,a,l)}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Bo),l.setScalar(0),l.addScaledVector(s,Bo.x),l.addScaledVector(o,Bo.y),l.addScaledVector(a,Bo.z),l}static isFrontFacing(e,n,r,i){return Ls.subVectors(r,n),zo.subVectors(e,n),Ls.cross(zo).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ls.subVectors(this.c,this.b),zo.subVectors(this.a,this.b),Ls.cross(zo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return gi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return gi.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return Tg===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Tg=!0),gi.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return gi.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return gi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return gi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;ac.subVectors(i,r),lc.subVectors(s,r),Yx.subVectors(e,r);const l=ac.dot(Yx),u=lc.dot(Yx);if(l<=0&&u<=0)return n.copy(r);qx.subVectors(e,i);const d=ac.dot(qx),h=lc.dot(qx);if(d>=0&&h<=d)return n.copy(i);const p=l*h-d*u;if(p<=0&&l>=0&&d<=0)return o=l/(l-d),n.copy(r).addScaledVector(ac,o);Zx.subVectors(e,s);const g=ac.dot(Zx),v=lc.dot(Zx);if(v>=0&&g<=v)return n.copy(s);const _=g*u-l*v;if(_<=0&&u>=0&&v<=0)return a=u/(u-v),n.copy(r).addScaledVector(lc,a);const x=d*v-g*h;if(x<=0&&h-d>=0&&g-v>=0)return QP.subVectors(s,i),a=(h-d)/(h-d+(g-v)),n.copy(i).addScaledVector(QP,a);const m=1/(x+_+p);return o=_*m,a=p*m,n.copy(r).addScaledVector(ac,o).addScaledVector(lc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let F6=0;class er extends Gi{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:F6++}),this.uuid=Fi(),this.name="",this.type="Material",this.blending=au,this.side=Mo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=pM,this.blendDst=mM,this.blendEquation=$l,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=tp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=iO,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=$v,this.stencilZFail=$v,this.stencilZPass=$v,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==au&&(r.blending=this.blending),this.side!==Mo&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const uO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Os={h:0,s:0,l:0},Pg={h:0,s:0,l:0};function Qx(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let ze=class{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,n===void 0&&r===void 0?this.set(e):this.setRGB(e,n,r)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=wt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ss.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=ss.workingColorSpace){return this.r=e,this.g=n,this.b=r,ss.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=ss.workingColorSpace){if(e=PM(e,1),n=Fn(n,0,1),r=Fn(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=Qx(o,s,e+1/3),this.g=Qx(o,s,e),this.b=Qx(o,s,e-1/3)}return ss.toWorkingColorSpace(this,i),this}setStyle(e,n=wt){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=wt){const r=uO[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=ff(e.r),this.g=ff(e.g),this.b=ff(e.b),this}copyLinearToSRGB(e){return this.r=Bx(e.r),this.g=Bx(e.g),this.b=Bx(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=wt){return ss.fromWorkingColorSpace(Br.copy(this),e),Math.round(Fn(Br.r*255,0,255))*65536+Math.round(Fn(Br.g*255,0,255))*256+Math.round(Fn(Br.b*255,0,255))}getHexString(e=wt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=ss.workingColorSpace){ss.fromWorkingColorSpace(Br.copy(this),n);const r=Br.r,i=Br.g,s=Br.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const d=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=d<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=d,e}getRGB(e,n=ss.workingColorSpace){return ss.fromWorkingColorSpace(Br.copy(this),n),e.r=Br.r,e.g=Br.g,e.b=Br.b,e}getStyle(e=wt){ss.fromWorkingColorSpace(Br.copy(this),e);const n=Br.r,r=Br.g,i=Br.b;return e!==wt?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(Os),Os.h+=e,Os.s+=n,Os.l+=r,this.setHSL(Os.h,Os.s,Os.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(Os),e.getHSL(Pg);const r=Eh(Os.h,Pg.h,n),i=Eh(Os.s,Pg.s,n),s=Eh(Os.l,Pg.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Br=new ze;ze.NAMES=uO;class Ys extends er{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const jo=z6();function z6(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,d=0;for(;!(u&8388608);)u<<=1,d-=8388608;u&=-8388609,d+=947912704,s[l]=u|d}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function hi(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Fn(t,-65504,65504),jo.floatView[0]=t;const e=jo.uint32View[0],n=e>>23&511;return jo.baseTable[n]+((e&8388607)>>jo.shiftTable[n])}function uh(t){const e=t>>10;return jo.uint32View[0]=jo.mantissaTable[jo.offsetTable[e]+(t&1023)]+jo.exponentTable[e],jo.floatView[0]}const B6={toHalfFloat:hi,fromHalfFloat:uh},Yn=new B,Cg=new ue;class Xt{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=up,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)Cg.fromBufferAttribute(this,n),Cg.applyMatrix3(e),this.setXY(n,Cg.x,Cg.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)Yn.fromBufferAttribute(this,n),Yn.applyMatrix3(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)Yn.fromBufferAttribute(this,n),Yn.applyMatrix4(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Yn.fromBufferAttribute(this,n),Yn.applyNormalMatrix(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Yn.fromBufferAttribute(this,n),Yn.transformDirection(e),this.setXYZ(n,Yn.x,Yn.y,Yn.z);return this}set(e,n=0){return this.array.set(e,n),this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ki(n,this.array)),n}setX(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ki(n,this.array)),n}setY(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ki(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ki(n,this.array)),n}setW(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array),s=Tt(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==up&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class H6 extends Xt{constructor(e,n,r){super(new Int8Array(e),n,r)}}class V6 extends Xt{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class G6 extends Xt{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class W6 extends Xt{constructor(e,n,r){super(new Int16Array(e),n,r)}}class AM extends Xt{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class $6 extends Xt{constructor(e,n,r){super(new Int32Array(e),n,r)}}class RM extends Xt{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class j6 extends Xt{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=uh(this.array[e*this.itemSize]);return this.normalized&&(n=ki(n,this.array)),n}setX(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize]=hi(n),this}getY(e){let n=uh(this.array[e*this.itemSize+1]);return this.normalized&&(n=ki(n,this.array)),n}setY(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+1]=hi(n),this}getZ(e){let n=uh(this.array[e*this.itemSize+2]);return this.normalized&&(n=ki(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+2]=hi(n),this}getW(e){let n=uh(this.array[e*this.itemSize+3]);return this.normalized&&(n=ki(n,this.array)),n}setW(e,n){return this.normalized&&(n=Tt(n,this.array)),this.array[e*this.itemSize+3]=hi(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array)),this.array[e+0]=hi(n),this.array[e+1]=hi(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array)),this.array[e+0]=hi(n),this.array[e+1]=hi(r),this.array[e+2]=hi(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array),s=Tt(s,this.array)),this.array[e+0]=hi(n),this.array[e+1]=hi(r),this.array[e+2]=hi(i),this.array[e+3]=hi(s),this}}class et extends Xt{constructor(e,n,r){super(new Float32Array(e),n,r)}}class X6 extends Xt{constructor(e,n,r){super(new Float64Array(e),n,r)}}let K6=0;const rs=new at,Jx=new Gt,uc=new B,Ii=new Wi,Ud=new Wi,gr=new B;class Mt extends Gi{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:K6++}),this.uuid=Fi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(aO(e)?RM:AM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Rt().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return rs.makeRotationFromQuaternion(e),this.applyMatrix4(rs),this}rotateX(e){return rs.makeRotationX(e),this.applyMatrix4(rs),this}rotateY(e){return rs.makeRotationY(e),this.applyMatrix4(rs),this}rotateZ(e){return rs.makeRotationZ(e),this.applyMatrix4(rs),this}translate(e,n,r){return rs.makeTranslation(e,n,r),this.applyMatrix4(rs),this}scale(e,n,r){return rs.makeScale(e,n,r),this.applyMatrix4(rs),this}lookAt(e){return Jx.lookAt(e),Jx.updateMatrix(),this.applyMatrix4(Jx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(uc).negate(),this.translate(uc.x,uc.y,uc.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new et(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wi);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new B(-1/0,-1/0,-1/0),new B(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];Ii.setFromBufferAttribute(s),this.morphTargetsRelative?(gr.addVectors(this.boundingBox.min,Ii.min),this.boundingBox.expandByPoint(gr),gr.addVectors(this.boundingBox.max,Ii.max),this.boundingBox.expandByPoint(gr)):(this.boundingBox.expandByPoint(Ii.min),this.boundingBox.expandByPoint(Ii.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ss);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new B,1/0);return}if(e){const r=this.boundingSphere.center;if(Ii.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Ud.setFromBufferAttribute(a),this.morphTargetsRelative?(gr.addVectors(Ii.min,Ud.min),Ii.expandByPoint(gr),gr.addVectors(Ii.max,Ud.max),Ii.expandByPoint(gr)):(Ii.expandByPoint(Ud.min),Ii.expandByPoint(Ud.max))}Ii.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)gr.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(gr));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,d=a.count;u<d;u++)gr.fromBufferAttribute(a,u),l&&(uc.fromBufferAttribute(e,u),gr.add(uc)),i=Math.max(i,r.distanceToSquared(gr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Xt(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],d=[];for(let E=0;E<a;E++)u[E]=new B,d[E]=new B;const h=new B,p=new B,g=new B,v=new ue,_=new ue,x=new ue,m=new B,S=new B;function w(E,O,N){h.fromArray(i,E*3),p.fromArray(i,O*3),g.fromArray(i,N*3),v.fromArray(o,E*2),_.fromArray(o,O*2),x.fromArray(o,N*2),p.sub(h),g.sub(h),_.sub(v),x.sub(v);const H=1/(_.x*x.y-x.x*_.y);isFinite(H)&&(m.copy(p).multiplyScalar(x.y).addScaledVector(g,-_.y).multiplyScalar(H),S.copy(g).multiplyScalar(_.x).addScaledVector(p,-x.x).multiplyScalar(H),u[E].add(m),u[O].add(m),u[N].add(m),d[E].add(S),d[O].add(S),d[N].add(S))}let M=this.groups;M.length===0&&(M=[{start:0,count:r.length}]);for(let E=0,O=M.length;E<O;++E){const N=M[E],H=N.start,K=N.count;for(let Y=H,Q=H+K;Y<Q;Y+=3)w(r[Y+0],r[Y+1],r[Y+2])}const I=new B,P=new B,D=new B,A=new B;function T(E){D.fromArray(s,E*3),A.copy(D);const O=u[E];I.copy(O),I.sub(D.multiplyScalar(D.dot(O))).normalize(),P.crossVectors(A,O);const H=P.dot(d[E])<0?-1:1;l[E*4]=I.x,l[E*4+1]=I.y,l[E*4+2]=I.z,l[E*4+3]=H}for(let E=0,O=M.length;E<O;++E){const N=M[E],H=N.start,K=N.count;for(let Y=H,Q=H+K;Y<Q;Y+=3)T(r[Y+0]),T(r[Y+1]),T(r[Y+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Xt(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let p=0,g=r.count;p<g;p++)r.setXYZ(p,0,0,0);const i=new B,s=new B,o=new B,a=new B,l=new B,u=new B,d=new B,h=new B;if(e)for(let p=0,g=e.count;p<g;p+=3){const v=e.getX(p+0),_=e.getX(p+1),x=e.getX(p+2);i.fromBufferAttribute(n,v),s.fromBufferAttribute(n,_),o.fromBufferAttribute(n,x),d.subVectors(o,s),h.subVectors(i,s),d.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,_),u.fromBufferAttribute(r,x),a.add(d),l.add(d),u.add(d),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(_,l.x,l.y,l.z),r.setXYZ(x,u.x,u.y,u.z)}else for(let p=0,g=n.count;p<g;p+=3)i.fromBufferAttribute(n,p+0),s.fromBufferAttribute(n,p+1),o.fromBufferAttribute(n,p+2),d.subVectors(o,s),h.subVectors(i,s),d.cross(h),r.setXYZ(p+0,d.x,d.y,d.z),r.setXYZ(p+1,d.x,d.y,d.z),r.setXYZ(p+2,d.x,d.y,d.z);this.normalizeNormals(),r.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)gr.fromBufferAttribute(e,n),gr.normalize(),e.setXYZ(n,gr.x,gr.y,gr.z)}toNonIndexed(){function e(a,l){const u=a.array,d=a.itemSize,h=a.normalized,p=new u.constructor(l.length*d);let g=0,v=0;for(let _=0,x=l.length;_<x;_++){a.isInterleavedBufferAttribute?g=l[_]*a.data.stride+a.offset:g=l[_]*d;for(let m=0;m<d;m++)p[v++]=u[g++]}return new Xt(p,d,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Mt,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let d=0,h=u.length;d<h;d++){const p=u[d],g=e(p,r);l.push(g)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],d=[];for(let h=0,p=u.length;h<p;h++){const g=u[h];d.push(g.toJSON(e.data))}d.length>0&&(i[l]=d,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const d=i[u];this.setAttribute(u,d.clone(n))}const s=e.morphAttributes;for(const u in s){const d=[],h=s[u];for(let p=0,g=h.length;p<g;p++)d.push(h[p].clone(n));this.morphAttributes[u]=d}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,d=o.length;u<d;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const JP=new at,lo=new Op,Ag=new Ss,eC=new B,cc=new B,fc=new B,dc=new B,e_=new B,Rg=new B,Ig=new ue,Dg=new ue,Lg=new ue,tC=new B,nC=new B,rC=new B,Og=new B,kg=new B;class Qn extends Gt{constructor(e=new Mt,n=new Ys){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){Rg.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const d=a[l],h=s[l];d!==0&&(e_.fromBufferAttribute(h,e),o?Rg.addScaledVector(e_,d):Rg.addScaledVector(e_.sub(n),d))}n.add(Rg)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Ag.copy(r.boundingSphere),Ag.applyMatrix4(s),lo.copy(e.ray).recast(e.near),!(Ag.containsPoint(lo.origin)===!1&&(lo.intersectSphere(Ag,eC)===null||lo.origin.distanceToSquared(eC)>(e.far-e.near)**2))&&(JP.copy(s).invert(),lo.copy(e.ray).applyMatrix4(JP),!(r.boundingBox!==null&&lo.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n)))}_computeIntersections(e,n){let r;const i=this.geometry,s=this.material,o=i.index,a=i.attributes.position,l=i.attributes.uv,u=i.attributes.uv1,d=i.attributes.normal,h=i.groups,p=i.drawRange;if(o!==null)if(Array.isArray(s))for(let g=0,v=h.length;g<v;g++){const _=h[g],x=s[_.materialIndex],m=Math.max(_.start,p.start),S=Math.min(o.count,Math.min(_.start+_.count,p.start+p.count));for(let w=m,M=S;w<M;w+=3){const I=o.getX(w),P=o.getX(w+1),D=o.getX(w+2);r=Ug(this,x,e,lo,l,u,d,I,P,D),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,n.push(r))}}else{const g=Math.max(0,p.start),v=Math.min(o.count,p.start+p.count);for(let _=g,x=v;_<x;_+=3){const m=o.getX(_),S=o.getX(_+1),w=o.getX(_+2);r=Ug(this,s,e,lo,l,u,d,m,S,w),r&&(r.faceIndex=Math.floor(_/3),n.push(r))}}else if(a!==void 0)if(Array.isArray(s))for(let g=0,v=h.length;g<v;g++){const _=h[g],x=s[_.materialIndex],m=Math.max(_.start,p.start),S=Math.min(a.count,Math.min(_.start+_.count,p.start+p.count));for(let w=m,M=S;w<M;w+=3){const I=w,P=w+1,D=w+2;r=Ug(this,x,e,lo,l,u,d,I,P,D),r&&(r.faceIndex=Math.floor(w/3),r.face.materialIndex=_.materialIndex,n.push(r))}}else{const g=Math.max(0,p.start),v=Math.min(a.count,p.start+p.count);for(let _=g,x=v;_<x;_+=3){const m=_,S=_+1,w=_+2;r=Ug(this,s,e,lo,l,u,d,m,S,w),r&&(r.faceIndex=Math.floor(_/3),n.push(r))}}}}function Y6(t,e,n,r,i,s,o,a){let l;if(e.side===or?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Mo,a),l===null)return null;kg.copy(a),kg.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(kg);return u<n.near||u>n.far?null:{distance:u,point:kg.clone(),object:t}}function Ug(t,e,n,r,i,s,o,a,l,u){t.getVertexPosition(a,cc),t.getVertexPosition(l,fc),t.getVertexPosition(u,dc);const d=Y6(t,e,n,r,cc,fc,dc,Og);if(d){i&&(Ig.fromBufferAttribute(i,a),Dg.fromBufferAttribute(i,l),Lg.fromBufferAttribute(i,u),d.uv=gi.getInterpolation(Og,cc,fc,dc,Ig,Dg,Lg,new ue)),s&&(Ig.fromBufferAttribute(s,a),Dg.fromBufferAttribute(s,l),Lg.fromBufferAttribute(s,u),d.uv1=gi.getInterpolation(Og,cc,fc,dc,Ig,Dg,Lg,new ue),d.uv2=d.uv1),o&&(tC.fromBufferAttribute(o,a),nC.fromBufferAttribute(o,l),rC.fromBufferAttribute(o,u),d.normal=gi.getInterpolation(Og,cc,fc,dc,tC,nC,rC,new B),d.normal.dot(r.direction)>0&&d.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new B,materialIndex:0};gi.getNormal(cc,fc,dc,h.normal),d.face=h}return d}class hl extends Mt{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],d=[],h=[];let p=0,g=0;v("z","y","x",-1,-1,r,n,e,o,s,0),v("z","y","x",1,-1,r,n,-e,o,s,1),v("x","z","y",1,1,e,r,n,i,o,2),v("x","z","y",1,-1,e,r,-n,i,o,3),v("x","y","z",1,-1,e,n,r,i,s,4),v("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new et(u,3)),this.setAttribute("normal",new et(d,3)),this.setAttribute("uv",new et(h,2));function v(_,x,m,S,w,M,I,P,D,A,T){const E=M/D,O=I/A,N=M/2,H=I/2,K=P/2,Y=D+1,Q=A+1;let ee=0,F=0;const j=new B;for(let V=0;V<Q;V++){const ce=V*O-H;for(let ae=0;ae<Y;ae++){const fe=ae*E-N;j[_]=fe*S,j[x]=ce*w,j[m]=K,u.push(j.x,j.y,j.z),j[_]=0,j[x]=0,j[m]=P>0?1:-1,d.push(j.x,j.y,j.z),h.push(ae/D),h.push(1-V/A),ee+=1}}for(let V=0;V<A;V++)for(let ce=0;ce<D;ce++){const ae=p+ce+Y*V,fe=p+ce+Y*(V+1),de=p+(ce+1)+Y*(V+1),De=p+(ce+1)+Y*V;l.push(ae,fe,De),l.push(fe,de,De),F+=6}a.addGroup(g,F,T),g+=F,p+=ee}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Mf(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function Jr(t){const e={};for(let n=0;n<t.length;n++){const r=Mf(t[n]);for(const i in r)e[i]=r[i]}return e}function q6(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function cO(t){return t.getRenderTarget()===null?t.outputColorSpace:Xs}const Ef={clone:Mf,merge:Jr};var Z6=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Q6=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ot extends er{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Z6,this.fragmentShader=Q6,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Mf(e.uniforms),this.uniformsGroups=q6(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class zf extends Gt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new at,this.projectionMatrix=new at,this.projectionMatrixInverse=new at}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let jt=class extends zf{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=bf*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(lu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return bf*2*Math.atan(Math.tan(lu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(lu*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}};const hc=-90,pc=1;class IM extends Gt{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r;const i=new jt(hc,pc,e,n);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const s=new jt(hc,pc,e,n);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const o=new jt(hc,pc,e,n);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(0,1,0),this.add(o);const a=new jt(hc,pc,e,n);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const l=new jt(hc,pc,e,n);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new jt(hc,pc,e,n);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget,[i,s,o,a,l,u]=this.children,d=e.getRenderTarget(),h=e.toneMapping,p=e.xr.enabled;e.toneMapping=Ws,e.xr.enabled=!1;const g=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,s),e.setRenderTarget(r,2),e.render(n,o),e.setRenderTarget(r,3),e.render(n,a),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=g,e.setRenderTarget(r,5),e.render(n,u),e.setRenderTarget(d),e.toneMapping=h,e.xr.enabled=p,r.texture.needsPMREMUpdate=!0}}class kp extends Bn{constructor(e,n,r,i,s,o,a,l,u,d){e=e!==void 0?e:[],n=n!==void 0?n:il,super(e,n,r,i,s,o,a,l,u,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class py extends Lt{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(Th("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===ps?wt:tl),this.texture=new kp(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:ot}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new hl(5,5,5),s=new Ot({name:"CubemapFromEquirect",uniforms:Mf(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:or,blending:xn});s.uniforms.tEquirect.value=n;const o=new Qn(i,s),a=n.minFilter;return n.minFilter===ol&&(n.minFilter=ot),new IM(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const t_=new B,J6=new B,e8=new Rt;class za{constructor(e=new B(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=t_.subVectors(r,n).cross(J6.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(t_),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||e8.getNormalMatrix(e),i=this.coplanarPoint(t_).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Il=new Ss,Ng=new B;class my{constructor(e=new za,n=new za,r=new za,i=new za,s=new za,o=new za){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e){const n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],l=r[4],u=r[5],d=r[6],h=r[7],p=r[8],g=r[9],v=r[10],_=r[11],x=r[12],m=r[13],S=r[14],w=r[15];return n[0].setComponents(a-i,h-l,_-p,w-x).normalize(),n[1].setComponents(a+i,h+l,_+p,w+x).normalize(),n[2].setComponents(a+s,h+u,_+g,w+m).normalize(),n[3].setComponents(a-s,h-u,_-g,w-m).normalize(),n[4].setComponents(a-o,h-d,_-v,w-S).normalize(),n[5].setComponents(a+o,h+d,_+v,w+S).normalize(),this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Il.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),Il.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Il)}intersectsSprite(e){return Il.center.set(0,0,0),Il.radius=.7071067811865476,Il.applyMatrix4(e.matrixWorld),this.intersectsSphere(Il)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(Ng.x=i.normal.x>0?e.max.x:e.min.x,Ng.y=i.normal.y>0?e.max.y:e.min.y,Ng.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ng)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function fO(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function t8(t,e){const n=e.isWebGL2,r=new WeakMap;function i(u,d){const h=u.array,p=u.usage,g=t.createBuffer();t.bindBuffer(d,g),t.bufferData(d,h,p),u.onUploadCallback();let v;if(h instanceof Float32Array)v=t.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=t.SHORT;else if(h instanceof Uint32Array)v=t.UNSIGNED_INT;else if(h instanceof Int32Array)v=t.INT;else if(h instanceof Int8Array)v=t.BYTE;else if(h instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:g,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function s(u,d,h){const p=d.array,g=d.updateRange;t.bindBuffer(h,u),g.count===-1?t.bufferSubData(h,0,p):(n?t.bufferSubData(h,g.offset*p.BYTES_PER_ELEMENT,p,g.offset,g.count):t.bufferSubData(h,g.offset*p.BYTES_PER_ELEMENT,p.subarray(g.offset,g.offset+g.count)),g.count=-1),d.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const d=r.get(u);d&&(t.deleteBuffer(d.buffer),r.delete(u))}function l(u,d){if(u.isGLBufferAttribute){const p=r.get(u);(!p||p.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h===void 0?r.set(u,i(u,d)):h.version<u.version&&(s(h.buffer,u,d),h.version=u.version)}return{get:o,remove:a,update:l}}class Ru extends Mt{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),u=a+1,d=l+1,h=e/a,p=n/l,g=[],v=[],_=[],x=[];for(let m=0;m<d;m++){const S=m*p-o;for(let w=0;w<u;w++){const M=w*h-s;v.push(M,-S,0),_.push(0,0,1),x.push(w/a),x.push(1-m/l)}}for(let m=0;m<l;m++)for(let S=0;S<a;S++){const w=S+u*m,M=S+u*(m+1),I=S+1+u*(m+1),P=S+1+u*m;g.push(w,M,P),g.push(M,I,P)}this.setIndex(g),this.setAttribute("position",new et(v,3)),this.setAttribute("normal",new et(_,3)),this.setAttribute("uv",new et(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ru(e.width,e.height,e.widthSegments,e.heightSegments)}}var n8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,r8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,i8=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,s8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,o8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,a8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,l8="vec3 transformed = vec3( position );",u8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,c8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,f8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,d8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,h8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,p8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,m8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,g8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,v8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,y8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,x8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,_8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,S8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,w8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,b8=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,M8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,E8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,T8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,P8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,C8="gl_FragColor = linearToOutputTexel( gl_FragColor );",A8=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,R8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,I8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,D8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,L8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,O8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,k8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,U8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,N8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,F8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,z8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,B8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,H8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,V8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,G8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,W8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,$8=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,j8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,X8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,K8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Y8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,q8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif`,Z8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Q8=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,J8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,eH=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,tH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,nH=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,rH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,iH=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,sH=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,oH=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,aH=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,lH=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,uH=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,cH=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,fH=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,dH=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,hH=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,pH=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,mH=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#ifdef USE_NORMALMAP_TANGENTSPACE
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,gH=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,vH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yH=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xH=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,_H=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,SH=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,wH=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,bH=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,MH=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,EH=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,TH=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,PH=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,CH=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,AH=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,RH=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,IH=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,DH=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,LH=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,OH=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,kH=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,UH=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,NH=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,FH=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,zH=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,BH=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,HH=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,VH=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,GH=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,WH=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,$H=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,jH=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,XH=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,KH=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,YH=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,qH=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ZH=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,QH=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,JH=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,eV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,tV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,nV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,rV=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,iV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,sV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,oV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,aV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,lV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,uV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fV=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,hV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,gV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,xV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_V=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,wV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bV=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,MV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,EV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,TV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PV=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,AV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,RV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,ut={alphamap_fragment:n8,alphamap_pars_fragment:r8,alphatest_fragment:i8,alphatest_pars_fragment:s8,aomap_fragment:o8,aomap_pars_fragment:a8,begin_vertex:l8,beginnormal_vertex:u8,bsdfs:c8,iridescence_fragment:f8,bumpmap_pars_fragment:d8,clipping_planes_fragment:h8,clipping_planes_pars_fragment:p8,clipping_planes_pars_vertex:m8,clipping_planes_vertex:g8,color_fragment:v8,color_pars_fragment:y8,color_pars_vertex:x8,color_vertex:_8,common:S8,cube_uv_reflection_fragment:w8,defaultnormal_vertex:b8,displacementmap_pars_vertex:M8,displacementmap_vertex:E8,emissivemap_fragment:T8,emissivemap_pars_fragment:P8,encodings_fragment:C8,encodings_pars_fragment:A8,envmap_fragment:R8,envmap_common_pars_fragment:I8,envmap_pars_fragment:D8,envmap_pars_vertex:L8,envmap_physical_pars_fragment:$8,envmap_vertex:O8,fog_vertex:k8,fog_pars_vertex:U8,fog_fragment:N8,fog_pars_fragment:F8,gradientmap_pars_fragment:z8,lightmap_fragment:B8,lightmap_pars_fragment:H8,lights_lambert_fragment:V8,lights_lambert_pars_fragment:G8,lights_pars_begin:W8,lights_toon_fragment:j8,lights_toon_pars_fragment:X8,lights_phong_fragment:K8,lights_phong_pars_fragment:Y8,lights_physical_fragment:q8,lights_physical_pars_fragment:Z8,lights_fragment_begin:Q8,lights_fragment_maps:J8,lights_fragment_end:eH,logdepthbuf_fragment:tH,logdepthbuf_pars_fragment:nH,logdepthbuf_pars_vertex:rH,logdepthbuf_vertex:iH,map_fragment:sH,map_pars_fragment:oH,map_particle_fragment:aH,map_particle_pars_fragment:lH,metalnessmap_fragment:uH,metalnessmap_pars_fragment:cH,morphcolor_vertex:fH,morphnormal_vertex:dH,morphtarget_pars_vertex:hH,morphtarget_vertex:pH,normal_fragment_begin:mH,normal_fragment_maps:gH,normal_pars_fragment:vH,normal_pars_vertex:yH,normal_vertex:xH,normalmap_pars_fragment:_H,clearcoat_normal_fragment_begin:SH,clearcoat_normal_fragment_maps:wH,clearcoat_pars_fragment:bH,iridescence_pars_fragment:MH,output_fragment:EH,packing:TH,premultiplied_alpha_fragment:PH,project_vertex:CH,dithering_fragment:AH,dithering_pars_fragment:RH,roughnessmap_fragment:IH,roughnessmap_pars_fragment:DH,shadowmap_pars_fragment:LH,shadowmap_pars_vertex:OH,shadowmap_vertex:kH,shadowmask_pars_fragment:UH,skinbase_vertex:NH,skinning_pars_vertex:FH,skinning_vertex:zH,skinnormal_vertex:BH,specularmap_fragment:HH,specularmap_pars_fragment:VH,tonemapping_fragment:GH,tonemapping_pars_fragment:WH,transmission_fragment:$H,transmission_pars_fragment:jH,uv_pars_fragment:XH,uv_pars_vertex:KH,uv_vertex:YH,worldpos_vertex:qH,background_vert:ZH,background_frag:QH,backgroundCube_vert:JH,backgroundCube_frag:eV,cube_vert:tV,cube_frag:nV,depth_vert:rV,depth_frag:iV,distanceRGBA_vert:sV,distanceRGBA_frag:oV,equirect_vert:aV,equirect_frag:lV,linedashed_vert:uV,linedashed_frag:cV,meshbasic_vert:fV,meshbasic_frag:dV,meshlambert_vert:hV,meshlambert_frag:pV,meshmatcap_vert:mV,meshmatcap_frag:gV,meshnormal_vert:vV,meshnormal_frag:yV,meshphong_vert:xV,meshphong_frag:_V,meshphysical_vert:SV,meshphysical_frag:wV,meshtoon_vert:bV,meshtoon_frag:MV,points_vert:EV,points_frag:TV,shadow_vert:PV,shadow_frag:CV,sprite_vert:AV,sprite_frag:RV},Ve={common:{diffuse:{value:new ze(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new ue(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ze(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ze(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new ze(16777215)},opacity:{value:1},center:{value:new ue(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaTest:{value:0}}},ni={basic:{uniforms:Jr([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.fog]),vertexShader:ut.meshbasic_vert,fragmentShader:ut.meshbasic_frag},lambert:{uniforms:Jr([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new ze(0)}}]),vertexShader:ut.meshlambert_vert,fragmentShader:ut.meshlambert_frag},phong:{uniforms:Jr([Ve.common,Ve.specularmap,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,Ve.lights,{emissive:{value:new ze(0)},specular:{value:new ze(1118481)},shininess:{value:30}}]),vertexShader:ut.meshphong_vert,fragmentShader:ut.meshphong_frag},standard:{uniforms:Jr([Ve.common,Ve.envmap,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.roughnessmap,Ve.metalnessmap,Ve.fog,Ve.lights,{emissive:{value:new ze(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag},toon:{uniforms:Jr([Ve.common,Ve.aomap,Ve.lightmap,Ve.emissivemap,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.gradientmap,Ve.fog,Ve.lights,{emissive:{value:new ze(0)}}]),vertexShader:ut.meshtoon_vert,fragmentShader:ut.meshtoon_frag},matcap:{uniforms:Jr([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,Ve.fog,{matcap:{value:null}}]),vertexShader:ut.meshmatcap_vert,fragmentShader:ut.meshmatcap_frag},points:{uniforms:Jr([Ve.points,Ve.fog]),vertexShader:ut.points_vert,fragmentShader:ut.points_frag},dashed:{uniforms:Jr([Ve.common,Ve.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ut.linedashed_vert,fragmentShader:ut.linedashed_frag},depth:{uniforms:Jr([Ve.common,Ve.displacementmap]),vertexShader:ut.depth_vert,fragmentShader:ut.depth_frag},normal:{uniforms:Jr([Ve.common,Ve.bumpmap,Ve.normalmap,Ve.displacementmap,{opacity:{value:1}}]),vertexShader:ut.meshnormal_vert,fragmentShader:ut.meshnormal_frag},sprite:{uniforms:Jr([Ve.sprite,Ve.fog]),vertexShader:ut.sprite_vert,fragmentShader:ut.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ut.background_vert,fragmentShader:ut.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ut.backgroundCube_vert,fragmentShader:ut.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ut.cube_vert,fragmentShader:ut.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ut.equirect_vert,fragmentShader:ut.equirect_frag},distanceRGBA:{uniforms:Jr([Ve.common,Ve.displacementmap,{referencePosition:{value:new B},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ut.distanceRGBA_vert,fragmentShader:ut.distanceRGBA_frag},shadow:{uniforms:Jr([Ve.lights,Ve.fog,{color:{value:new ze(0)},opacity:{value:1}}]),vertexShader:ut.shadow_vert,fragmentShader:ut.shadow_frag}};ni.physical={uniforms:Jr([ni.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new ue(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new ze(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new ue},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new ze(0)},specularColor:{value:new ze(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt}}]),vertexShader:ut.meshphysical_vert,fragmentShader:ut.meshphysical_frag};const Fg={r:0,b:0,g:0};function IV(t,e,n,r,i,s,o){const a=new ze(0);let l=s===!0?0:1,u,d,h=null,p=0,g=null;function v(x,m){let S=!1,w=m.isScene===!0?m.background:null;switch(w&&w.isTexture&&(w=(m.backgroundBlurriness>0?n:e).get(w)),w===null?_(a,l):w&&w.isColor&&(_(w,1),S=!0),t.xr.getEnvironmentBlendMode()){case"opaque":S=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),S=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),S=!0;break}(t.autoClear||S)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),w&&(w.isCubeTexture||w.mapping===Nf)?(d===void 0&&(d=new Qn(new hl(1,1,1),new Ot({name:"BackgroundCubeMaterial",uniforms:Mf(ni.backgroundCube.uniforms),vertexShader:ni.backgroundCube.vertexShader,fragmentShader:ni.backgroundCube.fragmentShader,side:or,depthTest:!1,depthWrite:!1,fog:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(P,D,A){this.matrixWorld.copyPosition(A.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(d)),d.material.uniforms.envMap.value=w,d.material.uniforms.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,d.material.toneMapped=w.colorSpace!==wt,(h!==w||p!==w.version||g!==t.toneMapping)&&(d.material.needsUpdate=!0,h=w,p=w.version,g=t.toneMapping),d.layers.enableAll(),x.unshift(d,d.geometry,d.material,0,0,null)):w&&w.isTexture&&(u===void 0&&(u=new Qn(new Ru(2,2),new Ot({name:"BackgroundMaterial",uniforms:Mf(ni.background.uniforms),vertexShader:ni.background.vertexShader,fragmentShader:ni.background.fragmentShader,side:Mo,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=w,u.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,u.material.toneMapped=w.colorSpace!==wt,w.matrixAutoUpdate===!0&&w.updateMatrix(),u.material.uniforms.uvTransform.value.copy(w.matrix),(h!==w||p!==w.version||g!==t.toneMapping)&&(u.material.needsUpdate=!0,h=w,p=w.version,g=t.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function _(x,m){x.getRGB(Fg,cO(t)),r.buffers.color.setClear(Fg.r,Fg.g,Fg.b,m,o)}return{getClearColor:function(){return a},setClearColor:function(x,m=1){a.set(x),l=m,_(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,_(a,l)},render:v}}function DV(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=x(null);let u=l,d=!1;function h(K,Y,Q,ee,F){let j=!1;if(o){const V=_(ee,Q,Y);u!==V&&(u=V,g(u.object)),j=m(K,ee,Q,F),j&&S(K,ee,Q,F)}else{const V=Y.wireframe===!0;(u.geometry!==ee.id||u.program!==Q.id||u.wireframe!==V)&&(u.geometry=ee.id,u.program=Q.id,u.wireframe=V,j=!0)}F!==null&&n.update(F,t.ELEMENT_ARRAY_BUFFER),(j||d)&&(d=!1,A(K,Y,Q,ee),F!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(F).buffer))}function p(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function g(K){return r.isWebGL2?t.bindVertexArray(K):s.bindVertexArrayOES(K)}function v(K){return r.isWebGL2?t.deleteVertexArray(K):s.deleteVertexArrayOES(K)}function _(K,Y,Q){const ee=Q.wireframe===!0;let F=a[K.id];F===void 0&&(F={},a[K.id]=F);let j=F[Y.id];j===void 0&&(j={},F[Y.id]=j);let V=j[ee];return V===void 0&&(V=x(p()),j[ee]=V),V}function x(K){const Y=[],Q=[],ee=[];for(let F=0;F<i;F++)Y[F]=0,Q[F]=0,ee[F]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:Q,attributeDivisors:ee,object:K,attributes:{},index:null}}function m(K,Y,Q,ee){const F=u.attributes,j=Y.attributes;let V=0;const ce=Q.getAttributes();for(const ae in ce)if(ce[ae].location>=0){const de=F[ae];let De=j[ae];if(De===void 0&&(ae==="instanceMatrix"&&K.instanceMatrix&&(De=K.instanceMatrix),ae==="instanceColor"&&K.instanceColor&&(De=K.instanceColor)),de===void 0||de.attribute!==De||De&&de.data!==De.data)return!0;V++}return u.attributesNum!==V||u.index!==ee}function S(K,Y,Q,ee){const F={},j=Y.attributes;let V=0;const ce=Q.getAttributes();for(const ae in ce)if(ce[ae].location>=0){let de=j[ae];de===void 0&&(ae==="instanceMatrix"&&K.instanceMatrix&&(de=K.instanceMatrix),ae==="instanceColor"&&K.instanceColor&&(de=K.instanceColor));const De={};De.attribute=de,de&&de.data&&(De.data=de.data),F[ae]=De,V++}u.attributes=F,u.attributesNum=V,u.index=ee}function w(){const K=u.newAttributes;for(let Y=0,Q=K.length;Y<Q;Y++)K[Y]=0}function M(K){I(K,0)}function I(K,Y){const Q=u.newAttributes,ee=u.enabledAttributes,F=u.attributeDivisors;Q[K]=1,ee[K]===0&&(t.enableVertexAttribArray(K),ee[K]=1),F[K]!==Y&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](K,Y),F[K]=Y)}function P(){const K=u.newAttributes,Y=u.enabledAttributes;for(let Q=0,ee=Y.length;Q<ee;Q++)Y[Q]!==K[Q]&&(t.disableVertexAttribArray(Q),Y[Q]=0)}function D(K,Y,Q,ee,F,j){r.isWebGL2===!0&&(Q===t.INT||Q===t.UNSIGNED_INT)?t.vertexAttribIPointer(K,Y,Q,F,j):t.vertexAttribPointer(K,Y,Q,ee,F,j)}function A(K,Y,Q,ee){if(r.isWebGL2===!1&&(K.isInstancedMesh||ee.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;w();const F=ee.attributes,j=Q.getAttributes(),V=Y.defaultAttributeValues;for(const ce in j){const ae=j[ce];if(ae.location>=0){let fe=F[ce];if(fe===void 0&&(ce==="instanceMatrix"&&K.instanceMatrix&&(fe=K.instanceMatrix),ce==="instanceColor"&&K.instanceColor&&(fe=K.instanceColor)),fe!==void 0){const de=fe.normalized,De=fe.itemSize,Ee=n.get(fe);if(Ee===void 0)continue;const J=Ee.buffer,ve=Ee.type,U=Ee.bytesPerElement;if(fe.isInterleavedBufferAttribute){const z=fe.data,W=z.stride,ne=fe.offset;if(z.isInstancedInterleavedBuffer){for(let q=0;q<ae.locationSize;q++)I(ae.location+q,z.meshPerAttribute);K.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let q=0;q<ae.locationSize;q++)M(ae.location+q);t.bindBuffer(t.ARRAY_BUFFER,J);for(let q=0;q<ae.locationSize;q++)D(ae.location+q,De/ae.locationSize,ve,de,W*U,(ne+De/ae.locationSize*q)*U)}else{if(fe.isInstancedBufferAttribute){for(let z=0;z<ae.locationSize;z++)I(ae.location+z,fe.meshPerAttribute);K.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=fe.meshPerAttribute*fe.count)}else for(let z=0;z<ae.locationSize;z++)M(ae.location+z);t.bindBuffer(t.ARRAY_BUFFER,J);for(let z=0;z<ae.locationSize;z++)D(ae.location+z,De/ae.locationSize,ve,de,De*U,De/ae.locationSize*z*U)}}else if(V!==void 0){const de=V[ce];if(de!==void 0)switch(de.length){case 2:t.vertexAttrib2fv(ae.location,de);break;case 3:t.vertexAttrib3fv(ae.location,de);break;case 4:t.vertexAttrib4fv(ae.location,de);break;default:t.vertexAttrib1fv(ae.location,de)}}}}P()}function T(){N();for(const K in a){const Y=a[K];for(const Q in Y){const ee=Y[Q];for(const F in ee)v(ee[F].object),delete ee[F];delete Y[Q]}delete a[K]}}function E(K){if(a[K.id]===void 0)return;const Y=a[K.id];for(const Q in Y){const ee=Y[Q];for(const F in ee)v(ee[F].object),delete ee[F];delete Y[Q]}delete a[K.id]}function O(K){for(const Y in a){const Q=a[Y];if(Q[K.id]===void 0)continue;const ee=Q[K.id];for(const F in ee)v(ee[F].object),delete ee[F];delete Q[K.id]}}function N(){H(),d=!0,u!==l&&(u=l,g(u.object))}function H(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:N,resetDefaultState:H,dispose:T,releaseStatesOfGeometry:E,releaseStatesOfProgram:O,initAttributes:w,enableAttribute:M,disableUnusedAttributes:P}}function LV(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,d){t.drawArrays(s,u,d),n.update(d,s,1)}function l(u,d,h){if(h===0)return;let p,g;if(i)p=t,g="drawArraysInstanced";else if(p=e.get("ANGLE_instanced_arrays"),g="drawArraysInstancedANGLE",p===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}p[g](s,u,d,h),n.update(d,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function OV(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const D=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(D){if(D==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";D="mediump"}return D==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),d=n.logarithmicDepthBuffer===!0,h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),p=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),g=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),_=t.getParameter(t.MAX_VERTEX_ATTRIBS),x=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),m=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),w=p>0,M=o||e.has("OES_texture_float"),I=w&&M,P=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:d,maxTextures:h,maxVertexTextures:p,maxTextureSize:g,maxCubemapSize:v,maxAttributes:_,maxVertexUniforms:x,maxVaryings:m,maxFragmentUniforms:S,vertexTextures:w,floatFragmentTextures:M,floatVertexTextures:I,maxSamples:P}}function kV(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new za,a=new Rt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,p){const g=h.length!==0||p||r!==0||i;return i=p,r=h.length,g},this.beginShadows=function(){s=!0,d(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,p){n=d(h,p,0)},this.setState=function(h,p,g){const v=h.clippingPlanes,_=h.clipIntersection,x=h.clipShadows,m=t.get(h);if(!i||v===null||v.length===0||s&&!x)s?d(null):u();else{const S=s?0:r,w=S*4;let M=m.clippingState||null;l.value=M,M=d(v,p,w,g);for(let I=0;I!==w;++I)M[I]=n[I];m.clippingState=M,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function d(h,p,g,v){const _=h!==null?h.length:0;let x=null;if(_!==0){if(x=l.value,v!==!0||x===null){const m=g+_*4,S=p.matrixWorldInverse;a.getNormalMatrix(S),(x===null||x.length<m)&&(x=new Float32Array(m));for(let w=0,M=g;w!==_;++w,M+=4)o.copy(h[w]).applyMatrix4(S,a),o.normal.toArray(x,M),x[M+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=_,e.numIntersection=0,x}}function UV(t){let e=new WeakMap;function n(o,a){return a===rp?o.mapping=il:a===ip&&(o.mapping=sl),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===rp||a===ip)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new py(l.height/2);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",i),n(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class $s extends zf{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=d*this.view.offsetY,l=a-d*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Yc=4,iC=[.125,.215,.35,.446,.526,.582],jl=20,n_=new $s,sC=new ze;let r_=null;const Vl=(1+Math.sqrt(5))/2,mc=1/Vl,oC=[new B(1,1,1),new B(-1,1,1),new B(1,1,-1),new B(-1,1,-1),new B(0,Vl,mc),new B(0,Vl,-mc),new B(mc,0,Vl),new B(-mc,0,Vl),new B(Vl,mc,0),new B(-Vl,mc,0)];class R0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){r_=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=uC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=lC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(r_),e.scissorTest=!1,zg(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===il||e.mapping===sl?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),r_=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:ot,minFilter:ot,generateMipmaps:!1,type:wi,format:vn,colorSpace:Xs,depthBuffer:!1},i=aC(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=aC(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=NV(s)),this._blurMaterial=FV(s,e,n)}return i}_compileMaterial(e){const n=new Qn(this._lodPlanes[0],e);this._renderer.compile(n,n_)}_sceneToCubeUV(e,n,r,i){const a=new jt(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],d=this._renderer,h=d.autoClear,p=d.toneMapping;d.getClearColor(sC),d.toneMapping=Ws,d.autoClear=!1;const g=new Ys({name:"PMREM.Background",side:or,depthWrite:!1,depthTest:!1}),v=new Qn(new hl,g);let _=!1;const x=e.background;x?x.isColor&&(g.color.copy(x),e.background=null,_=!0):(g.color.copy(sC),_=!0);for(let m=0;m<6;m++){const S=m%3;S===0?(a.up.set(0,l[m],0),a.lookAt(u[m],0,0)):S===1?(a.up.set(0,0,l[m]),a.lookAt(0,u[m],0)):(a.up.set(0,l[m],0),a.lookAt(0,0,u[m]));const w=this._cubeSize;zg(i,S*w,m>2?w:0,w,w),d.setRenderTarget(i),_&&d.render(v,a),d.render(e,a)}v.geometry.dispose(),v.material.dispose(),d.toneMapping=p,d.autoClear=h,e.background=x}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===il||e.mapping===sl;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=uC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=lC());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new Qn(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;zg(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,n_)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=oC[(i-1)%oC.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const d=3,h=new Qn(this._lodPlanes[i],u),p=u.uniforms,g=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*jl-1),_=s/v,x=isFinite(s)?1+Math.floor(d*_):jl;x>jl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${jl}`);const m=[];let S=0;for(let D=0;D<jl;++D){const A=D/_,T=Math.exp(-A*A/2);m.push(T),D===0?S+=T:D<x&&(S+=2*T)}for(let D=0;D<m.length;D++)m[D]=m[D]/S;p.envMap.value=e.texture,p.samples.value=x,p.weights.value=m,p.latitudinal.value=o==="latitudinal",a&&(p.poleAxis.value=a);const{_lodMax:w}=this;p.dTheta.value=v,p.mipInt.value=w-r;const M=this._sizeLods[i],I=3*M*(i>w-Yc?i-w+Yc:0),P=4*(this._cubeSize-M);zg(n,I,P,3*M,2*M),l.setRenderTarget(n),l.render(h,n_)}}function NV(t){const e=[],n=[],r=[];let i=t;const s=t-Yc+1+iC.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-Yc?l=iC[o-t+Yc-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),d=-u,h=1+u,p=[d,d,h,d,h,h,d,d,h,h,d,h],g=6,v=6,_=3,x=2,m=1,S=new Float32Array(_*v*g),w=new Float32Array(x*v*g),M=new Float32Array(m*v*g);for(let P=0;P<g;P++){const D=P%3*2/3-1,A=P>2?0:-1,T=[D,A,0,D+2/3,A,0,D+2/3,A+1,0,D,A,0,D+2/3,A+1,0,D,A+1,0];S.set(T,_*v*P),w.set(p,x*v*P);const E=[P,P,P,P,P,P];M.set(E,m*v*P)}const I=new Mt;I.setAttribute("position",new Xt(S,_)),I.setAttribute("uv",new Xt(w,x)),I.setAttribute("faceIndex",new Xt(M,m)),e.push(I),i>Yc&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function aC(t,e,n){const r=new Lt(t,e,n);return r.texture.mapping=Nf,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function zg(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function FV(t,e,n){const r=new Float32Array(jl),i=new B(0,1,0);return new Ot({name:"SphericalGaussianBlur",defines:{n:jl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xn,depthTest:!1,depthWrite:!1})}function lC(){return new Ot({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xn,depthTest:!1,depthWrite:!1})}function uC(){return new Ot({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xn,depthTest:!1,depthWrite:!1})}function DM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zV(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===rp||l===ip,d=l===il||l===sl;if(u||d)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return n===null&&(n=new R0(t)),h=u?n.fromEquirectangular(a,h):n.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||d&&h&&i(h)){n===null&&(n=new R0(t));const p=u?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,p),a.addEventListener("dispose",s),p.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let d=0;d<u;d++)a[d]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function BV(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function HV(t,e,n,r){const i={},s=new WeakMap;function o(h){const p=h.target;p.index!==null&&e.remove(p.index);for(const v in p.attributes)e.remove(p.attributes[v]);p.removeEventListener("dispose",o),delete i[p.id];const g=s.get(p);g&&(e.remove(g),s.delete(p)),r.releaseStatesOfGeometry(p),p.isInstancedBufferGeometry===!0&&delete p._maxInstanceCount,n.memory.geometries--}function a(h,p){return i[p.id]===!0||(p.addEventListener("dispose",o),i[p.id]=!0,n.memory.geometries++),p}function l(h){const p=h.attributes;for(const v in p)e.update(p[v],t.ARRAY_BUFFER);const g=h.morphAttributes;for(const v in g){const _=g[v];for(let x=0,m=_.length;x<m;x++)e.update(_[x],t.ARRAY_BUFFER)}}function u(h){const p=[],g=h.index,v=h.attributes.position;let _=0;if(g!==null){const S=g.array;_=g.version;for(let w=0,M=S.length;w<M;w+=3){const I=S[w+0],P=S[w+1],D=S[w+2];p.push(I,P,P,D,D,I)}}else{const S=v.array;_=v.version;for(let w=0,M=S.length/3-1;w<M;w+=3){const I=w+0,P=w+1,D=w+2;p.push(I,P,P,D,D,I)}}const x=new(aO(p)?RM:AM)(p,1);x.version=_;const m=s.get(h);m&&e.remove(m),s.set(h,x)}function d(h){const p=s.get(h);if(p){const g=h.index;g!==null&&p.version<g.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:d}}function VV(t,e,n,r){const i=r.isWebGL2;let s;function o(p){s=p}let a,l;function u(p){a=p.type,l=p.bytesPerElement}function d(p,g){t.drawElements(s,g,a,p*l),n.update(g,s,1)}function h(p,g,v){if(v===0)return;let _,x;if(i)_=t,x="drawElementsInstanced";else if(_=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",_===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}_[x](s,g,a,p*l,v),n.update(g,s,v)}this.setMode=o,this.setIndex=u,this.render=d,this.renderInstances=h}function GV(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function WV(t,e){return t[0]-e[0]}function $V(t,e){return Math.abs(e[1])-Math.abs(t[1])}function jV(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new bt,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,d,h){const p=u.morphTargetInfluences;if(e.isWebGL2===!0){const v=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=v!==void 0?v.length:0;let x=s.get(d);if(x===void 0||x.count!==_){let Y=function(){H.dispose(),s.delete(d),d.removeEventListener("dispose",Y)};var g=Y;x!==void 0&&x.texture.dispose();const w=d.morphAttributes.position!==void 0,M=d.morphAttributes.normal!==void 0,I=d.morphAttributes.color!==void 0,P=d.morphAttributes.position||[],D=d.morphAttributes.normal||[],A=d.morphAttributes.color||[];let T=0;w===!0&&(T=1),M===!0&&(T=2),I===!0&&(T=3);let E=d.attributes.position.count*T,O=1;E>e.maxTextureSize&&(O=Math.ceil(E/e.maxTextureSize),E=e.maxTextureSize);const N=new Float32Array(E*O*4*_),H=new hy(N,E,O,_);H.type=Nn,H.needsUpdate=!0;const K=T*4;for(let Q=0;Q<_;Q++){const ee=P[Q],F=D[Q],j=A[Q],V=E*O*4*Q;for(let ce=0;ce<ee.count;ce++){const ae=ce*K;w===!0&&(o.fromBufferAttribute(ee,ce),N[V+ae+0]=o.x,N[V+ae+1]=o.y,N[V+ae+2]=o.z,N[V+ae+3]=0),M===!0&&(o.fromBufferAttribute(F,ce),N[V+ae+4]=o.x,N[V+ae+5]=o.y,N[V+ae+6]=o.z,N[V+ae+7]=0),I===!0&&(o.fromBufferAttribute(j,ce),N[V+ae+8]=o.x,N[V+ae+9]=o.y,N[V+ae+10]=o.z,N[V+ae+11]=j.itemSize===4?o.w:1)}}x={count:_,texture:H,size:new ue(E,O)},s.set(d,x),d.addEventListener("dispose",Y)}let m=0;for(let w=0;w<p.length;w++)m+=p[w];const S=d.morphTargetsRelative?1:1-m;h.getUniforms().setValue(t,"morphTargetBaseInfluence",S),h.getUniforms().setValue(t,"morphTargetInfluences",p),h.getUniforms().setValue(t,"morphTargetsTexture",x.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",x.size)}else{const v=p===void 0?0:p.length;let _=r[d.id];if(_===void 0||_.length!==v){_=[];for(let M=0;M<v;M++)_[M]=[M,0];r[d.id]=_}for(let M=0;M<v;M++){const I=_[M];I[0]=M,I[1]=p[M]}_.sort($V);for(let M=0;M<8;M++)M<v&&_[M][1]?(a[M][0]=_[M][0],a[M][1]=_[M][1]):(a[M][0]=Number.MAX_SAFE_INTEGER,a[M][1]=0);a.sort(WV);const x=d.morphAttributes.position,m=d.morphAttributes.normal;let S=0;for(let M=0;M<8;M++){const I=a[M],P=I[0],D=I[1];P!==Number.MAX_SAFE_INTEGER&&D?(x&&d.getAttribute("morphTarget"+M)!==x[P]&&d.setAttribute("morphTarget"+M,x[P]),m&&d.getAttribute("morphNormal"+M)!==m[P]&&d.setAttribute("morphNormal"+M,m[P]),i[M]=D,S+=D):(x&&d.hasAttribute("morphTarget"+M)===!0&&d.deleteAttribute("morphTarget"+M),m&&d.hasAttribute("morphNormal"+M)===!0&&d.deleteAttribute("morphNormal"+M),i[M]=0)}const w=d.morphTargetsRelative?1:1-S;h.getUniforms().setValue(t,"morphTargetBaseInfluence",w),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function XV(t,e,n,r){let i=new WeakMap;function s(l){const u=r.render.frame,d=l.geometry,h=e.get(l,d);return i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER)),h}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}const dO=new Bn,hO=new hy,pO=new uu,mO=new kp,cC=[],fC=[],dC=new Float32Array(16),hC=new Float32Array(9),pC=new Float32Array(4);function Bf(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=cC[i];if(s===void 0&&(s=new Float32Array(i),cC[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function ur(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function cr(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function gy(t,e){let n=fC[e];n===void 0&&(n=new Int32Array(e),fC[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function KV(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function YV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ur(n,e))return;t.uniform2fv(this.addr,e),cr(n,e)}}function qV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ur(n,e))return;t.uniform3fv(this.addr,e),cr(n,e)}}function ZV(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ur(n,e))return;t.uniform4fv(this.addr,e),cr(n,e)}}function QV(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ur(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),cr(n,e)}else{if(ur(n,r))return;pC.set(r),t.uniformMatrix2fv(this.addr,!1,pC),cr(n,r)}}function JV(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ur(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),cr(n,e)}else{if(ur(n,r))return;hC.set(r),t.uniformMatrix3fv(this.addr,!1,hC),cr(n,r)}}function eG(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ur(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),cr(n,e)}else{if(ur(n,r))return;dC.set(r),t.uniformMatrix4fv(this.addr,!1,dC),cr(n,r)}}function tG(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function nG(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ur(n,e))return;t.uniform2iv(this.addr,e),cr(n,e)}}function rG(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ur(n,e))return;t.uniform3iv(this.addr,e),cr(n,e)}}function iG(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ur(n,e))return;t.uniform4iv(this.addr,e),cr(n,e)}}function sG(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function oG(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ur(n,e))return;t.uniform2uiv(this.addr,e),cr(n,e)}}function aG(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ur(n,e))return;t.uniform3uiv(this.addr,e),cr(n,e)}}function lG(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ur(n,e))return;t.uniform4uiv(this.addr,e),cr(n,e)}}function uG(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||dO,i)}function cG(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||pO,i)}function fG(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||mO,i)}function dG(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||hO,i)}function hG(t){switch(t){case 5126:return KV;case 35664:return YV;case 35665:return qV;case 35666:return ZV;case 35674:return QV;case 35675:return JV;case 35676:return eG;case 5124:case 35670:return tG;case 35667:case 35671:return nG;case 35668:case 35672:return rG;case 35669:case 35673:return iG;case 5125:return sG;case 36294:return oG;case 36295:return aG;case 36296:return lG;case 35678:case 36198:case 36298:case 36306:case 35682:return uG;case 35679:case 36299:case 36307:return cG;case 35680:case 36300:case 36308:case 36293:return fG;case 36289:case 36303:case 36311:case 36292:return dG}}function pG(t,e){t.uniform1fv(this.addr,e)}function mG(t,e){const n=Bf(e,this.size,2);t.uniform2fv(this.addr,n)}function gG(t,e){const n=Bf(e,this.size,3);t.uniform3fv(this.addr,n)}function vG(t,e){const n=Bf(e,this.size,4);t.uniform4fv(this.addr,n)}function yG(t,e){const n=Bf(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function xG(t,e){const n=Bf(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function _G(t,e){const n=Bf(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function SG(t,e){t.uniform1iv(this.addr,e)}function wG(t,e){t.uniform2iv(this.addr,e)}function bG(t,e){t.uniform3iv(this.addr,e)}function MG(t,e){t.uniform4iv(this.addr,e)}function EG(t,e){t.uniform1uiv(this.addr,e)}function TG(t,e){t.uniform2uiv(this.addr,e)}function PG(t,e){t.uniform3uiv(this.addr,e)}function CG(t,e){t.uniform4uiv(this.addr,e)}function AG(t,e,n){const r=this.cache,i=e.length,s=gy(n,i);ur(r,s)||(t.uniform1iv(this.addr,s),cr(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||dO,s[o])}function RG(t,e,n){const r=this.cache,i=e.length,s=gy(n,i);ur(r,s)||(t.uniform1iv(this.addr,s),cr(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||pO,s[o])}function IG(t,e,n){const r=this.cache,i=e.length,s=gy(n,i);ur(r,s)||(t.uniform1iv(this.addr,s),cr(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||mO,s[o])}function DG(t,e,n){const r=this.cache,i=e.length,s=gy(n,i);ur(r,s)||(t.uniform1iv(this.addr,s),cr(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||hO,s[o])}function LG(t){switch(t){case 5126:return pG;case 35664:return mG;case 35665:return gG;case 35666:return vG;case 35674:return yG;case 35675:return xG;case 35676:return _G;case 5124:case 35670:return SG;case 35667:case 35671:return wG;case 35668:case 35672:return bG;case 35669:case 35673:return MG;case 5125:return EG;case 36294:return TG;case 36295:return PG;case 36296:return CG;case 35678:case 36198:case 36298:case 36306:case 35682:return AG;case 35679:case 36299:case 36307:return RG;case 35680:case 36300:case 36308:case 36293:return IG;case 36289:case 36303:case 36311:case 36292:return DG}}class OG{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=hG(n.type)}}class kG{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=LG(n.type)}}class UG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const i_=/(\w+)(\])?(\[|\.)?/g;function mC(t,e){t.seq.push(e),t.map[e.id]=e}function NG(t,e,n){const r=t.name,i=r.length;for(i_.lastIndex=0;;){const s=i_.exec(r),o=i_.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){mC(n,u===void 0?new OG(a,t,e):new kG(a,t,e));break}else{let h=n.map[a];h===void 0&&(h=new UG(a),mC(n,h)),n=h}}}class Xv{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);NG(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function gC(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let FG=0;function zG(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function BG(t){switch(t){case Xs:return["Linear","( value )"];case wt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function vC(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+zG(t.getShaderSource(e),o)}else return i}function HG(t,e){const n=BG(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function VG(t,e){let n;switch(e){case F4:n="Linear";break;case z4:n="Reinhard";break;case B4:n="OptimizedCineon";break;case _M:n="ACESFilmic";break;case H4:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function GG(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ch).join(`
`)}function WG(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function $G(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function ch(t){return t!==""}function yC(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function xC(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const jG=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ew(t){return t.replace(jG,XG)}function XG(t,e){const n=ut[e];if(n===void 0)throw new Error("Can not resolve #include <"+e+">");return Ew(n)}const KG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _C(t){return t.replace(KG,YG)}function YG(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function SC(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function qG(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===ay?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===bh?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Fs&&(e="SHADOWMAP_TYPE_VSM"),e}function ZG(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case il:case sl:e="ENVMAP_TYPE_CUBE";break;case Nf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function QG(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case sl:e="ENVMAP_MODE_REFRACTION";break}return e}function JG(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Dp:e="ENVMAP_BLENDING_MULTIPLY";break;case U4:e="ENVMAP_BLENDING_MIX";break;case N4:e="ENVMAP_BLENDING_ADD";break}return e}function eW(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function tW(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=qG(n),u=ZG(n),d=QG(n),h=JG(n),p=eW(n),g=n.isWebGL2?"":GG(n),v=WG(s),_=i.createProgram();let x,m,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=[v].filter(ch).join(`
`),x.length>0&&(x+=`
`),m=[g,v].filter(ch).join(`
`),m.length>0&&(m+=`
`)):(x=[SC(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+d:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ch).join(`
`),m=[g,SC(n),"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+d:"",n.envMap?"#define "+h:"",p?"#define CUBEUV_TEXEL_WIDTH "+p.texelWidth:"",p?"#define CUBEUV_TEXEL_HEIGHT "+p.texelHeight:"",p?"#define CUBEUV_MAX_MIP "+p.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Ws?"#define TONE_MAPPING":"",n.toneMapping!==Ws?ut.tonemapping_pars_fragment:"",n.toneMapping!==Ws?VG("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",ut.encodings_pars_fragment,HG("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(ch).join(`
`)),o=Ew(o),o=yC(o,n),o=xC(o,n),a=Ew(a),a=yC(a,n),a=xC(a,n),o=_C(o),a=_C(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,m=["#define varying in",n.glslVersion===C0?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===C0?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const w=S+x+o,M=S+m+a,I=gC(i,i.VERTEX_SHADER,w),P=gC(i,i.FRAGMENT_SHADER,M);if(i.attachShader(_,I),i.attachShader(_,P),n.index0AttributeName!==void 0?i.bindAttribLocation(_,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(_,0,"position"),i.linkProgram(_),t.debug.checkShaderErrors){const T=i.getProgramInfoLog(_).trim(),E=i.getShaderInfoLog(I).trim(),O=i.getShaderInfoLog(P).trim();let N=!0,H=!0;if(i.getProgramParameter(_,i.LINK_STATUS)===!1)if(N=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,_,I,P);else{const K=vC(i,I,"vertex"),Y=vC(i,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(_,i.VALIDATE_STATUS)+`

Program Info Log: `+T+`
`+K+`
`+Y)}else T!==""?console.warn("THREE.WebGLProgram: Program Info Log:",T):(E===""||O==="")&&(H=!1);H&&(this.diagnostics={runnable:N,programLog:T,vertexShader:{log:E,prefix:x},fragmentShader:{log:O,prefix:m}})}i.deleteShader(I),i.deleteShader(P);let D;this.getUniforms=function(){return D===void 0&&(D=new Xv(i,_)),D};let A;return this.getAttributes=function(){return A===void 0&&(A=$G(i,_)),A},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(_),this.program=void 0},this.name=n.shaderName,this.id=FG++,this.cacheKey=e,this.usedTimes=1,this.program=_,this.vertexShader=I,this.fragmentShader=P,this}let nW=0;class rW{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new iW(e),n.set(e,r)),r}}class iW{constructor(e){this.id=nW++,this.code=e,this.usedTimes=0}}function sW(t,e,n,r,i,s,o){const a=new cu,l=new rW,u=[],d=i.isWebGL2,h=i.logarithmicDepthBuffer,p=i.vertexTextures;let g=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(T){return T===1?"uv1":T===2?"uv2":T===3?"uv3":"uv"}function x(T,E,O,N,H){const K=N.fog,Y=H.geometry,Q=T.isMeshStandardMaterial?N.environment:null,ee=(T.isMeshStandardMaterial?n:e).get(T.envMap||Q),F=ee&&ee.mapping===Nf?ee.image.height:null,j=v[T.type];T.precision!==null&&(g=i.getMaxPrecision(T.precision),g!==T.precision&&console.warn("THREE.WebGLProgram.getParameters:",T.precision,"not supported, using",g,"instead."));const V=Y.morphAttributes.position||Y.morphAttributes.normal||Y.morphAttributes.color,ce=V!==void 0?V.length:0;let ae=0;Y.morphAttributes.position!==void 0&&(ae=1),Y.morphAttributes.normal!==void 0&&(ae=2),Y.morphAttributes.color!==void 0&&(ae=3);let fe,de,De,Ee;if(j){const Yt=ni[j];fe=Yt.vertexShader,de=Yt.fragmentShader}else fe=T.vertexShader,de=T.fragmentShader,l.update(T),De=l.getVertexShaderID(T),Ee=l.getFragmentShaderID(T);const J=t.getRenderTarget(),ve=H.isInstancedMesh===!0,U=!!T.map,z=!!T.matcap,W=!!ee,ne=!!T.aoMap,q=!!T.lightMap,se=!!T.bumpMap,Ce=!!T.normalMap,Le=!!T.displacementMap,He=!!T.emissiveMap,We=!!T.metalnessMap,Ge=!!T.roughnessMap,je=T.clearcoat>0,Je=T.iridescence>0,G=T.sheen>0,k=T.transmission>0,re=je&&!!T.clearcoatMap,be=je&&!!T.clearcoatNormalMap,Ae=je&&!!T.clearcoatRoughnessMap,Ue=Je&&!!T.iridescenceMap,tt=Je&&!!T.iridescenceThicknessMap,Pe=G&&!!T.sheenColorMap,Se=G&&!!T.sheenRoughnessMap,Ke=!!T.specularMap,te=!!T.specularColorMap,xe=!!T.specularIntensityMap,Re=k&&!!T.transmissionMap,Ne=k&&!!T.thicknessMap,nt=!!T.gradientMap,pt=!!T.alphaMap,Kt=T.alphaTest>0,ie=!!T.extensions,_e=!!Y.attributes.uv1,ke=!!Y.attributes.uv2,Ye=!!Y.attributes.uv3;return{isWebGL2:d,shaderID:j,shaderName:T.type,vertexShader:fe,fragmentShader:de,defines:T.defines,customVertexShaderID:De,customFragmentShaderID:Ee,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:g,instancing:ve,instancingColor:ve&&H.instanceColor!==null,supportsVertexTextures:p,outputColorSpace:J===null?t.outputColorSpace:J.isXRRenderTarget===!0?J.texture.colorSpace:Xs,map:U,matcap:z,envMap:W,envMapMode:W&&ee.mapping,envMapCubeUVHeight:F,aoMap:ne,lightMap:q,bumpMap:se,normalMap:Ce,displacementMap:p&&Le,emissiveMap:He,normalMapObjectSpace:Ce&&T.normalMapType===rO,normalMapTangentSpace:Ce&&T.normalMapType===ha,metalnessMap:We,roughnessMap:Ge,clearcoat:je,clearcoatMap:re,clearcoatNormalMap:be,clearcoatRoughnessMap:Ae,iridescence:Je,iridescenceMap:Ue,iridescenceThicknessMap:tt,sheen:G,sheenColorMap:Pe,sheenRoughnessMap:Se,specularMap:Ke,specularColorMap:te,specularIntensityMap:xe,transmission:k,transmissionMap:Re,thicknessMap:Ne,gradientMap:nt,opaque:T.transparent===!1&&T.blending===au,alphaMap:pt,alphaTest:Kt,combine:T.combine,mapUv:U&&_(T.map.channel),aoMapUv:ne&&_(T.aoMap.channel),lightMapUv:q&&_(T.lightMap.channel),bumpMapUv:se&&_(T.bumpMap.channel),normalMapUv:Ce&&_(T.normalMap.channel),displacementMapUv:Le&&_(T.displacementMap.channel),emissiveMapUv:He&&_(T.emissiveMap.channel),metalnessMapUv:We&&_(T.metalnessMap.channel),roughnessMapUv:Ge&&_(T.roughnessMap.channel),clearcoatMapUv:re&&_(T.clearcoatMap.channel),clearcoatNormalMapUv:be&&_(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ae&&_(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Ue&&_(T.iridescenceMap.channel),iridescenceThicknessMapUv:tt&&_(T.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&_(T.sheenColorMap.channel),sheenRoughnessMapUv:Se&&_(T.sheenRoughnessMap.channel),specularMapUv:Ke&&_(T.specularMap.channel),specularColorMapUv:te&&_(T.specularColorMap.channel),specularIntensityMapUv:xe&&_(T.specularIntensityMap.channel),transmissionMapUv:Re&&_(T.transmissionMap.channel),thicknessMapUv:Ne&&_(T.thicknessMap.channel),alphaMapUv:pt&&_(T.alphaMap.channel),vertexTangents:Ce&&!!Y.attributes.tangent,vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!Y.attributes.color&&Y.attributes.color.itemSize===4,vertexUv1s:_e,vertexUv2s:ke,vertexUv3s:Ye,pointsUvs:H.isPoints===!0&&!!Y.attributes.uv&&(U||pt),fog:!!K,useFog:T.fog===!0,fogExp2:K&&K.isFogExp2,flatShading:T.flatShading===!0,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:H.isSkinnedMesh===!0,morphTargets:Y.morphAttributes.position!==void 0,morphNormals:Y.morphAttributes.normal!==void 0,morphColors:Y.morphAttributes.color!==void 0,morphTargetsCount:ce,morphTextureStride:ae,numDirLights:E.directional.length,numPointLights:E.point.length,numSpotLights:E.spot.length,numSpotLightMaps:E.spotLightMap.length,numRectAreaLights:E.rectArea.length,numHemiLights:E.hemi.length,numDirLightShadows:E.directionalShadowMap.length,numPointLightShadows:E.pointShadowMap.length,numSpotLightShadows:E.spotShadowMap.length,numSpotLightShadowsWithMaps:E.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:T.dithering,shadowMapEnabled:t.shadowMap.enabled&&O.length>0,shadowMapType:t.shadowMap.type,toneMapping:T.toneMapped?t.toneMapping:Ws,useLegacyLights:t.useLegacyLights,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===Wr,flipSided:T.side===or,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionDerivatives:ie&&T.extensions.derivatives===!0,extensionFragDepth:ie&&T.extensions.fragDepth===!0,extensionDrawBuffers:ie&&T.extensions.drawBuffers===!0,extensionShaderTextureLOD:ie&&T.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:d||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:d||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:d||r.has("EXT_shader_texture_lod"),customProgramCacheKey:T.customProgramCacheKey()}}function m(T){const E=[];if(T.shaderID?E.push(T.shaderID):(E.push(T.customVertexShaderID),E.push(T.customFragmentShaderID)),T.defines!==void 0)for(const O in T.defines)E.push(O),E.push(T.defines[O]);return T.isRawShaderMaterial===!1&&(S(E,T),w(E,T),E.push(t.outputColorSpace)),E.push(T.customProgramCacheKey),E.join()}function S(T,E){T.push(E.precision),T.push(E.outputColorSpace),T.push(E.envMapMode),T.push(E.envMapCubeUVHeight),T.push(E.mapUv),T.push(E.alphaMapUv),T.push(E.lightMapUv),T.push(E.aoMapUv),T.push(E.bumpMapUv),T.push(E.normalMapUv),T.push(E.displacementMapUv),T.push(E.emissiveMapUv),T.push(E.metalnessMapUv),T.push(E.roughnessMapUv),T.push(E.clearcoatMapUv),T.push(E.clearcoatNormalMapUv),T.push(E.clearcoatRoughnessMapUv),T.push(E.iridescenceMapUv),T.push(E.iridescenceThicknessMapUv),T.push(E.sheenColorMapUv),T.push(E.sheenRoughnessMapUv),T.push(E.specularMapUv),T.push(E.specularColorMapUv),T.push(E.specularIntensityMapUv),T.push(E.transmissionMapUv),T.push(E.thicknessMapUv),T.push(E.combine),T.push(E.fogExp2),T.push(E.sizeAttenuation),T.push(E.morphTargetsCount),T.push(E.morphAttributeCount),T.push(E.numDirLights),T.push(E.numPointLights),T.push(E.numSpotLights),T.push(E.numSpotLightMaps),T.push(E.numHemiLights),T.push(E.numRectAreaLights),T.push(E.numDirLightShadows),T.push(E.numPointLightShadows),T.push(E.numSpotLightShadows),T.push(E.numSpotLightShadowsWithMaps),T.push(E.shadowMapType),T.push(E.toneMapping),T.push(E.numClippingPlanes),T.push(E.numClipIntersection),T.push(E.depthPacking)}function w(T,E){a.disableAll(),E.isWebGL2&&a.enable(0),E.supportsVertexTextures&&a.enable(1),E.instancing&&a.enable(2),E.instancingColor&&a.enable(3),E.matcap&&a.enable(4),E.envMap&&a.enable(5),E.normalMapObjectSpace&&a.enable(6),E.normalMapTangentSpace&&a.enable(7),E.clearcoat&&a.enable(8),E.iridescence&&a.enable(9),E.alphaTest&&a.enable(10),E.vertexColors&&a.enable(11),E.vertexAlphas&&a.enable(12),E.vertexUv1s&&a.enable(13),E.vertexUv2s&&a.enable(14),E.vertexUv3s&&a.enable(15),E.vertexTangents&&a.enable(16),T.push(a.mask),a.disableAll(),E.fog&&a.enable(0),E.useFog&&a.enable(1),E.flatShading&&a.enable(2),E.logarithmicDepthBuffer&&a.enable(3),E.skinning&&a.enable(4),E.morphTargets&&a.enable(5),E.morphNormals&&a.enable(6),E.morphColors&&a.enable(7),E.premultipliedAlpha&&a.enable(8),E.shadowMapEnabled&&a.enable(9),E.useLegacyLights&&a.enable(10),E.doubleSided&&a.enable(11),E.flipSided&&a.enable(12),E.useDepthPacking&&a.enable(13),E.dithering&&a.enable(14),E.transmission&&a.enable(15),E.sheen&&a.enable(16),E.opaque&&a.enable(17),E.pointsUvs&&a.enable(18),T.push(a.mask)}function M(T){const E=v[T.type];let O;if(E){const N=ni[E];O=Ef.clone(N.uniforms)}else O=T.uniforms;return O}function I(T,E){let O;for(let N=0,H=u.length;N<H;N++){const K=u[N];if(K.cacheKey===E){O=K,++O.usedTimes;break}}return O===void 0&&(O=new tW(t,E,T,s),u.push(O)),O}function P(T){if(--T.usedTimes===0){const E=u.indexOf(T);u[E]=u[u.length-1],u.pop(),T.destroy()}}function D(T){l.remove(T)}function A(){l.dispose()}return{getParameters:x,getProgramCacheKey:m,getUniforms:M,acquireProgram:I,releaseProgram:P,releaseShaderCache:D,programs:u,dispose:A}}function oW(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function aW(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function wC(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function bC(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(h,p,g,v,_,x){let m=t[e];return m===void 0?(m={id:h.id,object:h,geometry:p,material:g,groupOrder:v,renderOrder:h.renderOrder,z:_,group:x},t[e]=m):(m.id=h.id,m.object=h,m.geometry=p,m.material=g,m.groupOrder=v,m.renderOrder=h.renderOrder,m.z=_,m.group=x),e++,m}function a(h,p,g,v,_,x){const m=o(h,p,g,v,_,x);g.transmission>0?r.push(m):g.transparent===!0?i.push(m):n.push(m)}function l(h,p,g,v,_,x){const m=o(h,p,g,v,_,x);g.transmission>0?r.unshift(m):g.transparent===!0?i.unshift(m):n.unshift(m)}function u(h,p){n.length>1&&n.sort(h||aW),r.length>1&&r.sort(p||wC),i.length>1&&i.sort(p||wC)}function d(){for(let h=e,p=t.length;h<p;h++){const g=t[h];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:d,sort:u}}function lW(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new bC,t.set(r,[o])):i>=s.length?(o=new bC,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function uW(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new B,color:new ze};break;case"SpotLight":n={position:new B,direction:new B,color:new ze,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new B,color:new ze,distance:0,decay:0};break;case"HemisphereLight":n={direction:new B,skyColor:new ze,groundColor:new ze};break;case"RectAreaLight":n={color:new ze,position:new B,halfWidth:new B,halfHeight:new B};break}return t[e.id]=n,n}}}function cW(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ue,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let fW=0;function dW(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function hW(t,e){const n=new uW,r=cW(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let d=0;d<9;d++)i.probe.push(new B);const s=new B,o=new at,a=new at;function l(d,h){let p=0,g=0,v=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let _=0,x=0,m=0,S=0,w=0,M=0,I=0,P=0,D=0,A=0;d.sort(dW);const T=h===!0?Math.PI:1;for(let O=0,N=d.length;O<N;O++){const H=d[O],K=H.color,Y=H.intensity,Q=H.distance,ee=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)p+=K.r*Y*T,g+=K.g*Y*T,v+=K.b*Y*T;else if(H.isLightProbe)for(let F=0;F<9;F++)i.probe[F].addScaledVector(H.sh.coefficients[F],Y);else if(H.isDirectionalLight){const F=n.get(H);if(F.color.copy(H.color).multiplyScalar(H.intensity*T),H.castShadow){const j=H.shadow,V=r.get(H);V.shadowBias=j.bias,V.shadowNormalBias=j.normalBias,V.shadowRadius=j.radius,V.shadowMapSize=j.mapSize,i.directionalShadow[_]=V,i.directionalShadowMap[_]=ee,i.directionalShadowMatrix[_]=H.shadow.matrix,M++}i.directional[_]=F,_++}else if(H.isSpotLight){const F=n.get(H);F.position.setFromMatrixPosition(H.matrixWorld),F.color.copy(K).multiplyScalar(Y*T),F.distance=Q,F.coneCos=Math.cos(H.angle),F.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),F.decay=H.decay,i.spot[m]=F;const j=H.shadow;if(H.map&&(i.spotLightMap[D]=H.map,D++,j.updateMatrices(H),H.castShadow&&A++),i.spotLightMatrix[m]=j.matrix,H.castShadow){const V=r.get(H);V.shadowBias=j.bias,V.shadowNormalBias=j.normalBias,V.shadowRadius=j.radius,V.shadowMapSize=j.mapSize,i.spotShadow[m]=V,i.spotShadowMap[m]=ee,P++}m++}else if(H.isRectAreaLight){const F=n.get(H);F.color.copy(K).multiplyScalar(Y),F.halfWidth.set(H.width*.5,0,0),F.halfHeight.set(0,H.height*.5,0),i.rectArea[S]=F,S++}else if(H.isPointLight){const F=n.get(H);if(F.color.copy(H.color).multiplyScalar(H.intensity*T),F.distance=H.distance,F.decay=H.decay,H.castShadow){const j=H.shadow,V=r.get(H);V.shadowBias=j.bias,V.shadowNormalBias=j.normalBias,V.shadowRadius=j.radius,V.shadowMapSize=j.mapSize,V.shadowCameraNear=j.camera.near,V.shadowCameraFar=j.camera.far,i.pointShadow[x]=V,i.pointShadowMap[x]=ee,i.pointShadowMatrix[x]=H.shadow.matrix,I++}i.point[x]=F,x++}else if(H.isHemisphereLight){const F=n.get(H);F.skyColor.copy(H.color).multiplyScalar(Y*T),F.groundColor.copy(H.groundColor).multiplyScalar(Y*T),i.hemi[w]=F,w++}}S>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Ve.LTC_FLOAT_1,i.rectAreaLTC2=Ve.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Ve.LTC_HALF_1,i.rectAreaLTC2=Ve.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=p,i.ambient[1]=g,i.ambient[2]=v;const E=i.hash;(E.directionalLength!==_||E.pointLength!==x||E.spotLength!==m||E.rectAreaLength!==S||E.hemiLength!==w||E.numDirectionalShadows!==M||E.numPointShadows!==I||E.numSpotShadows!==P||E.numSpotMaps!==D)&&(i.directional.length=_,i.spot.length=m,i.rectArea.length=S,i.point.length=x,i.hemi.length=w,i.directionalShadow.length=M,i.directionalShadowMap.length=M,i.pointShadow.length=I,i.pointShadowMap.length=I,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=M,i.pointShadowMatrix.length=I,i.spotLightMatrix.length=P+D-A,i.spotLightMap.length=D,i.numSpotLightShadowsWithMaps=A,E.directionalLength=_,E.pointLength=x,E.spotLength=m,E.rectAreaLength=S,E.hemiLength=w,E.numDirectionalShadows=M,E.numPointShadows=I,E.numSpotShadows=P,E.numSpotMaps=D,i.version=fW++)}function u(d,h){let p=0,g=0,v=0,_=0,x=0;const m=h.matrixWorldInverse;for(let S=0,w=d.length;S<w;S++){const M=d[S];if(M.isDirectionalLight){const I=i.directional[p];I.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(m),p++}else if(M.isSpotLight){const I=i.spot[v];I.position.setFromMatrixPosition(M.matrixWorld),I.position.applyMatrix4(m),I.direction.setFromMatrixPosition(M.matrixWorld),s.setFromMatrixPosition(M.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(m),v++}else if(M.isRectAreaLight){const I=i.rectArea[_];I.position.setFromMatrixPosition(M.matrixWorld),I.position.applyMatrix4(m),a.identity(),o.copy(M.matrixWorld),o.premultiply(m),a.extractRotation(o),I.halfWidth.set(M.width*.5,0,0),I.halfHeight.set(0,M.height*.5,0),I.halfWidth.applyMatrix4(a),I.halfHeight.applyMatrix4(a),_++}else if(M.isPointLight){const I=i.point[g];I.position.setFromMatrixPosition(M.matrixWorld),I.position.applyMatrix4(m),g++}else if(M.isHemisphereLight){const I=i.hemi[x];I.direction.setFromMatrixPosition(M.matrixWorld),I.direction.transformDirection(m),x++}}}return{setup:l,setupView:u,state:i}}function MC(t,e){const n=new hW(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(h){r.push(h)}function a(h){i.push(h)}function l(h){n.setup(r,h)}function u(h){n.setupView(r,h)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function pW(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new MC(t,e),n.set(s,[l])):o>=a.length?(l=new MC(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class vy extends er{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=_r,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class LM extends er{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const mW=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,gW=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vW(t,e,n){let r=new my;const i=new ue,s=new ue,o=new bt,a=new vy({depthPacking:Eo}),l=new LM,u={},d=n.maxTextureSize,h={[Mo]:or,[or]:Mo,[Wr]:Wr},p=new Ot({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ue},radius:{value:4}},vertexShader:mW,fragmentShader:gW}),g=p.clone();g.defines.HORIZONTAL_PASS=1;const v=new Mt;v.setAttribute("position",new Xt(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const _=new Qn(v,p),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ay;let m=this.type;this.render=function(I,P,D){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||I.length===0)return;const A=t.getRenderTarget(),T=t.getActiveCubeFace(),E=t.getActiveMipmapLevel(),O=t.state;O.setBlending(xn),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const N=m!==Fs&&this.type===Fs,H=m===Fs&&this.type!==Fs;for(let K=0,Y=I.length;K<Y;K++){const Q=I[K],ee=Q.shadow;if(ee===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if(ee.autoUpdate===!1&&ee.needsUpdate===!1)continue;i.copy(ee.mapSize);const F=ee.getFrameExtents();if(i.multiply(F),s.copy(ee.mapSize),(i.x>d||i.y>d)&&(i.x>d&&(s.x=Math.floor(d/F.x),i.x=s.x*F.x,ee.mapSize.x=s.x),i.y>d&&(s.y=Math.floor(d/F.y),i.y=s.y*F.y,ee.mapSize.y=s.y)),ee.map===null||N===!0||H===!0){const V=this.type!==Fs?{minFilter:kt,magFilter:kt}:{};ee.map!==null&&ee.map.dispose(),ee.map=new Lt(i.x,i.y,V),ee.map.texture.name=Q.name+".shadowMap",ee.camera.updateProjectionMatrix()}t.setRenderTarget(ee.map),t.clear();const j=ee.getViewportCount();for(let V=0;V<j;V++){const ce=ee.getViewport(V);o.set(s.x*ce.x,s.y*ce.y,s.x*ce.z,s.y*ce.w),O.viewport(o),ee.updateMatrices(Q,V),r=ee.getFrustum(),M(P,D,ee.camera,Q,this.type)}ee.isPointLightShadow!==!0&&this.type===Fs&&S(ee,D),ee.needsUpdate=!1}m=this.type,x.needsUpdate=!1,t.setRenderTarget(A,T,E)};function S(I,P){const D=e.update(_);p.defines.VSM_SAMPLES!==I.blurSamples&&(p.defines.VSM_SAMPLES=I.blurSamples,g.defines.VSM_SAMPLES=I.blurSamples,p.needsUpdate=!0,g.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new Lt(i.x,i.y)),p.uniforms.shadow_pass.value=I.map.texture,p.uniforms.resolution.value=I.mapSize,p.uniforms.radius.value=I.radius,t.setRenderTarget(I.mapPass),t.clear(),t.renderBufferDirect(P,null,D,p,_,null),g.uniforms.shadow_pass.value=I.mapPass.texture,g.uniforms.resolution.value=I.mapSize,g.uniforms.radius.value=I.radius,t.setRenderTarget(I.map),t.clear(),t.renderBufferDirect(P,null,D,g,_,null)}function w(I,P,D,A){let T=null;const E=D.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(E!==void 0)T=E;else if(T=D.isPointLight===!0?l:a,t.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const O=T.uuid,N=P.uuid;let H=u[O];H===void 0&&(H={},u[O]=H);let K=H[N];K===void 0&&(K=T.clone(),H[N]=K),T=K}if(T.visible=P.visible,T.wireframe=P.wireframe,A===Fs?T.side=P.shadowSide!==null?P.shadowSide:P.side:T.side=P.shadowSide!==null?P.shadowSide:h[P.side],T.alphaMap=P.alphaMap,T.alphaTest=P.alphaTest,T.map=P.map,T.clipShadows=P.clipShadows,T.clippingPlanes=P.clippingPlanes,T.clipIntersection=P.clipIntersection,T.displacementMap=P.displacementMap,T.displacementScale=P.displacementScale,T.displacementBias=P.displacementBias,T.wireframeLinewidth=P.wireframeLinewidth,T.linewidth=P.linewidth,D.isPointLight===!0&&T.isMeshDistanceMaterial===!0){const O=t.properties.get(T);O.light=D}return T}function M(I,P,D,A,T){if(I.visible===!1)return;if(I.layers.test(P.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&T===Fs)&&(!I.frustumCulled||r.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,I.matrixWorld);const N=e.update(I),H=I.material;if(Array.isArray(H)){const K=N.groups;for(let Y=0,Q=K.length;Y<Q;Y++){const ee=K[Y],F=H[ee.materialIndex];if(F&&F.visible){const j=w(I,F,A,T);t.renderBufferDirect(D,null,N,j,I,ee)}}}else if(H.visible){const K=w(I,H,A,T);t.renderBufferDirect(D,null,N,K,I,null)}}const O=I.children;for(let N=0,H=O.length;N<H;N++)M(O[N],P,D,A,T)}}function yW(t,e,n){const r=n.isWebGL2;function i(){let ie=!1;const _e=new bt;let ke=null;const Ye=new bt(0,0,0,0);return{setMask:function(rt){ke!==rt&&!ie&&(t.colorMask(rt,rt,rt,rt),ke=rt)},setLocked:function(rt){ie=rt},setClear:function(rt,Yt,qt,dr,Ms){Ms===!0&&(rt*=dr,Yt*=dr,qt*=dr),_e.set(rt,Yt,qt,dr),Ye.equals(_e)===!1&&(t.clearColor(rt,Yt,qt,dr),Ye.copy(_e))},reset:function(){ie=!1,ke=null,Ye.set(-1,0,0,0)}}}function s(){let ie=!1,_e=null,ke=null,Ye=null;return{setTest:function(rt){rt?J(t.DEPTH_TEST):ve(t.DEPTH_TEST)},setMask:function(rt){_e!==rt&&!ie&&(t.depthMask(rt),_e=rt)},setFunc:function(rt){if(ke!==rt){switch(rt){case gM:t.depthFunc(t.NEVER);break;case vM:t.depthFunc(t.ALWAYS);break;case T0:t.depthFunc(t.LESS);break;case tp:t.depthFunc(t.LEQUAL);break;case np:t.depthFunc(t.EQUAL);break;case yM:t.depthFunc(t.GEQUAL);break;case xM:t.depthFunc(t.GREATER);break;case ly:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}ke=rt}},setLocked:function(rt){ie=rt},setClear:function(rt){Ye!==rt&&(t.clearDepth(rt),Ye=rt)},reset:function(){ie=!1,_e=null,ke=null,Ye=null}}}function o(){let ie=!1,_e=null,ke=null,Ye=null,rt=null,Yt=null,qt=null,dr=null,Ms=null;return{setTest:function(_n){ie||(_n?J(t.STENCIL_TEST):ve(t.STENCIL_TEST))},setMask:function(_n){_e!==_n&&!ie&&(t.stencilMask(_n),_e=_n)},setFunc:function(_n,Kr,Ki){(ke!==_n||Ye!==Kr||rt!==Ki)&&(t.stencilFunc(_n,Kr,Ki),ke=_n,Ye=Kr,rt=Ki)},setOp:function(_n,Kr,Ki){(Yt!==_n||qt!==Kr||dr!==Ki)&&(t.stencilOp(_n,Kr,Ki),Yt=_n,qt=Kr,dr=Ki)},setLocked:function(_n){ie=_n},setClear:function(_n){Ms!==_n&&(t.clearStencil(_n),Ms=_n)},reset:function(){ie=!1,_e=null,ke=null,Ye=null,rt=null,Yt=null,qt=null,dr=null,Ms=null}}}const a=new i,l=new s,u=new o,d=new WeakMap,h=new WeakMap;let p={},g={},v=new WeakMap,_=[],x=null,m=!1,S=null,w=null,M=null,I=null,P=null,D=null,A=null,T=!1,E=null,O=null,N=null,H=null,K=null;const Y=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Q=!1,ee=0;const F=t.getParameter(t.VERSION);F.indexOf("WebGL")!==-1?(ee=parseFloat(/^WebGL (\d)/.exec(F)[1]),Q=ee>=1):F.indexOf("OpenGL ES")!==-1&&(ee=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),Q=ee>=2);let j=null,V={};const ce=t.getParameter(t.SCISSOR_BOX),ae=t.getParameter(t.VIEWPORT),fe=new bt().fromArray(ce),de=new bt().fromArray(ae);function De(ie,_e,ke,Ye){const rt=new Uint8Array(4),Yt=t.createTexture();t.bindTexture(ie,Yt),t.texParameteri(ie,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(ie,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let qt=0;qt<ke;qt++)r&&(ie===t.TEXTURE_3D||ie===t.TEXTURE_2D_ARRAY)?t.texImage3D(_e,0,t.RGBA,1,1,Ye,0,t.RGBA,t.UNSIGNED_BYTE,rt):t.texImage2D(_e+qt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,rt);return Yt}const Ee={};Ee[t.TEXTURE_2D]=De(t.TEXTURE_2D,t.TEXTURE_2D,1),Ee[t.TEXTURE_CUBE_MAP]=De(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(Ee[t.TEXTURE_2D_ARRAY]=De(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Ee[t.TEXTURE_3D]=De(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),J(t.DEPTH_TEST),l.setFunc(tp),Le(!1),He(qS),J(t.CULL_FACE),se(xn);function J(ie){p[ie]!==!0&&(t.enable(ie),p[ie]=!0)}function ve(ie){p[ie]!==!1&&(t.disable(ie),p[ie]=!1)}function U(ie,_e){return g[ie]!==_e?(t.bindFramebuffer(ie,_e),g[ie]=_e,r&&(ie===t.DRAW_FRAMEBUFFER&&(g[t.FRAMEBUFFER]=_e),ie===t.FRAMEBUFFER&&(g[t.DRAW_FRAMEBUFFER]=_e)),!0):!1}function z(ie,_e){let ke=_,Ye=!1;if(ie)if(ke=v.get(_e),ke===void 0&&(ke=[],v.set(_e,ke)),ie.isWebGLMultipleRenderTargets){const rt=ie.texture;if(ke.length!==rt.length||ke[0]!==t.COLOR_ATTACHMENT0){for(let Yt=0,qt=rt.length;Yt<qt;Yt++)ke[Yt]=t.COLOR_ATTACHMENT0+Yt;ke.length=rt.length,Ye=!0}}else ke[0]!==t.COLOR_ATTACHMENT0&&(ke[0]=t.COLOR_ATTACHMENT0,Ye=!0);else ke[0]!==t.BACK&&(ke[0]=t.BACK,Ye=!0);Ye&&(n.isWebGL2?t.drawBuffers(ke):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(ke))}function W(ie){return x!==ie?(t.useProgram(ie),x=ie,!0):!1}const ne={[$l]:t.FUNC_ADD,[E4]:t.FUNC_SUBTRACT,[T4]:t.FUNC_REVERSE_SUBTRACT};if(r)ne[JS]=t.MIN,ne[ew]=t.MAX;else{const ie=e.get("EXT_blend_minmax");ie!==null&&(ne[JS]=ie.MIN_EXT,ne[ew]=ie.MAX_EXT)}const q={[P4]:t.ZERO,[C4]:t.ONE,[A4]:t.SRC_COLOR,[pM]:t.SRC_ALPHA,[k4]:t.SRC_ALPHA_SATURATE,[L4]:t.DST_COLOR,[I4]:t.DST_ALPHA,[R4]:t.ONE_MINUS_SRC_COLOR,[mM]:t.ONE_MINUS_SRC_ALPHA,[O4]:t.ONE_MINUS_DST_COLOR,[D4]:t.ONE_MINUS_DST_ALPHA};function se(ie,_e,ke,Ye,rt,Yt,qt,dr){if(ie===xn){m===!0&&(ve(t.BLEND),m=!1);return}if(m===!1&&(J(t.BLEND),m=!0),ie!==M4){if(ie!==S||dr!==T){if((w!==$l||P!==$l)&&(t.blendEquation(t.FUNC_ADD),w=$l,P=$l),dr)switch(ie){case au:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case ep:t.blendFunc(t.ONE,t.ONE);break;case ZS:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case QS:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case au:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case ep:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case ZS:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case QS:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}M=null,I=null,D=null,A=null,S=ie,T=dr}return}rt=rt||_e,Yt=Yt||ke,qt=qt||Ye,(_e!==w||rt!==P)&&(t.blendEquationSeparate(ne[_e],ne[rt]),w=_e,P=rt),(ke!==M||Ye!==I||Yt!==D||qt!==A)&&(t.blendFuncSeparate(q[ke],q[Ye],q[Yt],q[qt]),M=ke,I=Ye,D=Yt,A=qt),S=ie,T=!1}function Ce(ie,_e){ie.side===Wr?ve(t.CULL_FACE):J(t.CULL_FACE);let ke=ie.side===or;_e&&(ke=!ke),Le(ke),ie.blending===au&&ie.transparent===!1?se(xn):se(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.premultipliedAlpha),l.setFunc(ie.depthFunc),l.setTest(ie.depthTest),l.setMask(ie.depthWrite),a.setMask(ie.colorWrite);const Ye=ie.stencilWrite;u.setTest(Ye),Ye&&(u.setMask(ie.stencilWriteMask),u.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),u.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),Ge(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?J(t.SAMPLE_ALPHA_TO_COVERAGE):ve(t.SAMPLE_ALPHA_TO_COVERAGE)}function Le(ie){E!==ie&&(ie?t.frontFace(t.CW):t.frontFace(t.CCW),E=ie)}function He(ie){ie!==S4?(J(t.CULL_FACE),ie!==O&&(ie===qS?t.cullFace(t.BACK):ie===w4?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):ve(t.CULL_FACE),O=ie}function We(ie){ie!==N&&(Q&&t.lineWidth(ie),N=ie)}function Ge(ie,_e,ke){ie?(J(t.POLYGON_OFFSET_FILL),(H!==_e||K!==ke)&&(t.polygonOffset(_e,ke),H=_e,K=ke)):ve(t.POLYGON_OFFSET_FILL)}function je(ie){ie?J(t.SCISSOR_TEST):ve(t.SCISSOR_TEST)}function Je(ie){ie===void 0&&(ie=t.TEXTURE0+Y-1),j!==ie&&(t.activeTexture(ie),j=ie)}function G(ie,_e,ke){ke===void 0&&(j===null?ke=t.TEXTURE0+Y-1:ke=j);let Ye=V[ke];Ye===void 0&&(Ye={type:void 0,texture:void 0},V[ke]=Ye),(Ye.type!==ie||Ye.texture!==_e)&&(j!==ke&&(t.activeTexture(ke),j=ke),t.bindTexture(ie,_e||Ee[ie]),Ye.type=ie,Ye.texture=_e)}function k(){const ie=V[j];ie!==void 0&&ie.type!==void 0&&(t.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function re(){try{t.compressedTexImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function be(){try{t.compressedTexImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ae(){try{t.texSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ue(){try{t.texSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function tt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Pe(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Se(){try{t.texStorage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ke(){try{t.texStorage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function te(){try{t.texImage2D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function xe(){try{t.texImage3D.apply(t,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Re(ie){fe.equals(ie)===!1&&(t.scissor(ie.x,ie.y,ie.z,ie.w),fe.copy(ie))}function Ne(ie){de.equals(ie)===!1&&(t.viewport(ie.x,ie.y,ie.z,ie.w),de.copy(ie))}function nt(ie,_e){let ke=h.get(_e);ke===void 0&&(ke=new WeakMap,h.set(_e,ke));let Ye=ke.get(ie);Ye===void 0&&(Ye=t.getUniformBlockIndex(_e,ie.name),ke.set(ie,Ye))}function pt(ie,_e){const Ye=h.get(_e).get(ie);d.get(_e)!==Ye&&(t.uniformBlockBinding(_e,Ye,ie.__bindingPointIndex),d.set(_e,Ye))}function Kt(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),p={},j=null,V={},g={},v=new WeakMap,_=[],x=null,m=!1,S=null,w=null,M=null,I=null,P=null,D=null,A=null,T=!1,E=null,O=null,N=null,H=null,K=null,fe.set(0,0,t.canvas.width,t.canvas.height),de.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:J,disable:ve,bindFramebuffer:U,drawBuffers:z,useProgram:W,setBlending:se,setMaterial:Ce,setFlipSided:Le,setCullFace:He,setLineWidth:We,setPolygonOffset:Ge,setScissorTest:je,activeTexture:Je,bindTexture:G,unbindTexture:k,compressedTexImage2D:re,compressedTexImage3D:be,texImage2D:te,texImage3D:xe,updateUBOMapping:nt,uniformBlockBinding:pt,texStorage2D:Se,texStorage3D:Ke,texSubImage2D:Ae,texSubImage3D:Ue,compressedTexSubImage2D:tt,compressedTexSubImage3D:Pe,scissor:Re,viewport:Ne,reset:Kt}}function xW(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,d=i.maxTextureSize,h=i.maxSamples,p=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,g=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let _;const x=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(G,k){return m?new OffscreenCanvas(G,k):cp("canvas")}function w(G,k,re,be){let Ae=1;if((G.width>be||G.height>be)&&(Ae=be/Math.max(G.width,G.height)),Ae<1||k===!0)if(typeof HTMLImageElement<"u"&&G instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&G instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&G instanceof ImageBitmap){const Ue=k?oO:Math.floor,tt=Ue(Ae*G.width),Pe=Ue(Ae*G.height);_===void 0&&(_=S(tt,Pe));const Se=re?S(tt,Pe):_;return Se.width=tt,Se.height=Pe,Se.getContext("2d").drawImage(G,0,0,tt,Pe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+G.width+"x"+G.height+") to ("+tt+"x"+Pe+")."),Se}else return"data"in G&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+G.width+"x"+G.height+")."),G;return G}function M(G){return Mw(G.width)&&Mw(G.height)}function I(G){return a?!1:G.wrapS!==ir||G.wrapT!==ir||G.minFilter!==kt&&G.minFilter!==ot}function P(G,k){return G.generateMipmaps&&k&&G.minFilter!==kt&&G.minFilter!==ot}function D(G){t.generateMipmap(G)}function A(G,k,re,be,Ae=!1){if(a===!1)return k;if(G!==null){if(t[G]!==void 0)return t[G];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+G+"'")}let Ue=k;return k===t.RED&&(re===t.FLOAT&&(Ue=t.R32F),re===t.HALF_FLOAT&&(Ue=t.R16F),re===t.UNSIGNED_BYTE&&(Ue=t.R8)),k===t.RG&&(re===t.FLOAT&&(Ue=t.RG32F),re===t.HALF_FLOAT&&(Ue=t.RG16F),re===t.UNSIGNED_BYTE&&(Ue=t.RG8)),k===t.RGBA&&(re===t.FLOAT&&(Ue=t.RGBA32F),re===t.HALF_FLOAT&&(Ue=t.RGBA16F),re===t.UNSIGNED_BYTE&&(Ue=be===wt&&Ae===!1?t.SRGB8_ALPHA8:t.RGBA8),re===t.UNSIGNED_SHORT_4_4_4_4&&(Ue=t.RGBA4),re===t.UNSIGNED_SHORT_5_5_5_1&&(Ue=t.RGB5_A1)),(Ue===t.R16F||Ue===t.R32F||Ue===t.RG16F||Ue===t.RG32F||Ue===t.RGBA16F||Ue===t.RGBA32F)&&e.get("EXT_color_buffer_float"),Ue}function T(G,k,re){return P(G,re)===!0||G.isFramebufferTexture&&G.minFilter!==kt&&G.minFilter!==ot?Math.log2(Math.max(k.width,k.height))+1:G.mipmaps!==void 0&&G.mipmaps.length>0?G.mipmaps.length:G.isCompressedTexture&&Array.isArray(G.image)?k.mipmaps.length:1}function E(G){return G===kt||G===P0||G===Mh?t.NEAREST:t.LINEAR}function O(G){const k=G.target;k.removeEventListener("dispose",O),H(k),k.isVideoTexture&&v.delete(k)}function N(G){const k=G.target;k.removeEventListener("dispose",N),Y(k)}function H(G){const k=r.get(G);if(k.__webglInit===void 0)return;const re=G.source,be=x.get(re);if(be){const Ae=be[k.__cacheKey];Ae.usedTimes--,Ae.usedTimes===0&&K(G),Object.keys(be).length===0&&x.delete(re)}r.remove(G)}function K(G){const k=r.get(G);t.deleteTexture(k.__webglTexture);const re=G.source,be=x.get(re);delete be[k.__cacheKey],o.memory.textures--}function Y(G){const k=G.texture,re=r.get(G),be=r.get(k);if(be.__webglTexture!==void 0&&(t.deleteTexture(be.__webglTexture),o.memory.textures--),G.depthTexture&&G.depthTexture.dispose(),G.isWebGLCubeRenderTarget)for(let Ae=0;Ae<6;Ae++)t.deleteFramebuffer(re.__webglFramebuffer[Ae]),re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer[Ae]);else{if(t.deleteFramebuffer(re.__webglFramebuffer),re.__webglDepthbuffer&&t.deleteRenderbuffer(re.__webglDepthbuffer),re.__webglMultisampledFramebuffer&&t.deleteFramebuffer(re.__webglMultisampledFramebuffer),re.__webglColorRenderbuffer)for(let Ae=0;Ae<re.__webglColorRenderbuffer.length;Ae++)re.__webglColorRenderbuffer[Ae]&&t.deleteRenderbuffer(re.__webglColorRenderbuffer[Ae]);re.__webglDepthRenderbuffer&&t.deleteRenderbuffer(re.__webglDepthRenderbuffer)}if(G.isWebGLMultipleRenderTargets)for(let Ae=0,Ue=k.length;Ae<Ue;Ae++){const tt=r.get(k[Ae]);tt.__webglTexture&&(t.deleteTexture(tt.__webglTexture),o.memory.textures--),r.remove(k[Ae])}r.remove(k),r.remove(G)}let Q=0;function ee(){Q=0}function F(){const G=Q;return G>=l&&console.warn("THREE.WebGLTextures: Trying to use "+G+" texture units while this GPU supports only "+l),Q+=1,G}function j(G){const k=[];return k.push(G.wrapS),k.push(G.wrapT),k.push(G.wrapR||0),k.push(G.magFilter),k.push(G.minFilter),k.push(G.anisotropy),k.push(G.internalFormat),k.push(G.format),k.push(G.type),k.push(G.generateMipmaps),k.push(G.premultiplyAlpha),k.push(G.flipY),k.push(G.unpackAlignment),k.push(G.colorSpace),k.join()}function V(G,k){const re=r.get(G);if(G.isVideoTexture&&je(G),G.isRenderTargetTexture===!1&&G.version>0&&re.__version!==G.version){const be=G.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ve(re,G,k);return}}n.bindTexture(t.TEXTURE_2D,re.__webglTexture,t.TEXTURE0+k)}function ce(G,k){const re=r.get(G);if(G.version>0&&re.__version!==G.version){ve(re,G,k);return}n.bindTexture(t.TEXTURE_2D_ARRAY,re.__webglTexture,t.TEXTURE0+k)}function ae(G,k){const re=r.get(G);if(G.version>0&&re.__version!==G.version){ve(re,G,k);return}n.bindTexture(t.TEXTURE_3D,re.__webglTexture,t.TEXTURE0+k)}function fe(G,k){const re=r.get(G);if(G.version>0&&re.__version!==G.version){U(re,G,k);return}n.bindTexture(t.TEXTURE_CUBE_MAP,re.__webglTexture,t.TEXTURE0+k)}const de={[aa]:t.REPEAT,[ir]:t.CLAMP_TO_EDGE,[sp]:t.MIRRORED_REPEAT},De={[kt]:t.NEAREST,[P0]:t.NEAREST_MIPMAP_NEAREST,[Mh]:t.NEAREST_MIPMAP_LINEAR,[ot]:t.LINEAR,[SM]:t.LINEAR_MIPMAP_NEAREST,[ol]:t.LINEAR_MIPMAP_LINEAR};function Ee(G,k,re){if(re?(t.texParameteri(G,t.TEXTURE_WRAP_S,de[k.wrapS]),t.texParameteri(G,t.TEXTURE_WRAP_T,de[k.wrapT]),(G===t.TEXTURE_3D||G===t.TEXTURE_2D_ARRAY)&&t.texParameteri(G,t.TEXTURE_WRAP_R,de[k.wrapR]),t.texParameteri(G,t.TEXTURE_MAG_FILTER,De[k.magFilter]),t.texParameteri(G,t.TEXTURE_MIN_FILTER,De[k.minFilter])):(t.texParameteri(G,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(G,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(G===t.TEXTURE_3D||G===t.TEXTURE_2D_ARRAY)&&t.texParameteri(G,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(k.wrapS!==ir||k.wrapT!==ir)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(G,t.TEXTURE_MAG_FILTER,E(k.magFilter)),t.texParameteri(G,t.TEXTURE_MIN_FILTER,E(k.minFilter)),k.minFilter!==kt&&k.minFilter!==ot&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const be=e.get("EXT_texture_filter_anisotropic");if(k.magFilter===kt||k.minFilter!==Mh&&k.minFilter!==ol||k.type===Nn&&e.has("OES_texture_float_linear")===!1||a===!1&&k.type===wi&&e.has("OES_texture_half_float_linear")===!1)return;(k.anisotropy>1||r.get(k).__currentAnisotropy)&&(t.texParameterf(G,be.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,i.getMaxAnisotropy())),r.get(k).__currentAnisotropy=k.anisotropy)}}function J(G,k){let re=!1;G.__webglInit===void 0&&(G.__webglInit=!0,k.addEventListener("dispose",O));const be=k.source;let Ae=x.get(be);Ae===void 0&&(Ae={},x.set(be,Ae));const Ue=j(k);if(Ue!==G.__cacheKey){Ae[Ue]===void 0&&(Ae[Ue]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,re=!0),Ae[Ue].usedTimes++;const tt=Ae[G.__cacheKey];tt!==void 0&&(Ae[G.__cacheKey].usedTimes--,tt.usedTimes===0&&K(k)),G.__cacheKey=Ue,G.__webglTexture=Ae[Ue].texture}return re}function ve(G,k,re){let be=t.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(be=t.TEXTURE_2D_ARRAY),k.isData3DTexture&&(be=t.TEXTURE_3D);const Ae=J(G,k),Ue=k.source;n.bindTexture(be,G.__webglTexture,t.TEXTURE0+re);const tt=r.get(Ue);if(Ue.version!==tt.__version||Ae===!0){n.activeTexture(t.TEXTURE0+re),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const Pe=I(k)&&M(k.image)===!1;let Se=w(k.image,Pe,!1,d);Se=Je(k,Se);const Ke=M(Se)||a,te=s.convert(k.format,k.colorSpace);let xe=s.convert(k.type),Re=A(k.internalFormat,te,xe,k.colorSpace);Ee(be,k,Ke);let Ne;const nt=k.mipmaps,pt=a&&k.isVideoTexture!==!0,Kt=tt.__version===void 0||Ae===!0,ie=T(k,Se,Ke);if(k.isDepthTexture)Re=t.DEPTH_COMPONENT,a?k.type===Nn?Re=t.DEPTH_COMPONENT32F:k.type===Zo?Re=t.DEPTH_COMPONENT24:k.type===Ja?Re=t.DEPTH24_STENCIL8:Re=t.DEPTH_COMPONENT16:k.type===Nn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),k.format===el&&Re===t.DEPTH_COMPONENT&&k.type!==wM&&k.type!==Zo&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),k.type=Zo,xe=s.convert(k.type)),k.format===al&&Re===t.DEPTH_COMPONENT&&(Re=t.DEPTH_STENCIL,k.type!==Ja&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),k.type=Ja,xe=s.convert(k.type))),Kt&&(pt?n.texStorage2D(t.TEXTURE_2D,1,Re,Se.width,Se.height):n.texImage2D(t.TEXTURE_2D,0,Re,Se.width,Se.height,0,te,xe,null));else if(k.isDataTexture)if(nt.length>0&&Ke){pt&&Kt&&n.texStorage2D(t.TEXTURE_2D,ie,Re,nt[0].width,nt[0].height);for(let _e=0,ke=nt.length;_e<ke;_e++)Ne=nt[_e],pt?n.texSubImage2D(t.TEXTURE_2D,_e,0,0,Ne.width,Ne.height,te,xe,Ne.data):n.texImage2D(t.TEXTURE_2D,_e,Re,Ne.width,Ne.height,0,te,xe,Ne.data);k.generateMipmaps=!1}else pt?(Kt&&n.texStorage2D(t.TEXTURE_2D,ie,Re,Se.width,Se.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Se.width,Se.height,te,xe,Se.data)):n.texImage2D(t.TEXTURE_2D,0,Re,Se.width,Se.height,0,te,xe,Se.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){pt&&Kt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ie,Re,nt[0].width,nt[0].height,Se.depth);for(let _e=0,ke=nt.length;_e<ke;_e++)Ne=nt[_e],k.format!==vn?te!==null?pt?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,_e,0,0,0,Ne.width,Ne.height,Se.depth,te,Ne.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,_e,Re,Ne.width,Ne.height,Se.depth,0,Ne.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?n.texSubImage3D(t.TEXTURE_2D_ARRAY,_e,0,0,0,Ne.width,Ne.height,Se.depth,te,xe,Ne.data):n.texImage3D(t.TEXTURE_2D_ARRAY,_e,Re,Ne.width,Ne.height,Se.depth,0,te,xe,Ne.data)}else{pt&&Kt&&n.texStorage2D(t.TEXTURE_2D,ie,Re,nt[0].width,nt[0].height);for(let _e=0,ke=nt.length;_e<ke;_e++)Ne=nt[_e],k.format!==vn?te!==null?pt?n.compressedTexSubImage2D(t.TEXTURE_2D,_e,0,0,Ne.width,Ne.height,te,Ne.data):n.compressedTexImage2D(t.TEXTURE_2D,_e,Re,Ne.width,Ne.height,0,Ne.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?n.texSubImage2D(t.TEXTURE_2D,_e,0,0,Ne.width,Ne.height,te,xe,Ne.data):n.texImage2D(t.TEXTURE_2D,_e,Re,Ne.width,Ne.height,0,te,xe,Ne.data)}else if(k.isDataArrayTexture)pt?(Kt&&n.texStorage3D(t.TEXTURE_2D_ARRAY,ie,Re,Se.width,Se.height,Se.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Se.width,Se.height,Se.depth,te,xe,Se.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Re,Se.width,Se.height,Se.depth,0,te,xe,Se.data);else if(k.isData3DTexture)pt?(Kt&&n.texStorage3D(t.TEXTURE_3D,ie,Re,Se.width,Se.height,Se.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Se.width,Se.height,Se.depth,te,xe,Se.data)):n.texImage3D(t.TEXTURE_3D,0,Re,Se.width,Se.height,Se.depth,0,te,xe,Se.data);else if(k.isFramebufferTexture){if(Kt)if(pt)n.texStorage2D(t.TEXTURE_2D,ie,Re,Se.width,Se.height);else{let _e=Se.width,ke=Se.height;for(let Ye=0;Ye<ie;Ye++)n.texImage2D(t.TEXTURE_2D,Ye,Re,_e,ke,0,te,xe,null),_e>>=1,ke>>=1}}else if(nt.length>0&&Ke){pt&&Kt&&n.texStorage2D(t.TEXTURE_2D,ie,Re,nt[0].width,nt[0].height);for(let _e=0,ke=nt.length;_e<ke;_e++)Ne=nt[_e],pt?n.texSubImage2D(t.TEXTURE_2D,_e,0,0,te,xe,Ne):n.texImage2D(t.TEXTURE_2D,_e,Re,te,xe,Ne);k.generateMipmaps=!1}else pt?(Kt&&n.texStorage2D(t.TEXTURE_2D,ie,Re,Se.width,Se.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,te,xe,Se)):n.texImage2D(t.TEXTURE_2D,0,Re,te,xe,Se);P(k,Ke)&&D(be),tt.__version=Ue.version,k.onUpdate&&k.onUpdate(k)}G.__version=k.version}function U(G,k,re){if(k.image.length!==6)return;const be=J(G,k),Ae=k.source;n.bindTexture(t.TEXTURE_CUBE_MAP,G.__webglTexture,t.TEXTURE0+re);const Ue=r.get(Ae);if(Ae.version!==Ue.__version||be===!0){n.activeTexture(t.TEXTURE0+re),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,k.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,k.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const tt=k.isCompressedTexture||k.image[0].isCompressedTexture,Pe=k.image[0]&&k.image[0].isDataTexture,Se=[];for(let _e=0;_e<6;_e++)!tt&&!Pe?Se[_e]=w(k.image[_e],!1,!0,u):Se[_e]=Pe?k.image[_e].image:k.image[_e],Se[_e]=Je(k,Se[_e]);const Ke=Se[0],te=M(Ke)||a,xe=s.convert(k.format,k.colorSpace),Re=s.convert(k.type),Ne=A(k.internalFormat,xe,Re,k.colorSpace),nt=a&&k.isVideoTexture!==!0,pt=Ue.__version===void 0||be===!0;let Kt=T(k,Ke,te);Ee(t.TEXTURE_CUBE_MAP,k,te);let ie;if(tt){nt&&pt&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Kt,Ne,Ke.width,Ke.height);for(let _e=0;_e<6;_e++){ie=Se[_e].mipmaps;for(let ke=0;ke<ie.length;ke++){const Ye=ie[ke];k.format!==vn?xe!==null?nt?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ke,0,0,Ye.width,Ye.height,xe,Ye.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ke,Ne,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ke,0,0,Ye.width,Ye.height,xe,Re,Ye.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ke,Ne,Ye.width,Ye.height,0,xe,Re,Ye.data)}}}else{ie=k.mipmaps,nt&&pt&&(ie.length>0&&Kt++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Kt,Ne,Se[0].width,Se[0].height));for(let _e=0;_e<6;_e++)if(Pe){nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,0,0,Se[_e].width,Se[_e].height,xe,Re,Se[_e].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,Ne,Se[_e].width,Se[_e].height,0,xe,Re,Se[_e].data);for(let ke=0;ke<ie.length;ke++){const rt=ie[ke].image[_e].image;nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ke+1,0,0,rt.width,rt.height,xe,Re,rt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ke+1,Ne,rt.width,rt.height,0,xe,Re,rt.data)}}else{nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,0,0,xe,Re,Se[_e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,0,Ne,xe,Re,Se[_e]);for(let ke=0;ke<ie.length;ke++){const Ye=ie[ke];nt?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ke+1,0,0,xe,Re,Ye.image[_e]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+_e,ke+1,Ne,xe,Re,Ye.image[_e])}}}P(k,te)&&D(t.TEXTURE_CUBE_MAP),Ue.__version=Ae.version,k.onUpdate&&k.onUpdate(k)}G.__version=k.version}function z(G,k,re,be,Ae){const Ue=s.convert(re.format,re.colorSpace),tt=s.convert(re.type),Pe=A(re.internalFormat,Ue,tt,re.colorSpace);r.get(k).__hasExternalTextures||(Ae===t.TEXTURE_3D||Ae===t.TEXTURE_2D_ARRAY?n.texImage3D(Ae,0,Pe,k.width,k.height,k.depth,0,Ue,tt,null):n.texImage2D(Ae,0,Pe,k.width,k.height,0,Ue,tt,null)),n.bindFramebuffer(t.FRAMEBUFFER,G),Ge(k)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,be,Ae,r.get(re).__webglTexture,0,We(k)):(Ae===t.TEXTURE_2D||Ae>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Ae<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,be,Ae,r.get(re).__webglTexture,0),n.bindFramebuffer(t.FRAMEBUFFER,null)}function W(G,k,re){if(t.bindRenderbuffer(t.RENDERBUFFER,G),k.depthBuffer&&!k.stencilBuffer){let be=t.DEPTH_COMPONENT16;if(re||Ge(k)){const Ae=k.depthTexture;Ae&&Ae.isDepthTexture&&(Ae.type===Nn?be=t.DEPTH_COMPONENT32F:Ae.type===Zo&&(be=t.DEPTH_COMPONENT24));const Ue=We(k);Ge(k)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ue,be,k.width,k.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,Ue,be,k.width,k.height)}else t.renderbufferStorage(t.RENDERBUFFER,be,k.width,k.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,G)}else if(k.depthBuffer&&k.stencilBuffer){const be=We(k);re&&Ge(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,be,t.DEPTH24_STENCIL8,k.width,k.height):Ge(k)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,be,t.DEPTH24_STENCIL8,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,k.width,k.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,G)}else{const be=k.isWebGLMultipleRenderTargets===!0?k.texture:[k.texture];for(let Ae=0;Ae<be.length;Ae++){const Ue=be[Ae],tt=s.convert(Ue.format,Ue.colorSpace),Pe=s.convert(Ue.type),Se=A(Ue.internalFormat,tt,Pe,Ue.colorSpace),Ke=We(k);re&&Ge(k)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Ke,Se,k.width,k.height):Ge(k)?p.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Ke,Se,k.width,k.height):t.renderbufferStorage(t.RENDERBUFFER,Se,k.width,k.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function ne(G,k){if(k&&k.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,G),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(k.depthTexture).__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),V(k.depthTexture,0);const be=r.get(k.depthTexture).__webglTexture,Ae=We(k);if(k.depthTexture.format===el)Ge(k)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,be,0,Ae):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,be,0);else if(k.depthTexture.format===al)Ge(k)?p.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,be,0,Ae):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,be,0);else throw new Error("Unknown depthTexture format")}function q(G){const k=r.get(G),re=G.isWebGLCubeRenderTarget===!0;if(G.depthTexture&&!k.__autoAllocateDepthBuffer){if(re)throw new Error("target.depthTexture not supported in Cube render targets");ne(k.__webglFramebuffer,G)}else if(re){k.__webglDepthbuffer=[];for(let be=0;be<6;be++)n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer[be]),k.__webglDepthbuffer[be]=t.createRenderbuffer(),W(k.__webglDepthbuffer[be],G,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer=t.createRenderbuffer(),W(k.__webglDepthbuffer,G,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function se(G,k,re){const be=r.get(G);k!==void 0&&z(be.__webglFramebuffer,G,G.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D),re!==void 0&&q(G)}function Ce(G){const k=G.texture,re=r.get(G),be=r.get(k);G.addEventListener("dispose",N),G.isWebGLMultipleRenderTargets!==!0&&(be.__webglTexture===void 0&&(be.__webglTexture=t.createTexture()),be.__version=k.version,o.memory.textures++);const Ae=G.isWebGLCubeRenderTarget===!0,Ue=G.isWebGLMultipleRenderTargets===!0,tt=M(G)||a;if(Ae){re.__webglFramebuffer=[];for(let Pe=0;Pe<6;Pe++)re.__webglFramebuffer[Pe]=t.createFramebuffer()}else{if(re.__webglFramebuffer=t.createFramebuffer(),Ue)if(i.drawBuffers){const Pe=G.texture;for(let Se=0,Ke=Pe.length;Se<Ke;Se++){const te=r.get(Pe[Se]);te.__webglTexture===void 0&&(te.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&G.samples>0&&Ge(G)===!1){const Pe=Ue?k:[k];re.__webglMultisampledFramebuffer=t.createFramebuffer(),re.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,re.__webglMultisampledFramebuffer);for(let Se=0;Se<Pe.length;Se++){const Ke=Pe[Se];re.__webglColorRenderbuffer[Se]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,re.__webglColorRenderbuffer[Se]);const te=s.convert(Ke.format,Ke.colorSpace),xe=s.convert(Ke.type),Re=A(Ke.internalFormat,te,xe,Ke.colorSpace,G.isXRRenderTarget===!0),Ne=We(G);t.renderbufferStorageMultisample(t.RENDERBUFFER,Ne,Re,G.width,G.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Se,t.RENDERBUFFER,re.__webglColorRenderbuffer[Se])}t.bindRenderbuffer(t.RENDERBUFFER,null),G.depthBuffer&&(re.__webglDepthRenderbuffer=t.createRenderbuffer(),W(re.__webglDepthRenderbuffer,G,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Ae){n.bindTexture(t.TEXTURE_CUBE_MAP,be.__webglTexture),Ee(t.TEXTURE_CUBE_MAP,k,tt);for(let Pe=0;Pe<6;Pe++)z(re.__webglFramebuffer[Pe],G,k,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Pe);P(k,tt)&&D(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ue){const Pe=G.texture;for(let Se=0,Ke=Pe.length;Se<Ke;Se++){const te=Pe[Se],xe=r.get(te);n.bindTexture(t.TEXTURE_2D,xe.__webglTexture),Ee(t.TEXTURE_2D,te,tt),z(re.__webglFramebuffer,G,te,t.COLOR_ATTACHMENT0+Se,t.TEXTURE_2D),P(te,tt)&&D(t.TEXTURE_2D)}n.unbindTexture()}else{let Pe=t.TEXTURE_2D;(G.isWebGL3DRenderTarget||G.isWebGLArrayRenderTarget)&&(a?Pe=G.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Pe,be.__webglTexture),Ee(Pe,k,tt),z(re.__webglFramebuffer,G,k,t.COLOR_ATTACHMENT0,Pe),P(k,tt)&&D(Pe),n.unbindTexture()}G.depthBuffer&&q(G)}function Le(G){const k=M(G)||a,re=G.isWebGLMultipleRenderTargets===!0?G.texture:[G.texture];for(let be=0,Ae=re.length;be<Ae;be++){const Ue=re[be];if(P(Ue,k)){const tt=G.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Pe=r.get(Ue).__webglTexture;n.bindTexture(tt,Pe),D(tt),n.unbindTexture()}}}function He(G){if(a&&G.samples>0&&Ge(G)===!1){const k=G.isWebGLMultipleRenderTargets?G.texture:[G.texture],re=G.width,be=G.height;let Ae=t.COLOR_BUFFER_BIT;const Ue=[],tt=G.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Pe=r.get(G),Se=G.isWebGLMultipleRenderTargets===!0;if(Se)for(let Ke=0;Ke<k.length;Ke++)n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ke,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ke,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Pe.__webglFramebuffer);for(let Ke=0;Ke<k.length;Ke++){Ue.push(t.COLOR_ATTACHMENT0+Ke),G.depthBuffer&&Ue.push(tt);const te=Pe.__ignoreDepthValues!==void 0?Pe.__ignoreDepthValues:!1;if(te===!1&&(G.depthBuffer&&(Ae|=t.DEPTH_BUFFER_BIT),G.stencilBuffer&&(Ae|=t.STENCIL_BUFFER_BIT)),Se&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Pe.__webglColorRenderbuffer[Ke]),te===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[tt]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[tt])),Se){const xe=r.get(k[Ke]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,xe,0)}t.blitFramebuffer(0,0,re,be,0,0,re,be,Ae,t.NEAREST),g&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,Ue)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Se)for(let Ke=0;Ke<k.length;Ke++){n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ke,t.RENDERBUFFER,Pe.__webglColorRenderbuffer[Ke]);const te=r.get(k[Ke]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Ke,t.TEXTURE_2D,te,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Pe.__webglMultisampledFramebuffer)}}function We(G){return Math.min(h,G.samples)}function Ge(G){const k=r.get(G);return a&&G.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function je(G){const k=o.render.frame;v.get(G)!==k&&(v.set(G,k),G.update())}function Je(G,k){const re=G.colorSpace,be=G.format,Ae=G.type;return G.isCompressedTexture===!0||G.format===A0||re!==Xs&&re!==tl&&(re===wt?a===!1?e.has("EXT_sRGB")===!0&&be===vn?(G.format=A0,G.minFilter=ot,G.generateMipmaps=!1):k=CM.sRGBToLinear(k):(be!==vn||Ae!==pn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",re)),k}this.allocateTextureUnit=F,this.resetTextureUnits=ee,this.setTexture2D=V,this.setTexture2DArray=ce,this.setTexture3D=ae,this.setTextureCube=fe,this.rebindTextures=se,this.setupRenderTarget=Ce,this.updateRenderTargetMipmap=Le,this.updateMultisampleRenderTarget=He,this.setupDepthRenderbuffer=q,this.setupFrameBufferTexture=z,this.useMultisampledRTT=Ge}function gO(t,e,n){const r=n.isWebGL2;function i(s,o=tl){let a;if(s===pn)return t.UNSIGNED_BYTE;if(s===$4)return t.UNSIGNED_SHORT_4_4_4_4;if(s===j4)return t.UNSIGNED_SHORT_5_5_5_1;if(s===V4)return t.BYTE;if(s===G4)return t.SHORT;if(s===wM)return t.UNSIGNED_SHORT;if(s===W4)return t.INT;if(s===Zo)return t.UNSIGNED_INT;if(s===Nn)return t.FLOAT;if(s===wi)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===X4)return t.ALPHA;if(s===vn)return t.RGBA;if(s===cy)return t.LUMINANCE;if(s===K4)return t.LUMINANCE_ALPHA;if(s===el)return t.DEPTH_COMPONENT;if(s===al)return t.DEPTH_STENCIL;if(s===A0)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===bM)return t.RED;if(s===Y4)return t.RED_INTEGER;if(s===MM)return t.RG;if(s===q4)return t.RG_INTEGER;if(s===Z4)return t.RGBA_INTEGER;if(s===zv||s===Bv||s===Hv||s===Vv)if(o===wt)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===zv)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Bv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Hv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Vv)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===zv)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Bv)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Hv)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Vv)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===tw||s===nw||s===rw||s===iw)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===tw)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===nw)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===rw)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===iw)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===Q4)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===sw||s===ow)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===sw)return o===wt?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===ow)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===aw||s===lw||s===uw||s===cw||s===fw||s===dw||s===hw||s===pw||s===mw||s===gw||s===vw||s===yw||s===xw||s===_w)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===aw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===lw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===uw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===cw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===fw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===dw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===hw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===pw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===mw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===gw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===vw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===yw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===xw)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===_w)return o===wt?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Gv)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Gv)return o===wt?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===J4||s===Sw||s===ww||s===bw)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Gv)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Sw)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===ww)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===bw)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===Ja?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class vO extends jt{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class qc extends Gt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _W={type:"move"};class s_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new qc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new qc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new B,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new B),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new qc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new B,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new B),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const _ of e.hand.values()){const x=n.getJointPose(_,r),m=this._getHandJoint(u,_);x!==null&&(m.matrix.fromArray(x.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=x.radius),m.visible=x!==null}const d=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],p=d.position.distanceTo(h.position),g=.02,v=.005;u.inputState.pinching&&p>g+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&p<=g-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_W)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new qc;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class Up extends Bn{constructor(e,n,r,i,s,o,a,l,u,d){if(d=d!==void 0?d:el,d!==el&&d!==al)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&d===el&&(r=Zo),r===void 0&&d===al&&(r=Ja),super(null,i,s,o,a,l,d,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:kt,this.minFilter=l!==void 0?l:kt,this.flipY=!1,this.generateMipmaps=!1}}class SW extends Gi{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,d=null,h=null,p=null,g=null,v=null;const _=n.getContextAttributes();let x=null,m=null;const S=[],w=[],M=new Set,I=new Map,P=new jt;P.layers.enable(1),P.viewport=new bt;const D=new jt;D.layers.enable(2),D.viewport=new bt;const A=[P,D],T=new vO;T.layers.enable(1),T.layers.enable(2);let E=null,O=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(fe){let de=S[fe];return de===void 0&&(de=new s_,S[fe]=de),de.getTargetRaySpace()},this.getControllerGrip=function(fe){let de=S[fe];return de===void 0&&(de=new s_,S[fe]=de),de.getGripSpace()},this.getHand=function(fe){let de=S[fe];return de===void 0&&(de=new s_,S[fe]=de),de.getHandSpace()};function N(fe){const de=w.indexOf(fe.inputSource);if(de===-1)return;const De=S[de];De!==void 0&&(De.update(fe.inputSource,fe.frame,u||o),De.dispatchEvent({type:fe.type,data:fe.inputSource}))}function H(){i.removeEventListener("select",N),i.removeEventListener("selectstart",N),i.removeEventListener("selectend",N),i.removeEventListener("squeeze",N),i.removeEventListener("squeezestart",N),i.removeEventListener("squeezeend",N),i.removeEventListener("end",H),i.removeEventListener("inputsourceschange",K);for(let fe=0;fe<S.length;fe++){const de=w[fe];de!==null&&(w[fe]=null,S[fe].disconnect(de))}E=null,O=null,e.setRenderTarget(x),g=null,p=null,h=null,i=null,m=null,ae.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(fe){s=fe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(fe){a=fe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(fe){u=fe},this.getBaseLayer=function(){return p!==null?p:g},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(fe){if(i=fe,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",N),i.addEventListener("selectstart",N),i.addEventListener("selectend",N),i.addEventListener("squeeze",N),i.addEventListener("squeezestart",N),i.addEventListener("squeezeend",N),i.addEventListener("end",H),i.addEventListener("inputsourceschange",K),_.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const de={antialias:i.renderState.layers===void 0?_.antialias:!0,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(i,n,de),i.updateRenderState({baseLayer:g}),m=new Lt(g.framebufferWidth,g.framebufferHeight,{format:vn,type:pn,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil})}else{let de=null,De=null,Ee=null;_.depth&&(Ee=_.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,de=_.stencil?al:el,De=_.stencil?Ja:Zo);const J={colorFormat:n.RGBA8,depthFormat:Ee,scaleFactor:s};h=new XRWebGLBinding(i,n),p=h.createProjectionLayer(J),i.updateRenderState({layers:[p]}),m=new Lt(p.textureWidth,p.textureHeight,{format:vn,type:pn,depthTexture:new Up(p.textureWidth,p.textureHeight,De,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0});const ve=e.properties.get(m);ve.__ignoreDepthValues=p.ignoreDepthValues}m.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),ae.setContext(i),ae.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function K(fe){for(let de=0;de<fe.removed.length;de++){const De=fe.removed[de],Ee=w.indexOf(De);Ee>=0&&(w[Ee]=null,S[Ee].disconnect(De))}for(let de=0;de<fe.added.length;de++){const De=fe.added[de];let Ee=w.indexOf(De);if(Ee===-1){for(let ve=0;ve<S.length;ve++)if(ve>=w.length){w.push(De),Ee=ve;break}else if(w[ve]===null){w[ve]=De,Ee=ve;break}if(Ee===-1)break}const J=S[Ee];J&&J.connect(De)}}const Y=new B,Q=new B;function ee(fe,de,De){Y.setFromMatrixPosition(de.matrixWorld),Q.setFromMatrixPosition(De.matrixWorld);const Ee=Y.distanceTo(Q),J=de.projectionMatrix.elements,ve=De.projectionMatrix.elements,U=J[14]/(J[10]-1),z=J[14]/(J[10]+1),W=(J[9]+1)/J[5],ne=(J[9]-1)/J[5],q=(J[8]-1)/J[0],se=(ve[8]+1)/ve[0],Ce=U*q,Le=U*se,He=Ee/(-q+se),We=He*-q;de.matrixWorld.decompose(fe.position,fe.quaternion,fe.scale),fe.translateX(We),fe.translateZ(He),fe.matrixWorld.compose(fe.position,fe.quaternion,fe.scale),fe.matrixWorldInverse.copy(fe.matrixWorld).invert();const Ge=U+He,je=z+He,Je=Ce-We,G=Le+(Ee-We),k=W*z/je*Ge,re=ne*z/je*Ge;fe.projectionMatrix.makePerspective(Je,G,k,re,Ge,je),fe.projectionMatrixInverse.copy(fe.projectionMatrix).invert()}function F(fe,de){de===null?fe.matrixWorld.copy(fe.matrix):fe.matrixWorld.multiplyMatrices(de.matrixWorld,fe.matrix),fe.matrixWorldInverse.copy(fe.matrixWorld).invert()}this.updateCamera=function(fe){if(i===null)return;T.near=D.near=P.near=fe.near,T.far=D.far=P.far=fe.far,(E!==T.near||O!==T.far)&&(i.updateRenderState({depthNear:T.near,depthFar:T.far}),E=T.near,O=T.far);const de=fe.parent,De=T.cameras;F(T,de);for(let Ee=0;Ee<De.length;Ee++)F(De[Ee],de);De.length===2?ee(T,P,D):T.projectionMatrix.copy(P.projectionMatrix),j(fe,T,de)};function j(fe,de,De){De===null?fe.matrix.copy(de.matrixWorld):(fe.matrix.copy(De.matrixWorld),fe.matrix.invert(),fe.matrix.multiply(de.matrixWorld)),fe.matrix.decompose(fe.position,fe.quaternion,fe.scale),fe.updateMatrixWorld(!0);const Ee=fe.children;for(let J=0,ve=Ee.length;J<ve;J++)Ee[J].updateMatrixWorld(!0);fe.projectionMatrix.copy(de.projectionMatrix),fe.projectionMatrixInverse.copy(de.projectionMatrixInverse),fe.isPerspectiveCamera&&(fe.fov=bf*2*Math.atan(1/fe.projectionMatrix.elements[5]),fe.zoom=1)}this.getCamera=function(){return T},this.getFoveation=function(){if(!(p===null&&g===null))return l},this.setFoveation=function(fe){l=fe,p!==null&&(p.fixedFoveation=fe),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=fe)},this.getPlanes=function(){return M};let V=null;function ce(fe,de){if(d=de.getViewerPose(u||o),v=de,d!==null){const De=d.views;g!==null&&(e.setRenderTargetFramebuffer(m,g.framebuffer),e.setRenderTarget(m));let Ee=!1;De.length!==T.cameras.length&&(T.cameras.length=0,Ee=!0);for(let J=0;J<De.length;J++){const ve=De[J];let U=null;if(g!==null)U=g.getViewport(ve);else{const W=h.getViewSubImage(p,ve);U=W.viewport,J===0&&(e.setRenderTargetTextures(m,W.colorTexture,p.ignoreDepthValues?void 0:W.depthStencilTexture),e.setRenderTarget(m))}let z=A[J];z===void 0&&(z=new jt,z.layers.enable(J),z.viewport=new bt,A[J]=z),z.matrix.fromArray(ve.transform.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale),z.projectionMatrix.fromArray(ve.projectionMatrix),z.projectionMatrixInverse.copy(z.projectionMatrix).invert(),z.viewport.set(U.x,U.y,U.width,U.height),J===0&&(T.matrix.copy(z.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),Ee===!0&&T.cameras.push(z)}}for(let De=0;De<S.length;De++){const Ee=w[De],J=S[De];Ee!==null&&J!==void 0&&J.update(Ee,de,u||o)}if(V&&V(fe,de),de.detectedPlanes){r.dispatchEvent({type:"planesdetected",data:de.detectedPlanes});let De=null;for(const Ee of M)de.detectedPlanes.has(Ee)||(De===null&&(De=[]),De.push(Ee));if(De!==null)for(const Ee of De)M.delete(Ee),I.delete(Ee),r.dispatchEvent({type:"planeremoved",data:Ee});for(const Ee of de.detectedPlanes)if(!M.has(Ee))M.add(Ee),I.set(Ee,de.lastChangedTime),r.dispatchEvent({type:"planeadded",data:Ee});else{const J=I.get(Ee);Ee.lastChangedTime>J&&(I.set(Ee,Ee.lastChangedTime),r.dispatchEvent({type:"planechanged",data:Ee}))}}v=null}const ae=new fO;ae.setAnimationLoop(ce),this.setAnimationLoop=function(fe){V=fe},this.dispose=function(){}}}function wW(t,e){function n(x,m){x.matrixAutoUpdate===!0&&x.updateMatrix(),m.value.copy(x.matrix)}function r(x,m){m.color.getRGB(x.fogColor.value,cO(t)),m.isFog?(x.fogNear.value=m.near,x.fogFar.value=m.far):m.isFogExp2&&(x.fogDensity.value=m.density)}function i(x,m,S,w,M){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(x,m):m.isMeshToonMaterial?(s(x,m),h(x,m)):m.isMeshPhongMaterial?(s(x,m),d(x,m)):m.isMeshStandardMaterial?(s(x,m),p(x,m),m.isMeshPhysicalMaterial&&g(x,m,M)):m.isMeshMatcapMaterial?(s(x,m),v(x,m)):m.isMeshDepthMaterial?s(x,m):m.isMeshDistanceMaterial?(s(x,m),_(x,m)):m.isMeshNormalMaterial?s(x,m):m.isLineBasicMaterial?(o(x,m),m.isLineDashedMaterial&&a(x,m)):m.isPointsMaterial?l(x,m,S,w):m.isSpriteMaterial?u(x,m):m.isShadowMaterial?(x.color.value.copy(m.color),x.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(x,m){x.opacity.value=m.opacity,m.color&&x.diffuse.value.copy(m.color),m.emissive&&x.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(x.map.value=m.map,n(m.map,x.mapTransform)),m.alphaMap&&(x.alphaMap.value=m.alphaMap,n(m.alphaMap,x.alphaMapTransform)),m.bumpMap&&(x.bumpMap.value=m.bumpMap,n(m.bumpMap,x.bumpMapTransform),x.bumpScale.value=m.bumpScale,m.side===or&&(x.bumpScale.value*=-1)),m.normalMap&&(x.normalMap.value=m.normalMap,n(m.normalMap,x.normalMapTransform),x.normalScale.value.copy(m.normalScale),m.side===or&&x.normalScale.value.negate()),m.displacementMap&&(x.displacementMap.value=m.displacementMap,n(m.displacementMap,x.displacementMapTransform),x.displacementScale.value=m.displacementScale,x.displacementBias.value=m.displacementBias),m.emissiveMap&&(x.emissiveMap.value=m.emissiveMap,n(m.emissiveMap,x.emissiveMapTransform)),m.specularMap&&(x.specularMap.value=m.specularMap,n(m.specularMap,x.specularMapTransform)),m.alphaTest>0&&(x.alphaTest.value=m.alphaTest);const S=e.get(m).envMap;if(S&&(x.envMap.value=S,x.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=m.reflectivity,x.ior.value=m.ior,x.refractionRatio.value=m.refractionRatio),m.lightMap){x.lightMap.value=m.lightMap;const w=t.useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=m.lightMapIntensity*w,n(m.lightMap,x.lightMapTransform)}m.aoMap&&(x.aoMap.value=m.aoMap,x.aoMapIntensity.value=m.aoMapIntensity,n(m.aoMap,x.aoMapTransform))}function o(x,m){x.diffuse.value.copy(m.color),x.opacity.value=m.opacity,m.map&&(x.map.value=m.map,n(m.map,x.mapTransform))}function a(x,m){x.dashSize.value=m.dashSize,x.totalSize.value=m.dashSize+m.gapSize,x.scale.value=m.scale}function l(x,m,S,w){x.diffuse.value.copy(m.color),x.opacity.value=m.opacity,x.size.value=m.size*S,x.scale.value=w*.5,m.map&&(x.map.value=m.map,n(m.map,x.uvTransform)),m.alphaMap&&(x.alphaMap.value=m.alphaMap),m.alphaTest>0&&(x.alphaTest.value=m.alphaTest)}function u(x,m){x.diffuse.value.copy(m.color),x.opacity.value=m.opacity,x.rotation.value=m.rotation,m.map&&(x.map.value=m.map,n(m.map,x.mapTransform)),m.alphaMap&&(x.alphaMap.value=m.alphaMap),m.alphaTest>0&&(x.alphaTest.value=m.alphaTest)}function d(x,m){x.specular.value.copy(m.specular),x.shininess.value=Math.max(m.shininess,1e-4)}function h(x,m){m.gradientMap&&(x.gradientMap.value=m.gradientMap)}function p(x,m){x.metalness.value=m.metalness,m.metalnessMap&&(x.metalnessMap.value=m.metalnessMap,n(m.metalnessMap,x.metalnessMapTransform)),x.roughness.value=m.roughness,m.roughnessMap&&(x.roughnessMap.value=m.roughnessMap,n(m.roughnessMap,x.roughnessMapTransform)),e.get(m).envMap&&(x.envMapIntensity.value=m.envMapIntensity)}function g(x,m,S){x.ior.value=m.ior,m.sheen>0&&(x.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),x.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(x.sheenColorMap.value=m.sheenColorMap,n(m.sheenColorMap,x.sheenColorMapTransform)),m.sheenRoughnessMap&&(x.sheenRoughnessMap.value=m.sheenRoughnessMap,n(m.sheenRoughnessMap,x.sheenRoughnessMapTransform))),m.clearcoat>0&&(x.clearcoat.value=m.clearcoat,x.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(x.clearcoatMap.value=m.clearcoatMap,n(m.clearcoatMap,x.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,n(m.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(x.clearcoatNormalMap.value=m.clearcoatNormalMap,n(m.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===or&&x.clearcoatNormalScale.value.negate())),m.iridescence>0&&(x.iridescence.value=m.iridescence,x.iridescenceIOR.value=m.iridescenceIOR,x.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(x.iridescenceMap.value=m.iridescenceMap,n(m.iridescenceMap,x.iridescenceMapTransform)),m.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=m.iridescenceThicknessMap,n(m.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),m.transmission>0&&(x.transmission.value=m.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),m.transmissionMap&&(x.transmissionMap.value=m.transmissionMap,n(m.transmissionMap,x.transmissionMapTransform)),x.thickness.value=m.thickness,m.thicknessMap&&(x.thicknessMap.value=m.thicknessMap,n(m.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=m.attenuationDistance,x.attenuationColor.value.copy(m.attenuationColor)),x.specularIntensity.value=m.specularIntensity,x.specularColor.value.copy(m.specularColor),m.specularColorMap&&(x.specularColorMap.value=m.specularColorMap,n(m.specularColorMap,x.specularColorMapTransform)),m.specularIntensityMap&&(x.specularIntensityMap.value=m.specularIntensityMap,n(m.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,m){m.matcap&&(x.matcap.value=m.matcap)}function _(x,m){const S=e.get(m).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function bW(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,w){const M=w.program;r.uniformBlockBinding(S,M)}function u(S,w){let M=i[S.id];M===void 0&&(v(S),M=d(S),i[S.id]=M,S.addEventListener("dispose",x));const I=w.program;r.updateUBOMapping(S,I);const P=e.render.frame;s[S.id]!==P&&(p(S),s[S.id]=P)}function d(S){const w=h();S.__bindingPointIndex=w;const M=t.createBuffer(),I=S.__size,P=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,M),t.bufferData(t.UNIFORM_BUFFER,I,P),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,M),M}function h(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function p(S){const w=i[S.id],M=S.uniforms,I=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let P=0,D=M.length;P<D;P++){const A=M[P];if(g(A,P,I)===!0){const T=A.__offset,E=Array.isArray(A.value)?A.value:[A.value];let O=0;for(let N=0;N<E.length;N++){const H=E[N],K=_(H);typeof H=="number"?(A.__data[0]=H,t.bufferSubData(t.UNIFORM_BUFFER,T+O,A.__data)):H.isMatrix3?(A.__data[0]=H.elements[0],A.__data[1]=H.elements[1],A.__data[2]=H.elements[2],A.__data[3]=H.elements[0],A.__data[4]=H.elements[3],A.__data[5]=H.elements[4],A.__data[6]=H.elements[5],A.__data[7]=H.elements[0],A.__data[8]=H.elements[6],A.__data[9]=H.elements[7],A.__data[10]=H.elements[8],A.__data[11]=H.elements[0]):(H.toArray(A.__data,O),O+=K.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,T,A.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function g(S,w,M){const I=S.value;if(M[w]===void 0){if(typeof I=="number")M[w]=I;else{const P=Array.isArray(I)?I:[I],D=[];for(let A=0;A<P.length;A++)D.push(P[A].clone());M[w]=D}return!0}else if(typeof I=="number"){if(M[w]!==I)return M[w]=I,!0}else{const P=Array.isArray(M[w])?M[w]:[M[w]],D=Array.isArray(I)?I:[I];for(let A=0;A<P.length;A++){const T=P[A];if(T.equals(D[A])===!1)return T.copy(D[A]),!0}}return!1}function v(S){const w=S.uniforms;let M=0;const I=16;let P=0;for(let D=0,A=w.length;D<A;D++){const T=w[D],E={boundary:0,storage:0},O=Array.isArray(T.value)?T.value:[T.value];for(let N=0,H=O.length;N<H;N++){const K=O[N],Y=_(K);E.boundary+=Y.boundary,E.storage+=Y.storage}if(T.__data=new Float32Array(E.storage/Float32Array.BYTES_PER_ELEMENT),T.__offset=M,D>0){P=M%I;const N=I-P;P!==0&&N-E.boundary<0&&(M+=I-P,T.__offset=M)}M+=E.storage}return P=M%I,P>0&&(M+=I-P),S.__size=M,S.__cache={},this}function _(S){const w={boundary:0,storage:0};return typeof S=="number"?(w.boundary=4,w.storage=4):S.isVector2?(w.boundary=8,w.storage=8):S.isVector3||S.isColor?(w.boundary=16,w.storage=12):S.isVector4?(w.boundary=16,w.storage=16):S.isMatrix3?(w.boundary=48,w.storage=48):S.isMatrix4?(w.boundary=64,w.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),w}function x(S){const w=S.target;w.removeEventListener("dispose",x);const M=o.indexOf(w.__bindingPointIndex);o.splice(M,1),t.deleteBuffer(i[w.id]),delete i[w.id],delete s[w.id]}function m(){for(const S in i)t.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:u,dispose:m}}function MW(){const t=cp("canvas");return t.style.display="block",t}class OM{constructor(e={}){const{canvas:n=MW(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let p;r!==null?p=r.getContextAttributes().alpha:p=o;let g=null,v=null;const _=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=wt,this.useLegacyLights=!0,this.toneMapping=Ws,this.toneMappingExposure=1;const m=this;let S=!1,w=0,M=0,I=null,P=-1,D=null;const A=new bt,T=new bt;let E=null,O=n.width,N=n.height,H=1,K=null,Y=null;const Q=new bt(0,0,O,N),ee=new bt(0,0,O,N);let F=!1;const j=new my;let V=!1,ce=!1,ae=null;const fe=new at,de=new B,De={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ee(){return I===null?H:1}let J=r;function ve($,ge){for(let Me=0;Me<$.length;Me++){const pe=$[Me],Te=n.getContext(pe,ge);if(Te!==null)return Te}return null}try{const $={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:d,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${Au}`),n.addEventListener("webglcontextlost",Ne,!1),n.addEventListener("webglcontextrestored",nt,!1),n.addEventListener("webglcontextcreationerror",pt,!1),J===null){const ge=["webgl2","webgl","experimental-webgl"];if(m.isWebGL1Renderer===!0&&ge.shift(),J=ve(ge,$),J===null)throw ve(ge)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}J.getShaderPrecisionFormat===void 0&&(J.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let U,z,W,ne,q,se,Ce,Le,He,We,Ge,je,Je,G,k,re,be,Ae,Ue,tt,Pe,Se,Ke,te;function xe(){U=new BV(J),z=new OV(J,U,e),U.init(z),Se=new gO(J,U,z),W=new yW(J,U,z),ne=new GV(J),q=new oW,se=new xW(J,U,W,q,z,Se,ne),Ce=new UV(m),Le=new zV(m),He=new t8(J,z),Ke=new DV(J,U,He,z),We=new HV(J,He,ne,Ke),Ge=new XV(J,We,He,ne),Ue=new jV(J,z,se),re=new kV(q),je=new sW(m,Ce,Le,U,z,Ke,re),Je=new wW(m,q),G=new lW,k=new pW(U,z),Ae=new IV(m,Ce,Le,W,Ge,p,l),be=new vW(m,Ge,z),te=new bW(J,ne,z,W),tt=new LV(J,U,ne,z),Pe=new VV(J,U,ne,z),ne.programs=je.programs,m.capabilities=z,m.extensions=U,m.properties=q,m.renderLists=G,m.shadowMap=be,m.state=W,m.info=ne}xe();const Re=new SW(m,J);this.xr=Re,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const $=U.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=U.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return H},this.setPixelRatio=function($){$!==void 0&&(H=$,this.setSize(O,N,!1))},this.getSize=function($){return $.set(O,N)},this.setSize=function($,ge,Me=!0){if(Re.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}O=$,N=ge,n.width=Math.floor($*H),n.height=Math.floor(ge*H),Me===!0&&(n.style.width=$+"px",n.style.height=ge+"px"),this.setViewport(0,0,$,ge)},this.getDrawingBufferSize=function($){return $.set(O*H,N*H).floor()},this.setDrawingBufferSize=function($,ge,Me){O=$,N=ge,H=Me,n.width=Math.floor($*Me),n.height=Math.floor(ge*Me),this.setViewport(0,0,$,ge)},this.getCurrentViewport=function($){return $.copy(A)},this.getViewport=function($){return $.copy(Q)},this.setViewport=function($,ge,Me,pe){$.isVector4?Q.set($.x,$.y,$.z,$.w):Q.set($,ge,Me,pe),W.viewport(A.copy(Q).multiplyScalar(H).floor())},this.getScissor=function($){return $.copy(ee)},this.setScissor=function($,ge,Me,pe){$.isVector4?ee.set($.x,$.y,$.z,$.w):ee.set($,ge,Me,pe),W.scissor(T.copy(ee).multiplyScalar(H).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function($){W.setScissorTest(F=$)},this.setOpaqueSort=function($){K=$},this.setTransparentSort=function($){Y=$},this.getClearColor=function($){return $.copy(Ae.getClearColor())},this.setClearColor=function(){Ae.setClearColor.apply(Ae,arguments)},this.getClearAlpha=function(){return Ae.getClearAlpha()},this.setClearAlpha=function(){Ae.setClearAlpha.apply(Ae,arguments)},this.clear=function($=!0,ge=!0,Me=!0){let pe=0;$&&(pe|=J.COLOR_BUFFER_BIT),ge&&(pe|=J.DEPTH_BUFFER_BIT),Me&&(pe|=J.STENCIL_BUFFER_BIT),J.clear(pe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ne,!1),n.removeEventListener("webglcontextrestored",nt,!1),n.removeEventListener("webglcontextcreationerror",pt,!1),G.dispose(),k.dispose(),q.dispose(),Ce.dispose(),Le.dispose(),Ge.dispose(),Ke.dispose(),te.dispose(),je.dispose(),Re.dispose(),Re.removeEventListener("sessionstart",rt),Re.removeEventListener("sessionend",Yt),ae&&(ae.dispose(),ae=null),qt.stop()};function Ne($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}function nt(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;const $=ne.autoReset,ge=be.enabled,Me=be.autoUpdate,pe=be.needsUpdate,Te=be.type;xe(),ne.autoReset=$,be.enabled=ge,be.autoUpdate=Me,be.needsUpdate=pe,be.type=Te}function pt($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function Kt($){const ge=$.target;ge.removeEventListener("dispose",Kt),ie(ge)}function ie($){_e($),q.remove($)}function _e($){const ge=q.get($).programs;ge!==void 0&&(ge.forEach(function(Me){je.releaseProgram(Me)}),$.isShaderMaterial&&je.releaseShaderCache($))}this.renderBufferDirect=function($,ge,Me,pe,Te,lt){ge===null&&(ge=De);const dt=Te.isMesh&&Te.matrixWorld.determinant()<0,mt=lm($,ge,Me,pe,Te);W.setMaterial(pe,dt);let _t=Me.index,Pt=1;pe.wireframe===!0&&(_t=We.getWireframeAttribute(Me),Pt=2);const Ct=Me.drawRange,It=Me.attributes.position;let Zt=Ct.start*Pt,wr=(Ct.start+Ct.count)*Pt;lt!==null&&(Zt=Math.max(Zt,lt.start*Pt),wr=Math.min(wr,(lt.start+lt.count)*Pt)),_t!==null?(Zt=Math.max(Zt,0),wr=Math.min(wr,_t.count)):It!=null&&(Zt=Math.max(Zt,0),wr=Math.min(wr,It.count));const Ei=wr-Zt;if(Ei<0||Ei===1/0)return;Ke.setup(Te,pe,mt,Me,_t);let Es,un=tt;if(_t!==null&&(Es=He.get(_t),un=Pe,un.setIndex(Es)),Te.isMesh)pe.wireframe===!0?(W.setLineWidth(pe.wireframeLinewidth*Ee()),un.setMode(J.LINES)):un.setMode(J.TRIANGLES);else if(Te.isLine){let Dt=pe.linewidth;Dt===void 0&&(Dt=1),W.setLineWidth(Dt*Ee()),Te.isLineSegments?un.setMode(J.LINES):Te.isLineLoop?un.setMode(J.LINE_LOOP):un.setMode(J.LINE_STRIP)}else Te.isPoints?un.setMode(J.POINTS):Te.isSprite&&un.setMode(J.TRIANGLES);if(Te.isInstancedMesh)un.renderInstances(Zt,Ei,Te.count);else if(Me.isInstancedBufferGeometry){const Dt=Me._maxInstanceCount!==void 0?Me._maxInstanceCount:1/0,xl=Math.min(Me.instanceCount,Dt);un.renderInstances(Zt,Ei,xl)}else un.render(Zt,Ei)},this.compile=function($,ge){function Me(pe,Te,lt){pe.transparent===!0&&pe.side===Wr&&pe.forceSinglePass===!1?(pe.side=or,pe.needsUpdate=!0,Bu(pe,Te,lt),pe.side=Mo,pe.needsUpdate=!0,Bu(pe,Te,lt),pe.side=Wr):Bu(pe,Te,lt)}v=k.get($),v.init(),x.push(v),$.traverseVisible(function(pe){pe.isLight&&pe.layers.test(ge.layers)&&(v.pushLight(pe),pe.castShadow&&v.pushShadow(pe))}),v.setupLights(m.useLegacyLights),$.traverse(function(pe){const Te=pe.material;if(Te)if(Array.isArray(Te))for(let lt=0;lt<Te.length;lt++){const dt=Te[lt];Me(dt,$,pe)}else Me(Te,$,pe)}),x.pop(),v=null};let ke=null;function Ye($){ke&&ke($)}function rt(){qt.stop()}function Yt(){qt.start()}const qt=new fO;qt.setAnimationLoop(Ye),typeof self<"u"&&qt.setContext(self),this.setAnimationLoop=function($){ke=$,Re.setAnimationLoop($),$===null?qt.stop():qt.start()},Re.addEventListener("sessionstart",rt),Re.addEventListener("sessionend",Yt),this.render=function($,ge){if(ge!==void 0&&ge.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),ge.parent===null&&ge.matrixWorldAutoUpdate===!0&&ge.updateMatrixWorld(),Re.enabled===!0&&Re.isPresenting===!0&&(Re.cameraAutoUpdate===!0&&Re.updateCamera(ge),ge=Re.getCamera()),$.isScene===!0&&$.onBeforeRender(m,$,ge,I),v=k.get($,x.length),v.init(),x.push(v),fe.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),j.setFromProjectionMatrix(fe),ce=this.localClippingEnabled,V=re.init(this.clippingPlanes,ce),g=G.get($,_.length),g.init(),_.push(g),dr($,ge,0,m.sortObjects),g.finish(),m.sortObjects===!0&&g.sort(K,Y),V===!0&&re.beginShadows();const Me=v.state.shadowsArray;if(be.render(Me,$,ge),V===!0&&re.endShadows(),this.info.autoReset===!0&&this.info.reset(),Ae.render(g,$),v.setupLights(m.useLegacyLights),ge.isArrayCamera){const pe=ge.cameras;for(let Te=0,lt=pe.length;Te<lt;Te++){const dt=pe[Te];Ms(g,$,dt,dt.viewport)}}else Ms(g,$,ge);I!==null&&(se.updateMultisampleRenderTarget(I),se.updateRenderTargetMipmap(I)),$.isScene===!0&&$.onAfterRender(m,$,ge),Ke.resetDefaultState(),P=-1,D=null,x.pop(),x.length>0?v=x[x.length-1]:v=null,_.pop(),_.length>0?g=_[_.length-1]:g=null};function dr($,ge,Me,pe){if($.visible===!1)return;if($.layers.test(ge.layers)){if($.isGroup)Me=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(ge);else if($.isLight)v.pushLight($),$.castShadow&&v.pushShadow($);else if($.isSprite){if(!$.frustumCulled||j.intersectsSprite($)){pe&&de.setFromMatrixPosition($.matrixWorld).applyMatrix4(fe);const dt=Ge.update($),mt=$.material;mt.visible&&g.push($,dt,mt,Me,de.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||j.intersectsObject($))){$.isSkinnedMesh&&$.skeleton.frame!==ne.render.frame&&($.skeleton.update(),$.skeleton.frame=ne.render.frame);const dt=Ge.update($),mt=$.material;if(pe&&(dt.boundingSphere===null&&dt.computeBoundingSphere(),de.copy(dt.boundingSphere.center).applyMatrix4($.matrixWorld).applyMatrix4(fe)),Array.isArray(mt)){const _t=dt.groups;for(let Pt=0,Ct=_t.length;Pt<Ct;Pt++){const It=_t[Pt],Zt=mt[It.materialIndex];Zt&&Zt.visible&&g.push($,dt,Zt,Me,de.z,It)}}else mt.visible&&g.push($,dt,mt,Me,de.z,null)}}const lt=$.children;for(let dt=0,mt=lt.length;dt<mt;dt++)dr(lt[dt],ge,Me,pe)}function Ms($,ge,Me,pe){const Te=$.opaque,lt=$.transmissive,dt=$.transparent;v.setupLightsView(Me),V===!0&&re.setGlobalState(m.clippingPlanes,Me),lt.length>0&&_n(Te,lt,ge,Me),pe&&W.viewport(A.copy(pe)),Te.length>0&&Kr(Te,ge,Me),lt.length>0&&Kr(lt,ge,Me),dt.length>0&&Kr(dt,ge,Me),W.buffers.depth.setTest(!0),W.buffers.depth.setMask(!0),W.buffers.color.setMask(!0),W.setPolygonOffset(!1)}function _n($,ge,Me,pe){if(ae===null){const mt=z.isWebGL2;ae=new Lt(1024,1024,{generateMipmaps:!0,type:U.has("EXT_color_buffer_half_float")?wi:pn,minFilter:ol,samples:mt&&a===!0?4:0})}const Te=m.getRenderTarget();m.setRenderTarget(ae),m.clear();const lt=m.toneMapping;m.toneMapping=Ws,Kr($,Me,pe),se.updateMultisampleRenderTarget(ae),se.updateRenderTargetMipmap(ae);let dt=!1;for(let mt=0,_t=ge.length;mt<_t;mt++){const Pt=ge[mt],Ct=Pt.object,It=Pt.geometry,Zt=Pt.material,wr=Pt.group;if(Zt.side===Wr&&Ct.layers.test(pe.layers)){const Ei=Zt.side;Zt.side=or,Zt.needsUpdate=!0,Ki(Ct,Me,pe,It,Zt,wr),Zt.side=Ei,Zt.needsUpdate=!0,dt=!0}}dt===!0&&(se.updateMultisampleRenderTarget(ae),se.updateRenderTargetMipmap(ae)),m.setRenderTarget(Te),m.toneMapping=lt}function Kr($,ge,Me){const pe=ge.isScene===!0?ge.overrideMaterial:null;for(let Te=0,lt=$.length;Te<lt;Te++){const dt=$[Te],mt=dt.object,_t=dt.geometry,Pt=pe===null?dt.material:pe,Ct=dt.group;mt.layers.test(Me.layers)&&Ki(mt,ge,Me,_t,Pt,Ct)}}function Ki($,ge,Me,pe,Te,lt){$.onBeforeRender(m,ge,Me,pe,Te,lt),$.modelViewMatrix.multiplyMatrices(Me.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),Te.onBeforeRender(m,ge,Me,pe,$,lt),Te.transparent===!0&&Te.side===Wr&&Te.forceSinglePass===!1?(Te.side=or,Te.needsUpdate=!0,m.renderBufferDirect(Me,ge,pe,Te,$,lt),Te.side=Mo,Te.needsUpdate=!0,m.renderBufferDirect(Me,ge,pe,Te,$,lt),Te.side=Wr):m.renderBufferDirect(Me,ge,pe,Te,$,lt),$.onAfterRender(m,ge,Me,pe,Te,lt)}function Bu($,ge,Me){ge.isScene!==!0&&(ge=De);const pe=q.get($),Te=v.state.lights,lt=v.state.shadowsArray,dt=Te.state.version,mt=je.getParameters($,Te.state,lt,ge,Me),_t=je.getProgramCacheKey(mt);let Pt=pe.programs;pe.environment=$.isMeshStandardMaterial?ge.environment:null,pe.fog=ge.fog,pe.envMap=($.isMeshStandardMaterial?Le:Ce).get($.envMap||pe.environment),Pt===void 0&&($.addEventListener("dispose",Kt),Pt=new Map,pe.programs=Pt);let Ct=Pt.get(_t);if(Ct!==void 0){if(pe.currentProgram===Ct&&pe.lightsStateVersion===dt)return am($,mt),Ct}else mt.uniforms=je.getUniforms($),$.onBuild(Me,mt,m),$.onBeforeCompile(mt,m),Ct=je.acquireProgram(mt,_t),Pt.set(_t,Ct),pe.uniforms=mt.uniforms;const It=pe.uniforms;(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(It.clippingPlanes=re.uniform),am($,mt),pe.needsLights=l1($),pe.lightsStateVersion=dt,pe.needsLights&&(It.ambientLightColor.value=Te.state.ambient,It.lightProbe.value=Te.state.probe,It.directionalLights.value=Te.state.directional,It.directionalLightShadows.value=Te.state.directionalShadow,It.spotLights.value=Te.state.spot,It.spotLightShadows.value=Te.state.spotShadow,It.rectAreaLights.value=Te.state.rectArea,It.ltc_1.value=Te.state.rectAreaLTC1,It.ltc_2.value=Te.state.rectAreaLTC2,It.pointLights.value=Te.state.point,It.pointLightShadows.value=Te.state.pointShadow,It.hemisphereLights.value=Te.state.hemi,It.directionalShadowMap.value=Te.state.directionalShadowMap,It.directionalShadowMatrix.value=Te.state.directionalShadowMatrix,It.spotShadowMap.value=Te.state.spotShadowMap,It.spotLightMatrix.value=Te.state.spotLightMatrix,It.spotLightMap.value=Te.state.spotLightMap,It.pointShadowMap.value=Te.state.pointShadowMap,It.pointShadowMatrix.value=Te.state.pointShadowMatrix);const Zt=Ct.getUniforms(),wr=Xv.seqWithValue(Zt.seq,It);return pe.currentProgram=Ct,pe.uniformsList=wr,Ct}function am($,ge){const Me=q.get($);Me.outputColorSpace=ge.outputColorSpace,Me.instancing=ge.instancing,Me.skinning=ge.skinning,Me.morphTargets=ge.morphTargets,Me.morphNormals=ge.morphNormals,Me.morphColors=ge.morphColors,Me.morphTargetsCount=ge.morphTargetsCount,Me.numClippingPlanes=ge.numClippingPlanes,Me.numIntersection=ge.numClipIntersection,Me.vertexAlphas=ge.vertexAlphas,Me.vertexTangents=ge.vertexTangents,Me.toneMapping=ge.toneMapping}function lm($,ge,Me,pe,Te){ge.isScene!==!0&&(ge=De),se.resetTextureUnits();const lt=ge.fog,dt=pe.isMeshStandardMaterial?ge.environment:null,mt=I===null?m.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Xs,_t=(pe.isMeshStandardMaterial?Le:Ce).get(pe.envMap||dt),Pt=pe.vertexColors===!0&&!!Me.attributes.color&&Me.attributes.color.itemSize===4,Ct=!!pe.normalMap&&!!Me.attributes.tangent,It=!!Me.morphAttributes.position,Zt=!!Me.morphAttributes.normal,wr=!!Me.morphAttributes.color,Ei=pe.toneMapped?m.toneMapping:Ws,Es=Me.morphAttributes.position||Me.morphAttributes.normal||Me.morphAttributes.color,un=Es!==void 0?Es.length:0,Dt=q.get(pe),xl=v.state.lights;if(V===!0&&(ce===!0||$!==D)){const sn=$===D&&pe.id===P;re.setState(pe,$,sn)}let $n=!1;pe.version===Dt.__version?(Dt.needsLights&&Dt.lightsStateVersion!==xl.state.version||Dt.outputColorSpace!==mt||Te.isInstancedMesh&&Dt.instancing===!1||!Te.isInstancedMesh&&Dt.instancing===!0||Te.isSkinnedMesh&&Dt.skinning===!1||!Te.isSkinnedMesh&&Dt.skinning===!0||Dt.envMap!==_t||pe.fog===!0&&Dt.fog!==lt||Dt.numClippingPlanes!==void 0&&(Dt.numClippingPlanes!==re.numPlanes||Dt.numIntersection!==re.numIntersection)||Dt.vertexAlphas!==Pt||Dt.vertexTangents!==Ct||Dt.morphTargets!==It||Dt.morphNormals!==Zt||Dt.morphColors!==wr||Dt.toneMapping!==Ei||z.isWebGL2===!0&&Dt.morphTargetsCount!==un)&&($n=!0):($n=!0,Dt.__version=pe.version);let Ts=Dt.currentProgram;$n===!0&&(Ts=Bu(pe,ge,Te));let Co=!1,li=!1,tn=!1;const St=Ts.getUniforms(),Dr=Dt.uniforms;if(W.useProgram(Ts.program)&&(Co=!0,li=!0,tn=!0),pe.id!==P&&(P=pe.id,li=!0),Co||D!==$){if(St.setValue(J,"projectionMatrix",$.projectionMatrix),z.logarithmicDepthBuffer&&St.setValue(J,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),D!==$&&(D=$,li=!0,tn=!0),pe.isShaderMaterial||pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshStandardMaterial||pe.envMap){const sn=St.map.cameraPosition;sn!==void 0&&sn.setValue(J,de.setFromMatrixPosition($.matrixWorld))}(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial)&&St.setValue(J,"isOrthographic",$.isOrthographicCamera===!0),(pe.isMeshPhongMaterial||pe.isMeshToonMaterial||pe.isMeshLambertMaterial||pe.isMeshBasicMaterial||pe.isMeshStandardMaterial||pe.isShaderMaterial||pe.isShadowMaterial||Te.isSkinnedMesh)&&St.setValue(J,"viewMatrix",$.matrixWorldInverse)}if(Te.isSkinnedMesh){St.setOptional(J,Te,"bindMatrix"),St.setOptional(J,Te,"bindMatrixInverse");const sn=Te.skeleton;sn&&(z.floatVertexTextures?(sn.boneTexture===null&&sn.computeBoneTexture(),St.setValue(J,"boneTexture",sn.boneTexture,se),St.setValue(J,"boneTextureSize",sn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const jn=Me.morphAttributes;if((jn.position!==void 0||jn.normal!==void 0||jn.color!==void 0&&z.isWebGL2===!0)&&Ue.update(Te,Me,Ts),(li||Dt.receiveShadow!==Te.receiveShadow)&&(Dt.receiveShadow=Te.receiveShadow,St.setValue(J,"receiveShadow",Te.receiveShadow)),pe.isMeshGouraudMaterial&&pe.envMap!==null&&(Dr.envMap.value=_t,Dr.flipEnvMap.value=_t.isCubeTexture&&_t.isRenderTargetTexture===!1?-1:1),li&&(St.setValue(J,"toneMappingExposure",m.toneMappingExposure),Dt.needsLights&&sd(Dr,tn),lt&&pe.fog===!0&&Je.refreshFogUniforms(Dr,lt),Je.refreshMaterialUniforms(Dr,pe,H,N,ae),Xv.upload(J,Dt.uniformsList,Dr,se)),pe.isShaderMaterial&&pe.uniformsNeedUpdate===!0&&(Xv.upload(J,Dt.uniformsList,Dr,se),pe.uniformsNeedUpdate=!1),pe.isSpriteMaterial&&St.setValue(J,"center",Te.center),St.setValue(J,"modelViewMatrix",Te.modelViewMatrix),St.setValue(J,"normalMatrix",Te.normalMatrix),St.setValue(J,"modelMatrix",Te.matrixWorld),pe.isShaderMaterial||pe.isRawShaderMaterial){const sn=pe.uniformsGroups;for(let Ps=0,ya=sn.length;Ps<ya;Ps++)if(z.isWebGL2){const br=sn[Ps];te.update(br,Ts),te.bind(br,Ts)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ts}function sd($,ge){$.ambientLightColor.needsUpdate=ge,$.lightProbe.needsUpdate=ge,$.directionalLights.needsUpdate=ge,$.directionalLightShadows.needsUpdate=ge,$.pointLights.needsUpdate=ge,$.pointLightShadows.needsUpdate=ge,$.spotLights.needsUpdate=ge,$.spotLightShadows.needsUpdate=ge,$.rectAreaLights.needsUpdate=ge,$.hemisphereLights.needsUpdate=ge}function l1($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return w},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function($,ge,Me){q.get($.texture).__webglTexture=ge,q.get($.depthTexture).__webglTexture=Me;const pe=q.get($);pe.__hasExternalTextures=!0,pe.__hasExternalTextures&&(pe.__autoAllocateDepthBuffer=Me===void 0,pe.__autoAllocateDepthBuffer||U.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),pe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function($,ge){const Me=q.get($);Me.__webglFramebuffer=ge,Me.__useDefaultFramebuffer=ge===void 0},this.setRenderTarget=function($,ge=0,Me=0){I=$,w=ge,M=Me;let pe=!0,Te=null,lt=!1,dt=!1;if($){const _t=q.get($);_t.__useDefaultFramebuffer!==void 0?(W.bindFramebuffer(J.FRAMEBUFFER,null),pe=!1):_t.__webglFramebuffer===void 0?se.setupRenderTarget($):_t.__hasExternalTextures&&se.rebindTextures($,q.get($.texture).__webglTexture,q.get($.depthTexture).__webglTexture);const Pt=$.texture;(Pt.isData3DTexture||Pt.isDataArrayTexture||Pt.isCompressedArrayTexture)&&(dt=!0);const Ct=q.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Te=Ct[ge],lt=!0):z.isWebGL2&&$.samples>0&&se.useMultisampledRTT($)===!1?Te=q.get($).__webglMultisampledFramebuffer:Te=Ct,A.copy($.viewport),T.copy($.scissor),E=$.scissorTest}else A.copy(Q).multiplyScalar(H).floor(),T.copy(ee).multiplyScalar(H).floor(),E=F;if(W.bindFramebuffer(J.FRAMEBUFFER,Te)&&z.drawBuffers&&pe&&W.drawBuffers($,Te),W.viewport(A),W.scissor(T),W.setScissorTest(E),lt){const _t=q.get($.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+ge,_t.__webglTexture,Me)}else if(dt){const _t=q.get($.texture),Pt=ge||0;J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,_t.__webglTexture,Me||0,Pt)}P=-1},this.readRenderTargetPixels=function($,ge,Me,pe,Te,lt,dt){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mt=q.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&dt!==void 0&&(mt=mt[dt]),mt){W.bindFramebuffer(J.FRAMEBUFFER,mt);try{const _t=$.texture,Pt=_t.format,Ct=_t.type;if(Pt!==vn&&Se.convert(Pt)!==J.getParameter(J.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const It=Ct===wi&&(U.has("EXT_color_buffer_half_float")||z.isWebGL2&&U.has("EXT_color_buffer_float"));if(Ct!==pn&&Se.convert(Ct)!==J.getParameter(J.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ct===Nn&&(z.isWebGL2||U.has("OES_texture_float")||U.has("WEBGL_color_buffer_float")))&&!It){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ge>=0&&ge<=$.width-pe&&Me>=0&&Me<=$.height-Te&&J.readPixels(ge,Me,pe,Te,Se.convert(Pt),Se.convert(Ct),lt)}finally{const _t=I!==null?q.get(I).__webglFramebuffer:null;W.bindFramebuffer(J.FRAMEBUFFER,_t)}}},this.copyFramebufferToTexture=function($,ge,Me=0){const pe=Math.pow(2,-Me),Te=Math.floor(ge.image.width*pe),lt=Math.floor(ge.image.height*pe);se.setTexture2D(ge,0),J.copyTexSubImage2D(J.TEXTURE_2D,Me,0,0,$.x,$.y,Te,lt),W.unbindTexture()},this.copyTextureToTexture=function($,ge,Me,pe=0){const Te=ge.image.width,lt=ge.image.height,dt=Se.convert(Me.format),mt=Se.convert(Me.type);se.setTexture2D(Me,0),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,Me.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Me.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,Me.unpackAlignment),ge.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,pe,$.x,$.y,Te,lt,dt,mt,ge.image.data):ge.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,pe,$.x,$.y,ge.mipmaps[0].width,ge.mipmaps[0].height,dt,ge.mipmaps[0].data):J.texSubImage2D(J.TEXTURE_2D,pe,$.x,$.y,dt,mt,ge.image),pe===0&&Me.generateMipmaps&&J.generateMipmap(J.TEXTURE_2D),W.unbindTexture()},this.copyTextureToTexture3D=function($,ge,Me,pe,Te=0){if(m.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const lt=$.max.x-$.min.x+1,dt=$.max.y-$.min.y+1,mt=$.max.z-$.min.z+1,_t=Se.convert(pe.format),Pt=Se.convert(pe.type);let Ct;if(pe.isData3DTexture)se.setTexture3D(pe,0),Ct=J.TEXTURE_3D;else if(pe.isDataArrayTexture)se.setTexture2DArray(pe,0),Ct=J.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,pe.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pe.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,pe.unpackAlignment);const It=J.getParameter(J.UNPACK_ROW_LENGTH),Zt=J.getParameter(J.UNPACK_IMAGE_HEIGHT),wr=J.getParameter(J.UNPACK_SKIP_PIXELS),Ei=J.getParameter(J.UNPACK_SKIP_ROWS),Es=J.getParameter(J.UNPACK_SKIP_IMAGES),un=Me.isCompressedTexture?Me.mipmaps[0]:Me.image;J.pixelStorei(J.UNPACK_ROW_LENGTH,un.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,un.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,$.min.x),J.pixelStorei(J.UNPACK_SKIP_ROWS,$.min.y),J.pixelStorei(J.UNPACK_SKIP_IMAGES,$.min.z),Me.isDataTexture||Me.isData3DTexture?J.texSubImage3D(Ct,Te,ge.x,ge.y,ge.z,lt,dt,mt,_t,Pt,un.data):Me.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),J.compressedTexSubImage3D(Ct,Te,ge.x,ge.y,ge.z,lt,dt,mt,_t,un.data)):J.texSubImage3D(Ct,Te,ge.x,ge.y,ge.z,lt,dt,mt,_t,Pt,un),J.pixelStorei(J.UNPACK_ROW_LENGTH,It),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Zt),J.pixelStorei(J.UNPACK_SKIP_PIXELS,wr),J.pixelStorei(J.UNPACK_SKIP_ROWS,Ei),J.pixelStorei(J.UNPACK_SKIP_IMAGES,Es),Te===0&&pe.generateMipmaps&&J.generateMipmap(Ct),W.unbindTexture()},this.initTexture=function($){$.isCubeTexture?se.setTextureCube($,0):$.isData3DTexture?se.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?se.setTexture2DArray($,0):se.setTexture2D($,0),W.unbindTexture()},this.resetState=function(){w=0,M=0,I=null,W.reset(),Ke.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===wt?ps:Lp}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===ps?wt:Xs}}class yO extends OM{}yO.prototype.isWebGL1Renderer=!0;class yy{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new ze(e),this.density=n}clone(){return new yy(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class xy{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new ze(e),this.near=n,this.far=r}clone(){return new xy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class _u extends Gt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class _y{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=up,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Fi()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fi()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Zr=new B;class Ui{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)Zr.fromBufferAttribute(this,n),Zr.applyMatrix4(e),this.setXYZ(n,Zr.x,Zr.y,Zr.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)Zr.fromBufferAttribute(this,n),Zr.applyNormalMatrix(e),this.setXYZ(n,Zr.x,Zr.y,Zr.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)Zr.fromBufferAttribute(this,n),Zr.transformDirection(e),this.setXYZ(n,Zr.x,Zr.y,Zr.z);return this}setX(e,n){return this.normalized&&(n=Tt(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Tt(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Tt(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Tt(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ki(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ki(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ki(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ki(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Tt(n,this.array),r=Tt(r,this.array),i=Tt(i,this.array),s=Tt(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new Xt(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ui(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class kM extends er{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let gc;const Nd=new B,vc=new B,yc=new B,xc=new ue,Fd=new ue,xO=new at,Bg=new B,zd=new B,Hg=new B,EC=new ue,o_=new ue,TC=new ue;class _O extends Gt{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",gc===void 0){gc=new Mt;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new _y(n,5);gc.setIndex([0,1,2,0,2,3]),gc.setAttribute("position",new Ui(r,3,0,!1)),gc.setAttribute("uv",new Ui(r,2,3,!1))}this.geometry=gc,this.material=e!==void 0?e:new kM,this.center=new ue(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),vc.setFromMatrixScale(this.matrixWorld),xO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),yc.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&vc.multiplyScalar(-yc.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;Vg(Bg.set(-.5,-.5,0),yc,o,vc,i,s),Vg(zd.set(.5,-.5,0),yc,o,vc,i,s),Vg(Hg.set(.5,.5,0),yc,o,vc,i,s),EC.set(0,0),o_.set(1,0),TC.set(1,1);let a=e.ray.intersectTriangle(Bg,zd,Hg,!1,Nd);if(a===null&&(Vg(zd.set(-.5,.5,0),yc,o,vc,i,s),o_.set(0,1),a=e.ray.intersectTriangle(Bg,Hg,zd,!1,Nd),a===null))return;const l=e.ray.origin.distanceTo(Nd);l<e.near||l>e.far||n.push({distance:l,point:Nd.clone(),uv:gi.getInterpolation(Nd,Bg,zd,Hg,EC,o_,TC,new ue),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Vg(t,e,n,r,i,s){xc.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(Fd.x=s*xc.x-i*xc.y,Fd.y=i*xc.x+s*xc.y):Fd.copy(xc),t.copy(e),t.x+=Fd.x,t.y+=Fd.y,t.applyMatrix4(xO)}const Gg=new B,PC=new B;class SO extends Gt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){Gg.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Gg);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){Gg.setFromMatrixPosition(e.matrixWorld),PC.setFromMatrixPosition(this.matrixWorld);const r=Gg.distanceTo(PC)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const CC=new B,AC=new bt,RC=new bt,EW=new B,IC=new at,_c=new B;class wO extends Qn{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new at,this.bindMatrixInverse=new at,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Wi),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)_c.fromBufferAttribute(n,r),this.applyBoneTransform(r,_c),this.boundingBox.expandByPoint(_c)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ss),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)_c.fromBufferAttribute(n,r),this.applyBoneTransform(r,_c),this.boundingSphere.expandByPoint(_c)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new bt,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;AC.fromBufferAttribute(i.attributes.skinIndex,e),RC.fromBufferAttribute(i.attributes.skinWeight,e),CC.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=RC.getComponent(s);if(o!==0){const a=AC.getComponent(s);IC.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(EW.copy(CC).applyMatrix4(IC),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class UM extends Gt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Jo extends Bn{constructor(e=null,n=1,r=1,i,s,o,a,l,u=kt,d=kt,h,p){super(null,o,a,l,u,d,i,s,h,p),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const DC=new at,TW=new at;class Sy{constructor(e=[],n=[]){this.uuid=Fi(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new at)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new at;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:TW;DC.multiplyMatrices(a,n[s]),DC.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Sy(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=sO(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new Jo(n,e,e,vn,Nn);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new UM),this.bones.push(o),this.boneInverses.push(new at().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class Tf extends Xt{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Sc=new at,LC=new at,Wg=[],OC=new Wi,PW=new at,Bd=new Qn,Hd=new Ss;class bO extends Qn{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new Tf(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,PW)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Wi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Sc),OC.copy(e.boundingBox).applyMatrix4(Sc),this.boundingBox.union(OC)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ss),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,Sc),Hd.copy(e.boundingSphere).applyMatrix4(Sc),this.boundingSphere.union(Hd)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(Bd.geometry=this.geometry,Bd.material=this.material,Bd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Hd.copy(this.boundingSphere),Hd.applyMatrix4(r),e.ray.intersectsSphere(Hd)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,Sc),LC.multiplyMatrices(r,Sc),Bd.matrixWorld=LC,Bd.raycast(e,Wg);for(let o=0,a=Wg.length;o<a;o++){const l=Wg[o];l.instanceId=s,l.object=this,n.push(l)}Wg.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new Tf(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ai extends er{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ze(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const kC=new B,UC=new B,NC=new at,a_=new Op,$g=new Ss;let ll=class extends Gt{constructor(e=new Mt,n=new ai){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)kC.fromBufferAttribute(n,i-1),UC.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=kC.distanceTo(UC);e.setAttribute("lineDistance",new et(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),$g.copy(r.boundingSphere),$g.applyMatrix4(i),$g.radius+=s,e.ray.intersectsSphere($g)===!1)return;NC.copy(i).invert(),a_.copy(e.ray).applyMatrix4(NC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new B,d=new B,h=new B,p=new B,g=this.isLineSegments?2:1,v=r.index,x=r.attributes.position;if(v!==null){const m=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count);for(let w=m,M=S-1;w<M;w+=g){const I=v.getX(w),P=v.getX(w+1);if(u.fromBufferAttribute(x,I),d.fromBufferAttribute(x,P),a_.distanceSqToSegment(u,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const A=e.ray.origin.distanceTo(p);A<e.near||A>e.far||n.push({distance:A,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else{const m=Math.max(0,o.start),S=Math.min(x.count,o.start+o.count);for(let w=m,M=S-1;w<M;w+=g){if(u.fromBufferAttribute(x,w),d.fromBufferAttribute(x,w+1),a_.distanceSqToSegment(u,d,p,h)>l)continue;p.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(p);P<e.near||P>e.far||n.push({distance:P,point:h.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};const FC=new B,zC=new B;class Po extends ll{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)FC.fromBufferAttribute(n,i),zC.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+FC.distanceTo(zC);e.setAttribute("lineDistance",new et(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class MO extends ll{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class NM extends er{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ze(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const BC=new at,Tw=new Op,jg=new Ss,Xg=new B;class EO extends Gt{constructor(e=new Mt,n=new NM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),jg.copy(r.boundingSphere),jg.applyMatrix4(i),jg.radius+=s,e.ray.intersectsSphere(jg)===!1)return;BC.copy(i).invert(),Tw.copy(e.ray).applyMatrix4(BC);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,h=r.attributes.position;if(u!==null){const p=Math.max(0,o.start),g=Math.min(u.count,o.start+o.count);for(let v=p,_=g;v<_;v++){const x=u.getX(v);Xg.fromBufferAttribute(h,x),HC(Xg,x,l,i,e,n,this)}}else{const p=Math.max(0,o.start),g=Math.min(h.count,o.start+o.count);for(let v=p,_=g;v<_;v++)Xg.fromBufferAttribute(h,v),HC(Xg,v,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function HC(t,e,n,r,i,s,o){const a=Tw.distanceSqToPoint(t);if(a<n){const l=new B;Tw.closestPointToPoint(t,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class TO extends Bn{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:ot,this.magFilter=s!==void 0?s:ot,this.generateMipmaps=!1;const d=this;function h(){d.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Pw extends Bn{constructor(e,n,r){super({width:e,height:n}),this.isFramebufferTexture=!0,this.format=r,this.magFilter=kt,this.minFilter=kt,this.generateMipmaps=!1,this.needsUpdate=!0}}class FM extends Bn{constructor(e,n,r,i,s,o,a,l,u,d,h,p){super(null,o,a,l,u,d,i,s,h,p),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class CW extends FM{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ir}}class AW extends Bn{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class qs{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const d=r[i],p=r[i+1]-d,g=(o-d)/p;return(i+g)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new ue:new B);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new B,i=[],s=[],o=[],a=new B,l=new at;for(let g=0;g<=e;g++){const v=g/e;i[g]=this.getTangentAt(v,new B)}s[0]=new B,o[0]=new B;let u=Number.MAX_VALUE;const d=Math.abs(i[0].x),h=Math.abs(i[0].y),p=Math.abs(i[0].z);d<=u&&(u=d,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),p<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(i[g-1],i[g]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Fn(i[g-1].dot(i[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,v))}o[g].crossVectors(i[g],s[g])}if(n===!0){let g=Math.acos(Fn(s[0].dot(s[e]),-1,1));g/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],g*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class wy extends qs{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new ue,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const d=Math.cos(this.aRotation),h=Math.sin(this.aRotation),p=l-this.aX,g=u-this.aY;l=p*d-g*h+this.aX,u=p*h+g*d+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class PO extends wy{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function zM(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,d,h){let p=(o-s)/u-(a-s)/(u+d)+(a-o)/d,g=(a-o)/d-(l-o)/(d+h)+(l-a)/h;p*=d,g*=d,i(o,a,p,g)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const Kg=new B,l_=new zM,u_=new zM,c_=new zM;class CO extends qs{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new B){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,d;this.closed||a>0?u=i[(a-1)%s]:(Kg.subVectors(i[0],i[1]).add(i[0]),u=Kg);const h=i[a%s],p=i[(a+1)%s];if(this.closed||a+2<s?d=i[(a+2)%s]:(Kg.subVectors(i[s-1],i[s-2]).add(i[s-1]),d=Kg),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(h),g),_=Math.pow(h.distanceToSquared(p),g),x=Math.pow(p.distanceToSquared(d),g);_<1e-4&&(_=1),v<1e-4&&(v=_),x<1e-4&&(x=_),l_.initNonuniformCatmullRom(u.x,h.x,p.x,d.x,v,_,x),u_.initNonuniformCatmullRom(u.y,h.y,p.y,d.y,v,_,x),c_.initNonuniformCatmullRom(u.z,h.z,p.z,d.z,v,_,x)}else this.curveType==="catmullrom"&&(l_.initCatmullRom(u.x,h.x,p.x,d.x,this.tension),u_.initCatmullRom(u.y,h.y,p.y,d.y,this.tension),c_.initCatmullRom(u.z,h.z,p.z,d.z,this.tension));return r.set(l_.calc(l),u_.calc(l),c_.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new B().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function VC(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function RW(t,e){const n=1-t;return n*n*e}function IW(t,e){return 2*(1-t)*t*e}function DW(t,e){return t*t*e}function Ph(t,e,n,r){return RW(t,e)+IW(t,n)+DW(t,r)}function LW(t,e){const n=1-t;return n*n*n*e}function OW(t,e){const n=1-t;return 3*n*n*t*e}function kW(t,e){return 3*(1-t)*t*t*e}function UW(t,e){return t*t*t*e}function Ch(t,e,n,r,i){return LW(t,e)+OW(t,n)+kW(t,r)+UW(t,i)}class BM extends qs{constructor(e=new ue,n=new ue,r=new ue,i=new ue){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new ue){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Ch(e,i.x,s.x,o.x,a.x),Ch(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class AO extends qs{constructor(e=new B,n=new B,r=new B,i=new B){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new B){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(Ch(e,i.x,s.x,o.x,a.x),Ch(e,i.y,s.y,o.y,a.y),Ch(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class by extends qs{constructor(e=new ue,n=new ue){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new ue){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ue){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RO extends qs{constructor(e=new B,n=new B){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new B){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new B){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class HM extends qs{constructor(e=new ue,n=new ue,r=new ue){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new ue){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Ph(e,i.x,s.x,o.x),Ph(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class VM extends qs{constructor(e=new B,n=new B,r=new B){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new B){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Ph(e,i.x,s.x,o.x),Ph(e,i.y,s.y,o.y),Ph(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class GM extends qs{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new ue){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],d=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(VC(a,l.x,u.x,d.x,h.x),VC(a,l.y,u.y,d.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new ue().fromArray(i))}return this}}var WM=Object.freeze({__proto__:null,ArcCurve:PO,CatmullRomCurve3:CO,CubicBezierCurve:BM,CubicBezierCurve3:AO,EllipseCurve:wy,LineCurve:by,LineCurve3:RO,QuadraticBezierCurve:HM,QuadraticBezierCurve3:VM,SplineCurve:GM});class IO extends qs{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new by(n,e))}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const d=l[u];r&&r.equals(d)||(n.push(d),r=d)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new WM[i.type]().fromJSON(i))}return this}}class fp extends IO{constructor(e){super(),this.type="Path",this.currentPoint=new ue,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new by(this.currentPoint.clone(),new ue(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new HM(this.currentPoint.clone(),new ue(e,n),new ue(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new BM(this.currentPoint.clone(),new ue(e,n),new ue(r,i),new ue(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new GM(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const u=this.currentPoint.x,d=this.currentPoint.y;return this.absellipse(e+u,n+d,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const u=new wy(e,n,r,i,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const d=u.getPoint(1);return this.currentPoint.copy(d),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Hf extends Mt{constructor(e=[new ue(0,-.5),new ue(.5,0),new ue(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Fn(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],d=1/n,h=new B,p=new ue,g=new B,v=new B,_=new B;let x=0,m=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:x=e[S+1].x-e[S].x,m=e[S+1].y-e[S].y,g.x=m*1,g.y=-x,g.z=m*0,_.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(_.x,_.y,_.z);break;default:x=e[S+1].x-e[S].x,m=e[S+1].y-e[S].y,g.x=m*1,g.y=-x,g.z=m*0,v.copy(g),g.x+=_.x,g.y+=_.y,g.z+=_.z,g.normalize(),l.push(g.x,g.y,g.z),_.copy(v)}for(let S=0;S<=n;S++){const w=r+S*d*i,M=Math.sin(w),I=Math.cos(w);for(let P=0;P<=e.length-1;P++){h.x=e[P].x*M,h.y=e[P].y,h.z=e[P].x*I,o.push(h.x,h.y,h.z),p.x=S/n,p.y=P/(e.length-1),a.push(p.x,p.y);const D=l[3*P+0]*M,A=l[3*P+1],T=l[3*P+0]*I;u.push(D,A,T)}}for(let S=0;S<n;S++)for(let w=0;w<e.length-1;w++){const M=w+S*e.length,I=M,P=M+e.length,D=M+e.length+1,A=M+1;s.push(I,P,A),s.push(D,A,P)}this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("uv",new et(a,2)),this.setAttribute("normal",new et(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hf(e.points,e.segments,e.phiStart,e.phiLength)}}class Np extends Hf{constructor(e=1,n=1,r=4,i=8){const s=new fp;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new Np(e.radius,e.length,e.capSegments,e.radialSegments)}}class Fp extends Mt{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new B,d=new ue;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,p=3;h<=n;h++,p+=3){const g=r+h/n*i;u.x=e*Math.cos(g),u.y=e*Math.sin(g),o.push(u.x,u.y,u.z),a.push(0,0,1),d.x=(o[p]/e+1)/2,d.y=(o[p+1]/e+1)/2,l.push(d.x,d.y)}for(let h=1;h<=n;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new et(o,3)),this.setAttribute("normal",new et(a,3)),this.setAttribute("uv",new et(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fp(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Iu extends Mt{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const d=[],h=[],p=[],g=[];let v=0;const _=[],x=r/2;let m=0;S(),o===!1&&(e>0&&w(!0),n>0&&w(!1)),this.setIndex(d),this.setAttribute("position",new et(h,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(g,2));function S(){const M=new B,I=new B;let P=0;const D=(n-e)/r;for(let A=0;A<=s;A++){const T=[],E=A/s,O=E*(n-e)+e;for(let N=0;N<=i;N++){const H=N/i,K=H*l+a,Y=Math.sin(K),Q=Math.cos(K);I.x=O*Y,I.y=-E*r+x,I.z=O*Q,h.push(I.x,I.y,I.z),M.set(Y,D,Q).normalize(),p.push(M.x,M.y,M.z),g.push(H,1-E),T.push(v++)}_.push(T)}for(let A=0;A<i;A++)for(let T=0;T<s;T++){const E=_[T][A],O=_[T+1][A],N=_[T+1][A+1],H=_[T][A+1];d.push(E,O,H),d.push(O,N,H),P+=6}u.addGroup(m,P,0),m+=P}function w(M){const I=v,P=new ue,D=new B;let A=0;const T=M===!0?e:n,E=M===!0?1:-1;for(let N=1;N<=i;N++)h.push(0,x*E,0),p.push(0,E,0),g.push(.5,.5),v++;const O=v;for(let N=0;N<=i;N++){const K=N/i*l+a,Y=Math.cos(K),Q=Math.sin(K);D.x=T*Q,D.y=x*E,D.z=T*Y,h.push(D.x,D.y,D.z),p.push(0,E,0),P.x=Y*.5+.5,P.y=Q*.5*E+.5,g.push(P.x,P.y),v++}for(let N=0;N<i;N++){const H=I+N,K=O+N;M===!0?d.push(K,K+1,H):d.push(K+1,K,H),A+=3}u.addGroup(m,A,M===!0?1:2),m+=A}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Iu(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class zp extends Iu{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new zp(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class pa extends Mt{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),u(r),d(),this.setAttribute("position",new et(s,3)),this.setAttribute("normal",new et(s.slice(),3)),this.setAttribute("uv",new et(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const w=new B,M=new B,I=new B;for(let P=0;P<n.length;P+=3)g(n[P+0],w),g(n[P+1],M),g(n[P+2],I),l(w,M,I,S)}function l(S,w,M,I){const P=I+1,D=[];for(let A=0;A<=P;A++){D[A]=[];const T=S.clone().lerp(M,A/P),E=w.clone().lerp(M,A/P),O=P-A;for(let N=0;N<=O;N++)N===0&&A===P?D[A][N]=T:D[A][N]=T.clone().lerp(E,N/O)}for(let A=0;A<P;A++)for(let T=0;T<2*(P-A)-1;T++){const E=Math.floor(T/2);T%2===0?(p(D[A][E+1]),p(D[A+1][E]),p(D[A][E])):(p(D[A][E+1]),p(D[A+1][E+1]),p(D[A+1][E]))}}function u(S){const w=new B;for(let M=0;M<s.length;M+=3)w.x=s[M+0],w.y=s[M+1],w.z=s[M+2],w.normalize().multiplyScalar(S),s[M+0]=w.x,s[M+1]=w.y,s[M+2]=w.z}function d(){const S=new B;for(let w=0;w<s.length;w+=3){S.x=s[w+0],S.y=s[w+1],S.z=s[w+2];const M=x(S)/2/Math.PI+.5,I=m(S)/Math.PI+.5;o.push(M,1-I)}v(),h()}function h(){for(let S=0;S<o.length;S+=6){const w=o[S+0],M=o[S+2],I=o[S+4],P=Math.max(w,M,I),D=Math.min(w,M,I);P>.9&&D<.1&&(w<.2&&(o[S+0]+=1),M<.2&&(o[S+2]+=1),I<.2&&(o[S+4]+=1))}}function p(S){s.push(S.x,S.y,S.z)}function g(S,w){const M=S*3;w.x=e[M+0],w.y=e[M+1],w.z=e[M+2]}function v(){const S=new B,w=new B,M=new B,I=new B,P=new ue,D=new ue,A=new ue;for(let T=0,E=0;T<s.length;T+=9,E+=6){S.set(s[T+0],s[T+1],s[T+2]),w.set(s[T+3],s[T+4],s[T+5]),M.set(s[T+6],s[T+7],s[T+8]),P.set(o[E+0],o[E+1]),D.set(o[E+2],o[E+3]),A.set(o[E+4],o[E+5]),I.copy(S).add(w).add(M).divideScalar(3);const O=x(I);_(P,E+0,S,O),_(D,E+2,w,O),_(A,E+4,M,O)}}function _(S,w,M,I){I<0&&S.x===1&&(o[w]=S.x-1),M.x===0&&M.z===0&&(o[w]=I/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function m(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pa(e.vertices,e.indices,e.radius,e.details)}}class Bp extends pa{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Bp(e.radius,e.detail)}}const Yg=new B,qg=new B,f_=new B,Zg=new gi;class DO extends Mt{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(lu*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],d=["a","b","c"],h=new Array(3),p={},g=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:_,b:x,c:m}=Zg;if(_.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),m.fromBufferAttribute(a,u[2]),Zg.getNormal(f_),h[0]=`${Math.round(_.x*i)},${Math.round(_.y*i)},${Math.round(_.z*i)}`,h[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[2]=`${Math.round(m.x*i)},${Math.round(m.y*i)},${Math.round(m.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const w=(S+1)%3,M=h[S],I=h[w],P=Zg[d[S]],D=Zg[d[w]],A=`${M}_${I}`,T=`${I}_${M}`;T in p&&p[T]?(f_.dot(p[T].normal)<=s&&(g.push(P.x,P.y,P.z),g.push(D.x,D.y,D.z)),p[T]=null):A in p||(p[A]={index0:u[S],index1:u[w],normal:f_.clone()})}}for(const v in p)if(p[v]){const{index0:_,index1:x}=p[v];Yg.fromBufferAttribute(a,_),qg.fromBufferAttribute(a,x),g.push(Yg.x,Yg.y,Yg.z),g.push(qg.x,qg.y,qg.z)}this.setAttribute("position",new et(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class fu extends fp{constructor(e){super(e),this.uuid=Fi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new fp().fromJSON(i))}return this}}const NW={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=LO(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,d,h,p,g;if(r&&(s=VW(t,e,s,n)),t.length>80*n){a=u=t[0],l=d=t[1];for(let v=n;v<i;v+=n)h=t[v],p=t[v+1],h<a&&(a=h),p<l&&(l=p),h>u&&(u=h),p>d&&(d=p);g=Math.max(u-a,d-l),g=g!==0?32767/g:0}return dp(s,o,n,a,l,g,0),o}};function LO(t,e,n,r,i){let s,o;if(i===JW(t,e,n,r)>0)for(s=e;s<n;s+=r)o=GC(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=GC(s,t[s],t[s+1],o);return o&&My(o,o.next)&&(pp(o),o=o.next),o}function Su(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(My(n,n.next)||Cn(n.prev,n,n.next)===0)){if(pp(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function dp(t,e,n,r,i,s,o){if(!t)return;!o&&s&&XW(t,r,i,s);let a=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?zW(t,r,i,s):FW(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),pp(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=BW(Su(t),e,n),dp(t,e,n,r,i,s,2)):o===2&&HW(t,e,n,r,i,s):dp(Su(t),e,n,r,i,s,1);break}}}function FW(t){const e=t.prev,n=t,r=t.next;if(Cn(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,u=r.y,d=i<s?i<o?i:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,p=i>s?i>o?i:o:s>o?s:o,g=a>l?a>u?a:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=d&&v.x<=p&&v.y>=h&&v.y<=g&&Zc(i,a,s,l,o,u,v.x,v.y)&&Cn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function zW(t,e,n,r){const i=t.prev,s=t,o=t.next;if(Cn(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,d=i.y,h=s.y,p=o.y,g=a<l?a<u?a:u:l<u?l:u,v=d<h?d<p?d:p:h<p?h:p,_=a>l?a>u?a:u:l>u?l:u,x=d>h?d>p?d:p:h>p?h:p,m=Cw(g,v,e,n,r),S=Cw(_,x,e,n,r);let w=t.prevZ,M=t.nextZ;for(;w&&w.z>=m&&M&&M.z<=S;){if(w.x>=g&&w.x<=_&&w.y>=v&&w.y<=x&&w!==i&&w!==o&&Zc(a,d,l,h,u,p,w.x,w.y)&&Cn(w.prev,w,w.next)>=0||(w=w.prevZ,M.x>=g&&M.x<=_&&M.y>=v&&M.y<=x&&M!==i&&M!==o&&Zc(a,d,l,h,u,p,M.x,M.y)&&Cn(M.prev,M,M.next)>=0))return!1;M=M.nextZ}for(;w&&w.z>=m;){if(w.x>=g&&w.x<=_&&w.y>=v&&w.y<=x&&w!==i&&w!==o&&Zc(a,d,l,h,u,p,w.x,w.y)&&Cn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=S;){if(M.x>=g&&M.x<=_&&M.y>=v&&M.y<=x&&M!==i&&M!==o&&Zc(a,d,l,h,u,p,M.x,M.y)&&Cn(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function BW(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!My(i,s)&&OO(i,r,r.next,s)&&hp(i,s)&&hp(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),pp(r),pp(r.next),r=t=s),r=r.next}while(r!==t);return Su(r)}function HW(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&qW(o,a)){let l=kO(o,a);o=Su(o,o.next),l=Su(l,l.next),dp(o,e,n,r,i,s,0),dp(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function VW(t,e,n,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,u=LO(t,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(YW(u));for(i.sort(GW),s=0;s<i.length;s++)n=WW(i[s],n);return n}function GW(t,e){return t.x-e.x}function WW(t,e){const n=$W(t,e);if(!n)return e;const r=kO(n,t);return Su(r,r.next),Su(n,n.next)}function $W(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const p=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(p<=s&&p>r&&(r=p,i=n.x<n.next.x?n:n.next,p===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let d=1/0,h;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&Zc(o<u?s:r,o,l,u,o<u?r:s,o,n.x,n.y)&&(h=Math.abs(o-n.y)/(s-n.x),hp(n,t)&&(h<d||h===d&&(n.x>i.x||n.x===i.x&&jW(i,n)))&&(i=n,d=h)),n=n.next;while(n!==a);return i}function jW(t,e){return Cn(t.prev,t,e.prev)<0&&Cn(e.next,t,t.next)<0}function XW(t,e,n,r){let i=t;do i.z===0&&(i.z=Cw(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,KW(i)}function KW(t){let e,n,r,i,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,u*=2}while(o>1);return t}function Cw(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function YW(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Zc(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function qW(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!ZW(t,e)&&(hp(t,e)&&hp(e,t)&&QW(t,e)&&(Cn(t.prev,t,e.prev)||Cn(t,e.prev,e))||My(t,e)&&Cn(t.prev,t,t.next)>0&&Cn(e.prev,e,e.next)>0)}function Cn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function My(t,e){return t.x===e.x&&t.y===e.y}function OO(t,e,n,r){const i=Jg(Cn(t,e,n)),s=Jg(Cn(t,e,r)),o=Jg(Cn(n,r,t)),a=Jg(Cn(n,r,e));return!!(i!==s&&o!==a||i===0&&Qg(t,n,e)||s===0&&Qg(t,r,e)||o===0&&Qg(n,t,r)||a===0&&Qg(n,e,r))}function Qg(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Jg(t){return t>0?1:t<0?-1:0}function ZW(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&OO(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function hp(t,e){return Cn(t.prev,t,t.next)<0?Cn(t,e,t.next)>=0&&Cn(t,t.prev,e)>=0:Cn(t,e,t.prev)<0||Cn(t,t.next,e)<0}function QW(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function kO(t,e){const n=new Aw(t.i,t.x,t.y),r=new Aw(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function GC(t,e,n,r){const i=new Aw(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function pp(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Aw(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function JW(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class So{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return So.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];WC(e),$C(r,e);let o=e.length;n.forEach(WC);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,$C(r,n[l]);const a=NW.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function WC(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function $C(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class Hp extends Mt{constructor(e=new fu([new ue(.5,.5),new ue(-.5,.5),new ue(-.5,-.5),new ue(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new et(i,3)),this.setAttribute("uv",new et(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,d=n.steps!==void 0?n.steps:1,h=n.depth!==void 0?n.depth:1;let p=n.bevelEnabled!==void 0?n.bevelEnabled:!0,g=n.bevelThickness!==void 0?n.bevelThickness:.2,v=n.bevelSize!==void 0?n.bevelSize:g-.1,_=n.bevelOffset!==void 0?n.bevelOffset:0,x=n.bevelSegments!==void 0?n.bevelSegments:3;const m=n.extrudePath,S=n.UVGenerator!==void 0?n.UVGenerator:e9;let w,M=!1,I,P,D,A;m&&(w=m.getSpacedPoints(d),M=!0,p=!1,I=m.computeFrenetFrames(d,!1),P=new B,D=new B,A=new B),p||(x=0,g=0,v=0,_=0);const T=a.extractPoints(u);let E=T.shape;const O=T.holes;if(!So.isClockWise(E)){E=E.reverse();for(let ne=0,q=O.length;ne<q;ne++){const se=O[ne];So.isClockWise(se)&&(O[ne]=se.reverse())}}const H=So.triangulateShape(E,O),K=E;for(let ne=0,q=O.length;ne<q;ne++){const se=O[ne];E=E.concat(se)}function Y(ne,q,se){return q||console.error("THREE.ExtrudeGeometry: vec does not exist"),ne.clone().addScaledVector(q,se)}const Q=E.length,ee=H.length;function F(ne,q,se){let Ce,Le,He;const We=ne.x-q.x,Ge=ne.y-q.y,je=se.x-ne.x,Je=se.y-ne.y,G=We*We+Ge*Ge,k=We*Je-Ge*je;if(Math.abs(k)>Number.EPSILON){const re=Math.sqrt(G),be=Math.sqrt(je*je+Je*Je),Ae=q.x-Ge/re,Ue=q.y+We/re,tt=se.x-Je/be,Pe=se.y+je/be,Se=((tt-Ae)*Je-(Pe-Ue)*je)/(We*Je-Ge*je);Ce=Ae+We*Se-ne.x,Le=Ue+Ge*Se-ne.y;const Ke=Ce*Ce+Le*Le;if(Ke<=2)return new ue(Ce,Le);He=Math.sqrt(Ke/2)}else{let re=!1;We>Number.EPSILON?je>Number.EPSILON&&(re=!0):We<-Number.EPSILON?je<-Number.EPSILON&&(re=!0):Math.sign(Ge)===Math.sign(Je)&&(re=!0),re?(Ce=-Ge,Le=We,He=Math.sqrt(G)):(Ce=We,Le=Ge,He=Math.sqrt(G/2))}return new ue(Ce/He,Le/He)}const j=[];for(let ne=0,q=K.length,se=q-1,Ce=ne+1;ne<q;ne++,se++,Ce++)se===q&&(se=0),Ce===q&&(Ce=0),j[ne]=F(K[ne],K[se],K[Ce]);const V=[];let ce,ae=j.concat();for(let ne=0,q=O.length;ne<q;ne++){const se=O[ne];ce=[];for(let Ce=0,Le=se.length,He=Le-1,We=Ce+1;Ce<Le;Ce++,He++,We++)He===Le&&(He=0),We===Le&&(We=0),ce[Ce]=F(se[Ce],se[He],se[We]);V.push(ce),ae=ae.concat(ce)}for(let ne=0;ne<x;ne++){const q=ne/x,se=g*Math.cos(q*Math.PI/2),Ce=v*Math.sin(q*Math.PI/2)+_;for(let Le=0,He=K.length;Le<He;Le++){const We=Y(K[Le],j[Le],Ce);J(We.x,We.y,-se)}for(let Le=0,He=O.length;Le<He;Le++){const We=O[Le];ce=V[Le];for(let Ge=0,je=We.length;Ge<je;Ge++){const Je=Y(We[Ge],ce[Ge],Ce);J(Je.x,Je.y,-se)}}}const fe=v+_;for(let ne=0;ne<Q;ne++){const q=p?Y(E[ne],ae[ne],fe):E[ne];M?(D.copy(I.normals[0]).multiplyScalar(q.x),P.copy(I.binormals[0]).multiplyScalar(q.y),A.copy(w[0]).add(D).add(P),J(A.x,A.y,A.z)):J(q.x,q.y,0)}for(let ne=1;ne<=d;ne++)for(let q=0;q<Q;q++){const se=p?Y(E[q],ae[q],fe):E[q];M?(D.copy(I.normals[ne]).multiplyScalar(se.x),P.copy(I.binormals[ne]).multiplyScalar(se.y),A.copy(w[ne]).add(D).add(P),J(A.x,A.y,A.z)):J(se.x,se.y,h/d*ne)}for(let ne=x-1;ne>=0;ne--){const q=ne/x,se=g*Math.cos(q*Math.PI/2),Ce=v*Math.sin(q*Math.PI/2)+_;for(let Le=0,He=K.length;Le<He;Le++){const We=Y(K[Le],j[Le],Ce);J(We.x,We.y,h+se)}for(let Le=0,He=O.length;Le<He;Le++){const We=O[Le];ce=V[Le];for(let Ge=0,je=We.length;Ge<je;Ge++){const Je=Y(We[Ge],ce[Ge],Ce);M?J(Je.x,Je.y+w[d-1].y,w[d-1].x+se):J(Je.x,Je.y,h+se)}}}de(),De();function de(){const ne=i.length/3;if(p){let q=0,se=Q*q;for(let Ce=0;Ce<ee;Ce++){const Le=H[Ce];ve(Le[2]+se,Le[1]+se,Le[0]+se)}q=d+x*2,se=Q*q;for(let Ce=0;Ce<ee;Ce++){const Le=H[Ce];ve(Le[0]+se,Le[1]+se,Le[2]+se)}}else{for(let q=0;q<ee;q++){const se=H[q];ve(se[2],se[1],se[0])}for(let q=0;q<ee;q++){const se=H[q];ve(se[0]+Q*d,se[1]+Q*d,se[2]+Q*d)}}r.addGroup(ne,i.length/3-ne,0)}function De(){const ne=i.length/3;let q=0;Ee(K,q),q+=K.length;for(let se=0,Ce=O.length;se<Ce;se++){const Le=O[se];Ee(Le,q),q+=Le.length}r.addGroup(ne,i.length/3-ne,1)}function Ee(ne,q){let se=ne.length;for(;--se>=0;){const Ce=se;let Le=se-1;Le<0&&(Le=ne.length-1);for(let He=0,We=d+x*2;He<We;He++){const Ge=Q*He,je=Q*(He+1),Je=q+Ce+Ge,G=q+Le+Ge,k=q+Le+je,re=q+Ce+je;U(Je,G,k,re)}}}function J(ne,q,se){l.push(ne),l.push(q),l.push(se)}function ve(ne,q,se){z(ne),z(q),z(se);const Ce=i.length/3,Le=S.generateTopUV(r,i,Ce-3,Ce-2,Ce-1);W(Le[0]),W(Le[1]),W(Le[2])}function U(ne,q,se,Ce){z(ne),z(q),z(Ce),z(q),z(se),z(Ce);const Le=i.length/3,He=S.generateSideWallUV(r,i,Le-6,Le-3,Le-2,Le-1);W(He[0]),W(He[1]),W(He[3]),W(He[1]),W(He[2]),W(He[3])}function z(ne){i.push(l[ne*3+0]),i.push(l[ne*3+1]),i.push(l[ne*3+2])}function W(ne){s.push(ne.x),s.push(ne.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return t9(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new WM[i.type]().fromJSON(i)),new Hp(r,e.options)}}const e9={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],d=e[i*3+1];return[new ue(s,o),new ue(a,l),new ue(u,d)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[r*3],d=e[r*3+1],h=e[r*3+2],p=e[i*3],g=e[i*3+1],v=e[i*3+2],_=e[s*3],x=e[s*3+1],m=e[s*3+2];return Math.abs(a-d)<Math.abs(o-u)?[new ue(o,1-l),new ue(u,1-h),new ue(p,1-v),new ue(_,1-m)]:[new ue(a,1-l),new ue(d,1-h),new ue(g,1-v),new ue(x,1-m)]}};function t9(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Vp extends pa{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Vp(e.radius,e.detail)}}class Vf extends pa{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Vf(e.radius,e.detail)}}class Gf extends Mt{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],d=[];let h=e;const p=(n-e)/i,g=new B,v=new ue;for(let _=0;_<=i;_++){for(let x=0;x<=r;x++){const m=s+x/r*o;g.x=h*Math.cos(m),g.y=h*Math.sin(m),l.push(g.x,g.y,g.z),u.push(0,0,1),v.x=(g.x/n+1)/2,v.y=(g.y/n+1)/2,d.push(v.x,v.y)}h+=p}for(let _=0;_<i;_++){const x=_*(r+1);for(let m=0;m<r;m++){const S=m+x,w=S,M=S+r+1,I=S+r+2,P=S+1;a.push(w,M,P),a.push(M,I,P)}}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(u,3)),this.setAttribute("uv",new et(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Gp extends Mt{constructor(e=new fu([new ue(0,.5),new ue(-.5,-.5),new ue(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let d=0;d<e.length;d++)u(e[d]),this.addGroup(a,l,d),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new et(i,3)),this.setAttribute("normal",new et(s,3)),this.setAttribute("uv",new et(o,2));function u(d){const h=i.length/3,p=d.extractPoints(n);let g=p.shape;const v=p.holes;So.isClockWise(g)===!1&&(g=g.reverse());for(let x=0,m=v.length;x<m;x++){const S=v[x];So.isClockWise(S)===!0&&(v[x]=S.reverse())}const _=So.triangulateShape(g,v);for(let x=0,m=v.length;x<m;x++){const S=v[x];g=g.concat(S)}for(let x=0,m=g.length;x<m;x++){const S=g[x];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let x=0,m=_.length;x<m;x++){const S=_[x],w=S[0]+h,M=S[1]+h,I=S[2]+h;r.push(w,M,I),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return n9(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new Gp(r,e.curveSegments)}}function n9(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Wf extends Mt{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const d=[],h=new B,p=new B,g=[],v=[],_=[],x=[];for(let m=0;m<=r;m++){const S=[],w=m/r;let M=0;m===0&&o===0?M=.5/n:m===r&&l===Math.PI&&(M=-.5/n);for(let I=0;I<=n;I++){const P=I/n;h.x=-e*Math.cos(i+P*s)*Math.sin(o+w*a),h.y=e*Math.cos(o+w*a),h.z=e*Math.sin(i+P*s)*Math.sin(o+w*a),v.push(h.x,h.y,h.z),p.copy(h).normalize(),_.push(p.x,p.y,p.z),x.push(P+M,1-w),S.push(u++)}d.push(S)}for(let m=0;m<r;m++)for(let S=0;S<n;S++){const w=d[m][S+1],M=d[m][S],I=d[m+1][S],P=d[m+1][S+1];(m!==0||o>0)&&g.push(w,M,P),(m!==r-1||l<Math.PI)&&g.push(M,I,P)}this.setIndex(g),this.setAttribute("position",new et(v,3)),this.setAttribute("normal",new et(_,3)),this.setAttribute("uv",new et(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Wp extends pa{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Wp(e.radius,e.detail)}}class $p extends Mt{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],d=new B,h=new B,p=new B;for(let g=0;g<=r;g++)for(let v=0;v<=i;v++){const _=v/i*s,x=g/r*Math.PI*2;h.x=(e+n*Math.cos(x))*Math.cos(_),h.y=(e+n*Math.cos(x))*Math.sin(_),h.z=n*Math.sin(x),a.push(h.x,h.y,h.z),d.x=e*Math.cos(_),d.y=e*Math.sin(_),p.subVectors(h,d).normalize(),l.push(p.x,p.y,p.z),u.push(v/i),u.push(g/r)}for(let g=1;g<=r;g++)for(let v=1;v<=i;v++){const _=(i+1)*g+v-1,x=(i+1)*(g-1)+v-1,m=(i+1)*(g-1)+v,S=(i+1)*g+v;o.push(_,x,S),o.push(x,m,S)}this.setIndex(o),this.setAttribute("position",new et(a,3)),this.setAttribute("normal",new et(l,3)),this.setAttribute("uv",new et(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $p(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class jp extends Mt{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],d=[],h=new B,p=new B,g=new B,v=new B,_=new B,x=new B,m=new B;for(let w=0;w<=r;++w){const M=w/r*s*Math.PI*2;S(M,s,o,e,g),S(M+.01,s,o,e,v),x.subVectors(v,g),m.addVectors(v,g),_.crossVectors(x,m),m.crossVectors(_,x),_.normalize(),m.normalize();for(let I=0;I<=i;++I){const P=I/i*Math.PI*2,D=-n*Math.cos(P),A=n*Math.sin(P);h.x=g.x+(D*m.x+A*_.x),h.y=g.y+(D*m.y+A*_.y),h.z=g.z+(D*m.z+A*_.z),l.push(h.x,h.y,h.z),p.subVectors(h,g).normalize(),u.push(p.x,p.y,p.z),d.push(w/r),d.push(I/i)}}for(let w=1;w<=r;w++)for(let M=1;M<=i;M++){const I=(i+1)*(w-1)+(M-1),P=(i+1)*w+(M-1),D=(i+1)*w+M,A=(i+1)*(w-1)+M;a.push(I,P,A),a.push(P,D,A)}this.setIndex(a),this.setAttribute("position",new et(l,3)),this.setAttribute("normal",new et(u,3)),this.setAttribute("uv",new et(d,2));function S(w,M,I,P,D){const A=Math.cos(w),T=Math.sin(w),E=I/M*w,O=Math.cos(E);D.x=P*(2+O)*.5*A,D.y=P*(2+O)*T*.5,D.z=P*Math.sin(E)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jp(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Xp extends Mt{constructor(e=new VM(new B(-1,-1,0),new B(-1,1,0),new B(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new B,l=new B,u=new ue;let d=new B;const h=[],p=[],g=[],v=[];_(),this.setIndex(v),this.setAttribute("position",new et(h,3)),this.setAttribute("normal",new et(p,3)),this.setAttribute("uv",new et(g,2));function _(){for(let w=0;w<n;w++)x(w);x(s===!1?n:0),S(),m()}function x(w){d=e.getPointAt(w/n,d);const M=o.normals[w],I=o.binormals[w];for(let P=0;P<=i;P++){const D=P/i*Math.PI*2,A=Math.sin(D),T=-Math.cos(D);l.x=T*M.x+A*I.x,l.y=T*M.y+A*I.y,l.z=T*M.z+A*I.z,l.normalize(),p.push(l.x,l.y,l.z),a.x=d.x+r*l.x,a.y=d.y+r*l.y,a.z=d.z+r*l.z,h.push(a.x,a.y,a.z)}}function m(){for(let w=1;w<=n;w++)for(let M=1;M<=i;M++){const I=(i+1)*(w-1)+(M-1),P=(i+1)*w+(M-1),D=(i+1)*w+M,A=(i+1)*(w-1)+M;v.push(I,P,A),v.push(P,D,A)}}function S(){for(let w=0;w<=n;w++)for(let M=0;M<=i;M++)u.x=w/n,u.y=M/i,g.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Xp(new WM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class $M extends Mt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new B,s=new B;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,d=l.length;u<d;++u){const h=l[u],p=h.start,g=h.count;for(let v=p,_=p+g;v<_;v+=3)for(let x=0;x<3;x++){const m=a.getX(v+x),S=a.getX(v+(x+1)%3);i.fromBufferAttribute(o,m),s.fromBufferAttribute(o,S),jC(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const d=3*a+u,h=3*a+(u+1)%3;i.fromBufferAttribute(o,d),s.fromBufferAttribute(o,h),jC(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new et(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function jC(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var XC=Object.freeze({__proto__:null,BoxGeometry:hl,CapsuleGeometry:Np,CircleGeometry:Fp,ConeGeometry:zp,CylinderGeometry:Iu,DodecahedronGeometry:Bp,EdgesGeometry:DO,ExtrudeGeometry:Hp,IcosahedronGeometry:Vp,LatheGeometry:Hf,OctahedronGeometry:Vf,PlaneGeometry:Ru,PolyhedronGeometry:pa,RingGeometry:Gf,ShapeGeometry:Gp,SphereGeometry:Wf,TetrahedronGeometry:Wp,TorusGeometry:$p,TorusKnotGeometry:jp,TubeGeometry:Xp,WireframeGeometry:$M});class UO extends er{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ze(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class NO extends Ot{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Ey extends er{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ze(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jM extends Ey{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new ue(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Fn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ze(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ze(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ze(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class XM extends er{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ze(16777215),this.specular=new ze(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class KM extends er{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ze(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class YM extends er{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class qM extends er{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ze(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ze(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Dp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FO extends er{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ze(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=ha,this.normalScale=new ue(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zO extends ai{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function os(t,e,n){return ZM(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function tu(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function ZM(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function BO(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function Rw(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function QM(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function r9(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],d=u.getValueSize(),h=[],p=[];for(let g=0;g<u.times.length;++g){const v=u.times[g]*i;if(!(v<n||v>=r)){h.push(u.times[g]);for(let _=0;_<d;++_)p.push(u.values[g*d+_])}}h.length!==0&&(u.times=tu(h,u.times.constructor),u.values=tu(p,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function i9(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(m){return m.name===a.name&&m.ValueTypeName===l});if(u===void 0)continue;let d=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=h/3);let p=0;const g=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);const v=a.times.length-1;let _;if(s<=a.times[0]){const m=d,S=h-d;_=os(a.values,m,S)}else if(s>=a.times[v]){const m=v*h+d,S=m+h-d;_=os(a.values,m,S)}else{const m=a.createInterpolant(),S=d,w=h-d;m.evaluate(s),_=os(m.resultBuffer,S,w)}l==="quaternion"&&new Wn().fromArray(_).normalize().conjugate().toArray(_);const x=u.times.length;for(let m=0;m<x;++m){const S=m*g+p;if(l==="quaternion")Wn.multiplyQuaternionsFlat(u.values,S,_,0,u.values,S);else{const w=g-p*2;for(let M=0;M<w;++M)u.values[S+M]-=_[M]}}}return t.blendMode=EM,t}const s9={arraySlice:os,convertArray:tu,isTypedArray:ZM,getKeyframeOrder:BO,sortedArray:Rw,flattenJSON:QM,subclip:r9,makeClipAdditive:i9};class Kp{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{r:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break r;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class HO extends Kp{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ql,endingEnd:Ql}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Jl:s=e,a=2*n-r;break;case lp:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Jl:o=e,l=2*r-n;break;case lp:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const u=(r-n)*.5,d=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-r),this._offsetPrev=s*d,this._offsetNext=o*d}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,d=this._offsetPrev,h=this._offsetNext,p=this._weightPrev,g=this._weightNext,v=(r-n)/(i-n),_=v*v,x=_*v,m=-p*x+2*p*_-p*v,S=(1+p)*x+(-1.5-2*p)*_+(-.5+p)*v+1,w=(-1-g)*x+(1.5+g)*_+.5*v,M=g*x-g*_;for(let I=0;I!==a;++I)s[I]=m*o[d+I]+S*o[u+I]+w*o[l+I]+M*o[h+I];return s}}class JM extends Kp{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,d=(r-n)/(i-n),h=1-d;for(let p=0;p!==a;++p)s[p]=o[u+p]*h+o[l+p]*d;return s}}class VO extends Kp{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Zs{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=tu(n,this.TimeBufferType),this.values=tu(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:tu(e.times,Array),values:tu(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new VO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new JM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new HO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case op:n=this.InterpolantFactoryMethodDiscrete;break;case ap:n=this.InterpolantFactoryMethodLinear;break;case Wv:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return op;case this.InterpolantFactoryMethodLinear:return ap;case this.InterpolantFactoryMethodSmooth:return Wv}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=os(r,s,o),this.values=os(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&ZM(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=os(this.times),n=os(this.values),r=this.getValueSize(),i=this.getInterpolation()===Wv,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],d=e[a+1];if(u!==d&&(a!==1||u!==e[0]))if(i)l=!0;else{const h=a*r,p=h-r,g=h+r;for(let v=0;v!==r;++v){const _=n[h+v];if(_!==n[p+v]||_!==n[g+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,p=o*r;for(let g=0;g!==r;++g)n[p+g]=n[h+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=os(e,0,o),this.values=os(n,0,o*r)):(this.times=e,this.values=n),this}clone(){const e=os(this.times,0),n=os(this.values,0),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}Zs.prototype.TimeBufferType=Float32Array;Zs.prototype.ValueBufferType=Float32Array;Zs.prototype.DefaultInterpolation=ap;class Du extends Zs{}Du.prototype.ValueTypeName="bool";Du.prototype.ValueBufferType=Array;Du.prototype.DefaultInterpolation=op;Du.prototype.InterpolantFactoryMethodLinear=void 0;Du.prototype.InterpolantFactoryMethodSmooth=void 0;class eE extends Zs{}eE.prototype.ValueTypeName="color";class mp extends Zs{}mp.prototype.ValueTypeName="number";class GO extends Kp{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let u=e*a;for(let d=u+a;u!==d;u+=4)Wn.slerpFlat(s,0,o,u-a,o,u,l);return s}}class $f extends Zs{InterpolantFactoryMethodLinear(e){return new GO(this.times,this.values,this.getValueSize(),e)}}$f.prototype.ValueTypeName="quaternion";$f.prototype.DefaultInterpolation=ap;$f.prototype.InterpolantFactoryMethodSmooth=void 0;class Lu extends Zs{}Lu.prototype.ValueTypeName="string";Lu.prototype.ValueBufferType=Array;Lu.prototype.DefaultInterpolation=op;Lu.prototype.InterpolantFactoryMethodLinear=void 0;Lu.prototype.InterpolantFactoryMethodSmooth=void 0;class gp extends Zs{}gp.prototype.ValueTypeName="vector";class vp{constructor(e,n=-1,r,i=fy){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=Fi(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(a9(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(Zs.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const d=BO(l);l=Rw(l,1,d),u=Rw(u,1,d),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new mp(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],d=u.name.match(s);if(d&&d.length>1){const h=d[1];let p=i[h];p||(i[h]=p=[]),p.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,p,g,v,_){if(g.length!==0){const x=[],m=[];QM(g,x,m,v),x.length!==0&&_.push(new h(p,x,m))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const p=u[h].keys;if(!(!p||p.length===0))if(p[0].morphTargets){const g={};let v;for(v=0;v<p.length;v++)if(p[v].morphTargets)for(let _=0;_<p[v].morphTargets.length;_++)g[p[v].morphTargets[_]]=-1;for(const _ in g){const x=[],m=[];for(let S=0;S!==p[v].morphTargets.length;++S){const w=p[v];x.push(w.time),m.push(w.morphTarget===_?1:0)}i.push(new mp(".morphTargetInfluence["+_+"]",x,m))}l=g.length*o}else{const g=".bones["+n[h].name+"]";r(gp,g+".position",p,"pos",i),r($f,g+".quaternion",p,"rot",i),r(gp,g+".scale",p,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function o9(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return mp;case"vector":case"vector2":case"vector3":case"vector4":return gp;case"color":return eE;case"quaternion":return $f;case"bool":case"boolean":return Du;case"string":return Lu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function a9(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=o9(t.type);if(t.times===void 0){const n=[],r=[];QM(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const wu={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class tE{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(d){a++,s===!1&&i.onStart!==void 0&&i.onStart(d,o,a),s=!0},this.itemEnd=function(d){o++,i.onProgress!==void 0&&i.onProgress(d,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(d){i.onError!==void 0&&i.onError(d)},this.resolveURL=function(d){return l?l(d):d},this.setURLModifier=function(d){return l=d,this},this.addHandler=function(d,h){return u.push(d,h),this},this.removeHandler=function(d){const h=u.indexOf(d);return h!==-1&&u.splice(h,2),this},this.getHandler=function(d){for(let h=0,p=u.length;h<p;h+=2){const g=u[h],v=u[h+1];if(g.global&&(g.lastIndex=0),g.test(d))return v}return null}}}const Qc=new tE;let $i=class{constructor(e){this.manager=e!==void 0?e:Qc,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};const Ho={};class l9 extends Error{constructor(e,n){super(e),this.response=n}}class la extends $i{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=wu.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Ho[e]!==void 0){Ho[e].push({onLoad:n,onProgress:r,onError:i});return}Ho[e]=[],Ho[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const d=Ho[e],h=u.body.getReader(),p=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),g=p?parseInt(p):0,v=g!==0;let _=0;const x=new ReadableStream({start(m){S();function S(){h.read().then(({done:w,value:M})=>{if(w)m.close();else{_+=M.byteLength;const I=new ProgressEvent("progress",{lengthComputable:v,loaded:_,total:g});for(let P=0,D=d.length;P<D;P++){const A=d[P];A.onProgress&&A.onProgress(I)}m.enqueue(M),S()}})}}});return new Response(x)}else throw new l9(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(d=>new DOMParser().parseFromString(d,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),p=h&&h[1]?h[1].toLowerCase():void 0,g=new TextDecoder(p);return u.arrayBuffer().then(v=>g.decode(v))}}}).then(u=>{wu.add(e,u);const d=Ho[e];delete Ho[e];for(let h=0,p=d.length;h<p;h++){const g=d[h];g.onLoad&&g.onLoad(u)}}).catch(u=>{const d=Ho[e];if(d===void 0)throw this.manager.itemError(e),u;delete Ho[e];for(let h=0,p=d.length;h<p;h++){const g=d[h];g.onError&&g.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class u9 extends $i{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new la(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=vp.parse(e[r]);n.push(i)}return n}}class c9 extends $i{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new FM,l=new la(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function d(h){l.load(e[h],function(p){const g=s.parse(p,!0);o[h]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},u+=1,u===6&&(g.mipmapCount===1&&(a.minFilter=ot),a.image=o,a.format=g.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let h=0,p=e.length;h<p;++h)d(h);else l.load(e,function(h){const p=s.parse(h,!0);if(p.isCubemap){const g=p.mipmaps.length/p.mipmapCount;for(let v=0;v<g;v++){o[v]={mipmaps:[]};for(let _=0;_<p.mipmapCount;_++)o[v].mipmaps.push(p.mipmaps[v*p.mipmapCount+_]),o[v].format=p.format,o[v].width=p.width,o[v].height=p.height}a.image=o}else a.image.width=p.width,a.image.height=p.height,a.mipmaps=p.mipmaps;p.mipmapCount===1&&(a.minFilter=ot),a.format=p.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class yp extends $i{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=wu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=cp("img");function l(){d(),wu.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(h){d(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function d(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class f9 extends $i{constructor(e){super(e)}load(e,n,r,i){const s=new kp,o=new yp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(d){s.images[u]=d,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class d9 extends $i{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new Jo,a=new la(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:ir,o.wrapT=u.wrapT!==void 0?u.wrapT:ir,o.magFilter=u.magFilter!==void 0?u.magFilter:ot,o.minFilter=u.minFilter!==void 0?u.minFilter:ot,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=ol),u.mipmapCount===1&&(o.minFilter=ot),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u))},r,i),o}}class Pf extends $i{constructor(e){super(e)}load(e,n,r,i){const s=new Bn,o=new yp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class pl extends Gt{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new ze(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class WO extends pl{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ze(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const d_=new at,KC=new B,YC=new B;class nE{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new ue(512,512),this.map=null,this.mapPass=null,this.matrix=new at,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new my,this._frameExtents=new ue(1,1),this._viewportCount=1,this._viewports=[new bt(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;KC.setFromMatrixPosition(e.matrixWorld),n.position.copy(KC),YC.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(YC),n.updateMatrixWorld(),d_.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(d_),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(d_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class h9 extends nE{constructor(){super(new jt(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=bf*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class $O extends pl{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new h9}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const qC=new at,Vd=new B,h_=new B;class p9 extends nE{constructor(){super(new jt(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new ue(4,2),this._viewportCount=6,this._viewports=[new bt(2,1,1,1),new bt(0,1,1,1),new bt(3,1,1,1),new bt(1,1,1,1),new bt(3,0,1,1),new bt(1,0,1,1)],this._cubeDirections=[new B(1,0,0),new B(-1,0,0),new B(0,0,1),new B(0,0,-1),new B(0,1,0),new B(0,-1,0)],this._cubeUps=[new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,1,0),new B(0,0,1),new B(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),Vd.setFromMatrixPosition(e.matrixWorld),r.position.copy(Vd),h_.copy(r.position),h_.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(h_),r.updateMatrixWorld(),i.makeTranslation(-Vd.x,-Vd.y,-Vd.z),qC.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qC)}}class jO extends pl{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new p9}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class m9 extends nE{constructor(){super(new $s(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class XO extends pl{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Gt.DEFAULT_UP),this.updateMatrix(),this.target=new Gt,this.shadow=new m9}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class KO extends pl{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class YO extends pl{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class qO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new B)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class Ty extends pl{constructor(e=new qO,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Py extends $i{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new la(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=Py.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new ze().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new ze().setHex(o.value);break;case"v2":i.uniforms[s].value=new ue().fromArray(o.value);break;case"v3":i.uniforms[s].value=new B().fromArray(o.value);break;case"v4":i.uniforms[s].value=new bt().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Rt().fromArray(o.value);break;case"m4":i.uniforms[s].value=new at().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new ue().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new ue().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:UO,SpriteMaterial:kM,RawShaderMaterial:NO,ShaderMaterial:Ot,PointsMaterial:NM,MeshPhysicalMaterial:jM,MeshStandardMaterial:Ey,MeshPhongMaterial:XM,MeshToonMaterial:KM,MeshNormalMaterial:YM,MeshLambertMaterial:qM,MeshDepthMaterial:vy,MeshDistanceMaterial:LM,MeshBasicMaterial:Ys,MeshMatcapMaterial:FO,LineDashedMaterial:zO,LineBasicMaterial:ai,Material:er};return new n[e]}}class Iw{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class rE extends Mt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ZO extends $i{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new la(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(g,v){if(n[v]!==void 0)return n[v];const x=g.interleavedBuffers[v],m=s(g,x.buffer),S=Kc(x.type,m),w=new _y(S,x.stride);return w.uuid=x.uuid,n[v]=w,w}function s(g,v){if(r[v]!==void 0)return r[v];const x=g.arrayBuffers[v],m=new Uint32Array(x).buffer;return r[v]=m,m}const o=e.isInstancedBufferGeometry?new rE:new Mt,a=e.data.index;if(a!==void 0){const g=Kc(a.type,a.array);o.setIndex(new Xt(g,1))}const l=e.data.attributes;for(const g in l){const v=l[g];let _;if(v.isInterleavedBufferAttribute){const x=i(e.data,v.data);_=new Ui(x,v.itemSize,v.offset,v.normalized)}else{const x=Kc(v.type,v.array),m=v.isInstancedBufferAttribute?Tf:Xt;_=new m(x,v.itemSize,v.normalized)}v.name!==void 0&&(_.name=v.name),v.usage!==void 0&&_.setUsage(v.usage),v.updateRange!==void 0&&(_.updateRange.offset=v.updateRange.offset,_.updateRange.count=v.updateRange.count),o.setAttribute(g,_)}const u=e.data.morphAttributes;if(u)for(const g in u){const v=u[g],_=[];for(let x=0,m=v.length;x<m;x++){const S=v[x];let w;if(S.isInterleavedBufferAttribute){const M=i(e.data,S.data);w=new Ui(M,S.itemSize,S.offset,S.normalized)}else{const M=Kc(S.type,S.array);w=new Xt(M,S.itemSize,S.normalized)}S.name!==void 0&&(w.name=S.name),_.push(w)}o.morphAttributes[g]=_}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let g=0,v=h.length;g!==v;++g){const _=h[g];o.addGroup(_.start,_.count,_.materialIndex)}const p=e.data.boundingSphere;if(p!==void 0){const g=new B;p.center!==void 0&&g.fromArray(p.center),o.boundingSphere=new Ss(g,p.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class g9 extends $i{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?Iw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new la(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const d=u.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Iw.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new la(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),d=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,d),n!==void 0){let h=!1;for(const p in o)if(o[p].data instanceof HTMLImageElement){h=!0;break}h===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new fu().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Sy().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new ZO;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in XC?a=XC[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new Py;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=vp.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(d)}else return l.data?{data:Kc(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new tE(n);s=new yp(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,d=e.length;u<d;u++){const h=e[u],p=h.url;if(Array.isArray(p)){const g=[];for(let v=0,_=p.length;v<_;v++){const x=p[v],m=a(x);m!==null&&(m instanceof HTMLImageElement?g.push(m):g.push(new Jo(m.data,m.width,m.height)))}i[h.uuid]=new eu(g)}else{const g=a(h.url);i[h.uuid]=new eu(g)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Kc(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new yp(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const d=[];for(let h=0,p=u.length;h<p;h++){const g=u[h],v=await s(g);v!==null&&(v instanceof HTMLImageElement?d.push(v):d.push(new Jo(v.data,v.width,v.height)))}r[l.uuid]=new eu(d)}else{const d=await s(l.url);r[l.uuid]=new eu(d)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let d;Array.isArray(u)?(d=new kp,u.length===6&&(d.needsUpdate=!0)):(u&&u.data?d=new Jo:d=new Bn,u&&(d.needsUpdate=!0)),d.source=l,d.uuid=a.uuid,a.name!==void 0&&(d.name=a.name),a.mapping!==void 0&&(d.mapping=r(a.mapping,v9)),a.channel!==void 0&&(d.channel=a.channel),a.offset!==void 0&&d.offset.fromArray(a.offset),a.repeat!==void 0&&d.repeat.fromArray(a.repeat),a.center!==void 0&&d.center.fromArray(a.center),a.rotation!==void 0&&(d.rotation=a.rotation),a.wrap!==void 0&&(d.wrapS=r(a.wrap[0],ZC),d.wrapT=r(a.wrap[1],ZC)),a.format!==void 0&&(d.format=a.format),a.internalFormat!==void 0&&(d.internalFormat=a.internalFormat),a.type!==void 0&&(d.type=a.type),a.colorSpace!==void 0&&(d.colorSpace=a.colorSpace),a.encoding!==void 0&&(d.encoding=a.encoding),a.minFilter!==void 0&&(d.minFilter=r(a.minFilter,QC)),a.magFilter!==void 0&&(d.magFilter=r(a.magFilter,QC)),a.anisotropy!==void 0&&(d.anisotropy=a.anisotropy),a.flipY!==void 0&&(d.flipY=a.flipY),a.generateMipmaps!==void 0&&(d.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(d.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(d.unpackAlignment=a.unpackAlignment),a.userData!==void 0&&(d.userData=a.userData),i[a.uuid]=d}return i}parseObject(e,n,r,i,s){let o;function a(p){return n[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",p),n[p]}function l(p){if(p!==void 0){if(Array.isArray(p)){const g=[];for(let v=0,_=p.length;v<_;v++){const x=p[v];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),g.push(r[x])}return g}return r[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",p),r[p]}}function u(p){return i[p]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",p),i[p]}let d,h;switch(e.type){case"Scene":o=new _u,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new ze(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new xy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new yy(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new jt(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new $s(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new KO(e.color,e.intensity);break;case"DirectionalLight":o=new XO(e.color,e.intensity);break;case"PointLight":o=new jO(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new YO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new $O(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new WO(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Ty().fromJSON(e);break;case"SkinnedMesh":d=a(e.geometry),h=l(e.material),o=new wO(d,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":d=a(e.geometry),h=l(e.material),o=new Qn(d,h);break;case"InstancedMesh":d=a(e.geometry),h=l(e.material);const p=e.count,g=e.instanceMatrix,v=e.instanceColor;o=new bO(d,h,p),o.instanceMatrix=new Tf(new Float32Array(g.array),16),v!==void 0&&(o.instanceColor=new Tf(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new SO;break;case"Line":o=new ll(a(e.geometry),l(e.material));break;case"LineLoop":o=new MO(a(e.geometry),l(e.material));break;case"LineSegments":o=new Po(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new EO(a(e.geometry),l(e.material));break;case"Sprite":o=new _O(l(e.material));break;case"Group":o=new qc;break;case"Bone":o=new UM;break;default:o=new Gt}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const p=e.children;for(let g=0;g<p.length;g++)o.add(this.parseObject(p[g],n,r,i,s))}if(e.animations!==void 0){const p=e.animations;for(let g=0;g<p.length;g++){const v=p[g];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const p=e.levels;for(let g=0;g<p.length;g++){const v=p[g],_=o.getObjectByProperty("uuid",v.object);_!==void 0&&o.addLevel(_,v.distance,v.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const v9={UVMapping:uy,CubeReflectionMapping:il,CubeRefractionMapping:sl,EquirectangularReflectionMapping:rp,EquirectangularRefractionMapping:ip,CubeUVReflectionMapping:Nf},ZC={RepeatWrapping:aa,ClampToEdgeWrapping:ir,MirroredRepeatWrapping:sp},QC={NearestFilter:kt,NearestMipmapNearestFilter:P0,NearestMipmapLinearFilter:Mh,LinearFilter:ot,LinearMipmapNearestFilter:SM,LinearMipmapLinearFilter:ol};class y9 extends $i{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=wu.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){wu.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let ev;class iE{static getContext(){return ev===void 0&&(ev=new(window.AudioContext||window.webkitAudioContext)),ev}static setContext(e){ev=e}}class x9 extends $i{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new la(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);iE.getContext().decodeAudioData(u,function(h){n(h)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class _9 extends Ty{constructor(e,n,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new ze().set(e),s=new ze().set(n),o=new B(i.r,i.g,i.b),a=new B(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class S9 extends Ty{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const r=new ze().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const JC=new at,eA=new at,Dl=new at;class w9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new jt,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new jt,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,Dl.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(lu*n.fov*.5)/n.zoom;let a,l;eA.elements[12]=-i,JC.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,Dl.elements[0]=2*n.near/(l-a),Dl.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Dl),a=-o*n.aspect-s,l=o*n.aspect-s,Dl.elements[0]=2*n.near/(l-a),Dl.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Dl)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(eA),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(JC)}}class sE{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=tA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=tA();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function tA(){return(typeof performance>"u"?Date:performance).now()}const Ll=new B,nA=new Wn,b9=new B,Ol=new B;class M9 extends Gt{constructor(){super(),this.type="AudioListener",this.context=iE.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new sE}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ll,nA,b9),Ol.set(0,0,-1).applyQuaternion(nA),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(Ll.x,i),n.positionY.linearRampToValueAtTime(Ll.y,i),n.positionZ.linearRampToValueAtTime(Ll.z,i),n.forwardX.linearRampToValueAtTime(Ol.x,i),n.forwardY.linearRampToValueAtTime(Ol.y,i),n.forwardZ.linearRampToValueAtTime(Ol.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(Ll.x,Ll.y,Ll.z),n.setOrientation(Ol.x,Ol.y,Ol.z,r.x,r.y,r.z)}}class QO extends Gt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const kl=new B,rA=new Wn,E9=new B,Ul=new B;class T9 extends QO{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(kl,rA,E9),Ul.set(0,0,1).applyQuaternion(rA);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(kl.x,r),n.positionY.linearRampToValueAtTime(kl.y,r),n.positionZ.linearRampToValueAtTime(kl.z,r),n.orientationX.linearRampToValueAtTime(Ul.x,r),n.orientationY.linearRampToValueAtTime(Ul.y,r),n.orientationZ.linearRampToValueAtTime(Ul.z,r)}else n.setPosition(kl.x,kl.y,kl.z),n.setOrientation(Ul.x,Ul.y,Ul.z)}}class P9{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class JO{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){Wn.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;Wn.multiplyQuaternionsFlat(e,o,e,n,e,r),Wn.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const oE="\\[\\]\\.:\\/",C9=new RegExp("["+oE+"]","g"),aE="[^"+oE+"]",A9="[^"+oE.replace("\\.","")+"]",R9=/((?:WC+[\/:])*)/.source.replace("WC",aE),I9=/(WCOD+)?/.source.replace("WCOD",A9),D9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",aE),L9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",aE),O9=new RegExp("^"+R9+I9+D9+L9+"$"),k9=["material","materials","bones","map"];class U9{constructor(e,n,r){const i=r||Nt.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class Nt{constructor(e,n,r){this.path=n,this.parsedPath=r||Nt.parseTrackName(n),this.node=Nt.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new Nt.Composite(e,n,r):new Nt(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(C9,"")}static parseTrackName(e){const n=O9.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);k9.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=Nt.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let d=0;d<e.length;d++)if(e[d].name===u){u=d;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Nt.Composite=U9;Nt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Nt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Nt.prototype.GetterByBindingType=[Nt.prototype._getValue_direct,Nt.prototype._getValue_array,Nt.prototype._getValue_arrayElement,Nt.prototype._getValue_toArray];Nt.prototype.SetterByBindingTypeAndVersioning=[[Nt.prototype._setValue_direct,Nt.prototype._setValue_direct_setNeedsUpdate,Nt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_array,Nt.prototype._setValue_array_setNeedsUpdate,Nt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_arrayElement,Nt.prototype._setValue_arrayElement_setNeedsUpdate,Nt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Nt.prototype._setValue_fromArray,Nt.prototype._setValue_fromArray_setNeedsUpdate,Nt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class N9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Fi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let d=0,h=arguments.length;d!==h;++d){const p=arguments[d],g=p.uuid;let v=n[g];if(v===void 0){v=l++,n[g]=v,e.push(p);for(let _=0,x=o;_!==x;++_)s[_].push(new Nt(p,r[_],i[_]))}else if(v<u){a=e[v];const _=--u,x=e[_];n[x.uuid]=v,e[v]=x,n[g]=_,e[_]=p;for(let m=0,S=o;m!==S;++m){const w=s[m],M=w[_];let I=w[v];w[v]=M,I===void 0&&(I=new Nt(p,r[m],i[m])),w[_]=I}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,d=n[u];if(d!==void 0&&d>=s){const h=s++,p=e[h];n[p.uuid]=d,e[d]=p,n[u]=h,e[h]=l;for(let g=0,v=i;g!==v;++g){const _=r[g],x=_[h],m=_[d];_[d]=x,_[h]=m}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],d=u.uuid,h=n[d];if(h!==void 0)if(delete n[d],h<s){const p=--s,g=e[p],v=--o,_=e[v];n[g.uuid]=h,e[h]=g,n[_.uuid]=p,e[p]=_,e.pop();for(let x=0,m=i;x!==m;++x){const S=r[x],w=S[p],M=S[v];S[h]=w,S[p]=M,S.pop()}}else{const p=--o,g=e[p];p>0&&(n[g.uuid]=h),e[h]=g,e.pop();for(let v=0,_=i;v!==_;++v){const x=r[v];x[h]=x[p],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,d=this.nCachedObjects_,h=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(h);for(let p=d,g=l.length;p!==g;++p){const v=l[p];h[p]=new Nt(v,e,n)}return h}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];n[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class ek{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Ql,endingEnd:Ql};for(let u=0;u!==o;++u){const d=s[u].createInterpolant(null);a[u]=d,d.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=tO,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case EM:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulateAdditive(a);break;case fy:default:for(let d=0,h=l.length;d!==h;++d)l[d].evaluate(o),u[d].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===nO;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===eO){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Jl,i.endingEnd=Jl):(e?i.endingStart=this.zeroSlopeAtStart?Jl:Ql:i.endingStart=lp,n?i.endingEnd=this.zeroSlopeAtEnd?Jl:Ql:i.endingEnd=lp)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const F9=new Float32Array(1);class z9 extends Gi{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let d=u[l];d===void 0&&(d={},u[l]=d);for(let h=0;h!==s;++h){const p=i[h],g=p.name;let v=d[g];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,g));continue}const _=n&&n._propertyBindings[h].binding.parsedPath;v=new JO(Nt.create(r,g,_),p.ValueTypeName,p.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,g),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],d=e._byClipCacheIndex;u._byClipCacheIndex=d,l[d]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,p=(e._localRoot||this._root).uuid;delete h[p],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new JM(new Float32Array(2),new Float32Array(2),1,F9),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?vp.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=fy),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const d=new ek(this,o,n,r);return this._bindAction(d,u),this._addInactiveAction(d,a,s),d}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?vp.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const d=u._cacheIndex,h=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=d,n[d]=h,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class he{constructor(e){this.value=e}clone(){return new he(this.value.clone===void 0?this.value:this.value.clone())}}let B9=0;class H9 extends Gi{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:B9++}),this.name="",this.usage=up,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class I0 extends _y{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class V9{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class lE{constructor(e,n,r=0,i=1/0){this.ray=new Op(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new cu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return Dw(e,this,r,n),r.sort(iA),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Dw(e[i],this,r,n);return r.sort(iA),r}}function iA(t,e){return t.distance-e.distance}function Dw(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)Dw(i[s],e,n,!0)}}class xp{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Fn(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class G9{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const sA=new ue;class W9{constructor(e=new ue(1/0,1/0),n=new ue(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=sA.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,sA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oA=new B,tv=new B;class tk{constructor(e=new B,n=new B){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){oA.subVectors(e,this.start),tv.subVectors(this.end,this.start);const r=tv.dot(tv);let s=tv.dot(oA)/r;return n&&(s=Fn(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const aA=new B;class $9 extends Gt{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new Mt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,d=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(d),Math.sin(d),1)}r.setAttribute("position",new et(i,3));const s=new ai({fog:!1,toneMapped:!1});this.cone=new Po(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),aA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(aA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Da=new B,nv=new at,p_=new at;class j9 extends Po{constructor(e){const n=nk(e),r=new Mt,i=[],s=[],o=new ze(0,0,1),a=new ze(0,1,0);for(let u=0;u<n.length;u++){const d=n[u];d.parent&&d.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new et(i,3)),r.setAttribute("color",new et(s,3));const l=new ai({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");p_.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(nv.multiplyMatrices(p_,a.matrixWorld),Da.setFromMatrixPosition(nv),i.setXYZ(o,Da.x,Da.y,Da.z),nv.multiplyMatrices(p_,a.parent.matrixWorld),Da.setFromMatrixPosition(nv),i.setXYZ(o+1,Da.x,Da.y,Da.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function nk(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,nk(t.children[n]));return e}class X9 extends Qn{constructor(e,n,r){const i=new Wf(n,4,2),s=new Ys({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const K9=new B,lA=new ze,uA=new ze;class Y9 extends Gt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Vf(n);i.rotateY(Math.PI*.5),this.material=new Ys({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Xt(o,3)),this.add(new Qn(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");lA.copy(this.light.color),uA.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?lA:uA;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(K9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class q9 extends Po{constructor(e=10,n=10,r=4473924,i=8947848){r=new ze(r),i=new ze(i);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let p=0,g=0,v=-a;p<=n;p++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const _=p===s?r:i;_.toArray(u,g),g+=3,_.toArray(u,g),g+=3,_.toArray(u,g),g+=3,_.toArray(u,g),g+=3}const d=new Mt;d.setAttribute("position",new et(l,3)),d.setAttribute("color",new et(u,3));const h=new ai({vertexColors:!0,toneMapped:!1});super(d,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Z9 extends Po{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new ze(s),o=new ze(o);const a=[],l=[];if(n>1)for(let h=0;h<n;h++){const p=h/n*(Math.PI*2),g=Math.sin(p)*e,v=Math.cos(p)*e;a.push(0,0,0),a.push(g,0,v);const _=h&1?s:o;l.push(_.r,_.g,_.b),l.push(_.r,_.g,_.b)}for(let h=0;h<r;h++){const p=h&1?s:o,g=e-e/r*h;for(let v=0;v<i;v++){let _=v/i*(Math.PI*2),x=Math.sin(_)*g,m=Math.cos(_)*g;a.push(x,0,m),l.push(p.r,p.g,p.b),_=(v+1)/i*(Math.PI*2),x=Math.sin(_)*g,m=Math.cos(_)*g,a.push(x,0,m),l.push(p.r,p.g,p.b)}}const u=new Mt;u.setAttribute("position",new et(a,3)),u.setAttribute("color",new et(l,3));const d=new ai({vertexColors:!0,toneMapped:!1});super(u,d),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const cA=new B,rv=new B,fA=new B;class Q9 extends Gt{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new Mt;i.setAttribute("position",new et([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new ai({fog:!1,toneMapped:!1});this.lightPlane=new ll(i,s),this.add(this.lightPlane),i=new Mt,i.setAttribute("position",new et([0,0,0,0,0,1],3)),this.targetLine=new ll(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cA.setFromMatrixPosition(this.light.matrixWorld),rv.setFromMatrixPosition(this.light.target.matrixWorld),fA.subVectors(rv,cA),this.lightPlane.lookAt(rv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(rv),this.targetLine.scale.z=fA.length()}}const iv=new B,Ln=new zf;class J9 extends Po{constructor(e){const n=new Mt,r=new ai({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,_){l(v),l(_)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}n.setAttribute("position",new et(i,3)),n.setAttribute("color",new et(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new ze(16755200),d=new ze(16711680),h=new ze(43775),p=new ze(16777215),g=new ze(3355443);this.setColors(u,d,h,p,g)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Ln.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vn("c",n,e,Ln,0,0,-1),Vn("t",n,e,Ln,0,0,1),Vn("n1",n,e,Ln,-r,-i,-1),Vn("n2",n,e,Ln,r,-i,-1),Vn("n3",n,e,Ln,-r,i,-1),Vn("n4",n,e,Ln,r,i,-1),Vn("f1",n,e,Ln,-r,-i,1),Vn("f2",n,e,Ln,r,-i,1),Vn("f3",n,e,Ln,-r,i,1),Vn("f4",n,e,Ln,r,i,1),Vn("u1",n,e,Ln,r*.7,i*1.1,-1),Vn("u2",n,e,Ln,-r*.7,i*1.1,-1),Vn("u3",n,e,Ln,0,i*2,-1),Vn("cf1",n,e,Ln,-r,0,1),Vn("cf2",n,e,Ln,r,0,1),Vn("cf3",n,e,Ln,0,-i,1),Vn("cf4",n,e,Ln,0,i,1),Vn("cn1",n,e,Ln,-r,0,-1),Vn("cn2",n,e,Ln,r,0,-1),Vn("cn3",n,e,Ln,0,-i,-1),Vn("cn4",n,e,Ln,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vn(t,e,n,r,i,s,o){iv.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,d=a.length;u<d;u++)l.setXYZ(a[u],iv.x,iv.y,iv.z)}}const sv=new Wi;class e$ extends Po{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new Mt;s.setIndex(new Xt(r,1)),s.setAttribute("position",new Xt(i,3)),super(s,new ai({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&sv.setFromObject(this.object),sv.isEmpty())return;const n=sv.min,r=sv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class t$ extends Po{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Mt;s.setIndex(new Xt(r,1)),s.setAttribute("position",new et(i,3)),super(s,new ai({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class n$ extends ll{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Mt;o.setAttribute("position",new et(s,3)),o.computeBoundingSphere(),super(o,new ai({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Mt;l.setAttribute("position",new et(a,3)),l.computeBoundingSphere(),this.add(new Qn(l,new Ys({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const dA=new B;let ov,m_;class r$ extends Gt{constructor(e=new B(0,0,1),n=new B(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",ov===void 0&&(ov=new Mt,ov.setAttribute("position",new et([0,0,0,0,1,0],3)),m_=new Iu(0,.5,1,5,1),m_.translate(0,-.5,0)),this.position.copy(n),this.line=new ll(ov,new ai({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Qn(m_,new Ys({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{dA.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(dA,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class i$ extends Po{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Mt;i.setAttribute("position",new et(n,3)),i.setAttribute("color",new et(r,3));const s=new ai({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new ze,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class s${constructor(){this.type="ShapePath",this.color=new ze,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new fp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(m){const S=[];for(let w=0,M=m.length;w<M;w++){const I=m[w],P=new fu;P.curves=I.curves,S.push(P)}return S}function r(m,S){const w=S.length;let M=!1;for(let I=w-1,P=0;P<w;I=P++){let D=S[I],A=S[P],T=A.x-D.x,E=A.y-D.y;if(Math.abs(E)>Number.EPSILON){if(E<0&&(D=S[P],T=-T,A=S[I],E=-E),m.y<D.y||m.y>A.y)continue;if(m.y===D.y){if(m.x===D.x)return!0}else{const O=E*(m.x-D.x)-T*(m.y-D.y);if(O===0)return!0;if(O<0)continue;M=!M}}else{if(m.y!==D.y)continue;if(A.x<=m.x&&m.x<=D.x||D.x<=m.x&&m.x<=A.x)return!0}}return M}const i=So.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new fu,l.curves=a.curves,u.push(l),u;let d=!i(s[0].getPoints());d=e?!d:d;const h=[],p=[];let g=[],v=0,_;p[v]=void 0,g[v]=[];for(let m=0,S=s.length;m<S;m++)a=s[m],_=a.getPoints(),o=i(_),o=e?!o:o,o?(!d&&p[v]&&v++,p[v]={s:new fu,p:_},p[v].s.curves=a.curves,d&&v++,g[v]=[]):g[v].push({h:a,p:_[0]});if(!p[0])return n(s);if(p.length>1){let m=!1,S=0;for(let w=0,M=p.length;w<M;w++)h[w]=[];for(let w=0,M=p.length;w<M;w++){const I=g[w];for(let P=0;P<I.length;P++){const D=I[P];let A=!0;for(let T=0;T<p.length;T++)r(D.p,p[T].p)&&(w!==T&&S++,A?(A=!1,h[T].push(D)):m=!0);A&&h[w].push(D)}}S>0&&m===!1&&(g=h)}let x;for(let m=0,S=p.length;m<S;m++){l=p[m].s,u.push(l),x=g[m];for(let w=0,M=x.length;w<M;w++)l.holes.push(x[w].h)}return u}}class o$ extends hl{constructor(e,n,r,i,s,o){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,n,r,i,s,o)}}class a$ extends Np{constructor(e,n,r,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,n,r,i)}}class l$ extends Fp{constructor(e,n,r,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,n,r,i)}}class u$ extends zp{constructor(e,n,r,i,s,o,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,n,r,i,s,o,a)}}class c$ extends Iu{constructor(e,n,r,i,s,o,a,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,n,r,i,s,o,a,l)}}class f$ extends Bp{constructor(e,n){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,n)}}class d$ extends Hp{constructor(e,n){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,n)}}class h$ extends Vp{constructor(e,n){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,n)}}class p$ extends Hf{constructor(e,n,r,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,n,r,i)}}class m$ extends Vf{constructor(e,n){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,n)}}class g$ extends Ru{constructor(e,n,r,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,n,r,i)}}class v$ extends pa{constructor(e,n,r,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,n,r,i)}}class y$ extends Gf{constructor(e,n,r,i,s,o){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,n,r,i,s,o)}}class x$ extends Gp{constructor(e,n){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,n)}}class _$ extends Wf{constructor(e,n,r,i,s,o,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,n,r,i,s,o,a)}}class S$ extends Wp{constructor(e,n){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,n)}}class w$ extends $p{constructor(e,n,r,i,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,n,r,i,s)}}class b$ extends jp{constructor(e,n,r,i,s,o){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,n,r,i,s,o)}}class M$ extends Xp{constructor(e,n,r,i,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,n,r,i,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Au}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Au);const E$=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:_M,AddEquation:$l,AddOperation:N4,AdditiveAnimationBlendMode:EM,AdditiveBlending:ep,AlphaFormat:X4,AlwaysDepth:vM,AlwaysStencilFunc:iO,AmbientLight:KO,AmbientLightProbe:S9,AnimationAction:ek,AnimationClip:vp,AnimationLoader:u9,AnimationMixer:z9,AnimationObjectGroup:N9,AnimationUtils:s9,ArcCurve:PO,ArrayCamera:vO,ArrowHelper:r$,Audio:QO,AudioAnalyser:P9,AudioContext:iE,AudioListener:M9,AudioLoader:x9,AxesHelper:i$,BackSide:or,BasicDepthPacking:_r,BasicShadowMap:b4,Bone:UM,BooleanKeyframeTrack:Du,Box2:W9,Box3:Wi,Box3Helper:t$,BoxBufferGeometry:o$,BoxGeometry:hl,BoxHelper:e$,BufferAttribute:Xt,BufferGeometry:Mt,BufferGeometryLoader:ZO,ByteType:V4,Cache:wu,Camera:zf,CameraHelper:J9,CanvasTexture:AW,CapsuleBufferGeometry:a$,CapsuleGeometry:Np,CatmullRomCurve3:CO,CineonToneMapping:B4,CircleBufferGeometry:l$,CircleGeometry:Fp,ClampToEdgeWrapping:ir,Clock:sE,Color:ze,ColorKeyframeTrack:eE,ColorManagement:ss,CompressedArrayTexture:CW,CompressedTexture:FM,CompressedTextureLoader:c9,ConeBufferGeometry:u$,ConeGeometry:zp,CubeCamera:IM,CubeReflectionMapping:il,CubeRefractionMapping:sl,CubeTexture:kp,CubeTextureLoader:f9,CubeUVReflectionMapping:Nf,CubicBezierCurve:BM,CubicBezierCurve3:AO,CubicInterpolant:HO,CullFaceBack:qS,CullFaceFront:w4,CullFaceFrontBack:R5,CullFaceNone:S4,Curve:qs,CurvePath:IO,CustomBlending:M4,CustomToneMapping:H4,CylinderBufferGeometry:c$,CylinderGeometry:Iu,Cylindrical:G9,Data3DTexture:uu,DataArrayTexture:hy,DataTexture:Jo,DataTextureLoader:d9,DataUtils:B6,DecrementStencilOp:V5,DecrementWrapStencilOp:W5,DefaultLoadingManager:Qc,DepthFormat:el,DepthStencilFormat:al,DepthTexture:Up,DirectionalLight:XO,DirectionalLightHelper:Q9,DiscreteInterpolant:VO,DisplayP3ColorSpace:TM,DodecahedronBufferGeometry:f$,DodecahedronGeometry:Bp,DoubleSide:Wr,DstAlphaFactor:I4,DstColorFactor:L4,DynamicCopyUsage:s6,DynamicDrawUsage:J5,DynamicReadUsage:n6,EdgesGeometry:DO,EllipseCurve:wy,EqualDepth:np,EqualStencilFunc:K5,EquirectangularReflectionMapping:rp,EquirectangularRefractionMapping:ip,Euler:Ff,EventDispatcher:Gi,ExtrudeBufferGeometry:d$,ExtrudeGeometry:Hp,FileLoader:la,Float16BufferAttribute:j6,Float32BufferAttribute:et,Float64BufferAttribute:X6,FloatType:Nn,Fog:xy,FogExp2:yy,FramebufferTexture:Pw,FrontSide:Mo,Frustum:my,GLBufferAttribute:V9,GLSL1:a6,GLSL3:C0,GreaterDepth:xM,GreaterEqualDepth:yM,GreaterEqualStencilFunc:Q5,GreaterStencilFunc:q5,GridHelper:q9,Group:qc,HalfFloatType:wi,HemisphereLight:WO,HemisphereLightHelper:Y9,HemisphereLightProbe:_9,IcosahedronBufferGeometry:h$,IcosahedronGeometry:Vp,ImageBitmapLoader:y9,ImageLoader:yp,ImageUtils:CM,IncrementStencilOp:H5,IncrementWrapStencilOp:G5,InstancedBufferAttribute:Tf,InstancedBufferGeometry:rE,InstancedInterleavedBuffer:I0,InstancedMesh:bO,Int16BufferAttribute:W6,Int32BufferAttribute:$6,Int8BufferAttribute:H6,IntType:W4,InterleavedBuffer:_y,InterleavedBufferAttribute:Ui,Interpolant:Kp,InterpolateDiscrete:op,InterpolateLinear:ap,InterpolateSmooth:Wv,InvertStencilOp:$5,KeepStencilOp:$v,KeyframeTrack:Zs,LOD:SO,LatheBufferGeometry:p$,LatheGeometry:Hf,Layers:cu,LessDepth:T0,LessEqualDepth:tp,LessEqualStencilFunc:Y5,LessStencilFunc:X5,Light:pl,LightProbe:Ty,Line:ll,Line3:tk,LineBasicMaterial:ai,LineCurve:by,LineCurve3:RO,LineDashedMaterial:zO,LineLoop:MO,LineSegments:Po,LinearEncoding:Lp,LinearFilter:ot,LinearInterpolant:JM,LinearMipMapLinearFilter:k5,LinearMipMapNearestFilter:O5,LinearMipmapLinearFilter:ol,LinearMipmapNearestFilter:SM,LinearSRGBColorSpace:Xs,LinearToneMapping:F4,Loader:$i,LoaderUtils:Iw,LoadingManager:tE,LoopOnce:eO,LoopPingPong:nO,LoopRepeat:tO,LuminanceAlphaFormat:K4,LuminanceFormat:cy,MOUSE:Bl,Material:er,MaterialLoader:Py,MathUtils:dy,Matrix3:Rt,Matrix4:at,MaxEquation:ew,Mesh:Qn,MeshBasicMaterial:Ys,MeshDepthMaterial:vy,MeshDistanceMaterial:LM,MeshLambertMaterial:qM,MeshMatcapMaterial:FO,MeshNormalMaterial:YM,MeshPhongMaterial:XM,MeshPhysicalMaterial:jM,MeshStandardMaterial:Ey,MeshToonMaterial:KM,MinEquation:JS,MirroredRepeatWrapping:sp,MixOperation:U4,MultiplyBlending:QS,MultiplyOperation:Dp,NearestFilter:kt,NearestMipMapLinearFilter:L5,NearestMipMapNearestFilter:D5,NearestMipmapLinearFilter:Mh,NearestMipmapNearestFilter:P0,NeverDepth:gM,NeverStencilFunc:j5,NoBlending:xn,NoColorSpace:tl,NoToneMapping:Ws,NormalAnimationBlendMode:fy,NormalBlending:au,NotEqualDepth:ly,NotEqualStencilFunc:Z5,NumberKeyframeTrack:mp,Object3D:Gt,ObjectLoader:g9,ObjectSpaceNormalMap:rO,OctahedronBufferGeometry:m$,OctahedronGeometry:Vf,OneFactor:C4,OneMinusDstAlphaFactor:D4,OneMinusDstColorFactor:O4,OneMinusSrcAlphaFactor:mM,OneMinusSrcColorFactor:R4,OrthographicCamera:$s,PCFShadowMap:ay,PCFSoftShadowMap:bh,PMREMGenerator:R0,Path:fp,PerspectiveCamera:jt,Plane:za,PlaneBufferGeometry:g$,PlaneGeometry:Ru,PlaneHelper:n$,PointLight:jO,PointLightHelper:X9,Points:EO,PointsMaterial:NM,PolarGridHelper:Z9,PolyhedronBufferGeometry:v$,PolyhedronGeometry:pa,PositionalAudio:T9,PropertyBinding:Nt,PropertyMixer:JO,QuadraticBezierCurve:HM,QuadraticBezierCurve3:VM,Quaternion:Wn,QuaternionKeyframeTrack:$f,QuaternionLinearInterpolant:GO,RED_GREEN_RGTC2_Format:ww,RED_RGTC1_Format:J4,REVISION:Au,RGBADepthPacking:Eo,RGBAFormat:vn,RGBAIntegerFormat:Z4,RGBA_ASTC_10x10_Format:yw,RGBA_ASTC_10x5_Format:mw,RGBA_ASTC_10x6_Format:gw,RGBA_ASTC_10x8_Format:vw,RGBA_ASTC_12x10_Format:xw,RGBA_ASTC_12x12_Format:_w,RGBA_ASTC_4x4_Format:aw,RGBA_ASTC_5x4_Format:lw,RGBA_ASTC_5x5_Format:uw,RGBA_ASTC_6x5_Format:cw,RGBA_ASTC_6x6_Format:fw,RGBA_ASTC_8x5_Format:dw,RGBA_ASTC_8x6_Format:hw,RGBA_ASTC_8x8_Format:pw,RGBA_BPTC_Format:Gv,RGBA_ETC2_EAC_Format:ow,RGBA_PVRTC_2BPPV1_Format:iw,RGBA_PVRTC_4BPPV1_Format:rw,RGBA_S3TC_DXT1_Format:Bv,RGBA_S3TC_DXT3_Format:Hv,RGBA_S3TC_DXT5_Format:Vv,RGB_ETC1_Format:Q4,RGB_ETC2_Format:sw,RGB_PVRTC_2BPPV1_Format:nw,RGB_PVRTC_4BPPV1_Format:tw,RGB_S3TC_DXT1_Format:zv,RGFormat:MM,RGIntegerFormat:q4,RawShaderMaterial:NO,Ray:Op,Raycaster:lE,RectAreaLight:YO,RedFormat:bM,RedIntegerFormat:Y4,ReinhardToneMapping:z4,RepeatWrapping:aa,ReplaceStencilOp:B5,ReverseSubtractEquation:T4,RingBufferGeometry:y$,RingGeometry:Gf,SIGNED_RED_GREEN_RGTC2_Format:bw,SIGNED_RED_RGTC1_Format:Sw,SRGBColorSpace:wt,Scene:_u,ShaderChunk:ut,ShaderLib:ni,ShaderMaterial:Ot,ShadowMaterial:UO,Shape:fu,ShapeBufferGeometry:x$,ShapeGeometry:Gp,ShapePath:s$,ShapeUtils:So,ShortType:G4,Skeleton:Sy,SkeletonHelper:j9,SkinnedMesh:wO,Source:eu,Sphere:Ss,SphereBufferGeometry:_$,SphereGeometry:Wf,Spherical:xp,SphericalHarmonics3:qO,SplineCurve:GM,SpotLight:$O,SpotLightHelper:$9,Sprite:_O,SpriteMaterial:kM,SrcAlphaFactor:pM,SrcAlphaSaturateFactor:k4,SrcColorFactor:A4,StaticCopyUsage:i6,StaticDrawUsage:up,StaticReadUsage:t6,StereoCamera:w9,StreamCopyUsage:o6,StreamDrawUsage:e6,StreamReadUsage:r6,StringKeyframeTrack:Lu,SubtractEquation:E4,SubtractiveBlending:ZS,TOUCH:Hl,TangentSpaceNormalMap:ha,TetrahedronBufferGeometry:S$,TetrahedronGeometry:Wp,Texture:Bn,TextureLoader:Pf,TorusBufferGeometry:w$,TorusGeometry:$p,TorusKnotBufferGeometry:b$,TorusKnotGeometry:jp,Triangle:gi,TriangleFanDrawMode:F5,TriangleStripDrawMode:N5,TrianglesDrawMode:U5,TubeBufferGeometry:M$,TubeGeometry:Xp,TwoPassDoubleSide:I5,UVMapping:uy,Uint16BufferAttribute:AM,Uint32BufferAttribute:RM,Uint8BufferAttribute:V6,Uint8ClampedBufferAttribute:G6,Uniform:he,UniformsGroup:H9,UniformsLib:Ve,UniformsUtils:Ef,UnsignedByteType:pn,UnsignedInt248Type:Ja,UnsignedIntType:Zo,UnsignedShort4444Type:$4,UnsignedShort5551Type:j4,UnsignedShortType:wM,VSMShadowMap:Fs,Vector2:ue,Vector3:B,Vector4:bt,VectorKeyframeTrack:gp,VideoTexture:TO,WebGL1Renderer:yO,WebGL3DRenderTarget:R6,WebGLArrayRenderTarget:A6,WebGLCubeRenderTarget:py,WebGLMultipleRenderTargets:lO,WebGLRenderTarget:Lt,WebGLRenderer:OM,WebGLUtils:gO,WireframeGeometry:$M,WrapAroundEnding:lp,ZeroCurvatureEnding:Ql,ZeroFactor:P4,ZeroSlopeEnding:Jl,ZeroStencilOp:z5,_SRGBAFormat:A0,sRGBEncoding:ps},Symbol.toStringTag,{value:"Module"}));var rk={exports:{}},Ou={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Ou.ConcurrentRoot=1;Ou.ContinuousEventPriority=4;Ou.DefaultEventPriority=16;Ou.DiscreteEventPriority=1;Ou.IdleEventPriority=536870912;Ou.LegacyRoot=0;rk.exports=Ou;var Jc=rk.exports;function T$(t){let e;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),n.forEach(g=>g(e,p))}},i=()=>e,s=(u,d=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function g(){const v=d(e);if(!h(p,v)){const _=p;u(p=v,_)}}return n.add(g),()=>n.delete(g)},l={setState:r,getState:i,subscribe:(u,d,h)=>d||h?s(u,d,h):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const P$=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),hA=P$?R.useEffect:R.useLayoutEffect;function ik(t){const e=typeof t=="function"?T$(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=R.useReducer(x=>x+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(r),u=R.useRef(i),d=R.useRef(!1),h=R.useRef();h.current===void 0&&(h.current=r(o));let p,g=!1;(a.current!==o||l.current!==r||u.current!==i||d.current)&&(p=r(o),g=!i(h.current,p)),hA(()=>{g&&(h.current=p),a.current=o,l.current=r,u.current=i,d.current=!1});const v=R.useRef(o);hA(()=>{const x=()=>{try{const S=e.getState(),w=l.current(S);u.current(h.current,w)||(a.current=S,h.current=w,s())}catch{d.current=!0,s()}},m=e.subscribe(x);return e.getState()!==v.current&&x(),m},[]);const _=g?p:h.current;return R.useDebugValue(_),_};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var sk={exports:{}},g_={exports:{}},v_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pA;function C$(){return pA||(pA=1,function(t){function e(F,j){var V=F.length;F.push(j);e:for(;0<V;){var ce=V-1>>>1,ae=F[ce];if(0<i(ae,j))F[ce]=j,F[V]=ae,V=ce;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var j=F[0],V=F.pop();if(V!==j){F[0]=V;e:for(var ce=0,ae=F.length,fe=ae>>>1;ce<fe;){var de=2*(ce+1)-1,De=F[de],Ee=de+1,J=F[Ee];if(0>i(De,V))Ee<ae&&0>i(J,De)?(F[ce]=J,F[Ee]=V,ce=Ee):(F[ce]=De,F[de]=V,ce=de);else if(Ee<ae&&0>i(J,V))F[ce]=J,F[Ee]=V,ce=Ee;else break e}}return j}function i(F,j){var V=F.sortIndex-j.sortIndex;return V!==0?V:F.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,g=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=F)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function M(F){if(_=!1,w(F),!v)if(n(l)!==null)v=!0,Q(I);else{var j=n(u);j!==null&&ee(M,j.startTime-F)}}function I(F,j){v=!1,_&&(_=!1,m(A),A=-1),g=!0;var V=p;try{for(w(j),h=n(l);h!==null&&(!(h.expirationTime>j)||F&&!O());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,p=h.priorityLevel;var ae=ce(h.expirationTime<=j);j=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(l)&&r(l),w(j)}else r(l);h=n(l)}if(h!==null)var fe=!0;else{var de=n(u);de!==null&&ee(M,de.startTime-j),fe=!1}return fe}finally{h=null,p=V,g=!1}}var P=!1,D=null,A=-1,T=5,E=-1;function O(){return!(t.unstable_now()-E<T)}function N(){if(D!==null){var F=t.unstable_now();E=F;var j=!0;try{j=D(!0,F)}finally{j?H():(P=!1,D=null)}}else P=!1}var H;if(typeof S=="function")H=function(){S(N)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Y=K.port2;K.port1.onmessage=N,H=function(){Y.postMessage(null)}}else H=function(){x(N,0)};function Q(F){D=F,P||(P=!0,H())}function ee(F,j){A=x(function(){F(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Q(I))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var V=p;p=j;try{return F()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,j){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=p;p=F;try{return j()}finally{p=V}},t.unstable_scheduleCallback=function(F,j,V){var ce=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ce+V:ce):V=ce,F){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=V+ae,F={id:d++,callback:j,priorityLevel:F,startTime:V,expirationTime:ae,sortIndex:-1},V>ce?(F.sortIndex=V,e(u,F),n(l)===null&&F===n(u)&&(_?(m(A),A=-1):_=!0,ee(M,V-ce))):(F.sortIndex=ae,e(l,F),v||g||(v=!0,Q(I))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var j=p;return function(){var V=p;p=j;try{return F.apply(this,arguments)}finally{p=V}}}}(v_)),v_}var mA;function A$(){return mA||(mA=1,g_.exports=C$()),g_.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R$=function(e){var n={},r=R,i=A$(),s=Object.assign;function o(c){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+c,y=1;y<arguments.length;y++)f+="&args[]="+encodeURIComponent(arguments[y]);return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),v=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),m=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),M=Symbol.for("react.offscreen"),I=Symbol.iterator;function P(c){return c===null||typeof c!="object"?null:(c=I&&c[I]||c["@@iterator"],typeof c=="function"?c:null)}function D(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case d:return"Fragment";case u:return"Portal";case p:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case m:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case v:return(c.displayName||"Context")+".Consumer";case g:return(c._context.displayName||"Context")+".Provider";case _:var f=c.render;return c=c.displayName,c||(c=f.displayName||f.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case S:return f=c.displayName||null,f!==null?f:D(c.type)||"Memo";case w:f=c._payload,c=c._init;try{return D(c(f))}catch{}}return null}function A(c){var f=c.type;switch(c.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=f.render,c=c.displayName||c.name||"",f.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(f);case 8:return f===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function T(c){var f=c,y=c;if(c.alternate)for(;f.return;)f=f.return;else{c=f;do f=c,f.flags&4098&&(y=f.return),c=f.return;while(c)}return f.tag===3?y:null}function E(c){if(T(c)!==c)throw Error(o(188))}function O(c){var f=c.alternate;if(!f){if(f=T(c),f===null)throw Error(o(188));return f!==c?null:c}for(var y=c,b=f;;){var C=y.return;if(C===null)break;var L=C.alternate;if(L===null){if(b=C.return,b!==null){y=b;continue}break}if(C.child===L.child){for(L=C.child;L;){if(L===y)return E(C),c;if(L===b)return E(C),f;L=L.sibling}throw Error(o(188))}if(y.return!==b.return)y=C,b=L;else{for(var X=!1,oe=C.child;oe;){if(oe===y){X=!0,y=C,b=L;break}if(oe===b){X=!0,b=C,y=L;break}oe=oe.sibling}if(!X){for(oe=L.child;oe;){if(oe===y){X=!0,y=L,b=C;break}if(oe===b){X=!0,b=L,y=C;break}oe=oe.sibling}if(!X)throw Error(o(189))}}if(y.alternate!==b)throw Error(o(190))}if(y.tag!==3)throw Error(o(188));return y.stateNode.current===y?c:f}function N(c){return c=O(c),c!==null?H(c):null}function H(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var f=H(c);if(f!==null)return f;c=c.sibling}return null}function K(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){if(c.tag!==4){var f=K(c);if(f!==null)return f}c=c.sibling}return null}var Y=Array.isArray,Q=e.getPublicInstance,ee=e.getRootHostContext,F=e.getChildHostContext,j=e.prepareForCommit,V=e.resetAfterCommit,ce=e.createInstance,ae=e.appendInitialChild,fe=e.finalizeInitialChildren,de=e.prepareUpdate,De=e.shouldSetTextContent,Ee=e.createTextInstance,J=e.scheduleTimeout,ve=e.cancelTimeout,U=e.noTimeout,z=e.isPrimaryRenderer,W=e.supportsMutation,ne=e.supportsPersistence,q=e.supportsHydration,se=e.getInstanceFromNode,Ce=e.preparePortalMount,Le=e.getCurrentEventPriority,He=e.detachDeletedInstance,We=e.supportsMicrotasks,Ge=e.scheduleMicrotask,je=e.supportsTestSelectors,Je=e.findFiberRoot,G=e.getBoundingRect,k=e.getTextContent,re=e.isHiddenSubtree,be=e.matchAccessibilityRole,Ae=e.setFocusIfFocusable,Ue=e.setupIntersectionObserver,tt=e.appendChild,Pe=e.appendChildToContainer,Se=e.commitTextUpdate,Ke=e.commitMount,te=e.commitUpdate,xe=e.insertBefore,Re=e.insertInContainerBefore,Ne=e.removeChild,nt=e.removeChildFromContainer,pt=e.resetTextContent,Kt=e.hideInstance,ie=e.hideTextInstance,_e=e.unhideInstance,ke=e.unhideTextInstance,Ye=e.clearContainer,rt=e.cloneInstance,Yt=e.createContainerChildSet,qt=e.appendChildToContainerChildSet,dr=e.finalizeContainerChildren,Ms=e.replaceContainerChildren,_n=e.cloneHiddenInstance,Kr=e.cloneHiddenTextInstance,Ki=e.canHydrateInstance,Bu=e.canHydrateTextInstance,am=e.canHydrateSuspenseInstance,lm=e.isSuspenseInstancePending,sd=e.isSuspenseInstanceFallback,l1=e.registerSuspenseInstanceRetry,$=e.getNextHydratableSibling,ge=e.getFirstHydratableChild,Me=e.getFirstHydratableChildWithinContainer,pe=e.getFirstHydratableChildWithinSuspenseInstance,Te=e.hydrateInstance,lt=e.hydrateTextInstance,dt=e.hydrateSuspenseInstance,mt=e.getNextHydratableInstanceAfterSuspenseInstance,_t=e.commitHydratedContainer,Pt=e.commitHydratedSuspenseInstance,Ct=e.clearSuspenseBoundary,It=e.clearSuspenseBoundaryFromContainer,Zt=e.shouldDeleteUnhydratedTailInstances,wr=e.didNotMatchHydratedContainerTextInstance,Ei=e.didNotMatchHydratedTextInstance,Es;function un(c){if(Es===void 0)try{throw Error()}catch(y){var f=y.stack.trim().match(/\n( *(at )?)/);Es=f&&f[1]||""}return`
`+Es+c}var Dt=!1;function xl(c,f){if(!c||Dt)return"";Dt=!0;var y=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(Be){var b=Be}Reflect.construct(c,[],f)}else{try{f.call()}catch(Be){b=Be}c.call(f.prototype)}else{try{throw Error()}catch(Be){b=Be}c()}}catch(Be){if(Be&&b&&typeof Be.stack=="string"){for(var C=Be.stack.split(`
`),L=b.stack.split(`
`),X=C.length-1,oe=L.length-1;1<=X&&0<=oe&&C[X]!==L[oe];)oe--;for(;1<=X&&0<=oe;X--,oe--)if(C[X]!==L[oe]){if(X!==1||oe!==1)do if(X--,oe--,0>oe||C[X]!==L[oe]){var we=`
`+C[X].replace(" at new "," at ");return c.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",c.displayName)),we}while(1<=X&&0<=oe);break}}}finally{Dt=!1,Error.prepareStackTrace=y}return(c=c?c.displayName||c.name:"")?un(c):""}var $n=Object.prototype.hasOwnProperty,Ts=[],Co=-1;function li(c){return{current:c}}function tn(c){0>Co||(c.current=Ts[Co],Ts[Co]=null,Co--)}function St(c,f){Co++,Ts[Co]=c.current,c.current=f}var Dr={},jn=li(Dr),sn=li(!1),Ps=Dr;function ya(c,f){var y=c.type.contextTypes;if(!y)return Dr;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===f)return b.__reactInternalMemoizedMaskedChildContext;var C={},L;for(L in y)C[L]=f[L];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=f,c.__reactInternalMemoizedMaskedChildContext=C),C}function br(c){return c=c.childContextTypes,c!=null}function um(){tn(sn),tn(jn)}function JE(c,f,y){if(jn.current!==Dr)throw Error(o(168));St(jn,f),St(sn,y)}function eT(c,f,y){var b=c.stateNode;if(f=f.childContextTypes,typeof b.getChildContext!="function")return y;b=b.getChildContext();for(var C in b)if(!(C in f))throw Error(o(108,A(c)||"Unknown",C));return s({},y,b)}function cm(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Dr,Ps=jn.current,St(jn,c),St(sn,sn.current),!0}function tT(c,f,y){var b=c.stateNode;if(!b)throw Error(o(169));y?(c=eT(c,f,Ps),b.__reactInternalMemoizedMergedChildContext=c,tn(sn),tn(jn),St(jn,c)):tn(sn),St(sn,y)}var Cs=Math.clz32?Math.clz32:gF,pF=Math.log,mF=Math.LN2;function gF(c){return c>>>=0,c===0?32:31-(pF(c)/mF|0)|0}var fm=64,dm=4194304;function od(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function hm(c,f){var y=c.pendingLanes;if(y===0)return 0;var b=0,C=c.suspendedLanes,L=c.pingedLanes,X=y&268435455;if(X!==0){var oe=X&~C;oe!==0?b=od(oe):(L&=X,L!==0&&(b=od(L)))}else X=y&~C,X!==0?b=od(X):L!==0&&(b=od(L));if(b===0)return 0;if(f!==0&&f!==b&&!(f&C)&&(C=b&-b,L=f&-f,C>=L||C===16&&(L&4194240)!==0))return f;if(b&4&&(b|=y&16),f=c.entangledLanes,f!==0)for(c=c.entanglements,f&=b;0<f;)y=31-Cs(f),C=1<<y,b|=c[y],f&=~C;return b}function vF(c,f){switch(c){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yF(c,f){for(var y=c.suspendedLanes,b=c.pingedLanes,C=c.expirationTimes,L=c.pendingLanes;0<L;){var X=31-Cs(L),oe=1<<X,we=C[X];we===-1?(!(oe&y)||oe&b)&&(C[X]=vF(oe,f)):we<=f&&(c.expiredLanes|=oe),L&=~oe}}function u1(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function c1(c){for(var f=[],y=0;31>y;y++)f.push(c);return f}function ad(c,f,y){c.pendingLanes|=f,f!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,f=31-Cs(f),c[f]=y}function xF(c,f){var y=c.pendingLanes&~f;c.pendingLanes=f,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=f,c.mutableReadLanes&=f,c.entangledLanes&=f,f=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<y;){var C=31-Cs(y),L=1<<C;f[C]=0,b[C]=-1,c[C]=-1,y&=~L}}function f1(c,f){var y=c.entangledLanes|=f;for(c=c.entanglements;y;){var b=31-Cs(y),C=1<<b;C&f|c[b]&f&&(c[b]|=f),y&=~C}}var zt=0;function nT(c){return c&=-c,1<c?4<c?c&268435455?16:536870912:4:1}var d1=i.unstable_scheduleCallback,rT=i.unstable_cancelCallback,_F=i.unstable_shouldYield,SF=i.unstable_requestPaint,hr=i.unstable_now,h1=i.unstable_ImmediatePriority,wF=i.unstable_UserBlockingPriority,p1=i.unstable_NormalPriority,bF=i.unstable_IdlePriority,pm=null,eo=null;function MF(c){if(eo&&typeof eo.onCommitFiberRoot=="function")try{eo.onCommitFiberRoot(pm,c,void 0,(c.current.flags&128)===128)}catch{}}function EF(c,f){return c===f&&(c!==0||1/c===1/f)||c!==c&&f!==f}var to=typeof Object.is=="function"?Object.is:EF,Ao=null,mm=!1,m1=!1;function iT(c){Ao===null?Ao=[c]:Ao.push(c)}function TF(c){mm=!0,iT(c)}function no(){if(!m1&&Ao!==null){m1=!0;var c=0,f=zt;try{var y=Ao;for(zt=1;c<y.length;c++){var b=y[c];do b=b(!0);while(b!==null)}Ao=null,mm=!1}catch(C){throw Ao!==null&&(Ao=Ao.slice(c+1)),d1(h1,no),C}finally{zt=f,m1=!1}}return null}var PF=a.ReactCurrentBatchConfig;function gm(c,f){if(to(c,f))return!0;if(typeof c!="object"||c===null||typeof f!="object"||f===null)return!1;var y=Object.keys(c),b=Object.keys(f);if(y.length!==b.length)return!1;for(b=0;b<y.length;b++){var C=y[b];if(!$n.call(f,C)||!to(c[C],f[C]))return!1}return!0}function CF(c){switch(c.tag){case 5:return un(c.type);case 16:return un("Lazy");case 13:return un("Suspense");case 19:return un("SuspenseList");case 0:case 2:case 15:return c=xl(c.type,!1),c;case 11:return c=xl(c.type.render,!1),c;case 1:return c=xl(c.type,!0),c;default:return""}}function As(c,f){if(c&&c.defaultProps){f=s({},f),c=c.defaultProps;for(var y in c)f[y]===void 0&&(f[y]=c[y]);return f}return f}var vm=li(null),ym=null,Hu=null,g1=null;function v1(){g1=Hu=ym=null}function sT(c,f,y){z?(St(vm,f._currentValue),f._currentValue=y):(St(vm,f._currentValue2),f._currentValue2=y)}function y1(c){var f=vm.current;tn(vm),z?c._currentValue=f:c._currentValue2=f}function x1(c,f,y){for(;c!==null;){var b=c.alternate;if((c.childLanes&f)!==f?(c.childLanes|=f,b!==null&&(b.childLanes|=f)):b!==null&&(b.childLanes&f)!==f&&(b.childLanes|=f),c===y)break;c=c.return}}function Vu(c,f){ym=c,g1=Hu=null,c=c.dependencies,c!==null&&c.firstContext!==null&&(c.lanes&f&&(Ci=!0),c.firstContext=null)}function Yi(c){var f=z?c._currentValue:c._currentValue2;if(g1!==c)if(c={context:c,memoizedValue:f,next:null},Hu===null){if(ym===null)throw Error(o(308));Hu=c,ym.dependencies={lanes:0,firstContext:c}}else Hu=Hu.next=c;return f}var ro=null,xa=!1;function _1(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oT(c,f){c=c.updateQueue,f.updateQueue===c&&(f.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Ro(c,f){return{eventTime:c,lane:f,tag:0,payload:null,callback:null,next:null}}function _a(c,f){var y=c.updateQueue;y!==null&&(y=y.shared,Xn!==null&&c.mode&1&&!(At&2)?(c=y.interleaved,c===null?(f.next=f,ro===null?ro=[y]:ro.push(y)):(f.next=c.next,c.next=f),y.interleaved=f):(c=y.pending,c===null?f.next=f:(f.next=c.next,c.next=f),y.pending=f))}function xm(c,f,y){if(f=f.updateQueue,f!==null&&(f=f.shared,(y&4194240)!==0)){var b=f.lanes;b&=c.pendingLanes,y|=b,f.lanes=y,f1(c,y)}}function aT(c,f){var y=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,y===b)){var C=null,L=null;if(y=y.firstBaseUpdate,y!==null){do{var X={eventTime:y.eventTime,lane:y.lane,tag:y.tag,payload:y.payload,callback:y.callback,next:null};L===null?C=L=X:L=L.next=X,y=y.next}while(y!==null);L===null?C=L=f:L=L.next=f}else C=L=f;y={baseState:b.baseState,firstBaseUpdate:C,lastBaseUpdate:L,shared:b.shared,effects:b.effects},c.updateQueue=y;return}c=y.lastBaseUpdate,c===null?y.firstBaseUpdate=f:c.next=f,y.lastBaseUpdate=f}function _m(c,f,y,b){var C=c.updateQueue;xa=!1;var L=C.firstBaseUpdate,X=C.lastBaseUpdate,oe=C.shared.pending;if(oe!==null){C.shared.pending=null;var we=oe,Be=we.next;we.next=null,X===null?L=Be:X.next=Be,X=we;var Ze=c.alternate;Ze!==null&&(Ze=Ze.updateQueue,oe=Ze.lastBaseUpdate,oe!==X&&(oe===null?Ze.firstBaseUpdate=Be:oe.next=Be,Ze.lastBaseUpdate=we))}if(L!==null){var vt=C.baseState;X=0,Ze=Be=we=null,oe=L;do{var ct=oe.lane,an=oe.eventTime;if((b&ct)===ct){Ze!==null&&(Ze=Ze.next={eventTime:an,lane:0,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null});e:{var st=c,Ur=oe;switch(ct=f,an=y,Ur.tag){case 1:if(st=Ur.payload,typeof st=="function"){vt=st.call(an,vt,ct);break e}vt=st;break e;case 3:st.flags=st.flags&-65537|128;case 0:if(st=Ur.payload,ct=typeof st=="function"?st.call(an,vt,ct):st,ct==null)break e;vt=s({},vt,ct);break e;case 2:xa=!0}}oe.callback!==null&&oe.lane!==0&&(c.flags|=64,ct=C.effects,ct===null?C.effects=[oe]:ct.push(oe))}else an={eventTime:an,lane:ct,tag:oe.tag,payload:oe.payload,callback:oe.callback,next:null},Ze===null?(Be=Ze=an,we=vt):Ze=Ze.next=an,X|=ct;if(oe=oe.next,oe===null){if(oe=C.shared.pending,oe===null)break;ct=oe,oe=ct.next,ct.next=null,C.lastBaseUpdate=ct,C.shared.pending=null}}while(1);if(Ze===null&&(we=vt),C.baseState=we,C.firstBaseUpdate=Be,C.lastBaseUpdate=Ze,f=C.shared.interleaved,f!==null){C=f;do X|=C.lane,C=C.next;while(C!==f)}else L===null&&(C.shared.lanes=0);Zu|=X,c.lanes=X,c.memoizedState=vt}}function lT(c,f,y){if(c=f.effects,f.effects=null,c!==null)for(f=0;f<c.length;f++){var b=c[f],C=b.callback;if(C!==null){if(b.callback=null,b=y,typeof C!="function")throw Error(o(191,C));C.call(b)}}}var uT=new r.Component().refs;function S1(c,f,y,b){f=c.memoizedState,y=y(b,f),y=y==null?f:s({},f,y),c.memoizedState=y,c.lanes===0&&(c.updateQueue.baseState=y)}var Sm={isMounted:function(c){return(c=c._reactInternals)?T(c)===c:!1},enqueueSetState:function(c,f,y){c=c._reactInternals;var b=qr(),C=ba(c),L=Ro(b,C);L.payload=f,y!=null&&(L.callback=y),_a(c,L),f=es(c,C,b),f!==null&&xm(f,c,C)},enqueueReplaceState:function(c,f,y){c=c._reactInternals;var b=qr(),C=ba(c),L=Ro(b,C);L.tag=1,L.payload=f,y!=null&&(L.callback=y),_a(c,L),f=es(c,C,b),f!==null&&xm(f,c,C)},enqueueForceUpdate:function(c,f){c=c._reactInternals;var y=qr(),b=ba(c),C=Ro(y,b);C.tag=2,f!=null&&(C.callback=f),_a(c,C),f=es(c,b,y),f!==null&&xm(f,c,b)}};function cT(c,f,y,b,C,L,X){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,L,X):f.prototype&&f.prototype.isPureReactComponent?!gm(y,b)||!gm(C,L):!0}function fT(c,f,y){var b=!1,C=Dr,L=f.contextType;return typeof L=="object"&&L!==null?L=Yi(L):(C=br(f)?Ps:jn.current,b=f.contextTypes,L=(b=b!=null)?ya(c,C):Dr),f=new f(y,L),c.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Sm,c.stateNode=f,f._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=C,c.__reactInternalMemoizedMaskedChildContext=L),f}function dT(c,f,y,b){c=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(y,b),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(y,b),f.state!==c&&Sm.enqueueReplaceState(f,f.state,null)}function w1(c,f,y,b){var C=c.stateNode;C.props=y,C.state=c.memoizedState,C.refs=uT,_1(c);var L=f.contextType;typeof L=="object"&&L!==null?C.context=Yi(L):(L=br(f)?Ps:jn.current,C.context=ya(c,L)),C.state=c.memoizedState,L=f.getDerivedStateFromProps,typeof L=="function"&&(S1(c,f,L,y),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(f=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),f!==C.state&&Sm.enqueueReplaceState(C,C.state,null),_m(c,y,C,b),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308)}var Gu=[],Wu=0,wm=null,bm=0,qi=[],Zi=0,_l=null,Io=1,Do="";function Sl(c,f){Gu[Wu++]=bm,Gu[Wu++]=wm,wm=c,bm=f}function hT(c,f,y){qi[Zi++]=Io,qi[Zi++]=Do,qi[Zi++]=_l,_l=c;var b=Io;c=Do;var C=32-Cs(b)-1;b&=~(1<<C),y+=1;var L=32-Cs(f)+C;if(30<L){var X=C-C%5;L=(b&(1<<X)-1).toString(32),b>>=X,C-=X,Io=1<<32-Cs(f)+C|y<<C|b,Do=L+c}else Io=1<<L|y<<C|b,Do=c}function b1(c){c.return!==null&&(Sl(c,1),hT(c,1,0))}function M1(c){for(;c===wm;)wm=Gu[--Wu],Gu[Wu]=null,bm=Gu[--Wu],Gu[Wu]=null;for(;c===_l;)_l=qi[--Zi],qi[Zi]=null,Do=qi[--Zi],qi[Zi]=null,Io=qi[--Zi],qi[Zi]=null}var Ti=null,Pi=null,Sn=!1,ld=!1,Rs=null;function pT(c,f){var y=ts(5,null,null,0);y.elementType="DELETED",y.stateNode=f,y.return=c,f=c.deletions,f===null?(c.deletions=[y],c.flags|=16):f.push(y)}function mT(c,f){switch(c.tag){case 5:return f=Ki(f,c.type,c.pendingProps),f!==null?(c.stateNode=f,Ti=c,Pi=ge(f),!0):!1;case 6:return f=Bu(f,c.pendingProps),f!==null?(c.stateNode=f,Ti=c,Pi=null,!0):!1;case 13:if(f=am(f),f!==null){var y=_l!==null?{id:Io,overflow:Do}:null;return c.memoizedState={dehydrated:f,treeContext:y,retryLane:1073741824},y=ts(18,null,null,0),y.stateNode=f,y.return=c,c.child=y,Ti=c,Pi=null,!0}return!1;default:return!1}}function E1(c){return(c.mode&1)!==0&&(c.flags&128)===0}function T1(c){if(Sn){var f=Pi;if(f){var y=f;if(!mT(c,f)){if(E1(c))throw Error(o(418));f=$(y);var b=Ti;f&&mT(c,f)?pT(b,y):(c.flags=c.flags&-4097|2,Sn=!1,Ti=c)}}else{if(E1(c))throw Error(o(418));c.flags=c.flags&-4097|2,Sn=!1,Ti=c}}}function gT(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;Ti=c}function ud(c){if(!q||c!==Ti)return!1;if(!Sn)return gT(c),Sn=!0,!1;if(c.tag!==3&&(c.tag!==5||Zt(c.type)&&!De(c.type,c.memoizedProps))){var f=Pi;if(f){if(E1(c)){for(c=Pi;c;)c=$(c);throw Error(o(418))}for(;f;)pT(c,f),f=$(f)}}if(gT(c),c.tag===13){if(!q)throw Error(o(316));if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));Pi=mt(c)}else Pi=Ti?$(c.stateNode):null;return!0}function $u(){q&&(Pi=Ti=null,ld=Sn=!1)}function P1(c){Rs===null?Rs=[c]:Rs.push(c)}function cd(c,f,y){if(c=y.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(y._owner){if(y=y._owner,y){if(y.tag!==1)throw Error(o(309));var b=y.stateNode}if(!b)throw Error(o(147,c));var C=b,L=""+c;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===L?f.ref:(f=function(X){var oe=C.refs;oe===uT&&(oe=C.refs={}),X===null?delete oe[L]:oe[L]=X},f._stringRef=L,f)}if(typeof c!="string")throw Error(o(284));if(!y._owner)throw Error(o(290,c))}return c}function Mm(c,f){throw c=Object.prototype.toString.call(f),Error(o(31,c==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":c))}function vT(c){var f=c._init;return f(c._payload)}function yT(c){function f(me,le){if(c){var ye=me.deletions;ye===null?(me.deletions=[le],me.flags|=16):ye.push(le)}}function y(me,le){if(!c)return null;for(;le!==null;)f(me,le),le=le.sibling;return null}function b(me,le){for(me=new Map;le!==null;)le.key!==null?me.set(le.key,le):me.set(le.index,le),le=le.sibling;return me}function C(me,le){return me=Ea(me,le),me.index=0,me.sibling=null,me}function L(me,le,ye){return me.index=ye,c?(ye=me.alternate,ye!==null?(ye=ye.index,ye<le?(me.flags|=2,le):ye):(me.flags|=2,le)):(me.flags|=1048576,le)}function X(me){return c&&me.alternate===null&&(me.flags|=2),me}function oe(me,le,ye,Xe){return le===null||le.tag!==6?(le=cx(ye,me.mode,Xe),le.return=me,le):(le=C(le,ye),le.return=me,le)}function we(me,le,ye,Xe){var it=ye.type;return it===d?Ze(me,le,ye.props.children,Xe,ye.key):le!==null&&(le.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===w&&vT(it)===le.type)?(Xe=C(le,ye.props),Xe.ref=cd(me,le,ye),Xe.return=me,Xe):(Xe=tg(ye.type,ye.key,ye.props,null,me.mode,Xe),Xe.ref=cd(me,le,ye),Xe.return=me,Xe)}function Be(me,le,ye,Xe){return le===null||le.tag!==4||le.stateNode.containerInfo!==ye.containerInfo||le.stateNode.implementation!==ye.implementation?(le=fx(ye,me.mode,Xe),le.return=me,le):(le=C(le,ye.children||[]),le.return=me,le)}function Ze(me,le,ye,Xe,it){return le===null||le.tag!==7?(le=Cl(ye,me.mode,Xe,it),le.return=me,le):(le=C(le,ye),le.return=me,le)}function vt(me,le,ye){if(typeof le=="string"&&le!==""||typeof le=="number")return le=cx(""+le,me.mode,ye),le.return=me,le;if(typeof le=="object"&&le!==null){switch(le.$$typeof){case l:return ye=tg(le.type,le.key,le.props,null,me.mode,ye),ye.ref=cd(me,null,le),ye.return=me,ye;case u:return le=fx(le,me.mode,ye),le.return=me,le;case w:var Xe=le._init;return vt(me,Xe(le._payload),ye)}if(Y(le)||P(le))return le=Cl(le,me.mode,ye,null),le.return=me,le;Mm(me,le)}return null}function ct(me,le,ye,Xe){var it=le!==null?le.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number")return it!==null?null:oe(me,le,""+ye,Xe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:return ye.key===it?we(me,le,ye,Xe):null;case u:return ye.key===it?Be(me,le,ye,Xe):null;case w:return it=ye._init,ct(me,le,it(ye._payload),Xe)}if(Y(ye)||P(ye))return it!==null?null:Ze(me,le,ye,Xe,null);Mm(me,ye)}return null}function an(me,le,ye,Xe,it){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return me=me.get(ye)||null,oe(le,me,""+Xe,it);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case l:return me=me.get(Xe.key===null?ye:Xe.key)||null,we(le,me,Xe,it);case u:return me=me.get(Xe.key===null?ye:Xe.key)||null,Be(le,me,Xe,it);case w:var Et=Xe._init;return an(me,le,ye,Et(Xe._payload),it)}if(Y(Xe)||P(Xe))return me=me.get(ye)||null,Ze(le,me,Xe,it,null);Mm(le,Xe)}return null}function st(me,le,ye,Xe){for(var it=null,Et=null,yt=le,Bt=le=0,mr=null;yt!==null&&Bt<ye.length;Bt++){yt.index>Bt?(mr=yt,yt=null):mr=yt.sibling;var Ht=ct(me,yt,ye[Bt],Xe);if(Ht===null){yt===null&&(yt=mr);break}c&&yt&&Ht.alternate===null&&f(me,yt),le=L(Ht,le,Bt),Et===null?it=Ht:Et.sibling=Ht,Et=Ht,yt=mr}if(Bt===ye.length)return y(me,yt),Sn&&Sl(me,Bt),it;if(yt===null){for(;Bt<ye.length;Bt++)yt=vt(me,ye[Bt],Xe),yt!==null&&(le=L(yt,le,Bt),Et===null?it=yt:Et.sibling=yt,Et=yt);return Sn&&Sl(me,Bt),it}for(yt=b(me,yt);Bt<ye.length;Bt++)mr=an(yt,me,Bt,ye[Bt],Xe),mr!==null&&(c&&mr.alternate!==null&&yt.delete(mr.key===null?Bt:mr.key),le=L(mr,le,Bt),Et===null?it=mr:Et.sibling=mr,Et=mr);return c&&yt.forEach(function(Ta){return f(me,Ta)}),Sn&&Sl(me,Bt),it}function Ur(me,le,ye,Xe){var it=P(ye);if(typeof it!="function")throw Error(o(150));if(ye=it.call(ye),ye==null)throw Error(o(151));for(var Et=it=null,yt=le,Bt=le=0,mr=null,Ht=ye.next();yt!==null&&!Ht.done;Bt++,Ht=ye.next()){yt.index>Bt?(mr=yt,yt=null):mr=yt.sibling;var Ta=ct(me,yt,Ht.value,Xe);if(Ta===null){yt===null&&(yt=mr);break}c&&yt&&Ta.alternate===null&&f(me,yt),le=L(Ta,le,Bt),Et===null?it=Ta:Et.sibling=Ta,Et=Ta,yt=mr}if(Ht.done)return y(me,yt),Sn&&Sl(me,Bt),it;if(yt===null){for(;!Ht.done;Bt++,Ht=ye.next())Ht=vt(me,Ht.value,Xe),Ht!==null&&(le=L(Ht,le,Bt),Et===null?it=Ht:Et.sibling=Ht,Et=Ht);return Sn&&Sl(me,Bt),it}for(yt=b(me,yt);!Ht.done;Bt++,Ht=ye.next())Ht=an(yt,me,Bt,Ht.value,Xe),Ht!==null&&(c&&Ht.alternate!==null&&yt.delete(Ht.key===null?Bt:Ht.key),le=L(Ht,le,Bt),Et===null?it=Ht:Et.sibling=Ht,Et=Ht);return c&&yt.forEach(function(iz){return f(me,iz)}),Sn&&Sl(me,Bt),it}function ns(me,le,ye,Xe){if(typeof ye=="object"&&ye!==null&&ye.type===d&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:e:{for(var it=ye.key,Et=le;Et!==null;){if(Et.key===it){if(it=ye.type,it===d){if(Et.tag===7){y(me,Et.sibling),le=C(Et,ye.props.children),le.return=me,me=le;break e}}else if(Et.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===w&&vT(it)===Et.type){y(me,Et.sibling),le=C(Et,ye.props),le.ref=cd(me,Et,ye),le.return=me,me=le;break e}y(me,Et);break}else f(me,Et);Et=Et.sibling}ye.type===d?(le=Cl(ye.props.children,me.mode,Xe,ye.key),le.return=me,me=le):(Xe=tg(ye.type,ye.key,ye.props,null,me.mode,Xe),Xe.ref=cd(me,le,ye),Xe.return=me,me=Xe)}return X(me);case u:e:{for(Et=ye.key;le!==null;){if(le.key===Et)if(le.tag===4&&le.stateNode.containerInfo===ye.containerInfo&&le.stateNode.implementation===ye.implementation){y(me,le.sibling),le=C(le,ye.children||[]),le.return=me,me=le;break e}else{y(me,le);break}else f(me,le);le=le.sibling}le=fx(ye,me.mode,Xe),le.return=me,me=le}return X(me);case w:return Et=ye._init,ns(me,le,Et(ye._payload),Xe)}if(Y(ye))return st(me,le,ye,Xe);if(P(ye))return Ur(me,le,ye,Xe);Mm(me,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"?(ye=""+ye,le!==null&&le.tag===6?(y(me,le.sibling),le=C(le,ye),le.return=me,me=le):(y(me,le),le=cx(ye,me.mode,Xe),le.return=me,me=le),X(me)):y(me,le)}return ns}var ju=yT(!0),xT=yT(!1),fd={},Qi=li(fd),dd=li(fd),Xu=li(fd);function io(c){if(c===fd)throw Error(o(174));return c}function C1(c,f){St(Xu,f),St(dd,c),St(Qi,fd),c=ee(f),tn(Qi),St(Qi,c)}function Ku(){tn(Qi),tn(dd),tn(Xu)}function _T(c){var f=io(Xu.current),y=io(Qi.current);f=F(y,c.type,f),y!==f&&(St(dd,c),St(Qi,f))}function A1(c){dd.current===c&&(tn(Qi),tn(dd))}var Mn=li(0);function Em(c){for(var f=c;f!==null;){if(f.tag===13){var y=f.memoizedState;if(y!==null&&(y=y.dehydrated,y===null||lm(y)||sd(y)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var R1=[];function I1(){for(var c=0;c<R1.length;c++){var f=R1[c];z?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}R1.length=0}var Tm=a.ReactCurrentDispatcher,Ji=a.ReactCurrentBatchConfig,Yu=0,Dn=null,Lr=null,pr=null,Pm=!1,hd=!1,pd=0,AF=0;function Or(){throw Error(o(321))}function D1(c,f){if(f===null)return!1;for(var y=0;y<f.length&&y<c.length;y++)if(!to(c[y],f[y]))return!1;return!0}function L1(c,f,y,b,C,L){if(Yu=L,Dn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Tm.current=c===null||c.memoizedState===null?LF:OF,c=y(b,C),hd){L=0;do{if(hd=!1,pd=0,25<=L)throw Error(o(301));L+=1,pr=Lr=null,f.updateQueue=null,Tm.current=kF,c=y(b,C)}while(hd)}if(Tm.current=Dm,f=Lr!==null&&Lr.next!==null,Yu=0,pr=Lr=Dn=null,Pm=!1,f)throw Error(o(300));return c}function O1(){var c=pd!==0;return pd=0,c}function Lo(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Dn.memoizedState=pr=c:pr=pr.next=c,pr}function so(){if(Lr===null){var c=Dn.alternate;c=c!==null?c.memoizedState:null}else c=Lr.next;var f=pr===null?Dn.memoizedState:pr.next;if(f!==null)pr=f,Lr=c;else{if(c===null)throw Error(o(310));Lr=c,c={memoizedState:Lr.memoizedState,baseState:Lr.baseState,baseQueue:Lr.baseQueue,queue:Lr.queue,next:null},pr===null?Dn.memoizedState=pr=c:pr=pr.next=c}return pr}function wl(c,f){return typeof f=="function"?f(c):f}function Cm(c){var f=so(),y=f.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var b=Lr,C=b.baseQueue,L=y.pending;if(L!==null){if(C!==null){var X=C.next;C.next=L.next,L.next=X}b.baseQueue=C=L,y.pending=null}if(C!==null){L=C.next,b=b.baseState;var oe=X=null,we=null,Be=L;do{var Ze=Be.lane;if((Yu&Ze)===Ze)we!==null&&(we=we.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),b=Be.hasEagerState?Be.eagerState:c(b,Be.action);else{var vt={lane:Ze,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};we===null?(oe=we=vt,X=b):we=we.next=vt,Dn.lanes|=Ze,Zu|=Ze}Be=Be.next}while(Be!==null&&Be!==L);we===null?X=b:we.next=oe,to(b,f.memoizedState)||(Ci=!0),f.memoizedState=b,f.baseState=X,f.baseQueue=we,y.lastRenderedState=b}if(c=y.interleaved,c!==null){C=c;do L=C.lane,Dn.lanes|=L,Zu|=L,C=C.next;while(C!==c)}else C===null&&(y.lanes=0);return[f.memoizedState,y.dispatch]}function Am(c){var f=so(),y=f.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=c;var b=y.dispatch,C=y.pending,L=f.memoizedState;if(C!==null){y.pending=null;var X=C=C.next;do L=c(L,X.action),X=X.next;while(X!==C);to(L,f.memoizedState)||(Ci=!0),f.memoizedState=L,f.baseQueue===null&&(f.baseState=L),y.lastRenderedState=L}return[L,b]}function ST(){}function wT(c,f){var y=Dn,b=so(),C=f(),L=!to(b.memoizedState,C);if(L&&(b.memoizedState=C,Ci=!0),b=b.queue,gd(ET.bind(null,y,b,c),[c]),b.getSnapshot!==f||L||pr!==null&&pr.memoizedState.tag&1){if(y.flags|=2048,md(9,MT.bind(null,y,b,C,f),void 0,null),Xn===null)throw Error(o(349));Yu&30||bT(y,f,C)}return C}function bT(c,f,y){c.flags|=16384,c={getSnapshot:f,value:y},f=Dn.updateQueue,f===null?(f={lastEffect:null,stores:null},Dn.updateQueue=f,f.stores=[c]):(y=f.stores,y===null?f.stores=[c]:y.push(c))}function MT(c,f,y,b){f.value=y,f.getSnapshot=b,TT(f)&&es(c,1,-1)}function ET(c,f,y){return y(function(){TT(f)&&es(c,1,-1)})}function TT(c){var f=c.getSnapshot;c=c.value;try{var y=f();return!to(c,y)}catch{return!0}}function k1(c){var f=Lo();return typeof c=="function"&&(c=c()),f.memoizedState=f.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wl,lastRenderedState:c},f.queue=c,c=c.dispatch=DF.bind(null,Dn,c),[f.memoizedState,c]}function md(c,f,y,b){return c={tag:c,create:f,destroy:y,deps:b,next:null},f=Dn.updateQueue,f===null?(f={lastEffect:null,stores:null},Dn.updateQueue=f,f.lastEffect=c.next=c):(y=f.lastEffect,y===null?f.lastEffect=c.next=c:(b=y.next,y.next=c,c.next=b,f.lastEffect=c)),c}function PT(){return so().memoizedState}function Rm(c,f,y,b){var C=Lo();Dn.flags|=c,C.memoizedState=md(1|f,y,void 0,b===void 0?null:b)}function Im(c,f,y,b){var C=so();b=b===void 0?null:b;var L=void 0;if(Lr!==null){var X=Lr.memoizedState;if(L=X.destroy,b!==null&&D1(b,X.deps)){C.memoizedState=md(f,y,L,b);return}}Dn.flags|=c,C.memoizedState=md(1|f,y,L,b)}function U1(c,f){return Rm(8390656,8,c,f)}function gd(c,f){return Im(2048,8,c,f)}function CT(c,f){return Im(4,2,c,f)}function AT(c,f){return Im(4,4,c,f)}function RT(c,f){if(typeof f=="function")return c=c(),f(c),function(){f(null)};if(f!=null)return c=c(),f.current=c,function(){f.current=null}}function IT(c,f,y){return y=y!=null?y.concat([c]):null,Im(4,4,RT.bind(null,f,c),y)}function N1(){}function DT(c,f){var y=so();f=f===void 0?null:f;var b=y.memoizedState;return b!==null&&f!==null&&D1(f,b[1])?b[0]:(y.memoizedState=[c,f],c)}function LT(c,f){var y=so();f=f===void 0?null:f;var b=y.memoizedState;return b!==null&&f!==null&&D1(f,b[1])?b[0]:(c=c(),y.memoizedState=[c,f],c)}function RF(c,f){var y=zt;zt=y!==0&&4>y?y:4,c(!0);var b=Ji.transition;Ji.transition={};try{c(!1),f()}finally{zt=y,Ji.transition=b}}function OT(){return so().memoizedState}function IF(c,f,y){var b=ba(c);y={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null},kT(c)?UT(f,y):(NT(c,f,y),y=qr(),c=es(c,b,y),c!==null&&FT(c,f,b))}function DF(c,f,y){var b=ba(c),C={lane:b,action:y,hasEagerState:!1,eagerState:null,next:null};if(kT(c))UT(f,C);else{NT(c,f,C);var L=c.alternate;if(c.lanes===0&&(L===null||L.lanes===0)&&(L=f.lastRenderedReducer,L!==null))try{var X=f.lastRenderedState,oe=L(X,y);if(C.hasEagerState=!0,C.eagerState=oe,to(oe,X))return}catch{}finally{}y=qr(),c=es(c,b,y),c!==null&&FT(c,f,b)}}function kT(c){var f=c.alternate;return c===Dn||f!==null&&f===Dn}function UT(c,f){hd=Pm=!0;var y=c.pending;y===null?f.next=f:(f.next=y.next,y.next=f),c.pending=f}function NT(c,f,y){Xn!==null&&c.mode&1&&!(At&2)?(c=f.interleaved,c===null?(y.next=y,ro===null?ro=[f]:ro.push(f)):(y.next=c.next,c.next=y),f.interleaved=y):(c=f.pending,c===null?y.next=y:(y.next=c.next,c.next=y),f.pending=y)}function FT(c,f,y){if(y&4194240){var b=f.lanes;b&=c.pendingLanes,y|=b,f.lanes=y,f1(c,y)}}var Dm={readContext:Yi,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},LF={readContext:Yi,useCallback:function(c,f){return Lo().memoizedState=[c,f===void 0?null:f],c},useContext:Yi,useEffect:U1,useImperativeHandle:function(c,f,y){return y=y!=null?y.concat([c]):null,Rm(4194308,4,RT.bind(null,f,c),y)},useLayoutEffect:function(c,f){return Rm(4194308,4,c,f)},useInsertionEffect:function(c,f){return Rm(4,2,c,f)},useMemo:function(c,f){var y=Lo();return f=f===void 0?null:f,c=c(),y.memoizedState=[c,f],c},useReducer:function(c,f,y){var b=Lo();return f=y!==void 0?y(f):f,b.memoizedState=b.baseState=f,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:f},b.queue=c,c=c.dispatch=IF.bind(null,Dn,c),[b.memoizedState,c]},useRef:function(c){var f=Lo();return c={current:c},f.memoizedState=c},useState:k1,useDebugValue:N1,useDeferredValue:function(c){var f=k1(c),y=f[0],b=f[1];return U1(function(){var C=Ji.transition;Ji.transition={};try{b(c)}finally{Ji.transition=C}},[c]),y},useTransition:function(){var c=k1(!1),f=c[0];return c=RF.bind(null,c[1]),Lo().memoizedState=c,[f,c]},useMutableSource:function(){},useSyncExternalStore:function(c,f,y){var b=Dn,C=Lo();if(Sn){if(y===void 0)throw Error(o(407));y=y()}else{if(y=f(),Xn===null)throw Error(o(349));Yu&30||bT(b,f,y)}C.memoizedState=y;var L={value:y,getSnapshot:f};return C.queue=L,U1(ET.bind(null,b,L,c),[c]),b.flags|=2048,md(9,MT.bind(null,b,L,y,f),void 0,null),y},useId:function(){var c=Lo(),f=Xn.identifierPrefix;if(Sn){var y=Do,b=Io;y=(b&~(1<<32-Cs(b)-1)).toString(32)+y,f=":"+f+"R"+y,y=pd++,0<y&&(f+="H"+y.toString(32)),f+=":"}else y=AF++,f=":"+f+"r"+y.toString(32)+":";return c.memoizedState=f},unstable_isNewReconciler:!1},OF={readContext:Yi,useCallback:DT,useContext:Yi,useEffect:gd,useImperativeHandle:IT,useInsertionEffect:CT,useLayoutEffect:AT,useMemo:LT,useReducer:Cm,useRef:PT,useState:function(){return Cm(wl)},useDebugValue:N1,useDeferredValue:function(c){var f=Cm(wl),y=f[0],b=f[1];return gd(function(){var C=Ji.transition;Ji.transition={};try{b(c)}finally{Ji.transition=C}},[c]),y},useTransition:function(){var c=Cm(wl)[0],f=so().memoizedState;return[c,f]},useMutableSource:ST,useSyncExternalStore:wT,useId:OT,unstable_isNewReconciler:!1},kF={readContext:Yi,useCallback:DT,useContext:Yi,useEffect:gd,useImperativeHandle:IT,useInsertionEffect:CT,useLayoutEffect:AT,useMemo:LT,useReducer:Am,useRef:PT,useState:function(){return Am(wl)},useDebugValue:N1,useDeferredValue:function(c){var f=Am(wl),y=f[0],b=f[1];return gd(function(){var C=Ji.transition;Ji.transition={};try{b(c)}finally{Ji.transition=C}},[c]),y},useTransition:function(){var c=Am(wl)[0],f=so().memoizedState;return[c,f]},useMutableSource:ST,useSyncExternalStore:wT,useId:OT,unstable_isNewReconciler:!1};function F1(c,f){try{var y="",b=f;do y+=CF(b),b=b.return;while(b);var C=y}catch(L){C=`
Error generating stack: `+L.message+`
`+L.stack}return{value:c,source:f,stack:C}}function z1(c,f){try{console.error(f.value)}catch(y){setTimeout(function(){throw y})}}var UF=typeof WeakMap=="function"?WeakMap:Map;function zT(c,f,y){y=Ro(-1,y),y.tag=3,y.payload={element:null};var b=f.value;return y.callback=function(){Km||(Km=!0,rx=b),z1(c,f)},y}function BT(c,f,y){y=Ro(-1,y),y.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var C=f.value;y.payload=function(){return b(C)},y.callback=function(){z1(c,f)}}var L=c.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(y.callback=function(){z1(c,f),typeof b!="function"&&(Sa===null?Sa=new Set([this]):Sa.add(this));var X=f.stack;this.componentDidCatch(f.value,{componentStack:X!==null?X:""})}),y}function HT(c,f,y){var b=c.pingCache;if(b===null){b=c.pingCache=new UF;var C=new Set;b.set(f,C)}else C=b.get(f),C===void 0&&(C=new Set,b.set(f,C));C.has(y)||(C.add(y),c=qF.bind(null,c,f,y),f.then(c,c))}function VT(c){do{var f;if((f=c.tag===13)&&(f=c.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return c;c=c.return}while(c!==null);return null}function GT(c,f,y,b,C){return c.mode&1?(c.flags|=65536,c.lanes=C,c):(c===f?c.flags|=65536:(c.flags|=128,y.flags|=131072,y.flags&=-52805,y.tag===1&&(y.alternate===null?y.tag=17:(f=Ro(-1,1),f.tag=2,_a(y,f))),y.lanes|=1),c)}function oo(c){c.flags|=4}function WT(c,f){if(c!==null&&c.child===f.child)return!0;if(f.flags&16)return!1;for(c=f.child;c!==null;){if(c.flags&12854||c.subtreeFlags&12854)return!1;c=c.sibling}return!0}var vd,yd,Lm,Om;if(W)vd=function(c,f){for(var y=f.child;y!==null;){if(y.tag===5||y.tag===6)ae(c,y.stateNode);else if(y.tag!==4&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===f)break;for(;y.sibling===null;){if(y.return===null||y.return===f)return;y=y.return}y.sibling.return=y.return,y=y.sibling}},yd=function(){},Lm=function(c,f,y,b,C){if(c=c.memoizedProps,c!==b){var L=f.stateNode,X=io(Qi.current);y=de(L,y,c,b,C,X),(f.updateQueue=y)&&oo(f)}},Om=function(c,f,y,b){y!==b&&oo(f)};else if(ne){vd=function(c,f,y,b){for(var C=f.child;C!==null;){if(C.tag===5){var L=C.stateNode;y&&b&&(L=_n(L,C.type,C.memoizedProps,C)),ae(c,L)}else if(C.tag===6)L=C.stateNode,y&&b&&(L=Kr(L,C.memoizedProps,C)),ae(c,L);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)L=C.child,L!==null&&(L.return=C),vd(c,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};var $T=function(c,f,y,b){for(var C=f.child;C!==null;){if(C.tag===5){var L=C.stateNode;y&&b&&(L=_n(L,C.type,C.memoizedProps,C)),qt(c,L)}else if(C.tag===6)L=C.stateNode,y&&b&&(L=Kr(L,C.memoizedProps,C)),qt(c,L);else if(C.tag!==4){if(C.tag===22&&C.memoizedState!==null)L=C.child,L!==null&&(L.return=C),$T(c,C,!0,!0);else if(C.child!==null){C.child.return=C,C=C.child;continue}}if(C===f)break;for(;C.sibling===null;){if(C.return===null||C.return===f)return;C=C.return}C.sibling.return=C.return,C=C.sibling}};yd=function(c,f){var y=f.stateNode;if(!WT(c,f)){c=y.containerInfo;var b=Yt(c);$T(b,f,!1,!1),y.pendingChildren=b,oo(f),dr(c,b)}},Lm=function(c,f,y,b,C){var L=c.stateNode,X=c.memoizedProps;if((c=WT(c,f))&&X===b)f.stateNode=L;else{var oe=f.stateNode,we=io(Qi.current),Be=null;X!==b&&(Be=de(oe,y,X,b,C,we)),c&&Be===null?f.stateNode=L:(L=rt(L,Be,y,X,b,f,c,oe),fe(L,y,b,C,we)&&oo(f),f.stateNode=L,c?oo(f):vd(L,f,!1,!1))}},Om=function(c,f,y,b){y!==b?(c=io(Xu.current),y=io(Qi.current),f.stateNode=Ee(b,c,y,f),oo(f)):f.stateNode=c.stateNode}}else yd=function(){},Lm=function(){},Om=function(){};function xd(c,f){if(!Sn)switch(c.tailMode){case"hidden":f=c.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c.tail=null:y.sibling=null;break;case"collapsed":y=c.tail;for(var b=null;y!==null;)y.alternate!==null&&(b=y),y=y.sibling;b===null?f||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function kr(c){var f=c.alternate!==null&&c.alternate.child===c.child,y=0,b=0;if(f)for(var C=c.child;C!==null;)y|=C.lanes|C.childLanes,b|=C.subtreeFlags&14680064,b|=C.flags&14680064,C.return=c,C=C.sibling;else for(C=c.child;C!==null;)y|=C.lanes|C.childLanes,b|=C.subtreeFlags,b|=C.flags,C.return=c,C=C.sibling;return c.subtreeFlags|=b,c.childLanes=y,f}function NF(c,f,y){var b=f.pendingProps;switch(M1(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(f),null;case 1:return br(f.type)&&um(),kr(f),null;case 3:return b=f.stateNode,Ku(),tn(sn),tn(jn),I1(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(ud(f)?oo(f):c===null||c.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Rs!==null&&(ox(Rs),Rs=null))),yd(c,f),kr(f),null;case 5:A1(f),y=io(Xu.current);var C=f.type;if(c!==null&&f.stateNode!=null)Lm(c,f,C,b,y),c.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!b){if(f.stateNode===null)throw Error(o(166));return kr(f),null}if(c=io(Qi.current),ud(f)){if(!q)throw Error(o(175));c=Te(f.stateNode,f.type,f.memoizedProps,y,c,f,!ld),f.updateQueue=c,c!==null&&oo(f)}else{var L=ce(C,b,y,c,f);vd(L,f,!1,!1),f.stateNode=L,fe(L,C,b,y,c)&&oo(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return kr(f),null;case 6:if(c&&f.stateNode!=null)Om(c,f,c.memoizedProps,b);else{if(typeof b!="string"&&f.stateNode===null)throw Error(o(166));if(c=io(Xu.current),y=io(Qi.current),ud(f)){if(!q)throw Error(o(176));if(c=f.stateNode,b=f.memoizedProps,(y=lt(c,b,f,!ld))&&(C=Ti,C!==null))switch(L=(C.mode&1)!==0,C.tag){case 3:wr(C.stateNode.containerInfo,c,b,L);break;case 5:Ei(C.type,C.memoizedProps,C.stateNode,c,b,L)}y&&oo(f)}else f.stateNode=Ee(b,c,y,f)}return kr(f),null;case 13:if(tn(Mn),b=f.memoizedState,Sn&&Pi!==null&&f.mode&1&&!(f.flags&128)){for(c=Pi;c;)c=$(c);return $u(),f.flags|=98560,f}if(b!==null&&b.dehydrated!==null){if(b=ud(f),c===null){if(!b)throw Error(o(318));if(!q)throw Error(o(344));if(c=f.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));dt(c,f)}else $u(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return kr(f),null}return Rs!==null&&(ox(Rs),Rs=null),f.flags&128?(f.lanes=y,f):(b=b!==null,y=!1,c===null?ud(f):y=c.memoizedState!==null,b&&!y&&(f.child.flags|=8192,f.mode&1&&(c===null||Mn.current&1?nr===0&&(nr=3):lx())),f.updateQueue!==null&&(f.flags|=4),kr(f),null);case 4:return Ku(),yd(c,f),c===null&&Ce(f.stateNode.containerInfo),kr(f),null;case 10:return y1(f.type._context),kr(f),null;case 17:return br(f.type)&&um(),kr(f),null;case 19:if(tn(Mn),C=f.memoizedState,C===null)return kr(f),null;if(b=(f.flags&128)!==0,L=C.rendering,L===null)if(b)xd(C,!1);else{if(nr!==0||c!==null&&c.flags&128)for(c=f.child;c!==null;){if(L=Em(c),L!==null){for(f.flags|=128,xd(C,!1),c=L.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),f.subtreeFlags=0,c=y,b=f.child;b!==null;)y=b,C=c,y.flags&=14680066,L=y.alternate,L===null?(y.childLanes=0,y.lanes=C,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=L.childLanes,y.lanes=L.lanes,y.child=L.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=L.memoizedProps,y.memoizedState=L.memoizedState,y.updateQueue=L.updateQueue,y.type=L.type,C=L.dependencies,y.dependencies=C===null?null:{lanes:C.lanes,firstContext:C.firstContext}),b=b.sibling;return St(Mn,Mn.current&1|2),f.child}c=c.sibling}C.tail!==null&&hr()>nx&&(f.flags|=128,b=!0,xd(C,!1),f.lanes=4194304)}else{if(!b)if(c=Em(L),c!==null){if(f.flags|=128,b=!0,c=c.updateQueue,c!==null&&(f.updateQueue=c,f.flags|=4),xd(C,!0),C.tail===null&&C.tailMode==="hidden"&&!L.alternate&&!Sn)return kr(f),null}else 2*hr()-C.renderingStartTime>nx&&y!==1073741824&&(f.flags|=128,b=!0,xd(C,!1),f.lanes=4194304);C.isBackwards?(L.sibling=f.child,f.child=L):(c=C.last,c!==null?c.sibling=L:f.child=L,C.last=L)}return C.tail!==null?(f=C.tail,C.rendering=f,C.tail=f.sibling,C.renderingStartTime=hr(),f.sibling=null,c=Mn.current,St(Mn,b?c&1|2:c&1),f):(kr(f),null);case 22:case 23:return ax(),b=f.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(f.flags|=8192),b&&f.mode&1?Ai&1073741824&&(kr(f),W&&f.subtreeFlags&6&&(f.flags|=8192)):kr(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var FF=a.ReactCurrentOwner,Ci=!1;function Yr(c,f,y,b){f.child=c===null?xT(f,null,y,b):ju(f,c.child,y,b)}function jT(c,f,y,b,C){y=y.render;var L=f.ref;return Vu(f,C),b=L1(c,f,y,b,L,C),y=O1(),c!==null&&!Ci?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~C,Oo(c,f,C)):(Sn&&y&&b1(f),f.flags|=1,Yr(c,f,b,C),f.child)}function XT(c,f,y,b,C){if(c===null){var L=y.type;return typeof L=="function"&&!ux(L)&&L.defaultProps===void 0&&y.compare===null&&y.defaultProps===void 0?(f.tag=15,f.type=L,KT(c,f,L,b,C)):(c=tg(y.type,null,b,f,f.mode,C),c.ref=f.ref,c.return=f,f.child=c)}if(L=c.child,!(c.lanes&C)){var X=L.memoizedProps;if(y=y.compare,y=y!==null?y:gm,y(X,b)&&c.ref===f.ref)return Oo(c,f,C)}return f.flags|=1,c=Ea(L,b),c.ref=f.ref,c.return=f,f.child=c}function KT(c,f,y,b,C){if(c!==null&&gm(c.memoizedProps,b)&&c.ref===f.ref)if(Ci=!1,(c.lanes&C)!==0)c.flags&131072&&(Ci=!0);else return f.lanes=c.lanes,Oo(c,f,C);return B1(c,f,y,b,C)}function YT(c,f,y){var b=f.pendingProps,C=b.children,L=c!==null?c.memoizedState:null;if(b.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},St(qu,Ai),Ai|=y;else if(y&1073741824)f.memoizedState={baseLanes:0,cachePool:null},b=L!==null?L.baseLanes:y,St(qu,Ai),Ai|=b;else return c=L!==null?L.baseLanes|y:y,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:c,cachePool:null},f.updateQueue=null,St(qu,Ai),Ai|=c,null;else L!==null?(b=L.baseLanes|y,f.memoizedState=null):b=y,St(qu,Ai),Ai|=b;return Yr(c,f,C,y),f.child}function qT(c,f){var y=f.ref;(c===null&&y!==null||c!==null&&c.ref!==y)&&(f.flags|=512,f.flags|=2097152)}function B1(c,f,y,b,C){var L=br(y)?Ps:jn.current;return L=ya(f,L),Vu(f,C),y=L1(c,f,y,b,L,C),b=O1(),c!==null&&!Ci?(f.updateQueue=c.updateQueue,f.flags&=-2053,c.lanes&=~C,Oo(c,f,C)):(Sn&&b&&b1(f),f.flags|=1,Yr(c,f,y,C),f.child)}function ZT(c,f,y,b,C){if(br(y)){var L=!0;cm(f)}else L=!1;if(Vu(f,C),f.stateNode===null)c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),fT(f,y,b),w1(f,y,b,C),b=!0;else if(c===null){var X=f.stateNode,oe=f.memoizedProps;X.props=oe;var we=X.context,Be=y.contextType;typeof Be=="object"&&Be!==null?Be=Yi(Be):(Be=br(y)?Ps:jn.current,Be=ya(f,Be));var Ze=y.getDerivedStateFromProps,vt=typeof Ze=="function"||typeof X.getSnapshotBeforeUpdate=="function";vt||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(oe!==b||we!==Be)&&dT(f,X,b,Be),xa=!1;var ct=f.memoizedState;X.state=ct,_m(f,b,X,C),we=f.memoizedState,oe!==b||ct!==we||sn.current||xa?(typeof Ze=="function"&&(S1(f,y,Ze,b),we=f.memoizedState),(oe=xa||cT(f,y,oe,b,ct,we,Be))?(vt||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount()),typeof X.componentDidMount=="function"&&(f.flags|=4194308)):(typeof X.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=b,f.memoizedState=we),X.props=b,X.state=we,X.context=Be,b=oe):(typeof X.componentDidMount=="function"&&(f.flags|=4194308),b=!1)}else{X=f.stateNode,oT(c,f),oe=f.memoizedProps,Be=f.type===f.elementType?oe:As(f.type,oe),X.props=Be,vt=f.pendingProps,ct=X.context,we=y.contextType,typeof we=="object"&&we!==null?we=Yi(we):(we=br(y)?Ps:jn.current,we=ya(f,we));var an=y.getDerivedStateFromProps;(Ze=typeof an=="function"||typeof X.getSnapshotBeforeUpdate=="function")||typeof X.UNSAFE_componentWillReceiveProps!="function"&&typeof X.componentWillReceiveProps!="function"||(oe!==vt||ct!==we)&&dT(f,X,b,we),xa=!1,ct=f.memoizedState,X.state=ct,_m(f,b,X,C);var st=f.memoizedState;oe!==vt||ct!==st||sn.current||xa?(typeof an=="function"&&(S1(f,y,an,b),st=f.memoizedState),(Be=xa||cT(f,y,Be,b,ct,st,we)||!1)?(Ze||typeof X.UNSAFE_componentWillUpdate!="function"&&typeof X.componentWillUpdate!="function"||(typeof X.componentWillUpdate=="function"&&X.componentWillUpdate(b,st,we),typeof X.UNSAFE_componentWillUpdate=="function"&&X.UNSAFE_componentWillUpdate(b,st,we)),typeof X.componentDidUpdate=="function"&&(f.flags|=4),typeof X.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof X.componentDidUpdate!="function"||oe===c.memoizedProps&&ct===c.memoizedState||(f.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&ct===c.memoizedState||(f.flags|=1024),f.memoizedProps=b,f.memoizedState=st),X.props=b,X.state=st,X.context=we,b=Be):(typeof X.componentDidUpdate!="function"||oe===c.memoizedProps&&ct===c.memoizedState||(f.flags|=4),typeof X.getSnapshotBeforeUpdate!="function"||oe===c.memoizedProps&&ct===c.memoizedState||(f.flags|=1024),b=!1)}return H1(c,f,y,b,L,C)}function H1(c,f,y,b,C,L){qT(c,f);var X=(f.flags&128)!==0;if(!b&&!X)return C&&tT(f,y,!1),Oo(c,f,L);b=f.stateNode,FF.current=f;var oe=X&&typeof y.getDerivedStateFromError!="function"?null:b.render();return f.flags|=1,c!==null&&X?(f.child=ju(f,c.child,null,L),f.child=ju(f,null,oe,L)):Yr(c,f,oe,L),f.memoizedState=b.state,C&&tT(f,y,!0),f.child}function QT(c){var f=c.stateNode;f.pendingContext?JE(c,f.pendingContext,f.pendingContext!==f.context):f.context&&JE(c,f.context,!1),C1(c,f.containerInfo)}function JT(c,f,y,b,C){return $u(),P1(C),f.flags|=256,Yr(c,f,y,b),f.child}var km={dehydrated:null,treeContext:null,retryLane:0};function Um(c){return{baseLanes:c,cachePool:null}}function e2(c,f,y){var b=f.pendingProps,C=Mn.current,L=!1,X=(f.flags&128)!==0,oe;if((oe=X)||(oe=c!==null&&c.memoizedState===null?!1:(C&2)!==0),oe?(L=!0,f.flags&=-129):(c===null||c.memoizedState!==null)&&(C|=1),St(Mn,C&1),c===null)return T1(f),c=f.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?(f.mode&1?sd(c)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(C=b.children,c=b.fallback,L?(b=f.mode,L=f.child,C={mode:"hidden",children:C},!(b&1)&&L!==null?(L.childLanes=0,L.pendingProps=C):L=ng(C,b,0,null),c=Cl(c,b,y,null),L.return=f,c.return=f,L.sibling=c,f.child=L,f.child.memoizedState=Um(y),f.memoizedState=km,c):V1(f,C));if(C=c.memoizedState,C!==null){if(oe=C.dehydrated,oe!==null){if(X)return f.flags&256?(f.flags&=-257,Nm(c,f,y,Error(o(422)))):f.memoizedState!==null?(f.child=c.child,f.flags|=128,null):(L=b.fallback,C=f.mode,b=ng({mode:"visible",children:b.children},C,0,null),L=Cl(L,C,y,null),L.flags|=2,b.return=f,L.return=f,b.sibling=L,f.child=b,f.mode&1&&ju(f,c.child,null,y),f.child.memoizedState=Um(y),f.memoizedState=km,L);if(!(f.mode&1))f=Nm(c,f,y,null);else if(sd(oe))f=Nm(c,f,y,Error(o(419)));else if(b=(y&c.childLanes)!==0,Ci||b){if(b=Xn,b!==null){switch(y&-y){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}b=L&(b.suspendedLanes|y)?0:L,b!==0&&b!==C.retryLane&&(C.retryLane=b,es(c,b,-1))}lx(),f=Nm(c,f,y,Error(o(421)))}else lm(oe)?(f.flags|=128,f.child=c.child,f=ZF.bind(null,c),l1(oe,f),f=null):(y=C.treeContext,q&&(Pi=pe(oe),Ti=f,Sn=!0,Rs=null,ld=!1,y!==null&&(qi[Zi++]=Io,qi[Zi++]=Do,qi[Zi++]=_l,Io=y.id,Do=y.overflow,_l=f)),f=V1(f,f.pendingProps.children),f.flags|=4096);return f}return L?(b=n2(c,f,b.children,b.fallback,y),L=f.child,C=c.child.memoizedState,L.memoizedState=C===null?Um(y):{baseLanes:C.baseLanes|y,cachePool:null},L.childLanes=c.childLanes&~y,f.memoizedState=km,b):(y=t2(c,f,b.children,y),f.memoizedState=null,y)}return L?(b=n2(c,f,b.children,b.fallback,y),L=f.child,C=c.child.memoizedState,L.memoizedState=C===null?Um(y):{baseLanes:C.baseLanes|y,cachePool:null},L.childLanes=c.childLanes&~y,f.memoizedState=km,b):(y=t2(c,f,b.children,y),f.memoizedState=null,y)}function V1(c,f){return f=ng({mode:"visible",children:f},c.mode,0,null),f.return=c,c.child=f}function t2(c,f,y,b){var C=c.child;return c=C.sibling,y=Ea(C,{mode:"visible",children:y}),!(f.mode&1)&&(y.lanes=b),y.return=f,y.sibling=null,c!==null&&(b=f.deletions,b===null?(f.deletions=[c],f.flags|=16):b.push(c)),f.child=y}function n2(c,f,y,b,C){var L=f.mode;c=c.child;var X=c.sibling,oe={mode:"hidden",children:y};return!(L&1)&&f.child!==c?(y=f.child,y.childLanes=0,y.pendingProps=oe,f.deletions=null):(y=Ea(c,oe),y.subtreeFlags=c.subtreeFlags&14680064),X!==null?b=Ea(X,b):(b=Cl(b,L,C,null),b.flags|=2),b.return=f,y.return=f,y.sibling=b,f.child=y,b}function Nm(c,f,y,b){return b!==null&&P1(b),ju(f,c.child,null,y),c=V1(f,f.pendingProps.children),c.flags|=2,f.memoizedState=null,c}function r2(c,f,y){c.lanes|=f;var b=c.alternate;b!==null&&(b.lanes|=f),x1(c.return,f,y)}function G1(c,f,y,b,C){var L=c.memoizedState;L===null?c.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:b,tail:y,tailMode:C}:(L.isBackwards=f,L.rendering=null,L.renderingStartTime=0,L.last=b,L.tail=y,L.tailMode=C)}function i2(c,f,y){var b=f.pendingProps,C=b.revealOrder,L=b.tail;if(Yr(c,f,b.children,y),b=Mn.current,b&2)b=b&1|2,f.flags|=128;else{if(c!==null&&c.flags&128)e:for(c=f.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&r2(c,y,f);else if(c.tag===19)r2(c,y,f);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===f)break e;for(;c.sibling===null;){if(c.return===null||c.return===f)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(St(Mn,b),!(f.mode&1))f.memoizedState=null;else switch(C){case"forwards":for(y=f.child,C=null;y!==null;)c=y.alternate,c!==null&&Em(c)===null&&(C=y),y=y.sibling;y=C,y===null?(C=f.child,f.child=null):(C=y.sibling,y.sibling=null),G1(f,!1,C,y,L);break;case"backwards":for(y=null,C=f.child,f.child=null;C!==null;){if(c=C.alternate,c!==null&&Em(c)===null){f.child=C;break}c=C.sibling,C.sibling=y,y=C,C=c}G1(f,!0,y,null,L);break;case"together":G1(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Oo(c,f,y){if(c!==null&&(f.dependencies=c.dependencies),Zu|=f.lanes,!(y&f.childLanes))return null;if(c!==null&&f.child!==c.child)throw Error(o(153));if(f.child!==null){for(c=f.child,y=Ea(c,c.pendingProps),f.child=y,y.return=f;c.sibling!==null;)c=c.sibling,y=y.sibling=Ea(c,c.pendingProps),y.return=f;y.sibling=null}return f.child}function zF(c,f,y){switch(f.tag){case 3:QT(f),$u();break;case 5:_T(f);break;case 1:br(f.type)&&cm(f);break;case 4:C1(f,f.stateNode.containerInfo);break;case 10:sT(f,f.type._context,f.memoizedProps.value);break;case 13:var b=f.memoizedState;if(b!==null)return b.dehydrated!==null?(St(Mn,Mn.current&1),f.flags|=128,null):y&f.child.childLanes?e2(c,f,y):(St(Mn,Mn.current&1),c=Oo(c,f,y),c!==null?c.sibling:null);St(Mn,Mn.current&1);break;case 19:if(b=(y&f.childLanes)!==0,c.flags&128){if(b)return i2(c,f,y);f.flags|=128}var C=f.memoizedState;if(C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),St(Mn,Mn.current),b)break;return null;case 22:case 23:return f.lanes=0,YT(c,f,y)}return Oo(c,f,y)}function BF(c,f){switch(M1(f),f.tag){case 1:return br(f.type)&&um(),c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 3:return Ku(),tn(sn),tn(jn),I1(),c=f.flags,c&65536&&!(c&128)?(f.flags=c&-65537|128,f):null;case 5:return A1(f),null;case 13:if(tn(Mn),c=f.memoizedState,c!==null&&c.dehydrated!==null){if(f.alternate===null)throw Error(o(340));$u()}return c=f.flags,c&65536?(f.flags=c&-65537|128,f):null;case 19:return tn(Mn),null;case 4:return Ku(),null;case 10:return y1(f.type._context),null;case 22:case 23:return ax(),null;case 24:return null;default:return null}}var Fm=!1,bl=!1,HF=typeof WeakSet=="function"?WeakSet:Set,$e=null;function zm(c,f){var y=c.ref;if(y!==null)if(typeof y=="function")try{y(null)}catch(b){fi(c,f,b)}else y.current=null}function W1(c,f,y){try{y()}catch(b){fi(c,f,b)}}var s2=!1;function VF(c,f){for(j(c.containerInfo),$e=f;$e!==null;)if(c=$e,f=c.child,(c.subtreeFlags&1028)!==0&&f!==null)f.return=c,$e=f;else for(;$e!==null;){c=$e;try{var y=c.alternate;if(c.flags&1024)switch(c.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,C=y.memoizedState,L=c.stateNode,X=L.getSnapshotBeforeUpdate(c.elementType===c.type?b:As(c.type,b),C);L.__reactInternalSnapshotBeforeUpdate=X}break;case 3:W&&Ye(c.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(oe){fi(c,c.return,oe)}if(f=c.sibling,f!==null){f.return=c.return,$e=f;break}$e=c.return}return y=s2,s2=!1,y}function Ml(c,f,y){var b=f.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var C=b=b.next;do{if((C.tag&c)===c){var L=C.destroy;C.destroy=void 0,L!==void 0&&W1(f,y,L)}C=C.next}while(C!==b)}}function _d(c,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var y=f=f.next;do{if((y.tag&c)===c){var b=y.create;y.destroy=b()}y=y.next}while(y!==f)}}function $1(c){var f=c.ref;if(f!==null){var y=c.stateNode;switch(c.tag){case 5:c=Q(y);break;default:c=y}typeof f=="function"?f(c):f.current=c}}function o2(c,f,y){if(eo&&typeof eo.onCommitFiberUnmount=="function")try{eo.onCommitFiberUnmount(pm,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(c=f.updateQueue,c!==null&&(c=c.lastEffect,c!==null)){var b=c=c.next;do{var C=b,L=C.destroy;C=C.tag,L!==void 0&&(C&2||C&4)&&W1(f,y,L),b=b.next}while(b!==c)}break;case 1:if(zm(f,y),c=f.stateNode,typeof c.componentWillUnmount=="function")try{c.props=f.memoizedProps,c.state=f.memoizedState,c.componentWillUnmount()}catch(X){fi(f,y,X)}break;case 5:zm(f,y);break;case 4:W?d2(c,f,y):ne&&ne&&(f=f.stateNode.containerInfo,y=Yt(f),Ms(f,y))}}function a2(c,f,y){for(var b=f;;)if(o2(c,b,y),b.child===null||W&&b.tag===4){if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function l2(c){var f=c.alternate;f!==null&&(c.alternate=null,l2(f)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(f=c.stateNode,f!==null&&He(f)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function u2(c){return c.tag===5||c.tag===3||c.tag===4}function c2(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||u2(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function f2(c){if(W){e:{for(var f=c.return;f!==null;){if(u2(f))break e;f=f.return}throw Error(o(160))}var y=f;switch(y.tag){case 5:f=y.stateNode,y.flags&32&&(pt(f),y.flags&=-33),y=c2(c),X1(c,y,f);break;case 3:case 4:f=y.stateNode.containerInfo,y=c2(c),j1(c,y,f);break;default:throw Error(o(161))}}}function j1(c,f,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,f?Re(y,c,f):Pe(y,c);else if(b!==4&&(c=c.child,c!==null))for(j1(c,f,y),c=c.sibling;c!==null;)j1(c,f,y),c=c.sibling}function X1(c,f,y){var b=c.tag;if(b===5||b===6)c=c.stateNode,f?xe(y,c,f):tt(y,c);else if(b!==4&&(c=c.child,c!==null))for(X1(c,f,y),c=c.sibling;c!==null;)X1(c,f,y),c=c.sibling}function d2(c,f,y){for(var b=f,C=!1,L,X;;){if(!C){C=b.return;e:for(;;){if(C===null)throw Error(o(160));switch(L=C.stateNode,C.tag){case 5:X=!1;break e;case 3:L=L.containerInfo,X=!0;break e;case 4:L=L.containerInfo,X=!0;break e}C=C.return}C=!0}if(b.tag===5||b.tag===6)a2(c,b,y),X?nt(L,b.stateNode):Ne(L,b.stateNode);else if(b.tag===18)X?It(L,b.stateNode):Ct(L,b.stateNode);else if(b.tag===4){if(b.child!==null){L=b.stateNode.containerInfo,X=!0,b.child.return=b,b=b.child;continue}}else if(o2(c,b,y),b.child!==null){b.child.return=b,b=b.child;continue}if(b===f)break;for(;b.sibling===null;){if(b.return===null||b.return===f)return;b=b.return,b.tag===4&&(C=!1)}b.sibling.return=b.return,b=b.sibling}}function K1(c,f){if(W){switch(f.tag){case 0:case 11:case 14:case 15:Ml(3,f,f.return),_d(3,f),Ml(5,f,f.return);return;case 1:return;case 5:var y=f.stateNode;if(y!=null){var b=f.memoizedProps;c=c!==null?c.memoizedProps:b;var C=f.type,L=f.updateQueue;f.updateQueue=null,L!==null&&te(y,L,C,c,b,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));y=f.memoizedProps,Se(f.stateNode,c!==null?c.memoizedProps:y,y);return;case 3:q&&c!==null&&c.memoizedState.isDehydrated&&_t(f.stateNode.containerInfo);return;case 12:return;case 13:Bm(f);return;case 19:Bm(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:Ml(3,f,f.return),_d(3,f),Ml(5,f,f.return);return;case 12:return;case 13:Bm(f);return;case 19:Bm(f);return;case 3:q&&c!==null&&c.memoizedState.isDehydrated&&_t(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(ne){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Ms(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function Bm(c){var f=c.updateQueue;if(f!==null){c.updateQueue=null;var y=c.stateNode;y===null&&(y=c.stateNode=new HF),f.forEach(function(b){var C=QF.bind(null,c,b);y.has(b)||(y.add(b),b.then(C,C))})}}function GF(c,f){for($e=f;$e!==null;){f=$e;var y=f.deletions;if(y!==null)for(var b=0;b<y.length;b++){var C=y[b];try{var L=c;W?d2(L,C,f):a2(L,C,f);var X=C.alternate;X!==null&&(X.return=null),C.return=null}catch(it){fi(C,f,it)}}if(y=f.child,f.subtreeFlags&12854&&y!==null)y.return=f,$e=y;else for(;$e!==null;){f=$e;try{var oe=f.flags;if(oe&32&&W&&pt(f.stateNode),oe&512){var we=f.alternate;if(we!==null){var Be=we.ref;Be!==null&&(typeof Be=="function"?Be(null):Be.current=null)}}if(oe&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var Ze=f.alternate;(Ze===null||Ze.memoizedState===null)&&(tx=hr())}break;case 22:var vt=f.memoizedState!==null,ct=f.alternate,an=ct!==null&&ct.memoizedState!==null;if(y=f,W){e:if(b=y,C=vt,L=null,W)for(var st=b;;){if(st.tag===5){if(L===null){L=st;var Ur=st.stateNode;C?Kt(Ur):_e(st.stateNode,st.memoizedProps)}}else if(st.tag===6){if(L===null){var ns=st.stateNode;C?ie(ns):ke(ns,st.memoizedProps)}}else if((st.tag!==22&&st.tag!==23||st.memoizedState===null||st===b)&&st.child!==null){st.child.return=st,st=st.child;continue}if(st===b)break;for(;st.sibling===null;){if(st.return===null||st.return===b)break e;L===st&&(L=null),st=st.return}L===st&&(L=null),st.sibling.return=st.return,st=st.sibling}}if(vt&&!an&&y.mode&1){$e=y;for(var me=y.child;me!==null;){for(y=$e=me;$e!==null;){b=$e;var le=b.child;switch(b.tag){case 0:case 11:case 14:case 15:Ml(4,b,b.return);break;case 1:zm(b,b.return);var ye=b.stateNode;if(typeof ye.componentWillUnmount=="function"){var Xe=b.return;try{ye.props=b.memoizedProps,ye.state=b.memoizedState,ye.componentWillUnmount()}catch(it){fi(b,Xe,it)}}break;case 5:zm(b,b.return);break;case 22:if(b.memoizedState!==null){m2(y);continue}}le!==null?(le.return=b,$e=le):m2(y)}me=me.sibling}}}switch(oe&4102){case 2:f2(f),f.flags&=-3;break;case 6:f2(f),f.flags&=-3,K1(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,K1(f.alternate,f);break;case 4:K1(f.alternate,f)}}catch(it){fi(f,f.return,it)}if(y=f.sibling,y!==null){y.return=f.return,$e=y;break}$e=f.return}}}function WF(c,f,y){$e=c,h2(c)}function h2(c,f,y){for(var b=(c.mode&1)!==0;$e!==null;){var C=$e,L=C.child;if(C.tag===22&&b){var X=C.memoizedState!==null||Fm;if(!X){var oe=C.alternate,we=oe!==null&&oe.memoizedState!==null||bl;oe=Fm;var Be=bl;if(Fm=X,(bl=we)&&!Be)for($e=C;$e!==null;)X=$e,we=X.child,X.tag===22&&X.memoizedState!==null?g2(C):we!==null?(we.return=X,$e=we):g2(C);for(;L!==null;)$e=L,h2(L),L=L.sibling;$e=C,Fm=oe,bl=Be}p2(c)}else C.subtreeFlags&8772&&L!==null?(L.return=C,$e=L):p2(c)}}function p2(c){for(;$e!==null;){var f=$e;if(f.flags&8772){var y=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:bl||_d(5,f);break;case 1:var b=f.stateNode;if(f.flags&4&&!bl)if(y===null)b.componentDidMount();else{var C=f.elementType===f.type?y.memoizedProps:As(f.type,y.memoizedProps);b.componentDidUpdate(C,y.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var L=f.updateQueue;L!==null&&lT(f,L,b);break;case 3:var X=f.updateQueue;if(X!==null){if(y=null,f.child!==null)switch(f.child.tag){case 5:y=Q(f.child.stateNode);break;case 1:y=f.child.stateNode}lT(f,X,y)}break;case 5:var oe=f.stateNode;y===null&&f.flags&4&&Ke(oe,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(q&&f.memoizedState===null){var we=f.alternate;if(we!==null){var Be=we.memoizedState;if(Be!==null){var Ze=Be.dehydrated;Ze!==null&&Pt(Ze)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}bl||f.flags&512&&$1(f)}catch(vt){fi(f,f.return,vt)}}if(f===c){$e=null;break}if(y=f.sibling,y!==null){y.return=f.return,$e=y;break}$e=f.return}}function m2(c){for(;$e!==null;){var f=$e;if(f===c){$e=null;break}var y=f.sibling;if(y!==null){y.return=f.return,$e=y;break}$e=f.return}}function g2(c){for(;$e!==null;){var f=$e;try{switch(f.tag){case 0:case 11:case 15:var y=f.return;try{_d(4,f)}catch(we){fi(f,y,we)}break;case 1:var b=f.stateNode;if(typeof b.componentDidMount=="function"){var C=f.return;try{b.componentDidMount()}catch(we){fi(f,C,we)}}var L=f.return;try{$1(f)}catch(we){fi(f,L,we)}break;case 5:var X=f.return;try{$1(f)}catch(we){fi(f,X,we)}}}catch(we){fi(f,f.return,we)}if(f===c){$e=null;break}var oe=f.sibling;if(oe!==null){oe.return=f.return,$e=oe;break}$e=f.return}}var Hm=0,Vm=1,Gm=2,Wm=3,$m=4;if(typeof Symbol=="function"&&Symbol.for){var Sd=Symbol.for;Hm=Sd("selector.component"),Vm=Sd("selector.has_pseudo_class"),Gm=Sd("selector.role"),Wm=Sd("selector.test_id"),$m=Sd("selector.text")}function Y1(c){var f=se(c);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(c=Je(c),c===null)throw Error(o(362));return c.stateNode.current}function q1(c,f){switch(f.$$typeof){case Hm:if(c.type===f.value)return!0;break;case Vm:e:{f=f.value,c=[c,0];for(var y=0;y<c.length;){var b=c[y++],C=c[y++],L=f[C];if(b.tag!==5||!re(b)){for(;L!=null&&q1(b,L);)C++,L=f[C];if(C===f.length){f=!0;break e}else for(b=b.child;b!==null;)c.push(b,C),b=b.sibling}}f=!1}return f;case Gm:if(c.tag===5&&be(c.stateNode,f.value))return!0;break;case $m:if((c.tag===5||c.tag===6)&&(c=k(c),c!==null&&0<=c.indexOf(f.value)))return!0;break;case Wm:if(c.tag===5&&(c=c.memoizedProps["data-testname"],typeof c=="string"&&c.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Z1(c){switch(c.$$typeof){case Hm:return"<"+(D(c.value)||"Unknown")+">";case Vm:return":has("+(Z1(c)||"")+")";case Gm:return'[role="'+c.value+'"]';case $m:return'"'+c.value+'"';case Wm:return'[data-testname="'+c.value+'"]';default:throw Error(o(365))}}function v2(c,f){var y=[];c=[c,0];for(var b=0;b<c.length;){var C=c[b++],L=c[b++],X=f[L];if(C.tag!==5||!re(C)){for(;X!=null&&q1(C,X);)L++,X=f[L];if(L===f.length)y.push(C);else for(C=C.child;C!==null;)c.push(C,L),C=C.sibling}}return y}function Q1(c,f){if(!je)throw Error(o(363));c=Y1(c),c=v2(c,f),f=[],c=Array.from(c);for(var y=0;y<c.length;){var b=c[y++];if(b.tag===5)re(b)||f.push(b.stateNode);else for(b=b.child;b!==null;)c.push(b),b=b.sibling}return f}var $F=Math.ceil,jm=a.ReactCurrentDispatcher,J1=a.ReactCurrentOwner,Hn=a.ReactCurrentBatchConfig,At=0,Xn=null,Kn=null,Mr=0,Ai=0,qu=li(0),nr=0,wd=null,Zu=0,Xm=0,ex=0,bd=null,ui=null,tx=0,nx=1/0;function Qu(){nx=hr()+500}var Km=!1,rx=null,Sa=null,Ym=!1,wa=null,qm=0,Md=0,ix=null,Zm=-1,Qm=0;function qr(){return At&6?hr():Zm!==-1?Zm:Zm=hr()}function ba(c){return c.mode&1?At&2&&Mr!==0?Mr&-Mr:PF.transition!==null?(Qm===0&&(c=fm,fm<<=1,!(fm&4194240)&&(fm=64),Qm=c),Qm):(c=zt,c!==0?c:Le()):1}function es(c,f,y){if(50<Md)throw Md=0,ix=null,Error(o(185));var b=Jm(c,f);return b===null?null:(ad(b,f,y),(!(At&2)||b!==Xn)&&(b===Xn&&(!(At&2)&&(Xm|=f),nr===4&&Ma(b,Mr)),ci(b,y),f===1&&At===0&&!(c.mode&1)&&(Qu(),mm&&no())),b)}function Jm(c,f){c.lanes|=f;var y=c.alternate;for(y!==null&&(y.lanes|=f),y=c,c=c.return;c!==null;)c.childLanes|=f,y=c.alternate,y!==null&&(y.childLanes|=f),y=c,c=c.return;return y.tag===3?y.stateNode:null}function ci(c,f){var y=c.callbackNode;yF(c,f);var b=hm(c,c===Xn?Mr:0);if(b===0)y!==null&&rT(y),c.callbackNode=null,c.callbackPriority=0;else if(f=b&-b,c.callbackPriority!==f){if(y!=null&&rT(y),f===1)c.tag===0?TF(x2.bind(null,c)):iT(x2.bind(null,c)),We?Ge(function(){At===0&&no()}):d1(h1,no),y=null;else{switch(nT(b)){case 1:y=h1;break;case 4:y=wF;break;case 16:y=p1;break;case 536870912:y=bF;break;default:y=p1}y=C2(y,y2.bind(null,c))}c.callbackPriority=f,c.callbackNode=y}}function y2(c,f){if(Zm=-1,Qm=0,At&6)throw Error(o(327));var y=c.callbackNode;if(Pl()&&c.callbackNode!==y)return null;var b=hm(c,c===Xn?Mr:0);if(b===0)return null;if(b&30||b&c.expiredLanes||f)f=eg(c,b);else{f=b;var C=At;At|=2;var L=w2();(Xn!==c||Mr!==f)&&(Qu(),El(c,f));do try{KF();break}catch(oe){S2(c,oe)}while(1);v1(),jm.current=L,At=C,Kn!==null?f=0:(Xn=null,Mr=0,f=nr)}if(f!==0){if(f===2&&(C=u1(c),C!==0&&(b=C,f=sx(c,C))),f===1)throw y=wd,El(c,0),Ma(c,b),ci(c,hr()),y;if(f===6)Ma(c,b);else{if(C=c.current.alternate,!(b&30)&&!jF(C)&&(f=eg(c,b),f===2&&(L=u1(c),L!==0&&(b=L,f=sx(c,L))),f===1))throw y=wd,El(c,0),Ma(c,b),ci(c,hr()),y;switch(c.finishedWork=C,c.finishedLanes=b,f){case 0:case 1:throw Error(o(345));case 2:Tl(c,ui);break;case 3:if(Ma(c,b),(b&130023424)===b&&(f=tx+500-hr(),10<f)){if(hm(c,0)!==0)break;if(C=c.suspendedLanes,(C&b)!==b){qr(),c.pingedLanes|=c.suspendedLanes&C;break}c.timeoutHandle=J(Tl.bind(null,c,ui),f);break}Tl(c,ui);break;case 4:if(Ma(c,b),(b&4194240)===b)break;for(f=c.eventTimes,C=-1;0<b;){var X=31-Cs(b);L=1<<X,X=f[X],X>C&&(C=X),b&=~L}if(b=C,b=hr()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*$F(b/1960))-b,10<b){c.timeoutHandle=J(Tl.bind(null,c,ui),b);break}Tl(c,ui);break;case 5:Tl(c,ui);break;default:throw Error(o(329))}}}return ci(c,hr()),c.callbackNode===y?y2.bind(null,c):null}function sx(c,f){var y=bd;return c.current.memoizedState.isDehydrated&&(El(c,f).flags|=256),c=eg(c,f),c!==2&&(f=ui,ui=y,f!==null&&ox(f)),c}function ox(c){ui===null?ui=c:ui.push.apply(ui,c)}function jF(c){for(var f=c;;){if(f.flags&16384){var y=f.updateQueue;if(y!==null&&(y=y.stores,y!==null))for(var b=0;b<y.length;b++){var C=y[b],L=C.getSnapshot;C=C.value;try{if(!to(L(),C))return!1}catch{return!1}}}if(y=f.child,f.subtreeFlags&16384&&y!==null)y.return=f,f=y;else{if(f===c)break;for(;f.sibling===null;){if(f.return===null||f.return===c)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Ma(c,f){for(f&=~ex,f&=~Xm,c.suspendedLanes|=f,c.pingedLanes&=~f,c=c.expirationTimes;0<f;){var y=31-Cs(f),b=1<<y;c[y]=-1,f&=~b}}function x2(c){if(At&6)throw Error(o(327));Pl();var f=hm(c,0);if(!(f&1))return ci(c,hr()),null;var y=eg(c,f);if(c.tag!==0&&y===2){var b=u1(c);b!==0&&(f=b,y=sx(c,b))}if(y===1)throw y=wd,El(c,0),Ma(c,f),ci(c,hr()),y;if(y===6)throw Error(o(345));return c.finishedWork=c.current.alternate,c.finishedLanes=f,Tl(c,ui),ci(c,hr()),null}function _2(c){wa!==null&&wa.tag===0&&!(At&6)&&Pl();var f=At;At|=1;var y=Hn.transition,b=zt;try{if(Hn.transition=null,zt=1,c)return c()}finally{zt=b,Hn.transition=y,At=f,!(At&6)&&no()}}function ax(){Ai=qu.current,tn(qu)}function El(c,f){c.finishedWork=null,c.finishedLanes=0;var y=c.timeoutHandle;if(y!==U&&(c.timeoutHandle=U,ve(y)),Kn!==null)for(y=Kn.return;y!==null;){var b=y;switch(M1(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&um();break;case 3:Ku(),tn(sn),tn(jn),I1();break;case 5:A1(b);break;case 4:Ku();break;case 13:tn(Mn);break;case 19:tn(Mn);break;case 10:y1(b.type._context);break;case 22:case 23:ax()}y=y.return}if(Xn=c,Kn=c=Ea(c.current,null),Mr=Ai=f,nr=0,wd=null,ex=Xm=Zu=0,ui=bd=null,ro!==null){for(f=0;f<ro.length;f++)if(y=ro[f],b=y.interleaved,b!==null){y.interleaved=null;var C=b.next,L=y.pending;if(L!==null){var X=L.next;L.next=C,b.next=X}y.pending=b}ro=null}return c}function S2(c,f){do{var y=Kn;try{if(v1(),Tm.current=Dm,Pm){for(var b=Dn.memoizedState;b!==null;){var C=b.queue;C!==null&&(C.pending=null),b=b.next}Pm=!1}if(Yu=0,pr=Lr=Dn=null,hd=!1,pd=0,J1.current=null,y===null||y.return===null){nr=1,wd=f,Kn=null;break}e:{var L=c,X=y.return,oe=y,we=f;if(f=Mr,oe.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var Be=we,Ze=oe,vt=Ze.tag;if(!(Ze.mode&1)&&(vt===0||vt===11||vt===15)){var ct=Ze.alternate;ct?(Ze.updateQueue=ct.updateQueue,Ze.memoizedState=ct.memoizedState,Ze.lanes=ct.lanes):(Ze.updateQueue=null,Ze.memoizedState=null)}var an=VT(X);if(an!==null){an.flags&=-257,GT(an,X,oe,L,f),an.mode&1&&HT(L,Be,f),f=an,we=Be;var st=f.updateQueue;if(st===null){var Ur=new Set;Ur.add(we),f.updateQueue=Ur}else st.add(we);break e}else{if(!(f&1)){HT(L,Be,f),lx();break e}we=Error(o(426))}}else if(Sn&&oe.mode&1){var ns=VT(X);if(ns!==null){!(ns.flags&65536)&&(ns.flags|=256),GT(ns,X,oe,L,f),P1(we);break e}}L=we,nr!==4&&(nr=2),bd===null?bd=[L]:bd.push(L),we=F1(we,oe),oe=X;do{switch(oe.tag){case 3:oe.flags|=65536,f&=-f,oe.lanes|=f;var me=zT(oe,we,f);aT(oe,me);break e;case 1:L=we;var le=oe.type,ye=oe.stateNode;if(!(oe.flags&128)&&(typeof le.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(Sa===null||!Sa.has(ye)))){oe.flags|=65536,f&=-f,oe.lanes|=f;var Xe=BT(oe,L,f);aT(oe,Xe);break e}}oe=oe.return}while(oe!==null)}M2(y)}catch(it){f=it,Kn===y&&y!==null&&(Kn=y=y.return);continue}break}while(1)}function w2(){var c=jm.current;return jm.current=Dm,c===null?Dm:c}function lx(){(nr===0||nr===3||nr===2)&&(nr=4),Xn===null||!(Zu&268435455)&&!(Xm&268435455)||Ma(Xn,Mr)}function eg(c,f){var y=At;At|=2;var b=w2();Xn===c&&Mr===f||El(c,f);do try{XF();break}catch(C){S2(c,C)}while(1);if(v1(),At=y,jm.current=b,Kn!==null)throw Error(o(261));return Xn=null,Mr=0,nr}function XF(){for(;Kn!==null;)b2(Kn)}function KF(){for(;Kn!==null&&!_F();)b2(Kn)}function b2(c){var f=P2(c.alternate,c,Ai);c.memoizedProps=c.pendingProps,f===null?M2(c):Kn=f,J1.current=null}function M2(c){var f=c;do{var y=f.alternate;if(c=f.return,f.flags&32768){if(y=BF(y,f),y!==null){y.flags&=32767,Kn=y;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{nr=6,Kn=null;return}}else if(y=NF(y,f,Ai),y!==null){Kn=y;return}if(f=f.sibling,f!==null){Kn=f;return}Kn=f=c}while(f!==null);nr===0&&(nr=5)}function Tl(c,f){var y=zt,b=Hn.transition;try{Hn.transition=null,zt=1,YF(c,f,y)}finally{Hn.transition=b,zt=y}return null}function YF(c,f,y){do Pl();while(wa!==null);if(At&6)throw Error(o(327));var b=c.finishedWork,C=c.finishedLanes;if(b===null)return null;if(c.finishedWork=null,c.finishedLanes=0,b===c.current)throw Error(o(177));c.callbackNode=null,c.callbackPriority=0;var L=b.lanes|b.childLanes;if(xF(c,L),c===Xn&&(Kn=Xn=null,Mr=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||Ym||(Ym=!0,C2(p1,function(){return Pl(),null})),L=(b.flags&15990)!==0,b.subtreeFlags&15990||L){L=Hn.transition,Hn.transition=null;var X=zt;zt=1;var oe=At;At|=4,J1.current=null,VF(c,b),GF(c,b),V(c.containerInfo),c.current=b,WF(b),SF(),At=oe,zt=X,Hn.transition=L}else c.current=b;if(Ym&&(Ym=!1,wa=c,qm=C),L=c.pendingLanes,L===0&&(Sa=null),MF(b.stateNode),ci(c,hr()),f!==null)for(y=c.onRecoverableError,b=0;b<f.length;b++)y(f[b]);if(Km)throw Km=!1,c=rx,rx=null,c;return qm&1&&c.tag!==0&&Pl(),L=c.pendingLanes,L&1?c===ix?Md++:(Md=0,ix=c):Md=0,no(),null}function Pl(){if(wa!==null){var c=nT(qm),f=Hn.transition,y=zt;try{if(Hn.transition=null,zt=16>c?16:c,wa===null)var b=!1;else{if(c=wa,wa=null,qm=0,At&6)throw Error(o(331));var C=At;for(At|=4,$e=c.current;$e!==null;){var L=$e,X=L.child;if($e.flags&16){var oe=L.deletions;if(oe!==null){for(var we=0;we<oe.length;we++){var Be=oe[we];for($e=Be;$e!==null;){var Ze=$e;switch(Ze.tag){case 0:case 11:case 15:Ml(8,Ze,L)}var vt=Ze.child;if(vt!==null)vt.return=Ze,$e=vt;else for(;$e!==null;){Ze=$e;var ct=Ze.sibling,an=Ze.return;if(l2(Ze),Ze===Be){$e=null;break}if(ct!==null){ct.return=an,$e=ct;break}$e=an}}}var st=L.alternate;if(st!==null){var Ur=st.child;if(Ur!==null){st.child=null;do{var ns=Ur.sibling;Ur.sibling=null,Ur=ns}while(Ur!==null)}}$e=L}}if(L.subtreeFlags&2064&&X!==null)X.return=L,$e=X;else e:for(;$e!==null;){if(L=$e,L.flags&2048)switch(L.tag){case 0:case 11:case 15:Ml(9,L,L.return)}var me=L.sibling;if(me!==null){me.return=L.return,$e=me;break e}$e=L.return}}var le=c.current;for($e=le;$e!==null;){X=$e;var ye=X.child;if(X.subtreeFlags&2064&&ye!==null)ye.return=X,$e=ye;else e:for(X=le;$e!==null;){if(oe=$e,oe.flags&2048)try{switch(oe.tag){case 0:case 11:case 15:_d(9,oe)}}catch(it){fi(oe,oe.return,it)}if(oe===X){$e=null;break e}var Xe=oe.sibling;if(Xe!==null){Xe.return=oe.return,$e=Xe;break e}$e=oe.return}}if(At=C,no(),eo&&typeof eo.onPostCommitFiberRoot=="function")try{eo.onPostCommitFiberRoot(pm,c)}catch{}b=!0}return b}finally{zt=y,Hn.transition=f}}return!1}function E2(c,f,y){f=F1(y,f),f=zT(c,f,1),_a(c,f),f=qr(),c=Jm(c,1),c!==null&&(ad(c,1,f),ci(c,f))}function fi(c,f,y){if(c.tag===3)E2(c,c,y);else for(;f!==null;){if(f.tag===3){E2(f,c,y);break}else if(f.tag===1){var b=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(Sa===null||!Sa.has(b))){c=F1(y,c),c=BT(f,c,1),_a(f,c),c=qr(),f=Jm(f,1),f!==null&&(ad(f,1,c),ci(f,c));break}}f=f.return}}function qF(c,f,y){var b=c.pingCache;b!==null&&b.delete(f),f=qr(),c.pingedLanes|=c.suspendedLanes&y,Xn===c&&(Mr&y)===y&&(nr===4||nr===3&&(Mr&130023424)===Mr&&500>hr()-tx?El(c,0):ex|=y),ci(c,f)}function T2(c,f){f===0&&(c.mode&1?(f=dm,dm<<=1,!(dm&130023424)&&(dm=4194304)):f=1);var y=qr();c=Jm(c,f),c!==null&&(ad(c,f,y),ci(c,y))}function ZF(c){var f=c.memoizedState,y=0;f!==null&&(y=f.retryLane),T2(c,y)}function QF(c,f){var y=0;switch(c.tag){case 13:var b=c.stateNode,C=c.memoizedState;C!==null&&(y=C.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(o(314))}b!==null&&b.delete(f),T2(c,y)}var P2;P2=function(c,f,y){if(c!==null)if(c.memoizedProps!==f.pendingProps||sn.current)Ci=!0;else{if(!(c.lanes&y)&&!(f.flags&128))return Ci=!1,zF(c,f,y);Ci=!!(c.flags&131072)}else Ci=!1,Sn&&f.flags&1048576&&hT(f,bm,f.index);switch(f.lanes=0,f.tag){case 2:var b=f.type;c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps;var C=ya(f,jn.current);Vu(f,y),C=L1(null,f,b,c,C,y);var L=O1();return f.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,br(b)?(L=!0,cm(f)):L=!1,f.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,_1(f),C.updater=Sm,f.stateNode=C,C._reactInternals=f,w1(f,b,c,y),f=H1(null,f,b,!0,L,y)):(f.tag=0,Sn&&L&&b1(f),Yr(null,f,C,y),f=f.child),f;case 16:b=f.elementType;e:{switch(c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),c=f.pendingProps,C=b._init,b=C(b._payload),f.type=b,C=f.tag=ez(b),c=As(b,c),C){case 0:f=B1(null,f,b,c,y);break e;case 1:f=ZT(null,f,b,c,y);break e;case 11:f=jT(null,f,b,c,y);break e;case 14:f=XT(null,f,b,As(b.type,c),y);break e}throw Error(o(306,b,""))}return f;case 0:return b=f.type,C=f.pendingProps,C=f.elementType===b?C:As(b,C),B1(c,f,b,C,y);case 1:return b=f.type,C=f.pendingProps,C=f.elementType===b?C:As(b,C),ZT(c,f,b,C,y);case 3:e:{if(QT(f),c===null)throw Error(o(387));b=f.pendingProps,L=f.memoizedState,C=L.element,oT(c,f),_m(f,b,null,y);var X=f.memoizedState;if(b=X.element,q&&L.isDehydrated)if(L={element:b,isDehydrated:!1,cache:X.cache,transitions:X.transitions},f.updateQueue.baseState=L,f.memoizedState=L,f.flags&256){C=Error(o(423)),f=JT(c,f,b,y,C);break e}else if(b!==C){C=Error(o(424)),f=JT(c,f,b,y,C);break e}else for(q&&(Pi=Me(f.stateNode.containerInfo),Ti=f,Sn=!0,Rs=null,ld=!1),y=xT(f,null,b,y),f.child=y;y;)y.flags=y.flags&-3|4096,y=y.sibling;else{if($u(),b===C){f=Oo(c,f,y);break e}Yr(c,f,b,y)}f=f.child}return f;case 5:return _T(f),c===null&&T1(f),b=f.type,C=f.pendingProps,L=c!==null?c.memoizedProps:null,X=C.children,De(b,C)?X=null:L!==null&&De(b,L)&&(f.flags|=32),qT(c,f),Yr(c,f,X,y),f.child;case 6:return c===null&&T1(f),null;case 13:return e2(c,f,y);case 4:return C1(f,f.stateNode.containerInfo),b=f.pendingProps,c===null?f.child=ju(f,null,b,y):Yr(c,f,b,y),f.child;case 11:return b=f.type,C=f.pendingProps,C=f.elementType===b?C:As(b,C),jT(c,f,b,C,y);case 7:return Yr(c,f,f.pendingProps,y),f.child;case 8:return Yr(c,f,f.pendingProps.children,y),f.child;case 12:return Yr(c,f,f.pendingProps.children,y),f.child;case 10:e:{if(b=f.type._context,C=f.pendingProps,L=f.memoizedProps,X=C.value,sT(f,b,X),L!==null)if(to(L.value,X)){if(L.children===C.children&&!sn.current){f=Oo(c,f,y);break e}}else for(L=f.child,L!==null&&(L.return=f);L!==null;){var oe=L.dependencies;if(oe!==null){X=L.child;for(var we=oe.firstContext;we!==null;){if(we.context===b){if(L.tag===1){we=Ro(-1,y&-y),we.tag=2;var Be=L.updateQueue;if(Be!==null){Be=Be.shared;var Ze=Be.pending;Ze===null?we.next=we:(we.next=Ze.next,Ze.next=we),Be.pending=we}}L.lanes|=y,we=L.alternate,we!==null&&(we.lanes|=y),x1(L.return,y,f),oe.lanes|=y;break}we=we.next}}else if(L.tag===10)X=L.type===f.type?null:L.child;else if(L.tag===18){if(X=L.return,X===null)throw Error(o(341));X.lanes|=y,oe=X.alternate,oe!==null&&(oe.lanes|=y),x1(X,y,f),X=L.sibling}else X=L.child;if(X!==null)X.return=L;else for(X=L;X!==null;){if(X===f){X=null;break}if(L=X.sibling,L!==null){L.return=X.return,X=L;break}X=X.return}L=X}Yr(c,f,C.children,y),f=f.child}return f;case 9:return C=f.type,b=f.pendingProps.children,Vu(f,y),C=Yi(C),b=b(C),f.flags|=1,Yr(c,f,b,y),f.child;case 14:return b=f.type,C=As(b,f.pendingProps),C=As(b.type,C),XT(c,f,b,C,y);case 15:return KT(c,f,f.type,f.pendingProps,y);case 17:return b=f.type,C=f.pendingProps,C=f.elementType===b?C:As(b,C),c!==null&&(c.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,br(b)?(c=!0,cm(f)):c=!1,Vu(f,y),fT(f,b,C),w1(f,b,C,y),H1(null,f,b,!0,c,y);case 19:return i2(c,f,y);case 22:return YT(c,f,y)}throw Error(o(156,f.tag))};function C2(c,f){return d1(c,f)}function JF(c,f,y,b){this.tag=c,this.key=y,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ts(c,f,y,b){return new JF(c,f,y,b)}function ux(c){return c=c.prototype,!(!c||!c.isReactComponent)}function ez(c){if(typeof c=="function")return ux(c)?1:0;if(c!=null){if(c=c.$$typeof,c===_)return 11;if(c===S)return 14}return 2}function Ea(c,f){var y=c.alternate;return y===null?(y=ts(c.tag,f,c.key,c.mode),y.elementType=c.elementType,y.type=c.type,y.stateNode=c.stateNode,y.alternate=c,c.alternate=y):(y.pendingProps=f,y.type=c.type,y.flags=0,y.subtreeFlags=0,y.deletions=null),y.flags=c.flags&14680064,y.childLanes=c.childLanes,y.lanes=c.lanes,y.child=c.child,y.memoizedProps=c.memoizedProps,y.memoizedState=c.memoizedState,y.updateQueue=c.updateQueue,f=c.dependencies,y.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},y.sibling=c.sibling,y.index=c.index,y.ref=c.ref,y}function tg(c,f,y,b,C,L){var X=2;if(b=c,typeof c=="function")ux(c)&&(X=1);else if(typeof c=="string")X=5;else e:switch(c){case d:return Cl(y.children,C,L,f);case h:X=8,C|=8;break;case p:return c=ts(12,y,f,C|2),c.elementType=p,c.lanes=L,c;case x:return c=ts(13,y,f,C),c.elementType=x,c.lanes=L,c;case m:return c=ts(19,y,f,C),c.elementType=m,c.lanes=L,c;case M:return ng(y,C,L,f);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case g:X=10;break e;case v:X=9;break e;case _:X=11;break e;case S:X=14;break e;case w:X=16,b=null;break e}throw Error(o(130,c==null?c:typeof c,""))}return f=ts(X,y,f,C),f.elementType=c,f.type=b,f.lanes=L,f}function Cl(c,f,y,b){return c=ts(7,c,b,f),c.lanes=y,c}function ng(c,f,y,b){return c=ts(22,c,b,f),c.elementType=M,c.lanes=y,c.stateNode={},c}function cx(c,f,y){return c=ts(6,c,null,f),c.lanes=y,c}function fx(c,f,y){return f=ts(4,c.children!==null?c.children:[],c.key,f),f.lanes=y,f.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},f}function tz(c,f,y,b,C){this.tag=f,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=U,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c1(0),this.expirationTimes=c1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c1(0),this.identifierPrefix=b,this.onRecoverableError=C,q&&(this.mutableSourceEagerHydrationData=null)}function A2(c,f,y,b,C,L,X,oe,we){return c=new tz(c,f,y,oe,we),f===1?(f=1,L===!0&&(f|=8)):f=0,L=ts(3,null,null,f),c.current=L,L.stateNode=c,L.memoizedState={element:b,isDehydrated:y,cache:null,transitions:null},_1(L),c}function R2(c){if(!c)return Dr;c=c._reactInternals;e:{if(T(c)!==c||c.tag!==1)throw Error(o(170));var f=c;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(br(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(c.tag===1){var y=c.type;if(br(y))return eT(c,y,f)}return f}function I2(c){var f=c._reactInternals;if(f===void 0)throw typeof c.render=="function"?Error(o(188)):(c=Object.keys(c).join(","),Error(o(268,c)));return c=N(f),c===null?null:c.stateNode}function D2(c,f){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var y=c.retryLane;c.retryLane=y!==0&&y<f?y:f}}function dx(c,f){D2(c,f),(c=c.alternate)&&D2(c,f)}function nz(c){return c=N(c),c===null?null:c.stateNode}function rz(){return null}return n.attemptContinuousHydration=function(c){if(c.tag===13){var f=qr();es(c,134217728,f),dx(c,134217728)}},n.attemptHydrationAtCurrentPriority=function(c){if(c.tag===13){var f=qr(),y=ba(c);es(c,y,f),dx(c,y)}},n.attemptSynchronousHydration=function(c){switch(c.tag){case 3:var f=c.stateNode;if(f.current.memoizedState.isDehydrated){var y=od(f.pendingLanes);y!==0&&(f1(f,y|1),ci(f,hr()),!(At&6)&&(Qu(),no()))}break;case 13:var b=qr();_2(function(){return es(c,1,b)}),dx(c,1)}},n.batchedUpdates=function(c,f){var y=At;At|=1;try{return c(f)}finally{At=y,At===0&&(Qu(),mm&&no())}},n.createComponentSelector=function(c){return{$$typeof:Hm,value:c}},n.createContainer=function(c,f,y,b,C,L,X){return A2(c,f,!1,null,y,b,C,L,X)},n.createHasPseudoClassSelector=function(c){return{$$typeof:Vm,value:c}},n.createHydrationContainer=function(c,f,y,b,C,L,X,oe,we){return c=A2(y,b,!0,c,C,L,X,oe,we),c.context=R2(null),y=c.current,b=qr(),C=ba(y),L=Ro(b,C),L.callback=f??null,_a(y,L),c.current.lanes=C,ad(c,C,b),ci(c,b),c},n.createPortal=function(c,f,y){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:c,containerInfo:f,implementation:y}},n.createRoleSelector=function(c){return{$$typeof:Gm,value:c}},n.createTestNameSelector=function(c){return{$$typeof:Wm,value:c}},n.createTextSelector=function(c){return{$$typeof:$m,value:c}},n.deferredUpdates=function(c){var f=zt,y=Hn.transition;try{return Hn.transition=null,zt=16,c()}finally{zt=f,Hn.transition=y}},n.discreteUpdates=function(c,f,y,b,C){var L=zt,X=Hn.transition;try{return Hn.transition=null,zt=1,c(f,y,b,C)}finally{zt=L,Hn.transition=X,At===0&&Qu()}},n.findAllNodes=Q1,n.findBoundingRects=function(c,f){if(!je)throw Error(o(363));f=Q1(c,f),c=[];for(var y=0;y<f.length;y++)c.push(G(f[y]));for(f=c.length-1;0<f;f--){y=c[f];for(var b=y.x,C=b+y.width,L=y.y,X=L+y.height,oe=f-1;0<=oe;oe--)if(f!==oe){var we=c[oe],Be=we.x,Ze=Be+we.width,vt=we.y,ct=vt+we.height;if(b>=Be&&L>=vt&&C<=Ze&&X<=ct){c.splice(f,1);break}else if(b!==Be||y.width!==we.width||ct<L||vt>X){if(!(L!==vt||y.height!==we.height||Ze<b||Be>C)){Be>b&&(we.width+=Be-b,we.x=b),Ze<C&&(we.width=C-Be),c.splice(f,1);break}}else{vt>L&&(we.height+=vt-L,we.y=L),ct<X&&(we.height=X-vt),c.splice(f,1);break}}}return c},n.findHostInstance=I2,n.findHostInstanceWithNoPortals=function(c){return c=O(c),c=c!==null?K(c):null,c===null?null:c.stateNode},n.findHostInstanceWithWarning=function(c){return I2(c)},n.flushControlled=function(c){var f=At;At|=1;var y=Hn.transition,b=zt;try{Hn.transition=null,zt=1,c()}finally{zt=b,Hn.transition=y,At=f,At===0&&(Qu(),no())}},n.flushPassiveEffects=Pl,n.flushSync=_2,n.focusWithin=function(c,f){if(!je)throw Error(o(363));for(c=Y1(c),f=v2(c,f),f=Array.from(f),c=0;c<f.length;){var y=f[c++];if(!re(y)){if(y.tag===5&&Ae(y.stateNode))return!0;for(y=y.child;y!==null;)f.push(y),y=y.sibling}}return!1},n.getCurrentUpdatePriority=function(){return zt},n.getFindAllNodesFailureDescription=function(c,f){if(!je)throw Error(o(363));var y=0,b=[];c=[Y1(c),0];for(var C=0;C<c.length;){var L=c[C++],X=c[C++],oe=f[X];if((L.tag!==5||!re(L))&&(q1(L,oe)&&(b.push(Z1(oe)),X++,X>y&&(y=X)),X<f.length))for(L=L.child;L!==null;)c.push(L,X),L=L.sibling}if(y<f.length){for(c=[];y<f.length;y++)c.push(Z1(f[y]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+c.join(" > ")}return null},n.getPublicRootInstance=function(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return Q(c.child.stateNode);default:return c.child.stateNode}},n.injectIntoDevTools=function(c){if(c={bundleType:c.bundleType,version:c.version,rendererPackageName:c.rendererPackageName,rendererConfig:c.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:nz,findFiberByHostInstance:c.findFiberByHostInstance||rz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")c=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)c=!0;else{try{pm=f.inject(c),eo=f}catch{}c=!!f.checkDCE}}return c},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(c,f,y,b){if(!je)throw Error(o(363));c=Q1(c,f);var C=Ue(c,y,b).disconnect;return{disconnect:function(){C()}}},n.registerMutableSourceForHydration=function(c,f){var y=f._getVersion;y=y(f._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[f,y]:c.mutableSourceEagerHydrationData.push(f,y)},n.runWithPriority=function(c,f){var y=zt;try{return zt=c,f()}finally{zt=y}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(c,f,y,b){var C=f.current,L=qr(),X=ba(C);return y=R2(y),f.context===null?f.context=y:f.pendingContext=y,f=Ro(L,X),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),_a(C,f),c=es(C,X,L),c!==null&&xm(c,C,X),X},n};sk.exports=R$;var I$=sk.exports;const D$=_s(I$);var ok={exports:{}},ak={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(F,j){var V=F.length;F.push(j);e:for(;0<V;){var ce=V-1>>>1,ae=F[ce];if(0<i(ae,j))F[ce]=j,F[V]=ae,V=ce;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var j=F[0],V=F.pop();if(V!==j){F[0]=V;e:for(var ce=0,ae=F.length,fe=ae>>>1;ce<fe;){var de=2*(ce+1)-1,De=F[de],Ee=de+1,J=F[Ee];if(0>i(De,V))Ee<ae&&0>i(J,De)?(F[ce]=J,F[Ee]=V,ce=Ee):(F[ce]=De,F[de]=V,ce=de);else if(Ee<ae&&0>i(J,V))F[ce]=J,F[Ee]=V,ce=Ee;else break e}}return j}function i(F,j){var V=F.sortIndex-j.sortIndex;return V!==0?V:F.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],d=1,h=null,p=3,g=!1,v=!1,_=!1,x=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(F){for(var j=n(u);j!==null;){if(j.callback===null)r(u);else if(j.startTime<=F)r(u),j.sortIndex=j.expirationTime,e(l,j);else break;j=n(u)}}function M(F){if(_=!1,w(F),!v)if(n(l)!==null)v=!0,Q(I);else{var j=n(u);j!==null&&ee(M,j.startTime-F)}}function I(F,j){v=!1,_&&(_=!1,m(A),A=-1),g=!0;var V=p;try{for(w(j),h=n(l);h!==null&&(!(h.expirationTime>j)||F&&!O());){var ce=h.callback;if(typeof ce=="function"){h.callback=null,p=h.priorityLevel;var ae=ce(h.expirationTime<=j);j=t.unstable_now(),typeof ae=="function"?h.callback=ae:h===n(l)&&r(l),w(j)}else r(l);h=n(l)}if(h!==null)var fe=!0;else{var de=n(u);de!==null&&ee(M,de.startTime-j),fe=!1}return fe}finally{h=null,p=V,g=!1}}var P=!1,D=null,A=-1,T=5,E=-1;function O(){return!(t.unstable_now()-E<T)}function N(){if(D!==null){var F=t.unstable_now();E=F;var j=!0;try{j=D(!0,F)}finally{j?H():(P=!1,D=null)}}else P=!1}var H;if(typeof S=="function")H=function(){S(N)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,Y=K.port2;K.port1.onmessage=N,H=function(){Y.postMessage(null)}}else H=function(){x(N,0)};function Q(F){D=F,P||(P=!0,H())}function ee(F,j){A=x(function(){F(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_continueExecution=function(){v||g||(v=!0,Q(I))},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(F){switch(p){case 1:case 2:case 3:var j=3;break;default:j=p}var V=p;p=j;try{return F()}finally{p=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(F,j){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var V=p;p=F;try{return j()}finally{p=V}},t.unstable_scheduleCallback=function(F,j,V){var ce=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ce+V:ce):V=ce,F){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=V+ae,F={id:d++,callback:j,priorityLevel:F,startTime:V,expirationTime:ae,sortIndex:-1},V>ce?(F.sortIndex=V,e(u,F),n(l)===null&&F===n(u)&&(_?(m(A),A=-1):_=!0,ee(M,V-ce))):(F.sortIndex=ae,e(l,F),v||g||(v=!0,Q(I))),F},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(F){var j=p;return function(){var V=p;p=j;try{return F.apply(this,arguments)}finally{p=V}}}})(ak);ok.exports=ak;var gA=ok.exports;function lk(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}const Xo=[];function uk(t,e,n=!1,r={}){for(const s of Xo)if(lk(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,promise:t(...e).then(s=>i.response=s).then(()=>{r.lifespan&&r.lifespan>0&&setTimeout(()=>{const s=Xo.indexOf(i);s!==-1&&Xo.splice(s,1)},r.lifespan)}).catch(s=>i.error=s)};if(Xo.push(i),!n)throw i.promise}const L$=(t,e,n)=>uk(t,e,!1,n),O$=(t,e,n)=>void uk(t,e,!0,n),k$=t=>{if(t===void 0||t.length===0)Xo.splice(0,Xo.length);else{const e=Xo.find(n=>lk(t,n.keys,n.equal));if(e){const n=Xo.indexOf(e);n!==-1&&Xo.splice(n,1)}}},uE={},Yp=t=>void Object.assign(uE,t);function U$(t,e){function n(d,{args:h=[],attach:p,...g},v){let _=`${d[0].toUpperCase()}${d.slice(1)}`,x;if(d==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const m=g.object;x=Oc(m,{type:d,root:v,attach:p,primitive:!0})}else{const m=uE[_];if(!m)throw new Error(`R3F: ${_} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=Oc(new m(...h),{type:d,root:v,attach:p,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x instanceof Mt?x.__r3f.attach="geometry":x instanceof er&&(x.__r3f.attach="material")),_!=="inject"&&__(x,g),x}function r(d,h){let p=!1;if(h){var g,v;(g=h.__r3f)!=null&&g.attach?x_(d,h,h.__r3f.attach):h.isObject3D&&d.isObject3D&&(d.add(h),p=!0),p||(v=d.__r3f)==null||v.objects.push(h),h.__r3f||Oc(h,{}),h.__r3f.parent=d,Ow(h),kc(h)}}function i(d,h,p){let g=!1;if(h){var v,_;if((v=h.__r3f)!=null&&v.attach)x_(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){h.parent=d,h.dispatchEvent({type:"added"});const x=d.children.filter(S=>S!==h),m=x.indexOf(p);d.children=[...x.slice(0,m),h,...x.slice(m)],g=!0}g||(_=d.__r3f)==null||_.objects.push(h),h.__r3f||Oc(h,{}),h.__r3f.parent=d,Ow(h),kc(h)}}function s(d,h,p=!1){d&&[...d].forEach(g=>o(h,g,p))}function o(d,h,p){if(h){var g,v,_;if(h.__r3f&&(h.__r3f.parent=null),(g=d.__r3f)!=null&&g.objects&&(d.__r3f.objects=d.__r3f.objects.filter(M=>M!==h)),(v=h.__r3f)!=null&&v.attach)SA(d,h,h.__r3f.attach);else if(h.isObject3D&&d.isObject3D){var x;d.remove(h),(x=h.__r3f)!=null&&x.root&&G$(h.__r3f.root,h)}const S=(_=h.__r3f)==null?void 0:_.primitive,w=p===void 0?h.dispose!==null&&!S:p;if(!S){var m;s((m=h.__r3f)==null?void 0:m.objects,h,w),s(h.children,h,w)}h.__r3f&&(delete h.__r3f.root,delete h.__r3f.objects,delete h.__r3f.handlers,delete h.__r3f.memoizedProps,S||delete h.__r3f),w&&h.dispose&&h.type!=="Scene"&&gA.unstable_scheduleCallback(gA.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),kc(d)}}function a(d,h,p,g){var v;const _=(v=d.__r3f)==null?void 0:v.parent;if(!_)return;const x=n(h,p,d.__r3f.root);if(d.children){for(const m of d.children)m.__r3f&&r(x,m);d.children=d.children.filter(m=>!m.__r3f)}d.__r3f.objects.forEach(m=>r(x,m)),d.__r3f.objects=[],d.__r3f.autoRemovedBeforeAppend||o(_,d),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(_,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[g,g.alternate].forEach(m=>{m!==null&&(m.stateNode=x,m.ref&&(typeof m.ref=="function"?m.ref(x):m.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:D$({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(d,h)=>{if(!h)return;const p=d.getState().scene;p.__r3f&&(p.__r3f.root=d,r(p,h))},removeChildFromContainer:(d,h)=>{h&&o(d.getState().scene,h)},insertInContainerBefore:(d,h,p)=>{if(!h||!p)return;const g=d.getState().scene;g.__r3f&&i(g,h,p)},getRootHostContext:()=>null,getChildHostContext:d=>d,finalizeInitialChildren(d){var h;return!!((h=d==null?void 0:d.__r3f)!=null?h:{}).handlers},prepareUpdate(d,h,p,g){if(d.__r3f.primitive&&g.object&&g.object!==d)return[!0];{const{args:v=[],children:_,...x}=g,{args:m=[],children:S,...w}=p;if(!Array.isArray(v))throw new Error("R3F: the args prop must be an array!");if(v.some((I,P)=>I!==m[P]))return[!0];const M=gk(d,x,w,!0);return M.changes.length?[!1,M]:null}},commitUpdate(d,[h,p],g,v,_,x){h?a(d,g,_,x):__(d,p)},commitMount(d,h,p,g){var v;const _=(v=d.__r3f)!=null?v:{};d.raycast&&_.handlers&&_.eventCount&&d.__r3f.root.getState().internal.interaction.push(d)},getPublicInstance:d=>d,prepareForCommit:()=>null,preparePortalMount:d=>Oc(d.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(d){var h;const{attach:p,parent:g}=(h=d.__r3f)!=null?h:{};p&&g&&SA(g,d,p),d.isObject3D&&(d.visible=!1),kc(d)},unhideInstance(d,h){var p;const{attach:g,parent:v}=(p=d.__r3f)!=null?p:{};g&&v&&x_(v,d,g),(d.isObject3D&&h.visible==null||h.visible)&&(d.visible=!0),kc(d)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Jc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&gn.fun(performance.now)?performance.now:gn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:gn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:gn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:__}}var vA,yA;const y_=t=>"colorSpace"in t||"outputColorSpace"in t,ck=()=>{var t;return(t=uE.ColorManagement)!=null?t:null},fk=t=>t&&t.isOrthographicCamera,N$=t=>t&&t.hasOwnProperty("current"),jf=typeof window<"u"&&((vA=window.document)!=null&&vA.createElement||((yA=window.navigator)==null?void 0:yA.product)==="ReactNative")?R.useLayoutEffect:R.useEffect;function dk(t){const e=R.useRef(t);return jf(()=>void(e.current=t),[t]),e}function F$({set:t}){return jf(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class hk extends R.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}hk.getDerivedStateFromError=()=>({error:!0});const pk="__default",xA=new Map,z$=t=>t&&!!t.memoized&&!!t.changes;function mk(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const Gd=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},gn={obj:t=>t===Object(t)&&!gn.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if(gn.str(t)||gn.num(t))return t===e;const s=gn.obj(t);if(s&&r==="reference")return t===e;const o=gn.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!gn.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if(gn.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function B$(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function H$(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function Oc(t,e){const n=t;return(e!=null&&e.primitive||!n.__r3f)&&(n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),t}function Lw(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const _A=/-\d+$/;function x_(t,e,n){if(gn.str(n)){if(_A.test(n)){const s=n.replace(_A,""),{target:o,key:a}=Lw(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=Lw(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function SA(t,e,n){var r,i;if(gn.str(n)){const{target:s,key:o}=Lw(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function gk(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var d;const h=(d=t==null?void 0:t.__r3f)!=null?d:{},p=Object.entries(i),g=[];if(u){const _=Object.keys(l);for(let x=0;x<_.length;x++)i.hasOwnProperty(_[x])||p.unshift([_[x],pk+"remove"])}p.forEach(([_,x])=>{var m;if((m=t.__r3f)!=null&&m.primitive&&_==="object"||gn.equ(x,l[_]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(_))return g.push([_,x,!0,[]]);let S=[];_.includes("-")&&(S=_.split("-")),g.push([_,x,!1,S]);for(const w in i){const M=i[w];w.startsWith(`${_}-`)&&g.push([w,M,!1,w.split("-")])}});const v={...i};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:g}}function __(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=z$(e)?e:gk(t,e),d=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let p=0;p<u.length;p++){let[g,v,_,x]=u[p];if(y_(t)){const M="srgb",I="srgb-linear";g==="encoding"?(g="colorSpace",v=v===3001?M:I):g==="outputEncoding"&&(g="outputColorSpace",v=v===3001?M:I)}let m=t,S=m[g];if(x.length&&(S=x.reduce((w,M)=>w[M],t),!(S&&S.set))){const[w,...M]=x.reverse();m=M.reverse().reduce((I,P)=>I[P],t),g=w}if(v===pk+"remove")if(m.constructor){let w=xA.get(m.constructor);w||(w=new m.constructor,xA.set(m.constructor,w)),v=w[g]}else v=0;if(_)v?s.handlers[g]=v:delete s.handlers[g],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof cu)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&S.constructor===v.constructor)S.copy(v);else if(v!==void 0){const w=S instanceof ze;!w&&S.setScalar?S.setScalar(v):S instanceof cu&&v instanceof cu?S.mask=v.mask:S.set(v),!ck()&&!a.linear&&w&&S.convertSRGBToLinear()}}else if(m[g]=v,m[g]instanceof Bn&&m[g].format===vn&&m[g].type===pn){const w=m[g];y_(w)&&y_(a.gl)?w.colorSpace=a.gl.outputColorSpace:w.encoding=a.gl.outputEncoding}kc(t)}if(s.parent&&a.internal&&t.raycast&&d!==s.eventCount){const p=a.internal.interaction.indexOf(t);p>-1&&a.internal.interaction.splice(p,1),s.eventCount&&a.internal.interaction.push(t)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=t.__r3f)!=null&&i.parent&&Ow(t),t}function kc(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function Ow(t){t.onUpdate==null||t.onUpdate(t)}function vk(t,e){t.manual||(fk(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function av(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function V$(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Jc.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Jc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Jc.ContinuousEventPriority;default:return Jc.DefaultEventPriority}}function yk(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function G$(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{yk(n.capturedMap,e,r,i)})}function W$(t){function e(l){const{internal:u}=t.getState(),d=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(d*d+h*h))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(d=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+d]}))}function r(l,u){const d=t.getState(),h=new Set,p=[],g=u?u(d.internal.interaction):d.internal.interaction;for(let m=0;m<g.length;m++){const S=Gd(g[m]);S&&(S.raycaster.camera=void 0)}d.previousRoot||d.events.compute==null||d.events.compute(l,d);function v(m){const S=Gd(m);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var w;S.events.compute==null||S.events.compute(l,S,(w=S.previousRoot)==null?void 0:w.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(m,!0):[]}let _=g.flatMap(v).sort((m,S)=>{const w=Gd(m.object),M=Gd(S.object);return!w||!M?m.distance-S.distance:M.events.priority-w.events.priority||m.distance-S.distance}).filter(m=>{const S=av(m);return h.has(S)?!1:(h.add(S),!0)});d.events.filter&&(_=d.events.filter(_,d));for(const m of _){let S=m.object;for(;S;){var x;(x=S.__r3f)!=null&&x.eventCount&&p.push({...m,eventObject:S}),S=S.parent}}if("pointerId"in l&&d.internal.capturedMap.has(l.pointerId))for(let m of d.internal.capturedMap.get(l.pointerId).values())h.has(av(m.intersection))||p.push(m.intersection);return p}function i(l,u,d,h){const p=t.getState();if(l.length){const g={stopped:!1};for(const v of l){const _=Gd(v.object)||p,{raycaster:x,pointer:m,camera:S,internal:w}=_,M=new B(m.x,m.y,0).unproject(S),I=E=>{var O,N;return(O=(N=w.capturedMap.get(E))==null?void 0:N.has(v.eventObject))!=null?O:!1},P=E=>{const O={intersection:v,target:u.target};w.capturedMap.has(E)?w.capturedMap.get(E).set(v.eventObject,O):w.capturedMap.set(E,new Map([[v.eventObject,O]])),u.target.setPointerCapture(E)},D=E=>{const O=w.capturedMap.get(E);O&&yk(w.capturedMap,v.eventObject,O,E)};let A={};for(let E in u){let O=u[E];typeof O!="function"&&(A[E]=O)}let T={...v,...A,pointer:m,intersections:l,stopped:g.stopped,delta:d,unprojectedPoint:M,ray:x.ray,camera:S,stopPropagation(){const E="pointerId"in u&&w.capturedMap.get(u.pointerId);if((!E||E.has(v.eventObject))&&(T.stopped=g.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));s([...O,v])}},target:{hasPointerCapture:I,setPointerCapture:P,releasePointerCapture:D},currentTarget:{hasPointerCapture:I,setPointerCapture:P,releasePointerCapture:D},nativeEvent:u};if(h(T),g.stopped===!0)break}}return l}function s(l){const{internal:u}=t.getState();for(const d of u.hovered.values())if(!l.length||!l.find(h=>h.object===d.object&&h.index===d.index&&h.instanceId===d.instanceId)){const p=d.eventObject.__r3f,g=p==null?void 0:p.handlers;if(u.hovered.delete(av(d)),p!=null&&p.eventCount){const v={...d,intersections:l};g.onPointerOut==null||g.onPointerOut(v),g.onPointerLeave==null||g.onPointerLeave(v)}}}function o(l,u){for(let d=0;d<u.length;d++){const h=u[d].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:d}=t.getState();"pointerId"in u&&d.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{d.capturedMap.has(u.pointerId)&&(d.capturedMap.delete(u.pointerId),s([]))})}}return function(d){const{onPointerMissed:h,internal:p}=t.getState();p.lastEvent.current=d;const g=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(d,g?n:void 0),m=v?e(d):0;l==="onPointerDown"&&(p.initialClick=[d.offsetX,d.offsetY],p.initialHits=x.map(w=>w.eventObject)),v&&!x.length&&m<=2&&(o(d,p.interaction),h&&h(d)),g&&s(x);function S(w){const M=w.eventObject,I=M.__r3f,P=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(g){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const D=av(w),A=p.hovered.get(D);A?A.stopped&&w.stopPropagation():(p.hovered.set(D,w),P.onPointerOver==null||P.onPointerOver(w),P.onPointerEnter==null||P.onPointerEnter(w))}P.onPointerMove==null||P.onPointerMove(w)}else{const D=P[l];D?(!v||p.initialHits.includes(M))&&(o(d,p.interaction.filter(A=>!p.initialHits.includes(A))),D(w)):v&&p.initialHits.includes(M)&&o(d,p.interaction.filter(A=>!p.initialHits.includes(A)))}}i(x,d,m,S)}}return{handlePointer:a}}const $$=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],xk=t=>!!(t!=null&&t.render),cE=R.createContext(null),j$=(t,e)=>{const n=ik((a,l)=>{const u=new B,d=new B,h=new B;function p(m=l().camera,S=d,w=l().size){const{width:M,height:I,top:P,left:D}=w,A=M/I;S instanceof B?h.copy(S):h.set(...S);const T=m.getWorldPosition(u).distanceTo(h);if(fk(m))return{width:M/m.zoom,height:I/m.zoom,top:P,left:D,factor:1,distance:T,aspect:A};{const E=m.fov*Math.PI/180,O=2*Math.tan(E/2)*T,N=O*(M/I);return{width:N,height:O,top:P,left:D,factor:M/N,distance:T,aspect:A}}}let g;const v=m=>a(S=>({performance:{...S.performance,current:m}})),_=new ue;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(m=1)=>t(l(),m),advance:(m,S)=>e(m,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new sE,pointer:_,mouse:_,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const m=l();g&&clearTimeout(g),m.performance.current!==m.performance.min&&v(m.performance.min),g=setTimeout(()=>v(l().performance.max),m.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:p},setEvents:m=>a(S=>({...S,events:{...S.events,...m}})),setSize:(m,S,w,M,I)=>{const P=l().camera,D={width:m,height:S,top:M||0,left:I||0,updateStyle:w};a(A=>({size:D,viewport:{...A.viewport,...p(P,d,D)}}))},setDpr:m=>a(S=>{const w=mk(m);return{viewport:{...S.viewport,dpr:w,initialDpr:S.viewport.initialDpr||w}}}),setFrameloop:(m="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,m!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:m}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:R.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(m,S,w)=>{const M=l().internal;return M.priority=M.priority+(S>0?1:0),M.subscribers.push({ref:m,priority:S,store:w}),M.subscribers=M.subscribers.sort((I,P)=>I.priority-P.priority),()=>{const I=l().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(S>0?1:0),I.subscribers=I.subscribers.filter(P=>P.ref!==m))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:d,set:h}=n.getState();if(l!==i||u.dpr!==s){var p;i=l,s=u.dpr,vk(a,l),d.setPixelRatio(u.dpr);const g=(p=l.updateStyle)!=null?p:typeof HTMLCanvasElement<"u"&&d.domElement instanceof HTMLCanvasElement;d.setSize(l.width,l.height,g)}a!==o&&(o=a,h(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let lv,X$=new Set,K$=new Set,Y$=new Set;function S_(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function Wd(t,e){switch(t){case"before":return S_(X$,e);case"after":return S_(K$,e);case"tail":return S_(Y$,e)}}let w_,b_;function M_(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),w_=e.internal.subscribers,lv=0;lv<w_.length;lv++)b_=w_[lv],b_.ref.current(b_.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function q$(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,Wd("before",l);for(const d of t.values()){var u;i=d.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(n+=M_(l,i))}if(Wd("after",l),n===0)return Wd("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var d;if(!l)return t.forEach(h=>o(h.store.getState()),u);(d=l.gl.xr)!=null&&d.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,d,h){if(u&&Wd("before",l),d)M_(l,d,h);else for(const p of t.values())M_(l,p.store.getState());u&&Wd("after",l)}return{loop:s,invalidate:o,advance:a}}function Z$(t){const e=R.useRef(null);return jf(()=>void(e.current=t.current.__r3f),[t]),e}function fE(){const t=R.useContext(cE);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function ln(t=n=>n,e){return fE()(t,e)}function ml(t,e=0){const n=fE(),r=n.getState().internal.subscribe,i=dk(t);return jf(()=>r(i,e,n),[e,r,n]),null}function _k(t,e){return function(n,...r){const i=new n;return t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,B$(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message})`))))))}}function bu(t,e,n,r){const i=Array.isArray(e)?e:[e],s=L$(_k(n,r),[t,...i],{equal:gn.equ});return Array.isArray(e)?s:s[0]}bu.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return O$(_k(n),[t,...r])};bu.clear=function(t,e){const n=Array.isArray(e)?e:[e];return k$([t,...n])};const Cf=new Map,{invalidate:wA,advance:bA}=q$(Cf),{reconciler:_p,applyProps:wc}=U$(Cf,V$),bc={objects:"shallow",strict:!1},Q$=(t,e)=>{const n=typeof t=="function"?t(e):t;return xk(n)?n:new OM({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function J$(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:r,top:i,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function e7(t){const e=Cf.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||j$(wA,bA),o=n||_p.createContainer(s,Jc.ConcurrentRoot,null,!1,null,"",i,null);e||Cf.set(t,{fiber:o,store:s});let a,l=!1,u;return{configure(d={}){let{gl:h,size:p,scene:g,events:v,onCreated:_,shadows:x=!1,linear:m=!1,flat:S=!1,legacy:w=!1,orthographic:M=!1,frameloop:I="always",dpr:P=[1,2],performance:D,raycaster:A,camera:T,onPointerMissed:E}=d,O=s.getState(),N=O.gl;O.gl||O.set({gl:N=Q$(h,t)});let H=O.raycaster;H||O.set({raycaster:H=new lE});const{params:K,...Y}=A||{};if(gn.equ(Y,H,bc)||wc(H,{...Y}),gn.equ(K,H.params,bc)||wc(H,{params:{...H.params,...K}}),!O.camera||O.camera===u&&!gn.equ(u,T,bc)){u=T;const ce=T instanceof zf,ae=ce?T:M?new $s(0,0,0,0,.1,1e3):new jt(75,0,.1,1e3);ce||(ae.position.z=5,T&&wc(ae,T),!O.camera&&!(T!=null&&T.rotation)&&ae.lookAt(0,0,0)),O.set({camera:ae})}if(!O.scene){let ce;g instanceof _u?ce=g:(ce=new _u,g&&wc(ce,g)),O.set({scene:Oc(ce)})}if(!O.xr){const ce=(de,De)=>{const Ee=s.getState();Ee.frameloop!=="never"&&bA(de,!0,Ee,De)},ae=()=>{const de=s.getState();de.gl.xr.enabled=de.gl.xr.isPresenting,de.gl.xr.setAnimationLoop(de.gl.xr.isPresenting?ce:null),de.gl.xr.isPresenting||wA(de)},fe={connect(){const de=s.getState().gl;de.xr.addEventListener("sessionstart",ae),de.xr.addEventListener("sessionend",ae)},disconnect(){const de=s.getState().gl;de.xr.removeEventListener("sessionstart",ae),de.xr.removeEventListener("sessionend",ae)}};N.xr&&fe.connect(),O.set({xr:fe})}if(N.shadowMap){const ce=N.shadowMap.enabled,ae=N.shadowMap.type;if(N.shadowMap.enabled=!!x,gn.boo(x))N.shadowMap.type=bh;else if(gn.str(x)){var Q;const fe={basic:b4,percentage:ay,soft:bh,variance:Fs};N.shadowMap.type=(Q=fe[x])!=null?Q:bh}else gn.obj(x)&&Object.assign(N.shadowMap,x);(ce!==N.shadowMap.enabled||ae!==N.shadowMap.type)&&(N.shadowMap.needsUpdate=!0)}const ee=ck();ee&&("enabled"in ee?ee.enabled=!w:"legacyMode"in ee&&(ee.legacyMode=w)),wc(N,{outputEncoding:m?3e3:3001,toneMapping:S?Ws:_M}),O.legacy!==w&&O.set(()=>({legacy:w})),O.linear!==m&&O.set(()=>({linear:m})),O.flat!==S&&O.set(()=>({flat:S})),h&&!gn.fun(h)&&!xk(h)&&!gn.equ(h,N,bc)&&wc(N,h),v&&!O.events.handlers&&O.set({events:v(s)});const V=J$(t,p);return gn.equ(V,O.size,bc)||O.setSize(V.width,V.height,V.updateStyle,V.top,V.left),P&&O.viewport.dpr!==mk(P)&&O.setDpr(P),O.frameloop!==I&&O.setFrameloop(I),O.onPointerMissed||O.set({onPointerMissed:E}),D&&!gn.equ(D,O.performance,bc)&&O.set(ce=>({performance:{...ce.performance,...D}})),a=_,l=!0,this},render(d){return l||this.configure(),_p.updateContainer(R.createElement(t7,{store:s,children:d,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){Sk(t)}}}function t7({store:t,children:e,onCreated:n,rootElement:r}){return jf(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),R.createElement(cE.Provider,{value:t},e)}function Sk(t,e){const n=Cf.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),_p.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),H$(i),Cf.delete(t),e&&e(t)}catch{}},500)})}}function n7(t,e,n){return R.createElement(r7,{key:e.uuid,children:t,container:e,state:n})}function r7({state:t={},children:e,container:n}){const{events:r,size:i,...s}=t,o=fE(),[a]=R.useState(()=>new lE),[l]=R.useState(()=>new ue),u=R.useCallback((h,p)=>{const g={...h};Object.keys(h).forEach(_=>{($$.includes(_)||h[_]!==p[_]&&p[_])&&delete g[_]});let v;if(p&&i){const _=p.camera;v=h.viewport.getCurrentViewport(_,new B,i),_!==h.camera&&vk(_,i)}return{...g,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...p==null?void 0:p.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...v},...s}},[t]),[d]=R.useState(()=>{const h=o.getState();return ik((g,v)=>({...h,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...r},size:{...h.size,...i},...s,set:g,get:v,setEvents:_=>g(x=>({...x,events:{...x.events,..._}}))}))});return R.useEffect(()=>{const h=o.subscribe(p=>d.setState(g=>u(p,g)));return()=>{h(),d.destroy()}},[]),R.useEffect(()=>{d.setState(h=>u(o.getState(),h))},[u]),R.createElement(R.Fragment,null,_p.createPortal(R.createElement(cE.Provider,{value:d},e),d,null))}_p.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:R.version});function Oe(){return Oe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Oe.apply(this,arguments)}function kw(t,e,n){var r,i,s,o,a;e==null&&(e=100);function l(){var d=Date.now()-o;d<e&&d>=0?r=setTimeout(l,e-d):(r=null,n||(a=t.apply(s,i),s=i=null))}var u=function(){s=this,i=arguments,o=Date.now();var d=n&&!r;return r||(r=setTimeout(l,e)),d&&(a=t.apply(s,i),s=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=t.apply(s,i),s=i=null,clearTimeout(r),r=null)},u}kw.debounce=kw;var i7=kw;const MA=_s(i7);function s7(t){let{debounce:e,scroll:n,polyfill:r,offsetSize:i}=t===void 0?{debounce:0,scroll:!1,offsetSize:!1}:t;const s=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=R.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=R.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,h=R.useRef(!1);R.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,g,v]=R.useMemo(()=>{const S=()=>{if(!l.current.element)return;const{left:w,top:M,width:I,height:P,bottom:D,right:A,x:T,y:E}=l.current.element.getBoundingClientRect(),O={left:w,top:M,width:I,height:P,bottom:D,right:A,x:T,y:E};l.current.element instanceof HTMLElement&&i&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),h.current&&!u7(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[S,d?MA(S,d):S,u?MA(S,u):S]},[a,i,u,d]);function _(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(S=>S.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(S=>S.addEventListener("scroll",v,{capture:!0,passive:!0})))}const m=S=>{!S||S===l.current.element||(_(),l.current.element=S,l.current.scrollContainers=wk(S),x())};return a7(v,!!n),o7(g),R.useEffect(()=>{_(),x()},[n,v,g]),R.useEffect(()=>_,[]),[m,o,p]}function o7(t){R.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function a7(t,e){R.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function wk(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...wk(t.parentElement)]}const l7=["x","y","top","bottom","left","right","width","height"],u7=(t,e)=>l7.every(n=>t[n]===e[n]);var c7=Object.defineProperty,f7=Object.defineProperties,d7=Object.getOwnPropertyDescriptors,EA=Object.getOwnPropertySymbols,h7=Object.prototype.hasOwnProperty,p7=Object.prototype.propertyIsEnumerable,TA=(t,e,n)=>e in t?c7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,PA=(t,e)=>{for(var n in e||(e={}))h7.call(e,n)&&TA(t,n,e[n]);if(EA)for(var n of EA(e))p7.call(e,n)&&TA(t,n,e[n]);return t},m7=(t,e)=>f7(t,d7(e));function bk(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=bk(r,e,n);if(i)return i;r=e?null:r.sibling}}function Mk(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const dE=Mk(R.createContext(null));class Ek extends R.Component{render(){return R.createElement(dE.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:CA,ReactCurrentDispatcher:AA}=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function g7(){const t=R.useContext(dE);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=R.useId();return R.useMemo(()=>{for(const r of[CA==null?void 0:CA.current,t,t==null?void 0:t.alternate]){if(!r)continue;const i=bk(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function v7(){var t,e;const n=g7(),[r]=R.useState(()=>new Map);r.clear();let i=n;for(;i;){const s=(t=i.type)==null?void 0:t._context;s&&s!==dE&&!r.has(s)&&r.set(s,(e=AA==null?void 0:AA.current)==null?void 0:e.readContext(Mk(s))),i=i.return}return r}function y7(){const t=v7();return R.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>R.createElement(e,null,R.createElement(n.Provider,m7(PA({},r),{value:t.get(n)}))),e=>R.createElement(Ek,PA({},e))),[t])}const E_={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function x7(t){const{handlePointer:e}=W$(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(E_).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=E_[o];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=E_[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const _7=R.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=x7,eventSource:a,eventPrefix:l,shadows:u,linear:d,flat:h,legacy:p,orthographic:g,frameloop:v,dpr:_,performance:x,raycaster:m,camera:S,onPointerMissed:w,onCreated:M,...I},P){R.useMemo(()=>Yp(E$),[]);const D=y7(),[A,T]=s7({scroll:!0,debounce:{scroll:50,resize:0},...r}),E=R.useRef(null),O=R.useRef(null);R.useImperativeHandle(P,()=>E.current);const N=dk(w),[H,K]=R.useState(!1),[Y,Q]=R.useState(!1);if(H)throw H;if(Y)throw Y;const ee=R.useRef(null);jf(()=>{const j=E.current;T.width>0&&T.height>0&&j&&(ee.current||(ee.current=e7(j)),ee.current.configure({gl:s,events:o,shadows:u,linear:d,flat:h,legacy:p,orthographic:g,frameloop:v,dpr:_,performance:x,raycaster:m,camera:S,size:T,onPointerMissed:(...V)=>N.current==null?void 0:N.current(...V),onCreated:V=>{V.events.connect==null||V.events.connect(a?N$(a)?a.current:a:O.current),l&&V.setEvents({compute:(ce,ae)=>{const fe=ce[l+"X"],de=ce[l+"Y"];ae.pointer.set(fe/ae.size.width*2-1,-(de/ae.size.height)*2+1),ae.raycaster.setFromCamera(ae.pointer,ae.camera)}}),M==null||M(V)}}),ee.current.render(R.createElement(D,null,R.createElement(hk,{set:Q},R.createElement(R.Suspense,{fallback:R.createElement(F$,{set:K})},e)))))}),R.useEffect(()=>{const j=E.current;if(j)return()=>Sk(j)},[]);const F=a?"none":"auto";return R.createElement("div",Oe({ref:O,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...i}},I),R.createElement("div",{ref:A,style:{width:"100%",height:"100%"}},R.createElement("canvas",{ref:E,style:{display:"block"}},n)))}),S7=R.forwardRef(function(e,n){return R.createElement(Ek,null,R.createElement(_7,Oe({},e,{ref:n})))}),qp=new B,hE=new B,w7=new B;function b7(t,e,n){const r=qp.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,s=n.height/2;return[r.x*i+i,-(r.y*s)+s]}function M7(t,e){const n=qp.setFromMatrixPosition(t.matrixWorld),r=hE.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),s=e.getWorldDirection(w7);return i.angleTo(s)>Math.PI/2}function E7(t,e,n,r){const i=qp.setFromMatrixPosition(t.matrixWorld),s=i.clone();s.project(e),n.setFromCamera(s,e);const o=n.intersectObjects(r,!0);if(o.length){const a=o[0].distance;return i.distanceTo(n.ray.origin)<a}return!0}function T7(t,e){if(e instanceof $s)return e.zoom;if(e instanceof jt){const n=qp.setFromMatrixPosition(t.matrixWorld),r=hE.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,s=n.distanceTo(r);return 1/(2*Math.tan(i/2)*s)}else return 1}function P7(t,e,n){if(e instanceof jt||e instanceof $s){const r=qp.setFromMatrixPosition(t.matrixWorld),i=hE.setFromMatrixPosition(e.matrixWorld),s=r.distanceTo(i),o=(n[1]-n[0])/(e.far-e.near),a=n[1]-o*e.far;return Math.round(o*s+a)}}const Uw=t=>Math.abs(t)<1e-10?0:t;function Tk(t,e,n=""){let r="matrix3d(";for(let i=0;i!==16;i++)r+=Uw(e[i]*t.elements[i])+(i!==15?",":")");return n+r}const C7=(t=>e=>Tk(e,t))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),A7=(t=>(e,n)=>Tk(e,t(n),"translate(-50%,-50%)"))(t=>[1/t,1/t,1/t,1,-1/t,-1/t,-1/t,-1,1/t,1/t,1/t,1,1,1,1,1]);function R7(t){return t&&typeof t=="object"&&"current"in t}const Pk=R.forwardRef(({children:t,eps:e=.001,style:n,className:r,prepend:i,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:u=!1,transform:d=!1,occlude:h,onOcclude:p,castShadow:g,receiveShadow:v,material:_,geometry:x,zIndexRange:m=[16777271,0],calculatePosition:S=b7,as:w="div",wrapperClass:M,pointerEvents:I="auto",...P},D)=>{const{gl:A,camera:T,scene:E,size:O,raycaster:N,events:H,viewport:K}=ln(),[Y]=R.useState(()=>document.createElement(w)),Q=R.useRef(),ee=R.useRef(null),F=R.useRef(0),j=R.useRef([0,0]),V=R.useRef(null),ce=R.useRef(null),ae=(a==null?void 0:a.current)||H.connected||A.domElement.parentNode,fe=R.useRef(null),de=R.useRef(!1),De=R.useMemo(()=>h&&h!=="blending"||Array.isArray(h)&&h.length&&R7(h[0]),[h]);R.useLayoutEffect(()=>{const z=A.domElement;h&&h==="blending"?(z.style.zIndex=`${Math.floor(m[0]/2)}`,z.style.position="absolute",z.style.pointerEvents="none"):(z.style.zIndex=null,z.style.position=null,z.style.pointerEvents=null)},[h]),R.useLayoutEffect(()=>{if(ee.current){const z=Q.current=_4(Y);if(E.updateMatrixWorld(),d)Y.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const W=S(ee.current,T,O);Y.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${W[0]}px,${W[1]}px,0);transform-origin:0 0;`}return ae&&(i?ae.prepend(Y):ae.appendChild(Y)),()=>{ae&&ae.removeChild(Y),z.unmount()}}},[ae,d]),R.useLayoutEffect(()=>{M&&(Y.className=M)},[M]);const Ee=R.useMemo(()=>d?{position:"absolute",top:0,left:0,width:O.width,height:O.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-O.height/2,left:-O.width/2,width:O.width,height:O.height},...n},[n,s,o,O,d]),J=R.useMemo(()=>({position:"absolute",pointerEvents:I}),[I]);R.useLayoutEffect(()=>{if(de.current=!1,d){var z;(z=Q.current)==null||z.render(R.createElement("div",{ref:V,style:Ee},R.createElement("div",{ref:ce,style:J},R.createElement("div",{ref:D,className:r,style:n,children:t}))))}else{var W;(W=Q.current)==null||W.render(R.createElement("div",{ref:D,style:Ee,className:r,children:t}))}});const ve=R.useRef(!0);ml(z=>{if(ee.current){T.updateMatrixWorld(),ee.current.updateWorldMatrix(!0,!1);const W=d?j.current:S(ee.current,T,O);if(d||Math.abs(F.current-T.zoom)>e||Math.abs(j.current[0]-W[0])>e||Math.abs(j.current[1]-W[1])>e){const ne=M7(ee.current,T);let q=!1;De&&(h!=="blending"?q=[E]:Array.isArray(h)&&(q=h.map(He=>He.current)));const se=ve.current;if(q){const He=E7(ee.current,T,N,q);ve.current=He&&!ne}else ve.current=!ne;se!==ve.current&&(p?p(!ve.current):Y.style.display=ve.current?"block":"none");const Ce=Math.floor(m[0]/2),Le=h?De?[m[0],Ce]:[Ce-1,0]:m;if(Y.style.zIndex=`${P7(ee.current,T,Le)}`,d){const[He,We]=[O.width/2,O.height/2],Ge=T.projectionMatrix.elements[5]*We,{isOrthographicCamera:je,top:Je,left:G,bottom:k,right:re}=T,be=C7(T.matrixWorldInverse),Ae=je?`scale(${Ge})translate(${Uw(-(re+G)/2)}px,${Uw((Je+k)/2)}px)`:`translateZ(${Ge}px)`;let Ue=ee.current.matrixWorld;u&&(Ue=T.matrixWorldInverse.clone().transpose().copyPosition(Ue).scale(ee.current.scale),Ue.elements[3]=Ue.elements[7]=Ue.elements[11]=0,Ue.elements[15]=1),Y.style.width=O.width+"px",Y.style.height=O.height+"px",Y.style.perspective=je?"":`${Ge}px`,V.current&&ce.current&&(V.current.style.transform=`${Ae}${be}translate(${He}px,${We}px)`,ce.current.style.transform=A7(Ue,1/((l||10)/400)))}else{const He=l===void 0?1:T7(ee.current,T)*l;Y.style.transform=`translate3d(${W[0]}px,${W[1]}px,0) scale(${He})`}j.current=W,F.current=T.zoom}}if(!De&&fe.current&&!de.current)if(d){if(V.current){const W=V.current.children[0];if(W!=null&&W.clientWidth&&W!=null&&W.clientHeight){const{isOrthographicCamera:ne}=T;if(ne||x)P.scale&&(Array.isArray(P.scale)?P.scale instanceof B?fe.current.scale.copy(P.scale.clone().divideScalar(1)):fe.current.scale.set(1/P.scale[0],1/P.scale[1],1/P.scale[2]):fe.current.scale.setScalar(1/P.scale));else{const q=(l||10)/400,se=W.clientWidth*q,Ce=W.clientHeight*q;fe.current.scale.set(se,Ce,1)}de.current=!0}}}else{const W=Y.children[0];if(W!=null&&W.clientWidth&&W!=null&&W.clientHeight){const ne=1/K.factor,q=W.clientWidth*ne,se=W.clientHeight*ne;fe.current.scale.set(q,se,1),de.current=!0}fe.current.lookAt(z.camera.position)}});const U=R.useMemo(()=>({vertexShader:d?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[d]);return R.createElement("group",Oe({},P,{ref:ee}),h&&!De&&R.createElement("mesh",{castShadow:g,receiveShadow:v,ref:fe},x||R.createElement("planeGeometry",null),_||R.createElement("shaderMaterial",{side:Wr,vertexShader:U.vertexShader,fragmentShader:U.fragmentShader})))});function I7(t){let e;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),n.forEach(g=>g(e,p))}},i=()=>e,s=(u,d=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function g(){const v=d(e);if(!h(p,v)){const _=p;u(p=v,_)}}return n.add(g),()=>n.delete(g)},l={setState:r,getState:i,subscribe:(u,d,h)=>d||h?s(u,d,h):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const D7=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),RA=D7?R.useEffect:R.useLayoutEffect;function L7(t){const e=typeof t=="function"?I7(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=R.useReducer(x=>x+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(r),u=R.useRef(i),d=R.useRef(!1),h=R.useRef();h.current===void 0&&(h.current=r(o));let p,g=!1;(a.current!==o||l.current!==r||u.current!==i||d.current)&&(p=r(o),g=!i(h.current,p)),RA(()=>{g&&(h.current=p),a.current=o,l.current=r,u.current=i,d.current=!1});const v=R.useRef(o);RA(()=>{const x=()=>{try{const S=e.getState(),w=l.current(S);u.current(h.current,w)||(a.current=S,h.current=w,s())}catch{d.current=!0,s()}},m=e.subscribe(x);return e.getState()!==v.current&&x(),m},[]);const _=g?p:h.current;return R.useDebugValue(_),_};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}let $d=0;const O7=L7(t=>(Qc.onStart=(e,n,r)=>{t({active:!0,item:e,loaded:n,total:r,progress:(n-$d)/(r-$d)*100})},Qc.onLoad=()=>{t({active:!1})},Qc.onError=e=>t(n=>({errors:[...n.errors,e]})),Qc.onProgress=(e,n,r)=>{n===r&&($d=r),t({active:!0,item:e,loaded:n,total:r,progress:(n-$d)/(r-$d)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function k7(t){return function(e){t.forEach(function(n){typeof n=="function"?n(e):n!=null&&(n.current=e)})}}function Ah(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function U7(t,e){if(t){if(typeof t=="string")return Nw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nw(t,e)}}function N7(t){if(Array.isArray(t))return Nw(t)}function F7(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function z7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B7(t){return N7(t)||F7(t)||U7(t)||z7()}new ue;new ue;function H7(t,e,n){return Math.max(e,Math.min(n,t))}function V7(t,e){return H7(t-Math.floor(t/e)*e,0,e)}function G7(t,e){var n=V7(e-t,Math.PI*2);return n>Math.PI&&(n-=Math.PI*2),n}function Ck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var is=function t(e,n,r){var i=this;Ck(this,t),Ah(this,"dot2",function(s,o){return i.x*s+i.y*o}),Ah(this,"dot3",function(s,o,a){return i.x*s+i.y*o+i.z*a}),this.x=e,this.y=n,this.z=r},W7=[new is(1,1,0),new is(-1,1,0),new is(1,-1,0),new is(-1,-1,0),new is(1,0,1),new is(-1,0,1),new is(1,0,-1),new is(-1,0,-1),new is(0,1,1),new is(0,-1,1),new is(0,1,-1),new is(0,-1,-1)],IA=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],DA=new Array(512),LA=new Array(512),$7=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var n=0;n<256;n++){var r;n&1?r=IA[n]^e&255:r=IA[n]^e>>8&255,DA[n]=DA[n+256]=r,LA[n]=LA[n+256]=W7[r%12]}};$7(0);function j7(t){if(typeof t=="number")t=Math.abs(t);else if(typeof t=="string"){var e=t;t=0;for(var n=0;n<e.length;n++)t=(t+(n+1)*(e.charCodeAt(n)%96))%2147483647}return t===0&&(t=311),t}function OA(t){var e=j7(t);return function(){var n=e*48271%2147483647;return e=n,n/2147483647}}var X7=function t(e){var n=this;Ck(this,t),Ah(this,"seed",0),Ah(this,"init",function(r){n.seed=r,n.value=OA(r)}),Ah(this,"value",OA(this.seed)),this.init(e)};new X7(Math.random());var K7=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return r/Math.atan(1/n)*Math.atan(Math.sin(2*Math.PI*e*i)/n)},Ak=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function ar(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Ak,a=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(t.__damp===void 0&&(t.__damp={}),t.__damp[l]===void 0&&(t.__damp[l]=0),Math.abs(t[e]-n)<=a)return t[e]=n,!1;r=Math.max(1e-4,r);var u=2/r,d=o(u*i),h=t[e]-n,p=n,g=s*r;h=Math.min(Math.max(h,-g),g),n=t[e]-h;var v=(t.__damp[l]+u*h)*i;t.__damp[l]=(t.__damp[l]-u*v)*d;var _=n+(h+v)*d;return p-t[e]>0==_>p&&(_=p,t.__damp[l]=(_-p)/i),t[e]=_,!0}function df(t,e,n,r,i,s,o,a){return ar(t,e,t[e]+G7(t[e],n),r,i,s,o,a)}var jd=new ue,kA,UA;function Y7(t,e,n,r,i,s,o){return typeof e=="number"?jd.setScalar(e):Array.isArray(e)?jd.set(e[0],e[1]):jd.copy(e),kA=ar(t,"x",jd.x,n,r,i,s,o),UA=ar(t,"y",jd.y,n,r,i,s,o),kA||UA}var Mc=new B,NA,FA,zA;function Fw(t,e,n,r,i,s,o){return typeof e=="number"?Mc.setScalar(e):Array.isArray(e)?Mc.set(e[0],e[1],e[2]):Mc.copy(e),NA=ar(t,"x",Mc.x,n,r,i,s,o),FA=ar(t,"y",Mc.y,n,r,i,s,o),zA=ar(t,"z",Mc.z,n,r,i,s,o),NA||FA||zA}var Nl=new bt,BA,HA,VA,GA;function q7(t,e,n,r,i,s,o){return typeof e=="number"?Nl.setScalar(e):Array.isArray(e)?Nl.set(e[0],e[1],e[2],e[3]):Nl.copy(e),BA=ar(t,"x",Nl.x,n,r,i,s,o),HA=ar(t,"y",Nl.y,n,r,i,s,o),VA=ar(t,"z",Nl.z,n,r,i,s,o),GA=ar(t,"w",Nl.w,n,r,i,s,o),BA||HA||VA||GA}var Xd=new Ff,WA,$A,jA;function Z7(t,e,n,r,i,s,o){return Array.isArray(e)?Xd.set(e[0],e[1],e[2],e[3]):Xd.copy(e),WA=df(t,"x",Xd.x,n,r,i,s,o),$A=df(t,"y",Xd.y,n,r,i,s,o),jA=df(t,"z",Xd.z,n,r,i,s,o),WA||$A||jA}var Ec=new ze,XA,KA,YA;function Q7(t,e,n,r,i,s,o){return e instanceof ze?Ec.copy(e):Array.isArray(e)?Ec.setRGB(e[0],e[1],e[2]):Ec.set(e),XA=ar(t,"r",Ec.r,n,r,i,s,o),KA=ar(t,"g",Ec.g,n,r,i,s,o),YA=ar(t,"b",Ec.b,n,r,i,s,o),XA||KA||YA}var ks=new Wn,Vo=new bt,qA=new bt,Kd=new bt,ZA,QA,JA,e3;function Rk(t,e,n,r,i,s,o){var a=t;Array.isArray(e)?ks.set(e[0],e[1],e[2],e[3]):ks.copy(e);var l=t.dot(ks)>0?1:-1;return ks.x*=l,ks.y*=l,ks.z*=l,ks.w*=l,ZA=ar(t,"x",ks.x,n,r,i,s,o),QA=ar(t,"y",ks.y,n,r,i,s,o),JA=ar(t,"z",ks.z,n,r,i,s,o),e3=ar(t,"w",ks.w,n,r,i,s,o),Vo.set(t.x,t.y,t.z,t.w).normalize(),qA.set(a.__damp.velocity_x,a.__damp.velocity_y,a.__damp.velocity_z,a.__damp.velocity_w),Kd.copy(Vo).multiplyScalar(qA.dot(Vo)/Vo.dot(Vo)),a.__damp.velocity_x-=Kd.x,a.__damp.velocity_y-=Kd.y,a.__damp.velocity_z-=Kd.z,a.__damp.velocity_w-=Kd.w,t.set(Vo.x,Vo.y,Vo.z,Vo.w),ZA||QA||JA||e3}var Yd=new xp,t3,n3,r3;function J7(t,e,n,r,i,s,o){return Array.isArray(e)?Yd.set(e[0],e[1],e[2]):Yd.copy(e),t3=ar(t,"radius",Yd.radius,n,r,i,s,o),n3=df(t,"phi",Yd.phi,n,r,i,s,o),r3=df(t,"theta",Yd.theta,n,r,i,s,o),t3||n3||r3}var uv=new at,i3=new B,s3=new Wn,o3=new B,a3,l3,u3;function ej(t,e,n,r,i,s,o){var a=t;return a.__damp===void 0&&(a.__damp={position:new B,rotation:new Wn,scale:new B},t.decompose(a.__damp.position,a.__damp.rotation,a.__damp.scale)),Array.isArray(e)?uv.set.apply(uv,B7(e)):uv.copy(e),uv.decompose(i3,s3,o3),a3=Fw(a.__damp.position,i3,n,r,i,s,o),l3=Rk(a.__damp.rotation,s3,n,r,i,s,o),u3=Fw(a.__damp.scale,o3,n,r,i,s,o),t.compose(a.__damp.position,a.__damp.rotation,a.__damp.scale),a3||l3||u3}var tj=Object.freeze({__proto__:null,rsqw:K7,exp:Ak,damp:ar,dampAngle:df,damp2:Y7,damp3:Fw,damp4:q7,dampE:Z7,dampC:Q7,dampQ:Rk,dampS:J7,dampM:ej});function nj(t,e,n){return Math.max(e,Math.min(t,n))}const $r={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function c3(t,e,n){return e===0||Math.abs(e)===1/0?Math.pow(t,n*5):t*e*n/(e+n*t)}function f3(t,e,n,r=.15){return r===0?nj(t,e,n):t<e?-c3(e-t,n-e,r)+e:t>n?+c3(t-n,n-e,r)+n:t}function rj(t,[e,n],[r,i]){const[[s,o],[a,l]]=t;return[f3(e,s,o,r),f3(n,a,l,i)]}function ij(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function sj(t){var e=ij(t,"string");return typeof e=="symbol"?e:String(e)}function pi(t,e,n){return e=sj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d3(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?d3(Object(n),!0).forEach(function(r){pi(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d3(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const Ik={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function h3(t){return t?t[0].toUpperCase()+t.slice(1):""}const oj=["enter","leave"];function aj(t=!1,e){return t&&!oj.includes(e)}function lj(t,e="",n=!1){const r=Ik[t],i=r&&r[e]||e;return"on"+h3(t)+h3(i)+(aj(n,i)?"Capture":"")}const uj=["gotpointercapture","lostpointercapture"];function cj(t){let e=t.substring(2).toLowerCase();const n=!!~e.indexOf("passive");n&&(e=e.replace("passive",""));const r=uj.includes(e)?"capturecapture":"capture",i=!!~e.indexOf(r);return i&&(e=e.replace("capture","")),{device:e,capture:i,passive:n}}function fj(t,e=""){const n=Ik[t],r=n&&n[e]||e;return t+r}function Cy(t){return"touches"in t}function Dk(t){return Cy(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function dj(t){return Array.from(t.touches).filter(e=>{var n,r;return e.target===t.currentTarget||((n=t.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,e.target))})}function hj(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function Lk(t){return Cy(t)?hj(t)[0]:t}function pj(t){return dj(t).map(e=>e.identifier)}function T_(t){const e=Lk(t);return Cy(t)?e.identifier:e.pointerId}function p3(t){const e=Lk(t);return[e.clientX,e.clientY]}function mj(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s}=t;Object.assign(e,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:s})}return e}function D0(t,...e){return typeof t=="function"?t(...e):t}function gj(){}function vj(...t){return t.length===0?gj:t.length===1?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function m3(t,e){return Object.assign({},e,t||{})}const yj=32;class xj{constructor(e,n,r){this.ctrl=e,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:n,ingKey:r,args:i}=this;n[r]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=i,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=e.target,n.currentTarget=e.currentTarget,n.lastOffset=r.from?D0(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=e.timeStamp)}computeValues(e){const n=this.state;n._values=e,n.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:n,config:r,shared:i}=this;n.args=this.args;let s=0;if(e&&(n.event=e,r.preventDefault&&e.cancelable&&n.event.preventDefault(),n.type=e.type,i.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,i.locked=!!document.pointerLockElement,Object.assign(i,mj(e)),i.down=i.pressed=i.buttons%2===1||i.touches>0,s=e.timeStamp-n.timeStamp,n.timeStamp=e.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const P=n._delta.map(Math.abs);$r.addTo(n._distance,P)}this.axisIntent&&this.axisIntent(e);const[o,a]=n._movement,[l,u]=r.threshold,{_step:d,values:h}=n;if(r.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=l&&h[0]),d[1]===!1&&(d[1]=Math.abs(a)>=u&&h[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=l&&Math.sign(o)*l),d[1]===!1&&(d[1]=Math.abs(a)>=u&&Math.sign(a)*u)),n.intentional=d[0]!==!1||d[1]!==!1,!n.intentional)return;const p=[0,0];if(r.hasCustomTransform){const[P,D]=h;p[0]=d[0]!==!1?P-d[0]:0,p[1]=d[1]!==!1?D-d[1]:0}else p[0]=d[0]!==!1?o-d[0]:0,p[1]=d[1]!==!1?a-d[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(p);const g=n.offset,v=n._active&&!n._blocked||n.active;v&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=i[this.ingKey]=n._active,e&&(n.first&&("bounds"in r&&(n._bounds=D0(r.bounds,n)),this.setup&&this.setup()),n.movement=p,this.computeOffset()));const[_,x]=n.offset,[[m,S],[w,M]]=n._bounds;n.overflow=[_<m?-1:_>S?1:0,x<w?-1:x>M?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const I=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=rj(n._bounds,n.offset,I),n.delta=$r.sub(n.offset,g),this.computeMovement(),v&&(!n.last||s>yj)){n.delta=$r.sub(n.offset,g);const P=n.delta.map(Math.abs);$r.addTo(n.distance,P),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&s>0&&(n.velocity=[P[0]/s,P[1]/s],n.timeDelta=s)}}emit(){const e=this.state,n=this.shared,r=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!r.triggerAllEvents)return;const i=this.handler(An(An(An({},n),e),{},{[this.aliasKey]:e.values}));i!==void 0&&(e.memo=i)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function _j([t,e],n){const r=Math.abs(t),i=Math.abs(e);if(r>i&&r>n)return"x";if(i>r&&i>n)return"y"}class Sj extends xj{constructor(...e){super(...e),pi(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=$r.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=$r.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const n=this.state,r=this.config;if(!n.axis&&e){const i=typeof r.axisThreshold=="object"?r.axisThreshold[Dk(e)]:r.axisThreshold;n.axis=_j(n._movement,i)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const wj=t=>t,g3=.15,Ok={enabled(t=!0){return t},eventOptions(t,e,n){return An(An({},n.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[g3,g3];case!1:return[0,0];default:return $r.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return $r.toVector(t)},transform(t,e,n){const r=t||n.shared.transform;return this.hasCustomTransform=!!r,r||wj},threshold(t){return $r.toVector(t,0)}},bj=0,Zp=An(An({},Ok),{},{axis(t,e,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(t=bj){return t},bounds(t={}){if(typeof t=="function")return s=>Zp.bounds(t(s));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=t;return[[e,n],[r,i]]}}),v3={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class Mj extends Sj{constructor(...e){super(...e),pi(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const n=e._bounds.getBoundingClientRect(),r=e.currentTarget.getBoundingClientRect(),i={left:n.left-r.left+e.offset[0],right:n.right-r.right+e.offset[0],top:n.top-r.top+e.offset[1],bottom:n.bottom-r.bottom+e.offset[1]};e._bounds=Zp.bounds(i)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const n=this.config,r=this.state;if(e.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(e.buttons):n.pointerButtons!==-1&&n.pointerButtons!==e.buttons))return;const i=this.ctrl.setEventIds(e);n.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(i&&i.size>1&&r._pointerActive)&&(this.start(e),this.setupPointer(e),r._pointerId=T_(e),r._pointerActive=!0,this.computeValues(p3(e)),this.computeInitial(),n.preventScrollAxis&&Dk(e)!=="mouse"?(r._active=!1,this.setupScrollPrevention(e)):n.delay>0?(this.setupDelayTrigger(e),n.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const n=this.state,r=this.config;if(!n._pointerActive||n.type===e.type&&e.timeStamp===n.timeStamp)return;const i=T_(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;const s=p3(e);if(document.pointerLockElement===e.target?n._delta=[e.movementX,e.movementY]:(n._delta=$r.sub(s,n._values),this.computeValues(s)),$r.addTo(n._movement,n._delta),this.compute(e),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(e);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const i=T_(e);if(n._pointerId!==void 0&&i!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[s,o]=n._distance;if(n.tap=s<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[a,l]=n._delta,[u,d]=n._movement,[h,p]=r.swipe.velocity,[g,v]=r.swipe.distance,_=r.swipe.duration;if(n.elapsedTime<_){const x=Math.abs(a/n.timeDelta),m=Math.abs(l/n.timeDelta);x>h&&Math.abs(u)>g&&(n.swipe[0]=Math.sign(a)),m>p&&Math.abs(d)>v&&(n.swipe[1]=Math.sign(l))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const n=this.config,r=n.device;n.pointerLock&&e.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Ej(e);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const n=v3[e.key];if(n){const r=this.state,i=e.shiftKey?10:e.altKey?.1:1;this.start(e),r._delta=n(this.config.keyboardDisplacement,i),r._keyboardActive=!0,$r.addTo(r._movement,r._delta),this.compute(e),this.emit()}}keyUp(e){e.key in v3&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const n=this.config.device;e(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(n,"change",this.pointerMove.bind(this)),e(n,"end",this.pointerUp.bind(this)),e(n,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Ej(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Qp=typeof window<"u"&&window.document&&window.document.createElement;function Tj(){return Qp&&"ontouchstart"in window}function y3(){return Tj()||Qp&&window.navigator.maxTouchPoints>1}function Pj(){return Qp&&"onpointerdown"in window}function Cj(){return Qp&&"exitPointerLock"in window.document}function Aj(){try{return"constructor"in GestureEvent}catch{return!1}}const cs={isBrowser:Qp,gesture:Aj(),touch:y3(),touchscreen:y3(),pointer:Pj(),pointerLock:Cj()},Rj=250,Ij=180,Dj=.5,Lj=50,Oj=250,kj=10,x3={mouse:0,touch:0,pen:8},Uj=An(An({},Zp),{},{device(t,e,{pointer:{touch:n=!1,lock:r=!1,mouse:i=!1}={}}){return this.pointerLock=r&&cs.pointerLock,cs.touch&&n?"touch":this.pointerLock?"mouse":cs.pointer&&!i?"pointer":cs.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&t?Rj:void 0,!(!cs.touchscreen||n===!1))return t||(n!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:n=!0,buttons:r=1,keys:i=!0}={}}){return this.pointerButtons=r,this.keys=i,!this.pointerLock&&this.device==="pointer"&&n},threshold(t,e,{filterTaps:n=!1,tapsThreshold:r=3,axis:i=void 0}){const s=$r.toVector(t,n?r:i?1:0);return this.filterTaps=n,this.tapsThreshold=r,s},swipe({velocity:t=Dj,distance:e=Lj,duration:n=Oj}={}){return{velocity:this.transform($r.toVector(t)),distance:this.transform($r.toVector(e)),duration:n}},delay(t=0){switch(t){case!0:return Ij;case!1:return 0;default:return t}},axisThreshold(t){return t?An(An({},x3),t):x3},keyboardDisplacement(t=kj){return t}});An(An({},Ok),{},{device(t,e,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!cs.touch&&cs.gesture)return"gesture";if(cs.touch&&r)return"touch";if(cs.touchscreen){if(cs.pointer)return"pointer";if(cs.touch)return"touch"}},bounds(t,e,{scaleBounds:n={},angleBounds:r={}}){const i=o=>{const a=m3(D0(n,o),{min:-1/0,max:1/0});return[a.min,a.max]},s=o=>{const a=m3(D0(r,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof n!="function"&&typeof r!="function"?[i(),s()]:o=>[i(o),s(o)]},threshold(t,e,n){return this.lockDirection=n.axis==="lock",$r.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});An(An({},Zp),{},{mouseOnly:(t=!0)=>t});An(An({},Zp),{},{mouseOnly:(t=!0)=>t});const kk=new Map,zw=new Map;function Nj(t){kk.set(t.key,t.engine),zw.set(t.key,t.resolver)}const Fj={key:"drag",engine:Mj,resolver:Uj};function zj(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Bj(t,e){if(t==null)return{};var n=zj(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}const Hj={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=cs.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},Vj=["target","eventOptions","window","enabled","transform"];function Kv(t={},e){const n={};for(const[r,i]of Object.entries(e))switch(typeof i){case"function":n[r]=i.call(n,t[r],r,t);break;case"object":n[r]=Kv(t[r],i);break;case"boolean":i&&(n[r]=t[r]);break}return n}function Gj(t,e,n={}){const r=t,{target:i,eventOptions:s,window:o,enabled:a,transform:l}=r,u=Bj(r,Vj);if(n.shared=Kv({target:i,eventOptions:s,window:o,enabled:a,transform:l},Hj),e){const d=zw.get(e);n[e]=Kv(An({shared:n.shared},u),d)}else for(const d in u){const h=zw.get(d);h&&(n[d]=Kv(An({shared:n.shared},u[d]),h))}return n}class Uk{constructor(e,n){pi(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=n}add(e,n,r,i,s){const o=this._listeners,a=fj(n,r),l=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=An(An({},l),s);e.addEventListener(a,i,u);const d=()=>{e.removeEventListener(a,i,u),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Wj{constructor(){pi(this,"_timeouts",new Map)}add(e,n,r=140,...i){this.remove(e),this._timeouts.set(e,window.setTimeout(n,r,...i))}remove(e){const n=this._timeouts.get(e);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class $j{constructor(e){pi(this,"gestures",new Set),pi(this,"_targetEventStore",new Uk(this)),pi(this,"gestureEventStores",{}),pi(this,"gestureTimeoutStores",{}),pi(this,"handlers",{}),pi(this,"config",{}),pi(this,"pointerIds",new Set),pi(this,"touchIds",new Set),pi(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),jj(this,e)}setEventIds(e){if(Cy(e))return this.touchIds=new Set(pj(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,n){this.handlers=e,this.nativeHandlers=n}applyConfig(e,n){this.config=Gj(e,n,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const n=this.config.shared,r={};let i;if(!(n.target&&(i=n.target(),!i))){if(n.enabled){for(const o of this.gestures){const a=this.config[o],l=_3(r,a.eventOptions,!!i);if(a.enabled){const u=kk.get(o);new u(this,e,o).bind(l)}}const s=_3(r,n.eventOptions,!!i);for(const o in this.nativeHandlers)s(o,"",a=>this.nativeHandlers[o](An(An({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const s in r)r[s]=vj(...r[s]);if(!i)return r;for(const s in r){const{device:o,capture:a,passive:l}=cj(s);this._targetEventStore.add(i,o,"",r[s],{capture:a,passive:l})}}}}function Tc(t,e){t.gestures.add(e),t.gestureEventStores[e]=new Uk(t,e),t.gestureTimeoutStores[e]=new Wj}function jj(t,e){e.drag&&Tc(t,"drag"),e.wheel&&Tc(t,"wheel"),e.scroll&&Tc(t,"scroll"),e.move&&Tc(t,"move"),e.pinch&&Tc(t,"pinch"),e.hover&&Tc(t,"hover")}const _3=(t,e,n)=>(r,i,s,o={},a=!1)=>{var l,u;const d=(l=o.capture)!==null&&l!==void 0?l:e.capture,h=(u=o.passive)!==null&&u!==void 0?u:e.passive;let p=a?r:lj(r,i,d);n&&h&&(p+="Passive"),t[p]=t[p]||[],t[p].push(s)};function Xj(t,e={},n,r){const i=Z.useMemo(()=>new $j(t),[]);if(i.applyHandlers(t,r),i.applyConfig(e,n),Z.useEffect(i.effect.bind(i)),Z.useEffect(()=>i.clean.bind(i),[]),e.target===void 0)return i.bind.bind(i)}function Kj(t,e){return Nj(Fj),Xj({drag:t},e||{},"drag")}function Sp(t){return Sp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sp(t)}function Yj(t,e){if(Sp(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Sp(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function qj(t){var e=Yj(t,"string");return Sp(e)==="symbol"?e:String(e)}function ht(t,e,n){return e=qj(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}let qd;function Zj(){if(qd!==void 0)return qd;try{var t;let e;const n=document.createElement("canvas");return qd=!!(window.WebGL2RenderingContext&&(e=n.getContext("webgl2"))),e&&((t=e.getExtension("WEBGL_lose_context"))===null||t===void 0||t.loseContext()),qd}catch{return qd=!1}}const S3=(t,e)=>(t%e+e)%e;let Qj=class extends Gi{constructor(e,n){super(),ht(this,"object",void 0),ht(this,"domElement",void 0),ht(this,"enabled",!0),ht(this,"target",new B),ht(this,"minDistance",0),ht(this,"maxDistance",1/0),ht(this,"minZoom",0),ht(this,"maxZoom",1/0),ht(this,"minPolarAngle",0),ht(this,"maxPolarAngle",Math.PI),ht(this,"minAzimuthAngle",-1/0),ht(this,"maxAzimuthAngle",1/0),ht(this,"enableDamping",!1),ht(this,"dampingFactor",.05),ht(this,"enableZoom",!0),ht(this,"zoomSpeed",1),ht(this,"enableRotate",!0),ht(this,"rotateSpeed",1),ht(this,"enablePan",!0),ht(this,"panSpeed",1),ht(this,"screenSpacePanning",!0),ht(this,"keyPanSpeed",7),ht(this,"autoRotate",!1),ht(this,"autoRotateSpeed",2),ht(this,"reverseOrbit",!1),ht(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),ht(this,"mouseButtons",{LEFT:Bl.ROTATE,MIDDLE:Bl.DOLLY,RIGHT:Bl.PAN}),ht(this,"touches",{ONE:Hl.ROTATE,TWO:Hl.DOLLY_PAN}),ht(this,"target0",void 0),ht(this,"position0",void 0),ht(this,"zoom0",void 0),ht(this,"_domElementKeyEvents",null),ht(this,"getPolarAngle",void 0),ht(this,"getAzimuthalAngle",void 0),ht(this,"setPolarAngle",void 0),ht(this,"setAzimuthalAngle",void 0),ht(this,"getDistance",void 0),ht(this,"listenToKeyEvents",void 0),ht(this,"saveState",void 0),ht(this,"reset",void 0),ht(this,"update",void 0),ht(this,"connect",void 0),ht(this,"dispose",void 0),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object instanceof jt?this.object.zoom:1,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=te=>{let xe=S3(te,2*Math.PI),Re=d.phi;Re<0&&(Re+=2*Math.PI),xe<0&&(xe+=2*Math.PI);let Ne=Math.abs(xe-Re);2*Math.PI-Ne<Ne&&(xe<Re?xe+=2*Math.PI:Re+=2*Math.PI),h.phi=xe-Re,r.update()},this.setAzimuthalAngle=te=>{let xe=S3(te,2*Math.PI),Re=d.theta;Re<0&&(Re+=2*Math.PI),xe<0&&(xe+=2*Math.PI);let Ne=Math.abs(xe-Re);2*Math.PI-Ne<Ne&&(xe<Re?xe+=2*Math.PI:Re+=2*Math.PI),h.theta=xe-Re,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=te=>{te.addEventListener("keydown",re),this._domElementKeyEvents=te},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object instanceof jt?r.object.zoom:1},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object instanceof jt&&(r.object.zoom=r.zoom0,r.object.updateProjectionMatrix()),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const te=new B,xe=new Wn().setFromUnitVectors(e.up,new B(0,1,0)),Re=xe.clone().invert(),Ne=new B,nt=new Wn,pt=2*Math.PI;return function(){const ie=r.object.position;te.copy(ie).sub(r.target),te.applyQuaternion(xe),d.setFromVector3(te),r.autoRotate&&l===a.NONE&&N(E()),r.enableDamping?(d.theta+=h.theta*r.dampingFactor,d.phi+=h.phi*r.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);let _e=r.minAzimuthAngle,ke=r.maxAzimuthAngle;return isFinite(_e)&&isFinite(ke)&&(_e<-Math.PI?_e+=pt:_e>Math.PI&&(_e-=pt),ke<-Math.PI?ke+=pt:ke>Math.PI&&(ke-=pt),_e<=ke?d.theta=Math.max(_e,Math.min(ke,d.theta)):d.theta=d.theta>(_e+ke)/2?Math.max(_e,d.theta):Math.min(ke,d.theta)),d.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=p,d.radius=Math.max(r.minDistance,Math.min(r.maxDistance,d.radius)),r.enableDamping===!0?r.target.addScaledVector(g,r.dampingFactor):r.target.add(g),te.setFromSpherical(d),te.applyQuaternion(Re),ie.copy(r.target).add(te),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,g.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),g.set(0,0,0)),p=1,v||Ne.distanceToSquared(r.object.position)>u||8*(1-nt.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Ne.copy(r.object.position),nt.copy(r.object.quaternion),v=!1,!0):!1}})(),this.connect=te=>{te===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),r.domElement=te,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Ue),r.domElement.addEventListener("pointerdown",He),r.domElement.addEventListener("pointercancel",je),r.domElement.addEventListener("wheel",k)},this.dispose=()=>{var te,xe,Re,Ne,nt,pt;(te=r.domElement)===null||te===void 0||te.removeEventListener("contextmenu",Ue),(xe=r.domElement)===null||xe===void 0||xe.removeEventListener("pointerdown",He),(Re=r.domElement)===null||Re===void 0||Re.removeEventListener("pointercancel",je),(Ne=r.domElement)===null||Ne===void 0||Ne.removeEventListener("wheel",k),(nt=r.domElement)===null||nt===void 0||nt.ownerDocument.removeEventListener("pointermove",We),(pt=r.domElement)===null||pt===void 0||pt.ownerDocument.removeEventListener("pointerup",Ge),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",re)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,d=new xp,h=new xp;let p=1;const g=new B;let v=!1;const _=new ue,x=new ue,m=new ue,S=new ue,w=new ue,M=new ue,I=new ue,P=new ue,D=new ue,A=[],T={};function E(){return 2*Math.PI/60/60*r.autoRotateSpeed}function O(){return Math.pow(.95,r.zoomSpeed)}function N(te){r.reverseOrbit?h.theta+=te:h.theta-=te}function H(te){r.reverseOrbit?h.phi+=te:h.phi-=te}const K=(()=>{const te=new B;return function(Re,Ne){te.setFromMatrixColumn(Ne,0),te.multiplyScalar(-Re),g.add(te)}})(),Y=(()=>{const te=new B;return function(Re,Ne){r.screenSpacePanning===!0?te.setFromMatrixColumn(Ne,1):(te.setFromMatrixColumn(Ne,0),te.crossVectors(r.object.up,te)),te.multiplyScalar(Re),g.add(te)}})(),Q=(()=>{const te=new B;return function(Re,Ne){const nt=r.domElement;if(nt&&r.object instanceof jt&&r.object.isPerspectiveCamera){const pt=r.object.position;te.copy(pt).sub(r.target);let Kt=te.length();Kt*=Math.tan(r.object.fov/2*Math.PI/180),K(2*Re*Kt/nt.clientHeight,r.object.matrix),Y(2*Ne*Kt/nt.clientHeight,r.object.matrix)}else nt&&r.object instanceof $s&&r.object.isOrthographicCamera?(K(Re*(r.object.right-r.object.left)/r.object.zoom/nt.clientWidth,r.object.matrix),Y(Ne*(r.object.top-r.object.bottom)/r.object.zoom/nt.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function ee(te){r.object instanceof jt&&r.object.isPerspectiveCamera?p/=te:r.object instanceof $s&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom*te)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function F(te){r.object instanceof jt&&r.object.isPerspectiveCamera?p*=te:r.object instanceof $s&&r.object.isOrthographicCamera?(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/te)),r.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function j(te){_.set(te.clientX,te.clientY)}function V(te){I.set(te.clientX,te.clientY)}function ce(te){S.set(te.clientX,te.clientY)}function ae(te){x.set(te.clientX,te.clientY),m.subVectors(x,_).multiplyScalar(r.rotateSpeed);const xe=r.domElement;xe&&(N(2*Math.PI*m.x/xe.clientHeight),H(2*Math.PI*m.y/xe.clientHeight)),_.copy(x),r.update()}function fe(te){P.set(te.clientX,te.clientY),D.subVectors(P,I),D.y>0?ee(O()):D.y<0&&F(O()),I.copy(P),r.update()}function de(te){w.set(te.clientX,te.clientY),M.subVectors(w,S).multiplyScalar(r.panSpeed),Q(M.x,M.y),S.copy(w),r.update()}function De(te){te.deltaY<0?F(O()):te.deltaY>0&&ee(O()),r.update()}function Ee(te){let xe=!1;switch(te.code){case r.keys.UP:Q(0,r.keyPanSpeed),xe=!0;break;case r.keys.BOTTOM:Q(0,-r.keyPanSpeed),xe=!0;break;case r.keys.LEFT:Q(r.keyPanSpeed,0),xe=!0;break;case r.keys.RIGHT:Q(-r.keyPanSpeed,0),xe=!0;break}xe&&(te.preventDefault(),r.update())}function J(){if(A.length==1)_.set(A[0].pageX,A[0].pageY);else{const te=.5*(A[0].pageX+A[1].pageX),xe=.5*(A[0].pageY+A[1].pageY);_.set(te,xe)}}function ve(){if(A.length==1)S.set(A[0].pageX,A[0].pageY);else{const te=.5*(A[0].pageX+A[1].pageX),xe=.5*(A[0].pageY+A[1].pageY);S.set(te,xe)}}function U(){const te=A[0].pageX-A[1].pageX,xe=A[0].pageY-A[1].pageY,Re=Math.sqrt(te*te+xe*xe);I.set(0,Re)}function z(){r.enableZoom&&U(),r.enablePan&&ve()}function W(){r.enableZoom&&U(),r.enableRotate&&J()}function ne(te){if(A.length==1)x.set(te.pageX,te.pageY);else{const Re=Ke(te),Ne=.5*(te.pageX+Re.x),nt=.5*(te.pageY+Re.y);x.set(Ne,nt)}m.subVectors(x,_).multiplyScalar(r.rotateSpeed);const xe=r.domElement;xe&&(N(2*Math.PI*m.x/xe.clientHeight),H(2*Math.PI*m.y/xe.clientHeight)),_.copy(x)}function q(te){if(A.length==1)w.set(te.pageX,te.pageY);else{const xe=Ke(te),Re=.5*(te.pageX+xe.x),Ne=.5*(te.pageY+xe.y);w.set(Re,Ne)}M.subVectors(w,S).multiplyScalar(r.panSpeed),Q(M.x,M.y),S.copy(w)}function se(te){const xe=Ke(te),Re=te.pageX-xe.x,Ne=te.pageY-xe.y,nt=Math.sqrt(Re*Re+Ne*Ne);P.set(0,nt),D.set(0,Math.pow(P.y/I.y,r.zoomSpeed)),ee(D.y),I.copy(P)}function Ce(te){r.enableZoom&&se(te),r.enablePan&&q(te)}function Le(te){r.enableZoom&&se(te),r.enableRotate&&ne(te)}function He(te){if(r.enabled!==!1){if(A.length===0){var xe,Re;(xe=r.domElement)===null||xe===void 0||xe.ownerDocument.addEventListener("pointermove",We),(Re=r.domElement)===null||Re===void 0||Re.ownerDocument.addEventListener("pointerup",Ge)}tt(te),te.pointerType==="touch"?be(te):Je(te)}}function We(te){r.enabled!==!1&&(te.pointerType==="touch"?Ae(te):G(te))}function Ge(te){if(Pe(te),A.length===0){var xe,Re,Ne;(xe=r.domElement)===null||xe===void 0||xe.releasePointerCapture(te.pointerId),(Re=r.domElement)===null||Re===void 0||Re.ownerDocument.removeEventListener("pointermove",We),(Ne=r.domElement)===null||Ne===void 0||Ne.ownerDocument.removeEventListener("pointerup",Ge)}r.dispatchEvent(o),l=a.NONE}function je(te){Pe(te)}function Je(te){let xe;switch(te.button){case 0:xe=r.mouseButtons.LEFT;break;case 1:xe=r.mouseButtons.MIDDLE;break;case 2:xe=r.mouseButtons.RIGHT;break;default:xe=-1}switch(xe){case Bl.DOLLY:if(r.enableZoom===!1)return;V(te),l=a.DOLLY;break;case Bl.ROTATE:if(te.ctrlKey||te.metaKey||te.shiftKey){if(r.enablePan===!1)return;ce(te),l=a.PAN}else{if(r.enableRotate===!1)return;j(te),l=a.ROTATE}break;case Bl.PAN:if(te.ctrlKey||te.metaKey||te.shiftKey){if(r.enableRotate===!1)return;j(te),l=a.ROTATE}else{if(r.enablePan===!1)return;ce(te),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function G(te){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;ae(te);break;case a.DOLLY:if(r.enableZoom===!1)return;fe(te);break;case a.PAN:if(r.enablePan===!1)return;de(te);break}}function k(te){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(te.preventDefault(),r.dispatchEvent(s),De(te),r.dispatchEvent(o))}function re(te){r.enabled===!1||r.enablePan===!1||Ee(te)}function be(te){switch(Se(te),A.length){case 1:switch(r.touches.ONE){case Hl.ROTATE:if(r.enableRotate===!1)return;J(),l=a.TOUCH_ROTATE;break;case Hl.PAN:if(r.enablePan===!1)return;ve(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Hl.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;z(),l=a.TOUCH_DOLLY_PAN;break;case Hl.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;W(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Ae(te){switch(Se(te),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ne(te),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;q(te),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ce(te),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;Le(te),r.update();break;default:l=a.NONE}}function Ue(te){r.enabled!==!1&&te.preventDefault()}function tt(te){A.push(te)}function Pe(te){delete T[te.pointerId];for(let xe=0;xe<A.length;xe++)if(A[xe].pointerId==te.pointerId){A.splice(xe,1);return}}function Se(te){let xe=T[te.pointerId];xe===void 0&&(xe=new ue,T[te.pointerId]=xe),xe.set(te.pageX,te.pageY)}function Ke(te){const xe=te.pointerId===A[0].pointerId?A[1]:A[0];return T[xe.pointerId]}n!==void 0&&this.connect(n),this.update()}},Jj=class{constructor(){ht(this,"enabled",!0),ht(this,"needsSwap",!0),ht(this,"clear",!1),ht(this,"renderToScreen",!1)}setSize(e,n){}render(e,n,r,i,s){console.error("THREE.Pass: .render() must be implemented in derived pass.")}};class eX{constructor(e){ht(this,"camera",new $s(-1,1,1,-1,0,1)),ht(this,"geometry",new Ru(2,2)),ht(this,"mesh",void 0),this.mesh=new Qn(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}const w3={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)},b3={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new ze(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	vec3 luma = vec3( 0.299, 0.587, 0.114 );","	float v = dot( texel.xyz, luma );","	vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","	float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","	gl_FragColor = mix( outputColor, texel, alpha );","}"].join(`
`)};var nu=function(t,e,n,r){this.strength=e!==void 0?e:1,this.radius=n,this.threshold=r,this.resolution=t!==void 0?new ue(t.x,t.y):new ue(256,256),this.clearColor=new ze(0,0,0);var i={minFilter:ot,magFilter:ot,format:vn};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var u=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);this.renderTargetBright=new Lt(u,d,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let g=0;g<this.nMips;g++){var s=new Lt(u,d,i);s.texture.name="UnrealBloomPass.h"+g,s.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(s);var o=new Lt(u,d,i);o.texture.name="UnrealBloomPass.v"+g,o.texture.generateMipmaps=!1,this.renderTargetsVertical.push(o),u=Math.round(u/2),d=Math.round(d/2)}b3===void 0&&console.error("THREE.UnrealBloomPass relies on LuminosityHighPassShader");var a=b3;this.highPassUniforms=Ef.clone(a.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Ot({uniforms:this.highPassUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var l=[3,5,7,9,11],u=Math.round(this.resolution.x/2),d=Math.round(this.resolution.y/2);for(let g=0;g<this.nMips;g++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(l[g])),this.separableBlurMaterials[g].uniforms.texSize.value=new ue(u,d),u=Math.round(u/2),d=Math.round(d/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;var h=[1,.8,.6,.4,.2];this.compositeMaterial.uniforms.bloomFactors.value=h,this.bloomTintColors=[new B(1,1,1),new B(1,1,1),new B(1,1,1),new B(1,1,1),new B(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,w3===void 0&&console.error("THREE.UnrealBloomPass relies on CopyShader");var p=w3;this.copyUniforms=Ef.clone(p.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Ot({uniforms:this.copyUniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader,blending:ep,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new ze,this.oldClearAlpha=1,this.basic=new Ys,this.fsQuad=new eX(null)};nu.prototype=Object.assign(Object.create(Jj.prototype),{constructor:nu,dispose:function(){for(let t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(let t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,e){var n=Math.round(t/2),r=Math.round(e/2);this.renderTargetBright.setSize(n,r);for(let i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new ue(n,r),n=Math.round(n/2),r=Math.round(r/2)},render:function(t,e,n,r,i){t.getClearColor(this._oldClearColor),this.oldClearAlpha=t.getClearAlpha();var s=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),i&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);var o=this.renderTargetBright;for(let a=0;a<this.nMips;a++)this.fsQuad.material=this.separableBlurMaterials[a],this.separableBlurMaterials[a].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[a].uniforms.direction.value=nu.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[a]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[a].uniforms.colorTexture.value=this.renderTargetsHorizontal[a].texture,this.separableBlurMaterials[a].uniforms.direction.value=nu.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[a]),t.clear(),this.fsQuad.render(t),o=this.renderTargetsVertical[a];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this._oldClearColor,this.oldClearAlpha),t.autoClear=s},getSeperableBlurMaterial:function(t){return new Ot({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new ue(.5,.5)},direction:{value:new ue(.5,.5)}},vertexShader:`varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:`#include <common>varying vec2 vUv;
uniform sampler2D colorTexture;
uniform vec2 texSize;uniform vec2 direction;
float gaussianPdf(in float x, in float sigma) {	return 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;}void main() {
	vec2 invSize = 1.0 / texSize;	float fSigma = float(SIGMA);	float weightSum = gaussianPdf(0.0, fSigma);	vec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;	for( int i = 1; i < KERNEL_RADIUS; i ++ ) {		float x = float(i);		float w = gaussianPdf(x, fSigma);		vec2 uvOffset = direction * invSize * x;		vec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;		vec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;		diffuseSum += (sample1 + sample2) * w;		weightSum += 2.0 * w;	}	gl_FragColor = vec4(diffuseSum/weightSum, 1.0);
}`})},getCompositeMaterial:function(t){return new Ot({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:`varying vec2 vUv;
void main() {
	vUv = uv;
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,fragmentShader:"varying vec2 vUv;uniform sampler2D blurTexture1;uniform sampler2D blurTexture2;uniform sampler2D blurTexture3;uniform sampler2D blurTexture4;uniform sampler2D blurTexture5;uniform sampler2D dirtTexture;uniform float bloomStrength;uniform float bloomRadius;uniform float bloomFactors[NUM_MIPS];uniform vec3 bloomTintColors[NUM_MIPS];float lerpBloomFactor(const in float factor) { 	float mirrorFactor = 1.2 - factor;	return mix(factor, mirrorFactor, bloomRadius);}void main() {	gl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + 									 lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + 									 lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + 									 lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + 									 lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );}"})}});nu.BlurDirectionX=new ue(1,0);nu.BlurDirectionY=new ue(0,1);const M3=new Wi,cv=new B;class pE extends rE{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],n=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],r=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(r),this.setAttribute("position",new et(e,3)),this.setAttribute("uv",new et(n,2))}applyMatrix4(e){const n=this.attributes.instanceStart,r=this.attributes.instanceEnd;return n!==void 0&&(n.applyMatrix4(e),r.applyMatrix4(e),n.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new I0(n,6,1);return this.setAttribute("instanceStart",new Ui(r,3,0)),this.setAttribute("instanceEnd",new Ui(r,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let n;e instanceof Float32Array?n=e:Array.isArray(e)&&(n=new Float32Array(e));const r=new I0(n,6,1);return this.setAttribute("instanceColorStart",new Ui(r,3,0)),this.setAttribute("instanceColorEnd",new Ui(r,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new $M(e.geometry)),this}fromLineSegments(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Wi);const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;e!==void 0&&n!==void 0&&(this.boundingBox.setFromBufferAttribute(e),M3.setFromBufferAttribute(n),this.boundingBox.union(M3))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ss),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,n=this.attributes.instanceEnd;if(e!==void 0&&n!==void 0){const r=this.boundingSphere.center;this.boundingBox.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)cv.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(cv)),cv.fromBufferAttribute(n,s),i=Math.max(i,r.distanceToSquared(cv));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class Nk extends pE{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setPositions(r),this}setColors(e){const n=e.length-3,r=new Float32Array(2*n);for(let i=0;i<n;i+=3)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];return super.setColors(r),this}fromLine(e){const n=e.geometry;return this.setPositions(n.attributes.position.array),this}}Ve.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new ue(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};ni.line={uniforms:Ef.merge([Ve.common,Ve.fog,Ve.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				// get the offset direction as perpendicular to the view vector
				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 offset;
				if ( position.y < 0.5 ) {

					offset = normalize( cross( start.xyz, worldDir ) );

				} else {

					offset = normalize( cross( end.xyz, worldDir ) );

				}

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// extend the line bounds to encompass  endcaps
					start.xyz += - worldDir * linewidth * 0.5;
					end.xyz += worldDir * linewidth * 0.5;

					// shift the position of the quad so it hugs the forward edge of the line
					offset.xy -= dir * forwardOffset;
					offset.z += 0.5;

				#endif

				// endcaps
				if ( position.y > 1.0 || position.y < 0.0 ) {

					offset.xy += dir * 2.0 * forwardOffset;

				}

				// adjust for linewidth
				offset *= linewidth * 0.5;

				// set the world position
				worldPos = ( position.y < 0.5 ) ? start : end;
				worldPos.xyz += offset;

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			float alpha = opacity;

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <encodings_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class mE extends Ot{constructor(e){super({type:"LineMaterial",uniforms:Ef.clone(ni.line.uniforms),vertexShader:ni.line.vertexShader,fragmentShader:ni.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(n){this.uniforms.diffuse.value=n}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(n){n===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(n){this.uniforms.linewidth.value=n}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(n){!!n!="USE_DASH"in this.defines&&(this.needsUpdate=!0),n===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(n){this.uniforms.dashScale.value=n}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(n){this.uniforms.dashSize.value=n}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(n){this.uniforms.dashOffset.value=n}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(n){this.uniforms.gapSize.value=n}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(n){this.uniforms.opacity.value=n}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(n){this.uniforms.resolution.value.copy(n)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(n){!!n!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),n===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const E3=new B,T3=new B,Er=new bt,Tr=new bt,uo=new bt,P_=new B,C_=new at,Vr=new tk,P3=new B,fv=new Wi,dv=new Ss,co=new bt;let vo,Bw,Fk,du;function C3(t,e,n){return co.set(0,0,-e,1).applyMatrix4(t.projectionMatrix),co.multiplyScalar(1/co.w),co.x=du/n.width,co.y=du/n.height,co.applyMatrix4(t.projectionMatrixInverse),co.multiplyScalar(1/co.w),Math.abs(Math.max(co.x,co.y))}function tX(t,e){for(let n=0,r=Bw.count;n<r;n++){Vr.start.fromBufferAttribute(Bw,n),Vr.end.fromBufferAttribute(Fk,n);const i=new B,s=new B;vo.distanceSqToSegment(Vr.start,Vr.end,s,i),s.distanceTo(i)<du*.5&&e.push({point:s,pointOnLine:i,distance:vo.origin.distanceTo(s),object:t,face:null,faceIndex:n,uv:null,uv2:null})}}function nX(t,e,n){const r=e.projectionMatrix,s=t.material.resolution,o=t.matrixWorld,a=t.geometry,l=a.attributes.instanceStart,u=a.attributes.instanceEnd,d=-e.near;vo.at(1,uo),uo.w=1,uo.applyMatrix4(e.matrixWorldInverse),uo.applyMatrix4(r),uo.multiplyScalar(1/uo.w),uo.x*=s.x/2,uo.y*=s.y/2,uo.z=0,P_.copy(uo),C_.multiplyMatrices(e.matrixWorldInverse,o);for(let h=0,p=l.count;h<p;h++){if(Er.fromBufferAttribute(l,h),Tr.fromBufferAttribute(u,h),Er.w=1,Tr.w=1,Er.applyMatrix4(C_),Tr.applyMatrix4(C_),Er.z>d&&Tr.z>d)continue;if(Er.z>d){const S=Er.z-Tr.z,w=(Er.z-d)/S;Er.lerp(Tr,w)}else if(Tr.z>d){const S=Tr.z-Er.z,w=(Tr.z-d)/S;Tr.lerp(Er,w)}Er.applyMatrix4(r),Tr.applyMatrix4(r),Er.multiplyScalar(1/Er.w),Tr.multiplyScalar(1/Tr.w),Er.x*=s.x/2,Er.y*=s.y/2,Tr.x*=s.x/2,Tr.y*=s.y/2,Vr.start.copy(Er),Vr.start.z=0,Vr.end.copy(Tr),Vr.end.z=0;const v=Vr.closestPointToPointParameter(P_,!0);Vr.at(v,P3);const _=dy.lerp(Er.z,Tr.z,v),x=_>=-1&&_<=1,m=P_.distanceTo(P3)<du*.5;if(x&&m){Vr.start.fromBufferAttribute(l,h),Vr.end.fromBufferAttribute(u,h),Vr.start.applyMatrix4(o),Vr.end.applyMatrix4(o);const S=new B,w=new B;vo.distanceSqToSegment(Vr.start,Vr.end,w,S),n.push({point:w,pointOnLine:S,distance:vo.origin.distanceTo(w),object:t,face:null,faceIndex:h,uv:null,uv2:null})}}}class zk extends Qn{constructor(e=new pE,n=new mE({color:Math.random()*16777215})){super(e,n),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,n=e.attributes.instanceStart,r=e.attributes.instanceEnd,i=new Float32Array(2*n.count);for(let o=0,a=0,l=n.count;o<l;o++,a+=2)E3.fromBufferAttribute(n,o),T3.fromBufferAttribute(r,o),i[a]=a===0?0:i[a-1],i[a+1]=i[a]+E3.distanceTo(T3);const s=new I0(i,2,1);return e.setAttribute("instanceDistanceStart",new Ui(s,1,0)),e.setAttribute("instanceDistanceEnd",new Ui(s,1,1)),this}raycast(e,n){const r=this.material.worldUnits,i=e.camera;i===null&&!r&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;vo=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;du=l.linewidth+s,Bw=a.attributes.instanceStart,Fk=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),dv.copy(a.boundingSphere).applyMatrix4(o);let u;if(r)u=du*.5;else{const h=Math.max(i.near,dv.distanceToPoint(vo.origin));u=C3(i,h,l.resolution)}if(dv.radius+=u,vo.intersectsSphere(dv)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),fv.copy(a.boundingBox).applyMatrix4(o);let d;if(r)d=du*.5;else{const h=Math.max(i.near,fv.distanceToPoint(vo.origin));d=C3(i,h,l.resolution)}fv.expandByScalar(d),vo.intersectsBox(fv)!==!1&&(r?tX(this,n):nX(this,i,n))}}class rX extends zk{constructor(e=new Nk,n=new mE({color:Math.random()*16777215})){super(e,n),this.isLine2=!0,this.type="Line2"}}const iX=R.forwardRef(function({points:e,color:n="black",vertexColors:r,linewidth:i,lineWidth:s,segments:o,dashed:a,...l},u){const d=ln(v=>v.size),h=R.useMemo(()=>o?new zk:new rX,[o]),[p]=R.useState(()=>new mE),g=R.useMemo(()=>{const v=o?new pE:new Nk,_=e.map(x=>{const m=Array.isArray(x);return x instanceof B?[x.x,x.y,x.z]:x instanceof ue?[x.x,x.y,0]:m&&x.length===3?[x[0],x[1],x[2]]:m&&x.length===2?[x[0],x[1],0]:x});if(v.setPositions(_.flat()),r){const x=r.map(m=>m instanceof ze?m.toArray():m);v.setColors(x.flat())}return v},[e,o,r]);return R.useLayoutEffect(()=>{h.computeLineDistances()},[e,h]),R.useLayoutEffect(()=>{a?p.defines.USE_DASH="":delete p.defines.USE_DASH,p.needsUpdate=!0},[a,p]),R.useEffect(()=>()=>g.dispose(),[g]),R.createElement("primitive",Oe({object:h,ref:u},l),R.createElement("primitive",{object:g,attach:"geometry"}),R.createElement("primitive",Oe({object:p,attach:"material",color:n,vertexColors:!!r,resolution:[d.width,d.height],linewidth:i??s,dashed:a},l)))});function sX(t,e,n){const r=ln(p=>p.size),i=ln(p=>p.viewport),s=typeof t=="number"?t:r.width*i.dpr,o=typeof e=="number"?e:r.height*i.dpr,a=(typeof t=="number"?n:t)||{},{samples:l=0,depth:u,...d}=a,h=R.useMemo(()=>{const p=new Lt(s,o,{minFilter:ot,magFilter:ot,type:wi,...d});return u&&(p.depthTexture=new Up(s,o,Nn)),p.samples=l,p},[]);return R.useLayoutEffect(()=>{h.setSize(s,o),l&&(h.samples=l)},[l,h,s,o]),R.useEffect(()=>()=>h.dispose(),[]),h}const oX=t=>typeof t=="function",A3=R.forwardRef(({envMap:t,resolution:e=256,frames:n=1/0,makeDefault:r,children:i,...s},o)=>{const a=ln(({set:x})=>x),l=ln(({camera:x})=>x),u=ln(({size:x})=>x),d=R.useRef(null),h=R.useRef(null),p=sX(e);R.useLayoutEffect(()=>{s.manual||(d.current.aspect=u.width/u.height)},[u,s]),R.useLayoutEffect(()=>{d.current.updateProjectionMatrix()});let g=0,v=null;const _=oX(i);return ml(x=>{_&&(n===1/0||g<n)&&(h.current.visible=!1,x.gl.setRenderTarget(p),v=x.scene.background,t&&(x.scene.background=t),x.gl.render(x.scene,d.current),x.scene.background=v,x.gl.setRenderTarget(null),h.current.visible=!0,g++)}),R.useLayoutEffect(()=>{if(r){const x=l;return a(()=>({camera:d.current})),()=>a(()=>({camera:x}))}},[d,r,a]),R.createElement(R.Fragment,null,R.createElement("perspectiveCamera",Oe({ref:k7([d,o])},s),!_&&i),R.createElement("group",{ref:h},_&&i(p.texture)))}),aX=R.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,onChange:s,onStart:o,onEnd:a,...l},u)=>{const d=ln(I=>I.invalidate),h=ln(I=>I.camera),p=ln(I=>I.gl),g=ln(I=>I.events),v=ln(I=>I.setEvents),_=ln(I=>I.set),x=ln(I=>I.get),m=ln(I=>I.performance),S=e||h,w=r||g.connected||p.domElement,M=R.useMemo(()=>new Qj(S),[S]);return ml(()=>{M.enabled&&M.update()},-1),R.useEffect(()=>(M.connect(w),()=>void M.dispose()),[w,n,M,d]),R.useEffect(()=>{const I=A=>{d(),n&&m.regress(),s&&s(A)},P=A=>{o&&o(A)},D=A=>{a&&a(A)};return M.addEventListener("change",I),M.addEventListener("start",P),M.addEventListener("end",D),()=>{M.removeEventListener("start",P),M.removeEventListener("end",D),M.removeEventListener("change",I)}},[s,o,a,M,d,v]),R.useEffect(()=>{if(t){const I=x().controls;return _({controls:M}),()=>_({controls:I})}},[t,M]),R.createElement("primitive",Oe({ref:u,object:M,enableDamping:i},l))});function lX(t,e){const n=t+"Geometry";return R.forwardRef(({args:r,children:i,...s},o)=>{const a=R.useRef(null);return R.useImperativeHandle(o,()=>a.current),R.useLayoutEffect(()=>void(e==null?void 0:e(a.current))),R.createElement("mesh",Oe({ref:a},s),R.createElement(n,{attach:"geometry",args:r}),i)})}const Bk=lX("sphere");class uX extends Ot{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const cX=t=>new B().setFromSpherical(new xp(t,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),fX=R.forwardRef(({radius:t=100,depth:e=50,count:n=5e3,saturation:r=0,factor:i=4,fade:s=!1,speed:o=1},a)=>{const l=R.useRef(),[u,d,h]=R.useMemo(()=>{const g=[],v=[],_=Array.from({length:n},()=>(.5+.5*Math.random())*i),x=new ze;let m=t+e;const S=e/n;for(let w=0;w<n;w++)m-=S*Math.random(),g.push(...cX(m).toArray()),x.setHSL(w/n,r,.9),v.push(x.r,x.g,x.b);return[new Float32Array(g),new Float32Array(v),new Float32Array(_)]},[n,e,i,t,r]);ml(g=>l.current&&(l.current.uniforms.time.value=g.clock.getElapsedTime()*o));const[p]=R.useState(()=>new uX);return R.createElement("points",{ref:a},R.createElement("bufferGeometry",null,R.createElement("bufferAttribute",{attach:"attributes-position",args:[u,3]}),R.createElement("bufferAttribute",{attach:"attributes-color",args:[d,3]}),R.createElement("bufferAttribute",{attach:"attributes-size",args:[h,1]})),R.createElement("primitive",{ref:l,object:p,attach:"material",blending:ep,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});var Hk={exports:{}},dX="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hX=dX,pX=hX;function Vk(){}function Gk(){}Gk.resetWarningCache=Vk;var mX=function(){function t(r,i,s,o,a,l){if(l!==pX){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Gk,resetWarningCache:Vk};return n.PropTypes=n,n};Hk.exports=mX();var gX=Hk.exports;const cn=_s(gX);var Wk=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],vX=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],$k=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"],yX=Wk,xX=yX.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),Hw=$k;Hw=Hw.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)});var _X=Hw.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),SX=IX,wX=Wk,R3=vX,bX=$k,MX=xX,EX=_X,Us=999,I3=9999,A_=0,R_=1,D3=2,L3=3,O3=4,Zd=5,TX=6,PX=7,CX=8,k3=9,AX=10,U3=11,RX=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function IX(t){var e=0,n=0,r=Us,i,s,o=[],a=[],l=1,u=0,d=0,h=!1,p=!1,g="",v;t=t||{};var _=bX,x=wX;t.version==="300 es"&&(_=EX,x=MX);for(var m={},S={},e=0;e<_.length;e++)m[_[e]]=!0;for(var e=0;e<x.length;e++)S[x[e]]=!0;return function(ee){return a=[],ee!==null?M(ee):I()};function w(ee){ee.length&&a.push({type:RX[r],data:ee,position:d,line:l,column:u})}function M(ee){e=0,ee.toString&&(ee=ee.toString()),g+=ee.replace(/\r\n/g,`
`),v=g.length;for(var F;i=g[e],e<v;){switch(F=e,r){case A_:e=E();break;case R_:e=T();break;case D3:e=A();break;case L3:e=O();break;case O3:e=K();break;case U3:e=H();break;case Zd:e=Y();break;case I3:e=Q();break;case k3:e=D();break;case Us:e=P();break}if(F!==e)switch(g[F]){case`
`:u=0,++l;break;default:++u;break}}return n+=e,g=g.slice(e),a}function I(ee){return o.length&&w(o.join("")),r=AX,w("(eof)"),a}function P(){return o=o.length?[]:o,s==="/"&&i==="*"?(d=n+e-1,r=A_,s=i,e+1):s==="/"&&i==="/"?(d=n+e-1,r=R_,s=i,e+1):i==="#"?(r=D3,d=n+e,e):/\s/.test(i)?(r=k3,d=n+e,e):(h=/\d/.test(i),p=/[^\w_]/.test(i),d=n+e,r=h?O3:p?L3:I3,e)}function D(){return/[^\s]/g.test(i)?(w(o.join("")),r=Us,e):(o.push(i),s=i,e+1)}function A(){return(i==="\r"||i===`
`)&&s!=="\\"?(w(o.join("")),r=Us,e):(o.push(i),s=i,e+1)}function T(){return A()}function E(){return i==="/"&&s==="*"?(o.push(i),w(o.join("")),r=Us,e+1):(o.push(i),s=i,e+1)}function O(){if(s==="."&&/\d/.test(i))return r=Zd,e;if(s==="/"&&i==="*")return r=A_,e;if(s==="/"&&i==="/")return r=R_,e;if(i==="."&&o.length){for(;N(o););return r=Zd,e}if(i===";"||i===")"||i==="("){if(o.length)for(;N(o););return w(i),r=Us,e+1}var ee=o.length===2&&i!=="=";if(/[\w_\d\s]/.test(i)||ee){for(;N(o););return r=Us,e}return o.push(i),s=i,e+1}function N(ee){var F=0,j,V;do{if(j=R3.indexOf(ee.slice(0,ee.length+F).join("")),V=R3[j],j===-1){if(F--+ee.length>0)continue;V=ee.slice(0,1).join("")}return w(V),d+=V.length,o=o.slice(V.length),o.length}while(1)}function H(){return/[^a-fA-F0-9]/.test(i)?(w(o.join("")),r=Us,e):(o.push(i),s=i,e+1)}function K(){return i==="."||/[eE]/.test(i)?(o.push(i),r=Zd,s=i,e+1):i==="x"&&o.length===1&&o[0]==="0"?(r=U3,o.push(i),s=i,e+1):/[^\d]/.test(i)?(w(o.join("")),r=Us,e):(o.push(i),s=i,e+1)}function Y(){return i==="f"&&(o.push(i),s=i,e+=1),/[eE]/.test(i)||(i==="-"||i==="+")&&/[eE]/.test(s)?(o.push(i),s=i,e+1):/[^\d]/.test(i)?(w(o.join("")),r=Us,e):(o.push(i),s=i,e+1)}function Q(){if(/[^\d\w_]/.test(i)){var ee=o.join("");return S[ee]?r=CX:m[ee]?r=PX:r=TX,w(o.join("")),r=Us,e}return o.push(i),s=i,e+1}}var DX=SX,LX=OX;function OX(t,e){var n=DX(e),r=[];return r=r.concat(n(t)),r=r.concat(n(null)),r}const Vw=_s(LX);var I_,N3;function kX(){if(N3)return I_;N3=1,I_=t;function t(e){for(var n=!1,r=0,i=0;i<e.length;i++)switch(n=n||e[i].type==="keyword"&&e[i].data==="for",e[i].data){case"(":e[i].depth=n?r++:r;break;case"{":e[i].depth=n?r:r++,n=!1;break;case"}":e[i].depth=--r;break;default:e[i].depth=r}for(var i=0;i<e.length;i++){var s=e[i],o=i+1;if(!(s.type!=="ident"&&s.type!=="keyword")&&(a(),e[o].type==="ident"&&(a(),o++,e[o].data==="("))){for(;e[o]&&e[o].data!==";"&&e[o].data!=="{";)e[o++].depth++;e[o]&&e[o].data==="{"&&e[o].depth++}}return e;function a(){for(;e[o]&&(e[o].type==="whitespace"||e[o].data==="["||e[o].data==="]"||e[o].data==="integer");)o++}}return I_}var D_,F3;function UX(){if(F3)return D_;F3=1,D_=t;function t(e){var n=[0],r=n[0],i=0;if(!e||!e.length)return e;if(!("depth"in e[0]))throw new Error("glsl-token-scope: No scope depth defined on tokens! Use glsl-token-depth on these tokens first");for(var s=0;s<e.length;s++){var o=e[s],a=o.depth;a>i?n.push(++r):a<i&&n.splice(-1,1),o.scope=n[n.length-1],o.stack=n.slice(),i=o.depth}return e}return D_}var L_,z3;function NX(){if(z3)return L_;z3=1,L_=t;function t(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.property=!1,r.type==="ident"){for(var i=n;e[--i]&&e[i].type==="whitespace";);e[i]&&e[i].type==="operator"&&e[i].data==="."&&(r.property=!0)}}return e}return L_}var O_,B3;function FX(){return B3||(B3=1,O_={"<<=":!0,">>=":!0,"++":!0,"--":!0,"+=":!0,"-=":!0,"*=":!0,"/=":!0,"%=":!0,"&=":!0,"^=":!0,"|=":!0,"=":!0}),O_}var k_,H3;function zX(){return H3||(H3=1,k_={precision:!0,highp:!0,mediump:!0,lowp:!0,attribute:!0,const:!0,uniform:!0,varying:!0,break:!0,continue:!0,do:!0,for:!0,while:!0,if:!0,else:!0,in:!0,out:!0,inout:!0,true:!0,false:!0,return:!0}),k_}var U_,V3;function BX(){if(V3)return U_;V3=1;var t=FX(),e=zX();U_=n;function n(r){for(var i=0,s=0;s<r.length;s++){var o=r[s],a=o.type;o.assignment=!1,o.declaration=!1,!(a!=="ident"&&a!=="builtin")&&(i=s+1,d(),r[i].type==="operator"&&t[r[i].data]&&(o.assignment=!0))}for(var s=0;s<r.length;s++){var l=r[s],a=l.type,u=l.data;if(l.declaration=!1,a==="keyword"){if(e[u])continue}else if(a!=="ident")continue;if(i=s+1,h(),r[i].type==="ident"){if(r[i++].declaration=!0,h(),r[i].data==="("){for(i++,d();r[i]&&r[i].data!==")"&&!(r[i].type!=="keyword"&&r[i].type!=="ident");)i++,d(),r[i].type==="ident"&&(r[i++].declaration=!0,d(),h(),d(),r[i].data===","&&(i++,d()));s=i;continue}for(;r[i]&&r[i].data!==";";)r[i].data===","?(i++,d(),(r[i].declaration=r[i].type==="ident")&&i++):(d(),p(),d(),i++);s=i}}for(var s=0;s<r.length;s++){var o=r[s];if(o.type==="keyword"&&o.data==="struct"&&(i=s+1,d(),r[i].type==="ident"&&(i++,d(),r[i++].data==="{"))){for(d();r[i].type==="ident"||r[i].type==="keyword";){do i++,d(),r[i].structMember=!0,r[i].declaration=!1,i++,h();while(r[i].data===",");r[i].data===";"&&i++,d()}if(i++,d(),r[i].type==="ident")for(r[i].declaration=!0,d();r[++i].data===",";)d(),i++,d(),r[i].type==="ident"&&(r[i].declaration=!0),d()}}return r;function d(g){for(;r[i]&&r[i].type==="whitespace";)i++}function h(){for(;r[i]&&(r[i].type==="integer"||r[i].data==="["||r[i].data==="]"||r[i].type==="whitespace");)i++}function p(){if(r[i]&&r[i].data==="("){var g=0;do{if(r[i].data===";")break;r[i].data==="("&&g++,r[i].data===")"&&g--}while(g&&r[++i])}}}return U_}var HX=VX;function VX(t,e){kX()(t),UX()(t),NX()(t),BX()(t);for(var n=WX(t),r=e||GX(),i={},s=0;s<t.length;s++){var o=t[s],a=o.stack,l=o.data;if(o.descoped=!1,o.type==="ident"&&!o.property&&!o.structMember){for(var u=!1,d=a.length-1;d>=0;d--){var h=n[a[d]];if(h&&h[l]){if(u=!0,d)break;o.descoped=o.data,o.data=i[l]=i[l]||r(l,o)||o.data}}u||(o.descoped=o.data,o.data=i[l]=i[l]||r(l,o)||o.data)}}return t}function GX(){var t=0;return function(n){return n+"_"+(t++).toString(36)}}function WX(t){for(var e={},n=0;n<t.length;n++){var r=t[n];r.declaration&&(e[r.scope]=e[r.scope]||{},e[r.scope][r.data]=r)}return e}const G3=_s(HX);var $X=jX;function jX(t){for(var e=[],n=0;n<t.length;n++)t[n].type!=="eof"&&e.push(t[n].data);return e.join("")}const Rh=_s($X);var XX=KX;function KX(t){var e=null,n=null,r=0,i=0,s=0,o=0,a=0,l=[],u,d,h;for(u=0,d;u<t.length;u++)if(h=t[u],h.data==="{"){if(r&&r++||(d=g(u,La(")"),La()),d<0)||(o=d,d=g(d,La("("),La(")")),d<0)||(a=d,d=g(d,Qd),d<0)||t[d].type!=="ident"||(n=t[d].data,d=g(d,Qd),d<0))continue;r=1,i=u,e=t[d].data,s=d;var p=g(d,Qd);switch(t[p]&&t[p].data){case"lowp":case"highp":case"mediump":s=p}}else if(r&&h.data==="}"){if(--r)continue;l.push({name:n,type:e,body:[i+1,u],args:[a,o+1],outer:[s,u+1]})}for(u=0;u<t.length;u++)if(h=t[u],h.data===";"){if(d=g(u,La(")"),La()),d<0||(o=d,d=g(d,La("("),La(")")),d<0)||(a=d,d=g(d,Qd),d<0)||t[d].type!=="ident"||(n=t[d].data,d=g(d,Qd),d<0)||t[d].type==="operator"||t[d].data==="return")continue;e=t[d].data,l.push({name:n,type:e,body:!1,args:[a,o+1],outer:[d,u+1]})}return l.sort(function(v,_){return v.outer[0]-_.outer[0]});function g(v,_,x){for(var m=v-1;m>=0;m--){if(_(t[m]))return m;if(x&&x(t[m]))return-1}return-1}}function La(t){return function(e){return e.type==="operator"&&(!t||e.data===t)}}function Qd(t){return t.type!=="whitespace"}const Gw=_s(XX);function hv(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jk={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(u,d){if(!i[u]){if(!r[u]){var h=typeof hv=="function"&&hv;if(!d&&h)return h(u,!0);if(a)return a(u,!0);throw new Error("Cannot find module '"+u+"'")}d=i[u]={exports:{}},r[u][0].call(d.exports,function(p){var g=r[u][1][p];return o(g||p)},d,d.exports,n,r,i,s)}return i[u].exports}for(var a=typeof hv=="function"&&hv,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){(function(s,o,a,l,u,d,h,p,g){var v=n("crypto");function _(P,D){D=S(P,D);var A;return(A=D.algorithm!=="passthrough"?v.createHash(D.algorithm):new I).write===void 0&&(A.write=A.update,A.end=A.update),M(D,A).dispatch(P),A.update||A.end(""),A.digest?A.digest(D.encoding==="buffer"?void 0:D.encoding):(P=A.read(),D.encoding!=="buffer"?P.toString(D.encoding):P)}(i=r.exports=_).sha1=function(P){return _(P)},i.keys=function(P){return _(P,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},i.MD5=function(P){return _(P,{algorithm:"md5",encoding:"hex"})},i.keysMD5=function(P){return _(P,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var x=v.getHashes?v.getHashes().slice():["sha1","md5"],m=(x.push("passthrough"),["buffer","hex","binary","base64"]);function S(P,D){var A={};if(A.algorithm=(D=D||{}).algorithm||"sha1",A.encoding=D.encoding||"hex",A.excludeValues=!!D.excludeValues,A.algorithm=A.algorithm.toLowerCase(),A.encoding=A.encoding.toLowerCase(),A.ignoreUnknown=D.ignoreUnknown===!0,A.respectType=D.respectType!==!1,A.respectFunctionNames=D.respectFunctionNames!==!1,A.respectFunctionProperties=D.respectFunctionProperties!==!1,A.unorderedArrays=D.unorderedArrays===!0,A.unorderedSets=D.unorderedSets!==!1,A.unorderedObjects=D.unorderedObjects!==!1,A.replacer=D.replacer||void 0,A.excludeKeys=D.excludeKeys||void 0,P===void 0)throw new Error("Object argument required.");for(var T=0;T<x.length;++T)x[T].toLowerCase()===A.algorithm.toLowerCase()&&(A.algorithm=x[T]);if(x.indexOf(A.algorithm)===-1)throw new Error('Algorithm "'+A.algorithm+'"  not supported. supported values: '+x.join(", "));if(m.indexOf(A.encoding)===-1&&A.algorithm!=="passthrough")throw new Error('Encoding "'+A.encoding+'"  not supported. supported values: '+m.join(", "));return A}function w(P){if(typeof P=="function")return/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(P))!=null}function M(P,D,A){A=A||[];function T(E){return D.update?D.update(E,"utf8"):D.write(E,"utf8")}return{dispatch:function(E){return this["_"+((E=P.replacer?P.replacer(E):E)===null?"null":typeof E)](E)},_object:function(E){var O,N=Object.prototype.toString.call(E),H=/\[object (.*)\]/i.exec(N);if(H=(H=H?H[1]:"unknown:["+N+"]").toLowerCase(),0<=(N=A.indexOf(E)))return this.dispatch("[CIRCULAR:"+N+"]");if(A.push(E),a!==void 0&&a.isBuffer&&a.isBuffer(E))return T("buffer:"),T(E);if(H==="object"||H==="function"||H==="asyncfunction")return N=Object.keys(E),P.unorderedObjects&&(N=N.sort()),P.respectType===!1||w(E)||N.splice(0,0,"prototype","__proto__","constructor"),P.excludeKeys&&(N=N.filter(function(K){return!P.excludeKeys(K)})),T("object:"+N.length+":"),O=this,N.forEach(function(K){O.dispatch(K),T(":"),P.excludeValues||O.dispatch(E[K]),T(",")});if(!this["_"+H]){if(P.ignoreUnknown)return T("["+H+"]");throw new Error('Unknown object type "'+H+'"')}this["_"+H](E)},_array:function(E,K){K=K!==void 0?K:P.unorderedArrays!==!1;var N=this;if(T("array:"+E.length+":"),!K||E.length<=1)return E.forEach(function(Y){return N.dispatch(Y)});var H=[],K=E.map(function(Y){var Q=new I,ee=A.slice();return M(P,Q,ee).dispatch(Y),H=H.concat(ee.slice(A.length)),Q.read().toString()});return A=A.concat(H),K.sort(),this._array(K,!1)},_date:function(E){return T("date:"+E.toJSON())},_symbol:function(E){return T("symbol:"+E.toString())},_error:function(E){return T("error:"+E.toString())},_boolean:function(E){return T("bool:"+E.toString())},_string:function(E){T("string:"+E.length+":"),T(E.toString())},_function:function(E){T("fn:"),w(E)?this.dispatch("[native]"):this.dispatch(E.toString()),P.respectFunctionNames!==!1&&this.dispatch("function-name:"+String(E.name)),P.respectFunctionProperties&&this._object(E)},_number:function(E){return T("number:"+E.toString())},_xml:function(E){return T("xml:"+E.toString())},_null:function(){return T("Null")},_undefined:function(){return T("Undefined")},_regexp:function(E){return T("regex:"+E.toString())},_uint8array:function(E){return T("uint8array:"),this.dispatch(Array.prototype.slice.call(E))},_uint8clampedarray:function(E){return T("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(E))},_int8array:function(E){return T("int8array:"),this.dispatch(Array.prototype.slice.call(E))},_uint16array:function(E){return T("uint16array:"),this.dispatch(Array.prototype.slice.call(E))},_int16array:function(E){return T("int16array:"),this.dispatch(Array.prototype.slice.call(E))},_uint32array:function(E){return T("uint32array:"),this.dispatch(Array.prototype.slice.call(E))},_int32array:function(E){return T("int32array:"),this.dispatch(Array.prototype.slice.call(E))},_float32array:function(E){return T("float32array:"),this.dispatch(Array.prototype.slice.call(E))},_float64array:function(E){return T("float64array:"),this.dispatch(Array.prototype.slice.call(E))},_arraybuffer:function(E){return T("arraybuffer:"),this.dispatch(new Uint8Array(E))},_url:function(E){return T("url:"+E.toString())},_map:function(E){return T("map:"),E=Array.from(E),this._array(E,P.unorderedSets!==!1)},_set:function(E){return T("set:"),E=Array.from(E),this._array(E,P.unorderedSets!==!1)},_file:function(E){return T("file:"),this.dispatch([E.name,E.size,E.type,E.lastModfied])},_blob:function(){if(P.ignoreUnknown)return T("[blob]");throw Error(`Hashing Blob objects is currently not supported
(see https://github.com/puleos/object-hash/issues/26)
Use "options.replacer" or "options.ignoreUnknown"
`)},_domwindow:function(){return T("domwindow")},_bigint:function(E){return T("bigint:"+E.toString())},_process:function(){return T("process")},_timer:function(){return T("timer")},_pipe:function(){return T("pipe")},_tcp:function(){return T("tcp")},_udp:function(){return T("udp")},_tty:function(){return T("tty")},_statwatcher:function(){return T("statwatcher")},_securecontext:function(){return T("securecontext")},_connection:function(){return T("connection")},_zlib:function(){return T("zlib")},_context:function(){return T("context")},_nodescript:function(){return T("nodescript")},_httpparser:function(){return T("httpparser")},_dataview:function(){return T("dataview")},_signal:function(){return T("signal")},_fsevent:function(){return T("fsevent")},_tlswrap:function(){return T("tlswrap")}}}function I(){return{buf:"",write:function(P){this.buf+=P},end:function(P){this.buf+=P},read:function(){return this.buf}}}i.writeToStream=function(P,D,A){return A===void 0&&(A=D,D={}),M(D=S(P,D),A).dispatch(P)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/fake_9a5aa49d.js","/")},{buffer:3,crypto:5,lYpoI2:11}],2:[function(n,r,i){(function(s,o,a,l,u,d,h,p,g){(function(v){var _=typeof Uint8Array<"u"?Uint8Array:Array,x="+".charCodeAt(0),m="/".charCodeAt(0),S="0".charCodeAt(0),w="a".charCodeAt(0),M="A".charCodeAt(0),I="-".charCodeAt(0),P="_".charCodeAt(0);function D(A){return A=A.charCodeAt(0),A===x||A===I?62:A===m||A===P?63:A<S?-1:A<S+10?A-S+26+26:A<M+26?A-M:A<w+26?A-w+26:void 0}v.toByteArray=function(A){var T,E;if(0<A.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var O=A.length,O=A.charAt(O-2)==="="?2:A.charAt(O-1)==="="?1:0,N=new _(3*A.length/4-O),H=0<O?A.length-4:A.length,K=0;function Y(Q){N[K++]=Q}for(T=0;T<H;T+=4,0)Y((16711680&(E=D(A.charAt(T))<<18|D(A.charAt(T+1))<<12|D(A.charAt(T+2))<<6|D(A.charAt(T+3))))>>16),Y((65280&E)>>8),Y(255&E);return O==2?Y(255&(E=D(A.charAt(T))<<2|D(A.charAt(T+1))>>4)):O==1&&(Y((E=D(A.charAt(T))<<10|D(A.charAt(T+1))<<4|D(A.charAt(T+2))>>2)>>8&255),Y(255&E)),N},v.fromByteArray=function(A){var T,E,O,N,H=A.length%3,K="";function Y(Q){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(Q)}for(T=0,O=A.length-H;T<O;T+=3)E=(A[T]<<16)+(A[T+1]<<8)+A[T+2],K+=Y((N=E)>>18&63)+Y(N>>12&63)+Y(N>>6&63)+Y(63&N);switch(H){case 1:K=(K+=Y((E=A[A.length-1])>>2))+Y(E<<4&63)+"==";break;case 2:K=(K=(K+=Y((E=(A[A.length-2]<<8)+A[A.length-1])>>10))+Y(E>>4&63))+Y(E<<2&63)+"="}return K}})(i===void 0?this.base64js={}:i)}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js","/node_modules/gulp-browserify/node_modules/base64-js/lib")},{buffer:3,lYpoI2:11}],3:[function(n,r,i){(function(s,o,x,l,u,d,h,p,g){var v=n("base64-js"),_=n("ieee754");function x(U,z,W){if(!(this instanceof x))return new x(U,z,W);var ne,q,se,Ce,Le=typeof U;if(z==="base64"&&Le=="string")for(U=(Ce=U).trim?Ce.trim():Ce.replace(/^\s+|\s+$/g,"");U.length%4!=0;)U+="=";if(Le=="number")ne=F(U);else if(Le=="string")ne=x.byteLength(U,z);else{if(Le!="object")throw new Error("First argument needs to be a number, array or string.");ne=F(U.length)}if(x._useTypedArrays?q=x._augment(new Uint8Array(ne)):((q=this).length=ne,q._isBuffer=!0),x._useTypedArrays&&typeof U.byteLength=="number")q._set(U);else if(j(Ce=U)||x.isBuffer(Ce)||Ce&&typeof Ce=="object"&&typeof Ce.length=="number")for(se=0;se<ne;se++)x.isBuffer(U)?q[se]=U.readUInt8(se):q[se]=U[se];else if(Le=="string")q.write(U,0,z);else if(Le=="number"&&!x._useTypedArrays&&!W)for(se=0;se<ne;se++)q[se]=0;return q}function m(U,z,W,ne){return x._charsWritten=fe(function(q){for(var se=[],Ce=0;Ce<q.length;Ce++)se.push(255&q.charCodeAt(Ce));return se}(z),U,W,ne)}function S(U,z,W,ne){return x._charsWritten=fe(function(q){for(var se,Ce,Le=[],He=0;He<q.length;He++)Ce=q.charCodeAt(He),se=Ce>>8,Ce=Ce%256,Le.push(Ce),Le.push(se);return Le}(z),U,W,ne)}function w(U,z,W){var ne="";W=Math.min(U.length,W);for(var q=z;q<W;q++)ne+=String.fromCharCode(U[q]);return ne}function M(U,z,W,se){se||(ve(typeof W=="boolean","missing or invalid endian"),ve(z!=null,"missing offset"),ve(z+1<U.length,"Trying to read beyond buffer length"));var q,se=U.length;if(!(se<=z))return W?(q=U[z],z+1<se&&(q|=U[z+1]<<8)):(q=U[z]<<8,z+1<se&&(q|=U[z+1])),q}function I(U,z,W,se){se||(ve(typeof W=="boolean","missing or invalid endian"),ve(z!=null,"missing offset"),ve(z+3<U.length,"Trying to read beyond buffer length"));var q,se=U.length;if(!(se<=z))return W?(z+2<se&&(q=U[z+2]<<16),z+1<se&&(q|=U[z+1]<<8),q|=U[z],z+3<se&&(q+=U[z+3]<<24>>>0)):(z+1<se&&(q=U[z+1]<<16),z+2<se&&(q|=U[z+2]<<8),z+3<se&&(q|=U[z+3]),q+=U[z]<<24>>>0),q}function P(U,z,W,ne){if(ne||(ve(typeof W=="boolean","missing or invalid endian"),ve(z!=null,"missing offset"),ve(z+1<U.length,"Trying to read beyond buffer length")),!(U.length<=z))return ne=M(U,z,W,!0),32768&ne?-1*(65535-ne+1):ne}function D(U,z,W,ne){if(ne||(ve(typeof W=="boolean","missing or invalid endian"),ve(z!=null,"missing offset"),ve(z+3<U.length,"Trying to read beyond buffer length")),!(U.length<=z))return ne=I(U,z,W,!0),2147483648&ne?-1*(4294967295-ne+1):ne}function A(U,z,W,ne){return ne||(ve(typeof W=="boolean","missing or invalid endian"),ve(z+3<U.length,"Trying to read beyond buffer length")),_.read(U,z,W,23,4)}function T(U,z,W,ne){return ne||(ve(typeof W=="boolean","missing or invalid endian"),ve(z+7<U.length,"Trying to read beyond buffer length")),_.read(U,z,W,52,8)}function E(U,z,W,ne,q){if(q||(ve(z!=null,"missing value"),ve(typeof ne=="boolean","missing or invalid endian"),ve(W!=null,"missing offset"),ve(W+1<U.length,"trying to write beyond buffer length"),De(z,65535)),q=U.length,!(q<=W))for(var se=0,Ce=Math.min(q-W,2);se<Ce;se++)U[W+se]=(z&255<<8*(ne?se:1-se))>>>8*(ne?se:1-se)}function O(U,z,W,ne,q){if(q||(ve(z!=null,"missing value"),ve(typeof ne=="boolean","missing or invalid endian"),ve(W!=null,"missing offset"),ve(W+3<U.length,"trying to write beyond buffer length"),De(z,4294967295)),q=U.length,!(q<=W))for(var se=0,Ce=Math.min(q-W,4);se<Ce;se++)U[W+se]=z>>>8*(ne?se:3-se)&255}function N(U,z,W,ne,q){q||(ve(z!=null,"missing value"),ve(typeof ne=="boolean","missing or invalid endian"),ve(W!=null,"missing offset"),ve(W+1<U.length,"Trying to write beyond buffer length"),Ee(z,32767,-32768)),U.length<=W||E(U,0<=z?z:65535+z+1,W,ne,q)}function H(U,z,W,ne,q){q||(ve(z!=null,"missing value"),ve(typeof ne=="boolean","missing or invalid endian"),ve(W!=null,"missing offset"),ve(W+3<U.length,"Trying to write beyond buffer length"),Ee(z,2147483647,-2147483648)),U.length<=W||O(U,0<=z?z:4294967295+z+1,W,ne,q)}function K(U,z,W,ne,q){q||(ve(z!=null,"missing value"),ve(typeof ne=="boolean","missing or invalid endian"),ve(W!=null,"missing offset"),ve(W+3<U.length,"Trying to write beyond buffer length"),J(z,34028234663852886e22,-34028234663852886e22)),U.length<=W||_.write(U,z,W,ne,23,4)}function Y(U,z,W,ne,q){q||(ve(z!=null,"missing value"),ve(typeof ne=="boolean","missing or invalid endian"),ve(W!=null,"missing offset"),ve(W+7<U.length,"Trying to write beyond buffer length"),J(z,17976931348623157e292,-17976931348623157e292)),U.length<=W||_.write(U,z,W,ne,52,8)}i.Buffer=x,i.SlowBuffer=x,i.INSPECT_MAX_BYTES=50,x.poolSize=8192,x._useTypedArrays=function(){try{var U=new ArrayBuffer(0),z=new Uint8Array(U);return z.foo=function(){return 42},z.foo()===42&&typeof z.subarray=="function"}catch{return!1}}(),x.isEncoding=function(U){switch(String(U).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},x.isBuffer=function(U){return!(U==null||!U._isBuffer)},x.byteLength=function(U,z){var W;switch(U+="",z||"utf8"){case"hex":W=U.length/2;break;case"utf8":case"utf-8":W=ce(U).length;break;case"ascii":case"binary":case"raw":W=U.length;break;case"base64":W=ae(U).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":W=2*U.length;break;default:throw new Error("Unknown encoding")}return W},x.concat=function(U,z){if(ve(j(U),`Usage: Buffer.concat(list, [totalLength])
list should be an Array.`),U.length===0)return new x(0);if(U.length===1)return U[0];if(typeof z!="number")for(q=z=0;q<U.length;q++)z+=U[q].length;for(var W=new x(z),ne=0,q=0;q<U.length;q++){var se=U[q];se.copy(W,ne),ne+=se.length}return W},x.prototype.write=function(U,z,W,ne){isFinite(z)?isFinite(W)||(ne=W,W=void 0):(He=ne,ne=z,z=W,W=He),z=Number(z)||0;var q,se,Ce,Le,He=this.length-z;switch((!W||He<(W=Number(W)))&&(W=He),ne=String(ne||"utf8").toLowerCase()){case"hex":q=function(We,Ge,je,Je){je=Number(je)||0;var G=We.length-je;(!Je||G<(Je=Number(Je)))&&(Je=G),ve((G=Ge.length)%2==0,"Invalid hex string"),G/2<Je&&(Je=G/2);for(var k=0;k<Je;k++){var re=parseInt(Ge.substr(2*k,2),16);ve(!isNaN(re),"Invalid hex string"),We[je+k]=re}return x._charsWritten=2*k,k}(this,U,z,W);break;case"utf8":case"utf-8":se=this,Ce=z,Le=W,q=x._charsWritten=fe(ce(U),se,Ce,Le);break;case"ascii":case"binary":q=m(this,U,z,W);break;case"base64":se=this,Ce=z,Le=W,q=x._charsWritten=fe(ae(U),se,Ce,Le);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":q=S(this,U,z,W);break;default:throw new Error("Unknown encoding")}return q},x.prototype.toString=function(U,z,W){var ne,q,se,Ce,Le=this;if(U=String(U||"utf8").toLowerCase(),z=Number(z)||0,(W=W!==void 0?Number(W):Le.length)===z)return"";switch(U){case"hex":ne=function(He,We,Ge){var je=He.length;(!We||We<0)&&(We=0),(!Ge||Ge<0||je<Ge)&&(Ge=je);for(var Je="",G=We;G<Ge;G++)Je+=V(He[G]);return Je}(Le,z,W);break;case"utf8":case"utf-8":ne=function(He,We,Ge){var je="",Je="";Ge=Math.min(He.length,Ge);for(var G=We;G<Ge;G++)He[G]<=127?(je+=de(Je)+String.fromCharCode(He[G]),Je=""):Je+="%"+He[G].toString(16);return je+de(Je)}(Le,z,W);break;case"ascii":case"binary":ne=w(Le,z,W);break;case"base64":q=Le,Ce=W,ne=(se=z)===0&&Ce===q.length?v.fromByteArray(q):v.fromByteArray(q.slice(se,Ce));break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":ne=function(He,We,Ge){for(var je=He.slice(We,Ge),Je="",G=0;G<je.length;G+=2)Je+=String.fromCharCode(je[G]+256*je[G+1]);return Je}(Le,z,W);break;default:throw new Error("Unknown encoding")}return ne},x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},x.prototype.copy=function(U,z,W,ne){if(z=z||0,(ne=ne||ne===0?ne:this.length)!==(W=W||0)&&U.length!==0&&this.length!==0){ve(W<=ne,"sourceEnd < sourceStart"),ve(0<=z&&z<U.length,"targetStart out of bounds"),ve(0<=W&&W<this.length,"sourceStart out of bounds"),ve(0<=ne&&ne<=this.length,"sourceEnd out of bounds"),ne>this.length&&(ne=this.length);var q=(ne=U.length-z<ne-W?U.length-z+W:ne)-W;if(q<100||!x._useTypedArrays)for(var se=0;se<q;se++)U[se+z]=this[se+W];else U._set(this.subarray(W,W+q),z)}},x.prototype.slice=function(U,z){var W=this.length;if(U=ee(U,W,0),z=ee(z,W,W),x._useTypedArrays)return x._augment(this.subarray(U,z));for(var ne=z-U,q=new x(ne,void 0,!0),se=0;se<ne;se++)q[se]=this[se+U];return q},x.prototype.get=function(U){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(U)},x.prototype.set=function(U,z){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(U,z)},x.prototype.readUInt8=function(U,z){if(z||(ve(U!=null,"missing offset"),ve(U<this.length,"Trying to read beyond buffer length")),!(U>=this.length))return this[U]},x.prototype.readUInt16LE=function(U,z){return M(this,U,!0,z)},x.prototype.readUInt16BE=function(U,z){return M(this,U,!1,z)},x.prototype.readUInt32LE=function(U,z){return I(this,U,!0,z)},x.prototype.readUInt32BE=function(U,z){return I(this,U,!1,z)},x.prototype.readInt8=function(U,z){if(z||(ve(U!=null,"missing offset"),ve(U<this.length,"Trying to read beyond buffer length")),!(U>=this.length))return 128&this[U]?-1*(255-this[U]+1):this[U]},x.prototype.readInt16LE=function(U,z){return P(this,U,!0,z)},x.prototype.readInt16BE=function(U,z){return P(this,U,!1,z)},x.prototype.readInt32LE=function(U,z){return D(this,U,!0,z)},x.prototype.readInt32BE=function(U,z){return D(this,U,!1,z)},x.prototype.readFloatLE=function(U,z){return A(this,U,!0,z)},x.prototype.readFloatBE=function(U,z){return A(this,U,!1,z)},x.prototype.readDoubleLE=function(U,z){return T(this,U,!0,z)},x.prototype.readDoubleBE=function(U,z){return T(this,U,!1,z)},x.prototype.writeUInt8=function(U,z,W){W||(ve(U!=null,"missing value"),ve(z!=null,"missing offset"),ve(z<this.length,"trying to write beyond buffer length"),De(U,255)),z>=this.length||(this[z]=U)},x.prototype.writeUInt16LE=function(U,z,W){E(this,U,z,!0,W)},x.prototype.writeUInt16BE=function(U,z,W){E(this,U,z,!1,W)},x.prototype.writeUInt32LE=function(U,z,W){O(this,U,z,!0,W)},x.prototype.writeUInt32BE=function(U,z,W){O(this,U,z,!1,W)},x.prototype.writeInt8=function(U,z,W){W||(ve(U!=null,"missing value"),ve(z!=null,"missing offset"),ve(z<this.length,"Trying to write beyond buffer length"),Ee(U,127,-128)),z>=this.length||(0<=U?this.writeUInt8(U,z,W):this.writeUInt8(255+U+1,z,W))},x.prototype.writeInt16LE=function(U,z,W){N(this,U,z,!0,W)},x.prototype.writeInt16BE=function(U,z,W){N(this,U,z,!1,W)},x.prototype.writeInt32LE=function(U,z,W){H(this,U,z,!0,W)},x.prototype.writeInt32BE=function(U,z,W){H(this,U,z,!1,W)},x.prototype.writeFloatLE=function(U,z,W){K(this,U,z,!0,W)},x.prototype.writeFloatBE=function(U,z,W){K(this,U,z,!1,W)},x.prototype.writeDoubleLE=function(U,z,W){Y(this,U,z,!0,W)},x.prototype.writeDoubleBE=function(U,z,W){Y(this,U,z,!1,W)},x.prototype.fill=function(U,z,W){if(z=z||0,W=W||this.length,ve(typeof(U=typeof(U=U||0)=="string"?U.charCodeAt(0):U)=="number"&&!isNaN(U),"value is not a number"),ve(z<=W,"end < start"),W!==z&&this.length!==0){ve(0<=z&&z<this.length,"start out of bounds"),ve(0<=W&&W<=this.length,"end out of bounds");for(var ne=z;ne<W;ne++)this[ne]=U}},x.prototype.inspect=function(){for(var U=[],z=this.length,W=0;W<z;W++)if(U[W]=V(this[W]),W===i.INSPECT_MAX_BYTES){U[W+1]="...";break}return"<Buffer "+U.join(" ")+">"},x.prototype.toArrayBuffer=function(){if(typeof Uint8Array>"u")throw new Error("Buffer.toArrayBuffer not supported in this browser");if(x._useTypedArrays)return new x(this).buffer;for(var U=new Uint8Array(this.length),z=0,W=U.length;z<W;z+=1)U[z]=this[z];return U.buffer};var Q=x.prototype;function ee(U,z,W){return typeof U!="number"?W:z<=(U=~~U)?z:0<=U||0<=(U+=z)?U:0}function F(U){return(U=~~Math.ceil(+U))<0?0:U}function j(U){return(Array.isArray||function(z){return Object.prototype.toString.call(z)==="[object Array]"})(U)}function V(U){return U<16?"0"+U.toString(16):U.toString(16)}function ce(U){for(var z=[],W=0;W<U.length;W++){var ne=U.charCodeAt(W);if(ne<=127)z.push(U.charCodeAt(W));else for(var q=W,se=(55296<=ne&&ne<=57343&&W++,encodeURIComponent(U.slice(q,W+1)).substr(1).split("%")),Ce=0;Ce<se.length;Ce++)z.push(parseInt(se[Ce],16))}return z}function ae(U){return v.toByteArray(U)}function fe(U,z,W,ne){for(var q=0;q<ne&&!(q+W>=z.length||q>=U.length);q++)z[q+W]=U[q];return q}function de(U){try{return decodeURIComponent(U)}catch{return String.fromCharCode(65533)}}function De(U,z){ve(typeof U=="number","cannot write a non-number as a number"),ve(0<=U,"specified a negative value for writing an unsigned value"),ve(U<=z,"value is larger than maximum value for type"),ve(Math.floor(U)===U,"value has a fractional component")}function Ee(U,z,W){ve(typeof U=="number","cannot write a non-number as a number"),ve(U<=z,"value larger than maximum allowed value"),ve(W<=U,"value smaller than minimum allowed value"),ve(Math.floor(U)===U,"value has a fractional component")}function J(U,z,W){ve(typeof U=="number","cannot write a non-number as a number"),ve(U<=z,"value larger than maximum allowed value"),ve(W<=U,"value smaller than minimum allowed value")}function ve(U,z){if(!U)throw new Error(z||"Failed assertion")}x._augment=function(U){return U._isBuffer=!0,U._get=U.get,U._set=U.set,U.get=Q.get,U.set=Q.set,U.write=Q.write,U.toString=Q.toString,U.toLocaleString=Q.toString,U.toJSON=Q.toJSON,U.copy=Q.copy,U.slice=Q.slice,U.readUInt8=Q.readUInt8,U.readUInt16LE=Q.readUInt16LE,U.readUInt16BE=Q.readUInt16BE,U.readUInt32LE=Q.readUInt32LE,U.readUInt32BE=Q.readUInt32BE,U.readInt8=Q.readInt8,U.readInt16LE=Q.readInt16LE,U.readInt16BE=Q.readInt16BE,U.readInt32LE=Q.readInt32LE,U.readInt32BE=Q.readInt32BE,U.readFloatLE=Q.readFloatLE,U.readFloatBE=Q.readFloatBE,U.readDoubleLE=Q.readDoubleLE,U.readDoubleBE=Q.readDoubleBE,U.writeUInt8=Q.writeUInt8,U.writeUInt16LE=Q.writeUInt16LE,U.writeUInt16BE=Q.writeUInt16BE,U.writeUInt32LE=Q.writeUInt32LE,U.writeUInt32BE=Q.writeUInt32BE,U.writeInt8=Q.writeInt8,U.writeInt16LE=Q.writeInt16LE,U.writeInt16BE=Q.writeInt16BE,U.writeInt32LE=Q.writeInt32LE,U.writeInt32BE=Q.writeInt32BE,U.writeFloatLE=Q.writeFloatLE,U.writeFloatBE=Q.writeFloatBE,U.writeDoubleLE=Q.writeDoubleLE,U.writeDoubleBE=Q.writeDoubleBE,U.fill=Q.fill,U.inspect=Q.inspect,U.toArrayBuffer=Q.toArrayBuffer,U}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/buffer/index.js","/node_modules/gulp-browserify/node_modules/buffer")},{"base64-js":2,buffer:3,ieee754:10,lYpoI2:11}],4:[function(n,r,i){(function(s,o,v,l,u,d,h,p,g){var v=n("buffer").Buffer,_=4,x=new v(_);x.fill(0),r.exports={hash:function(m,S,w,M){for(var I=S(function(E,O){E.length%_!=0&&(N=E.length+(_-E.length%_),E=v.concat([E,x],N));for(var N,H=[],K=O?E.readInt32BE:E.readInt32LE,Y=0;Y<E.length;Y+=_)H.push(K.call(E,Y));return H}(m=v.isBuffer(m)?m:new v(m),M),8*m.length),S=M,P=new v(w),D=S?P.writeInt32BE:P.writeInt32LE,A=0;A<I.length;A++)D.call(P,I[A],4*A,!0);return P}}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],5:[function(n,r,i){(function(s,o,v,l,u,d,h,p,g){var v=n("buffer").Buffer,_=n("./sha"),x=n("./sha256"),m=n("./rng"),S={sha1:_,sha256:x,md5:n("./md5")},w=64,M=new v(w);function I(E,O){var N=S[E=E||"sha1"],H=[];return N||P("algorithm:",E,"is not yet supported"),{update:function(K){return v.isBuffer(K)||(K=new v(K)),H.push(K),K.length,this},digest:function(K){var Y=v.concat(H),Y=O?function(Q,ee,F){v.isBuffer(ee)||(ee=new v(ee)),v.isBuffer(F)||(F=new v(F)),ee.length>w?ee=Q(ee):ee.length<w&&(ee=v.concat([ee,M],w));for(var j=new v(w),V=new v(w),ce=0;ce<w;ce++)j[ce]=54^ee[ce],V[ce]=92^ee[ce];return F=Q(v.concat([j,F])),Q(v.concat([V,F]))}(N,O,Y):N(Y);return H=null,K?Y.toString(K):Y}}}function P(){var E=[].slice.call(arguments).join(" ");throw new Error([E,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join(`
`))}M.fill(0),i.createHash=function(E){return I(E)},i.createHmac=I,i.randomBytes=function(E,O){if(!O||!O.call)return new v(m(E));try{O.call(this,void 0,new v(m(E)))}catch(N){O(N)}};var D,A=["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],T=function(E){i[E]=function(){P("sorry,",E,"is not implemented yet")}};for(D in A)T(A[D])}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./md5":6,"./rng":7,"./sha":8,"./sha256":9,buffer:3,lYpoI2:11}],6:[function(n,r,i){(function(s,o,a,l,u,d,h,p,g){var v=n("./helpers");function _(P,D){P[D>>5]|=128<<D%32,P[14+(D+64>>>9<<4)]=D;for(var A=1732584193,T=-271733879,E=-1732584194,O=271733878,N=0;N<P.length;N+=16){var H=A,K=T,Y=E,Q=O,A=m(A,T,E,O,P[N+0],7,-680876936),O=m(O,A,T,E,P[N+1],12,-389564586),E=m(E,O,A,T,P[N+2],17,606105819),T=m(T,E,O,A,P[N+3],22,-1044525330);A=m(A,T,E,O,P[N+4],7,-176418897),O=m(O,A,T,E,P[N+5],12,1200080426),E=m(E,O,A,T,P[N+6],17,-1473231341),T=m(T,E,O,A,P[N+7],22,-45705983),A=m(A,T,E,O,P[N+8],7,1770035416),O=m(O,A,T,E,P[N+9],12,-1958414417),E=m(E,O,A,T,P[N+10],17,-42063),T=m(T,E,O,A,P[N+11],22,-1990404162),A=m(A,T,E,O,P[N+12],7,1804603682),O=m(O,A,T,E,P[N+13],12,-40341101),E=m(E,O,A,T,P[N+14],17,-1502002290),A=S(A,T=m(T,E,O,A,P[N+15],22,1236535329),E,O,P[N+1],5,-165796510),O=S(O,A,T,E,P[N+6],9,-1069501632),E=S(E,O,A,T,P[N+11],14,643717713),T=S(T,E,O,A,P[N+0],20,-373897302),A=S(A,T,E,O,P[N+5],5,-701558691),O=S(O,A,T,E,P[N+10],9,38016083),E=S(E,O,A,T,P[N+15],14,-660478335),T=S(T,E,O,A,P[N+4],20,-405537848),A=S(A,T,E,O,P[N+9],5,568446438),O=S(O,A,T,E,P[N+14],9,-1019803690),E=S(E,O,A,T,P[N+3],14,-187363961),T=S(T,E,O,A,P[N+8],20,1163531501),A=S(A,T,E,O,P[N+13],5,-1444681467),O=S(O,A,T,E,P[N+2],9,-51403784),E=S(E,O,A,T,P[N+7],14,1735328473),A=w(A,T=S(T,E,O,A,P[N+12],20,-1926607734),E,O,P[N+5],4,-378558),O=w(O,A,T,E,P[N+8],11,-2022574463),E=w(E,O,A,T,P[N+11],16,1839030562),T=w(T,E,O,A,P[N+14],23,-35309556),A=w(A,T,E,O,P[N+1],4,-1530992060),O=w(O,A,T,E,P[N+4],11,1272893353),E=w(E,O,A,T,P[N+7],16,-155497632),T=w(T,E,O,A,P[N+10],23,-1094730640),A=w(A,T,E,O,P[N+13],4,681279174),O=w(O,A,T,E,P[N+0],11,-358537222),E=w(E,O,A,T,P[N+3],16,-722521979),T=w(T,E,O,A,P[N+6],23,76029189),A=w(A,T,E,O,P[N+9],4,-640364487),O=w(O,A,T,E,P[N+12],11,-421815835),E=w(E,O,A,T,P[N+15],16,530742520),A=M(A,T=w(T,E,O,A,P[N+2],23,-995338651),E,O,P[N+0],6,-198630844),O=M(O,A,T,E,P[N+7],10,1126891415),E=M(E,O,A,T,P[N+14],15,-1416354905),T=M(T,E,O,A,P[N+5],21,-57434055),A=M(A,T,E,O,P[N+12],6,1700485571),O=M(O,A,T,E,P[N+3],10,-1894986606),E=M(E,O,A,T,P[N+10],15,-1051523),T=M(T,E,O,A,P[N+1],21,-2054922799),A=M(A,T,E,O,P[N+8],6,1873313359),O=M(O,A,T,E,P[N+15],10,-30611744),E=M(E,O,A,T,P[N+6],15,-1560198380),T=M(T,E,O,A,P[N+13],21,1309151649),A=M(A,T,E,O,P[N+4],6,-145523070),O=M(O,A,T,E,P[N+11],10,-1120210379),E=M(E,O,A,T,P[N+2],15,718787259),T=M(T,E,O,A,P[N+9],21,-343485551),A=I(A,H),T=I(T,K),E=I(E,Y),O=I(O,Q)}return Array(A,T,E,O)}function x(P,D,A,T,E,O){return I((D=I(I(D,P),I(T,O)))<<E|D>>>32-E,A)}function m(P,D,A,T,E,O,N){return x(D&A|~D&T,P,D,E,O,N)}function S(P,D,A,T,E,O,N){return x(D&T|A&~T,P,D,E,O,N)}function w(P,D,A,T,E,O,N){return x(D^A^T,P,D,E,O,N)}function M(P,D,A,T,E,O,N){return x(A^(D|~T),P,D,E,O,N)}function I(P,D){var A=(65535&P)+(65535&D);return(P>>16)+(D>>16)+(A>>16)<<16|65535&A}r.exports=function(P){return v.hash(P,_,16)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],7:[function(n,r,i){(function(s,o,a,l,u,d,h,p,g){r.exports=function(v){for(var _,x=new Array(v),m=0;m<v;m++)!(3&m)&&(_=4294967296*Math.random()),x[m]=_>>>((3&m)<<3)&255;return x}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{buffer:3,lYpoI2:11}],8:[function(n,r,i){(function(s,o,a,l,u,d,h,p,g){var v=n("./helpers");function _(S,w){S[w>>5]|=128<<24-w%32,S[15+(w+64>>9<<4)]=w;for(var M,I,P,D=Array(80),A=1732584193,T=-271733879,E=-1732584194,O=271733878,N=-1009589776,H=0;H<S.length;H+=16){for(var K=A,Y=T,Q=E,ee=O,F=N,j=0;j<80;j++){D[j]=j<16?S[H+j]:m(D[j-3]^D[j-8]^D[j-14]^D[j-16],1);var V=x(x(m(A,5),(V=T,I=E,P=O,(M=j)<20?V&I|~V&P:!(M<40)&&M<60?V&I|V&P|I&P:V^I^P)),x(x(N,D[j]),(M=j)<20?1518500249:M<40?1859775393:M<60?-1894007588:-899497514)),N=O,O=E,E=m(T,30),T=A,A=V}A=x(A,K),T=x(T,Y),E=x(E,Q),O=x(O,ee),N=x(N,F)}return Array(A,T,E,O,N)}function x(S,w){var M=(65535&S)+(65535&w);return(S>>16)+(w>>16)+(M>>16)<<16|65535&M}function m(S,w){return S<<w|S>>>32-w}r.exports=function(S){return v.hash(S,_,20,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],9:[function(n,r,i){(function(s,o,a,l,u,d,h,p,g){function v(w,M){var I=(65535&w)+(65535&M);return(w>>16)+(M>>16)+(I>>16)<<16|65535&I}function _(w,M){var I,P=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),D=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),A=new Array(64);w[M>>5]|=128<<24-M%32,w[15+(M+64>>9<<4)]=M;for(var T,E,O=0;O<w.length;O+=16){for(var N=D[0],H=D[1],K=D[2],Y=D[3],Q=D[4],ee=D[5],F=D[6],j=D[7],V=0;V<64;V++)A[V]=V<16?w[V+O]:v(v(v((E=A[V-2],m(E,17)^m(E,19)^S(E,10)),A[V-7]),(E=A[V-15],m(E,7)^m(E,18)^S(E,3))),A[V-16]),I=v(v(v(v(j,m(E=Q,6)^m(E,11)^m(E,25)),Q&ee^~Q&F),P[V]),A[V]),T=v(m(T=N,2)^m(T,13)^m(T,22),N&H^N&K^H&K),j=F,F=ee,ee=Q,Q=v(Y,I),Y=K,K=H,H=N,N=v(I,T);D[0]=v(N,D[0]),D[1]=v(H,D[1]),D[2]=v(K,D[2]),D[3]=v(Y,D[3]),D[4]=v(Q,D[4]),D[5]=v(ee,D[5]),D[6]=v(F,D[6]),D[7]=v(j,D[7])}return D}var x=n("./helpers"),m=function(w,M){return w>>>M|w<<32-M},S=function(w,M){return w>>>M};r.exports=function(w){return x.hash(w,_,32,!0)}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js","/node_modules/gulp-browserify/node_modules/crypto-browserify")},{"./helpers":4,buffer:3,lYpoI2:11}],10:[function(n,r,i){(function(s,o,a,l,u,d,h,p,g){i.read=function(v,_,x,m,O){var w,M,I=8*O-m-1,P=(1<<I)-1,D=P>>1,A=-7,T=x?O-1:0,E=x?-1:1,O=v[_+T];for(T+=E,w=O&(1<<-A)-1,O>>=-A,A+=I;0<A;w=256*w+v[_+T],T+=E,A-=8);for(M=w&(1<<-A)-1,w>>=-A,A+=m;0<A;M=256*M+v[_+T],T+=E,A-=8);if(w===0)w=1-D;else{if(w===P)return M?NaN:1/0*(O?-1:1);M+=Math.pow(2,m),w-=D}return(O?-1:1)*M*Math.pow(2,w-m)},i.write=function(v,_,x,m,S,N){var M,I,P=8*N-S-1,D=(1<<P)-1,A=D>>1,T=S===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=m?0:N-1,O=m?1:-1,N=_<0||_===0&&1/_<0?1:0;for(_=Math.abs(_),isNaN(_)||_===1/0?(I=isNaN(_)?1:0,M=D):(M=Math.floor(Math.log(_)/Math.LN2),_*(m=Math.pow(2,-M))<1&&(M--,m*=2),2<=(_+=1<=M+A?T/m:T*Math.pow(2,1-A))*m&&(M++,m/=2),D<=M+A?(I=0,M=D):1<=M+A?(I=(_*m-1)*Math.pow(2,S),M+=A):(I=_*Math.pow(2,A-1)*Math.pow(2,S),M=0));8<=S;v[x+E]=255&I,E+=O,I/=256,S-=8);for(M=M<<S|I,P+=S;0<P;v[x+E]=255&M,E+=O,M/=256,P-=8);v[x+E-O]|=128*N}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/ieee754/index.js","/node_modules/gulp-browserify/node_modules/ieee754")},{buffer:3,lYpoI2:11}],11:[function(n,r,i){(function(s,o,a,l,u,d,h,p,g){var v,_,x;function m(){}(s=r.exports={}).nextTick=(_=typeof window<"u"&&window.setImmediate,x=typeof window<"u"&&window.postMessage&&window.addEventListener,_?function(S){return window.setImmediate(S)}:x?(v=[],window.addEventListener("message",function(S){var w=S.source;w!==window&&w!==null||S.data!=="process-tick"||(S.stopPropagation(),0<v.length&&v.shift()())},!0),function(S){v.push(S),window.postMessage("process-tick","*")}):function(S){setTimeout(S,0)}),s.title="browser",s.browser=!0,s.env={},s.argv=[],s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.binding=function(S){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(S){throw new Error("process.chdir is not supported")}}).call(this,n("lYpoI2"),typeof self<"u"?self:typeof window<"u"?window:{},n("buffer").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],"/node_modules/gulp-browserify/node_modules/process/browser.js","/node_modules/gulp-browserify/node_modules/process")},{buffer:3,lYpoI2:11}]},{},[1])(1)})})(jk);var YX=jk.exports;const qX=_s(YX);var fn={position:"csm_Position",positionRaw:"csm_PositionRaw",pointSize:"csm_PointSize",fragColor:"csm_FragColor",diffuseColor:"csm_DiffuseColor",normal:"csm_Normal",roughness:"csm_Roughness",metalness:"csm_Metalness",emissive:"csm_Emissive"};const ZX={[`${fn.normal}`]:{"#include <beginnormal_vertex>":`
    vec3 objectNormal = ${fn.normal};
    #ifdef USE_TANGENT
	    vec3 objectTangent = vec3( tangent.xyz );
    #endif
    `},[`${fn.position}`]:{"#include <begin_vertex>":`
    vec3 transformed = ${fn.position};
  `},[`${fn.positionRaw}`]:{"#include <begin_vertex>":`
    vec4 csm_positionUnprojected = ${fn.positionRaw};
    mat4x4 csm_unprojectMatrix = projectionMatrix * modelViewMatrix;
    #ifdef USE_INSTANCING
      csm_unprojectMatrix = csm_unprojectMatrix * instanceMatrix;
    #endif
    csm_positionUnprojected = inverse(csm_unprojectMatrix) * csm_positionUnprojected;
    vec3 transformed = csm_positionUnprojected.xyz;
  `},[`${fn.pointSize}`]:{"gl_PointSize = size;":`
    gl_PointSize = ${fn.pointSize};
    `},[`${fn.diffuseColor}`]:{"#include <color_fragment>":`
    #include <color_fragment>
    diffuseColor = ${fn.diffuseColor};
  `},[`${fn.fragColor}`]:{"#include <dithering_fragment>":`
    #include <dithering_fragment>
    gl_FragColor  = ${fn.fragColor};
  `},[`${fn.emissive}`]:{"vec3 totalEmissiveRadiance = emissive;":`
    vec3 totalEmissiveRadiance = ${fn.emissive};
    `},[`${fn.roughness}`]:{"#include <roughnessmap_fragment>":`
    #include <roughnessmap_fragment>
    roughnessFactor = ${fn.roughness};
    `},[`${fn.metalness}`]:{"#include <metalnessmap_fragment>":`
    #include <metalnessmap_fragment>
    metalnessFactor = ${fn.metalness};
    `}},QX={[`${fn.position}`]:{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = projectionMatrix * modelViewMatrix * vec4( ${fn.position}, 1.0 );
  `},[`${fn.positionRaw}`]:{"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );":`
    gl_Position = ${fn.position};
  `},[`${fn.diffuseColor}`]:{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = ${fn.diffuseColor};
  `},[`${fn.fragColor}`]:{"gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );":`
    gl_FragColor = ${fn.fragColor};
  `}},JX=`

#ifdef IS_VERTEX
    vec3 csm_Position = position;
    vec4 csm_PositionRaw = projectionMatrix * modelViewMatrix * vec4(position, 1.);
    vec3 csm_Normal = normal;
#else
    #if defined IS_SHADERMATERIAL || defined IS_MESHDEPTHMATERIAL || defined IS_MESHNORMALMATERIAL
        vec4 csm_DiffuseColor = vec4(1., 0., 1., 1.);
        vec4 csm_FragColor = vec4(1., 0., 1., 1.);
    #else
        #if defined IS_MESHSTANDARDMATERIAL || defined IS_MESHPHYSICALMATERIAL
            vec3 csm_Emissive = emissive;
            float csm_Roughness = roughness;
            float csm_Metalness = metalness;
        #endif
        
        #ifdef USE_MAP
            vec4 _csm_sampledDiffuseColor = texture2D(map, vUv);

            #ifdef DECODE_VIDEO_TEXTURE
            // inline sRGB decode (TODO: Remove this code when https://crbug.com/1256340 is solved)
            _csm_sampledDiffuseColor = vec4(mix(pow(_csm_sampledDiffuseColor.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), _csm_sampledDiffuseColor.rgb * 0.0773993808, vec3(lessThanEqual(_csm_sampledDiffuseColor.rgb, vec3(0.04045)))), _csm_sampledDiffuseColor.w);
            #endif

            vec4 csm_DiffuseColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
            vec4 csm_FragColor = vec4(diffuse, opacity) * _csm_sampledDiffuseColor;
        #else
            vec4 csm_DiffuseColor = vec4(diffuse, opacity);
            vec4 csm_FragColor = vec4(diffuse, opacity);
        #endif
    #endif
#endif
`,eK=(t,e,n)=>t.split(e).join(n),tK=function(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},nK=(t,e)=>new RegExp(`\\b${tK(e)}\\b`).test(t);function rK(t){try{new t}catch(e){if(e.message.indexOf("is not a constructor")>=0)return!1}return!0}class iK extends er{constructor({baseMaterial:e,fragmentShader:n,vertexShader:r,uniforms:i,patchMap:s,cacheKey:o,...a}){let l;if(rK(e)?l=new e(a):(l=e,Object.assign(l,a)),l.type==="RawShaderMaterial")throw new Error("CustomShaderMaterial does not support RawShaderMaterial");super(),this.uniforms=i||{},this._customPatchMap=s||{},this._fs=n||"",this._vs=r||"",this._cacheKey=o,this._base=e,this._type=l.type,this._instanceID=dy.generateUUID();for(const u in l){let d=u;u.startsWith("_")&&(d=u.split("_")[1]),this[d]===void 0&&(this[d]=0),this[d]=l[d]}this.update({fragmentShader:n,vertexShader:r,uniforms:i,cacheKey:o})}update(e){const n=(e==null?void 0:e.uniforms)||{},r=(e==null?void 0:e.fragmentShader)||this._fs,i=(e==null?void 0:e.vertexShader)||this._vs,s=Object.values(n).reduce((o,{value:a})=>o+JSON.stringify(a),"");this.uuid=(e==null||e.cacheKey==null?void 0:e.cacheKey())||qX([r,i,s,this._instanceID]),this.generateMaterial({fragmentShader:r,vertexShader:i,uniforms:n})}clone(){const e=new this.constructor({baseMaterial:this._base,fragmentShader:this._fs,vertexShader:this._vs,patchMap:this._customPatchMap,uniforms:this.uniforms,cacheKey:this._cacheKey});for(const n in this)n!=="uuid"&&(e[n]=this[n]);return e}generateMaterial({fragmentShader:e,vertexShader:n,uniforms:r}){const i=this.parseShader(e),s=this.parseShader(n);this.uniforms=r||{},this.customProgramCacheKey=()=>this.uuid,this.onBeforeCompile=o=>{if(i){const a=this.patchShader(i,o.fragmentShader);o.fragmentShader=this.getMaterialDefine()+a}if(s){const a=this.patchShader(s,o.vertexShader);o.vertexShader=`#define IS_VERTEX;
`+a,o.vertexShader=this.getMaterialDefine()+o.vertexShader}o.uniforms={...o.uniforms,...this.uniforms},this.uniforms=o.uniforms},this.needsUpdate=!0}getMaterialDefine(){return`#define IS_${this._type.toUpperCase()};
`}getPatchMapForMaterial(){switch(this._type){case"ShaderMaterial":return QX;default:return ZX}}patchShader(e,n){let r=n;const i={...this.getPatchMapForMaterial(),...this._customPatchMap};return Object.keys(i).forEach(s=>{Object.keys(i[s]).forEach(o=>{nK(e.main,s)&&(r=eK(r,o,i[s][o]))})}),r=r.replace("void main() {",`
          ${e.header}
          void main() {
            ${JX}
            ${e.main}
          `),r=e.defines+r,r}parseShader(e){if(!e)return;const n=e.replace(/\/\*\*(.*?)\*\/|\/\/(.*?)\n/gm,""),r=Vw(n),i=Gw(r),s=i.map(l=>l.name).indexOf("main"),o=Rh(r.slice(0,s>=0?i[s].outer[0]:void 0)),a=s>=0?this.getShaderFromIndex(r,i[s].body):"";return{defines:"",header:o,main:a}}getShaderFromIndex(e,n){return Rh(e.slice(n[0],n[1]))}}function sK(...t){return e=>t.forEach(n=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(n,e))}const Xk=R.forwardRef((t,e)=>{const{children:n,...r}=t;return R.Children.toArray(n).some(W3)?R.createElement(R.Fragment,null,R.Children.map(n,i=>W3(i)?R.createElement(Ww,Oe({},r,{ref:e}),i.props.children):i)):R.createElement(Ww,Oe({},r,{ref:e}),n)});Xk.displayName="Slot";const Ww=R.forwardRef((t,e)=>{const{children:n,...r}=t;return R.isValidElement(n)?R.cloneElement(n,{...aK(r,n.props),ref:sK(e,n.ref)}):R.Children.count(n)>1?R.Children.only(null):null});Ww.displayName="SlotClone";const oK=({children:t})=>R.createElement(R.Fragment,null,t);function W3(t){return R.isValidElement(t)&&t.type===oK}function aK(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?n[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const lK=["a","button","div","h2","h3","img","li","nav","ol","p","span","svg","ul"].reduce((t,e)=>({...t,[e]:R.forwardRef((n,r)=>{const{asChild:i,...s}=n,o=i?Xk:e;return R.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),R.createElement(o,Oe({},s,{ref:r}))})}),{}),uK=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},cK=R.forwardRef((t,e)=>{var n,r;const{containerRef:i,style:s,...o}=t,a=(n=i==null?void 0:i.current)!==null&&n!==void 0?n:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=R.useState({});return uK(()=>{l({})},[]),a?x4.createPortal(R.createElement(lK.div,Oe({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),fK=cK;var $3=Object.prototype.hasOwnProperty;function L0(t,e){var n,r;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&L0(t[r],e[r]););return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if($3.call(t,n)&&++r&&!$3.call(e,n)||!(n in e)||!L0(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function Kk(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(e,n[r])||!Object.is(t[n[r]],e[n[r]]))return!1;return!0}var Ay=function(e,n,r,i){this.name=e,this.fn=n,this.args=r,this.modifiers=i};Ay.prototype._test=function(e){var n=this.fn;try{hf(this.modifiers.slice(),n,this)(e)}catch{n=function(){return!1}}try{return hf(this.modifiers.slice(),n,this)(e)}catch{return!1}};Ay.prototype._check=function(e){try{hf(this.modifiers.slice(),this.fn,this)(e)}catch{if(hf(this.modifiers.slice(),function(r){return r},this)(!1))return}if(!hf(this.modifiers.slice(),this.fn,this)(e))throw null};Ay.prototype._testAsync=function(e){var n=this;return new Promise(function(r,i){qk(n.modifiers.slice(),n.fn,n)(e).then(function(s){s?r(e):i(null)}).catch(function(s){return i(s)})})};function Yk(t,e){return e===void 0&&(e="simple"),typeof t=="object"?t[e]:t}function hf(t,e,n){if(t.length){var r=t.shift(),i=hf(t,e,n);return r.perform(i,n)}else return Yk(e)}function qk(t,e,n){if(t.length){var r=t.shift(),i=qk(t,e,n);return r.performAsync(i,n)}else return function(s){return Promise.resolve(Yk(e,"async")(s))}}var dK=function(e,n,r){this.name=e,this.perform=n,this.performAsync=r},gE=function(t){function e(n,r,i,s){for(var o=[],a=arguments.length-4;a-- >0;)o[a]=arguments[a+4];t.call(this,o),t.captureStackTrace&&t.captureStackTrace(this,e),this.rule=n,this.value=r,this.cause=i,this.target=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),To=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=[]),this.chain=e,this.nextRuleModifiers=n};To.prototype._applyRule=function(e,n){var r=this;return function(){for(var i=[],s=arguments.length;s--;)i[s]=arguments[s];return r.chain.push(new Ay(n,e.apply(r,i),i,r.nextRuleModifiers)),r.nextRuleModifiers=[],r}};To.prototype._applyModifier=function(e,n){return this.nextRuleModifiers.push(new dK(n,e.simple,e.async)),this};To.prototype._clone=function(){return new To(this.chain.slice(),this.nextRuleModifiers.slice())};To.prototype.test=function(e){return this.chain.every(function(n){return n._test(e)})};To.prototype.testAll=function(e){var n=[];return this.chain.forEach(function(r){try{r._check(e)}catch(i){n.push(new gE(r,e,i))}}),n};To.prototype.check=function(e){this.chain.forEach(function(n){try{n._check(e)}catch(r){throw new gE(n,e,r)}})};To.prototype.testAsync=function(e){var n=this;return new Promise(function(r,i){Zk(e,n.chain.slice(),r,i)})};function Zk(t,e,n,r){if(e.length){var i=e.shift();i._testAsync(t).then(function(){Zk(t,e,n,r)},function(s){r(new gE(i,t,s))})}else n(t)}var j3=function(t,e){return e&&typeof t=="string"&&t.trim().length===0?!0:t==null};function hK(t,e){return e===void 0&&(e=!1),{simple:function(n){return j3(n,e)||t.check(n)===void 0},async:function(n){return j3(n,e)||t.testAsync(n)}}}function yi(){return typeof Proxy<"u"?Qk(new To):$w(new To)}var wp={};yi.extend=function(t){Object.assign(wp,t)};yi.clearCustomRules=function(){wp={}};function Qk(t){return new Proxy(t,{get:function(n,r){if(r in n)return n[r];var i=Qk(t._clone());if(r in O0)return i._applyModifier(O0[r],r);if(r in wp)return i._applyRule(wp[r],r);if(r in jw)return i._applyRule(jw[r],r)}})}function $w(t){var e=function(i,s){return Object.keys(i).forEach(function(o){s[o]=function(){for(var a=[],l=arguments.length;l--;)a[l]=arguments[l];var u=$w(s._clone()),d=u._applyRule(i[o],o).apply(void 0,a);return d}}),s},n=e(jw,t),r=e(wp,n);return Object.keys(O0).forEach(function(i){Object.defineProperty(r,i,{get:function(){var s=$w(r._clone());return s._applyModifier(O0[i],i)}})}),r}var O0={not:{simple:function(t){return function(e){return!t(e)}},async:function(t){return function(e){return Promise.resolve(t(e)).then(function(n){return!n}).catch(function(){return!0})}}},some:{simple:function(t){return function(e){return pv(e).some(function(n){try{return t(n)}catch{return!1}})}},async:function(t){return function(e){return Promise.all(pv(e).map(function(n){try{return t(n).catch(function(){return!1})}catch{return!1}})).then(function(n){return n.some(Boolean)})}}},every:{simple:function(t){return function(e){return e!==!1&&pv(e).every(t)}},async:function(t){return function(e){return Promise.all(pv(e).map(t)).then(function(n){return n.every(Boolean)})}}},strict:{simple:function(t,e){return function(n){return X3(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&t(n):t(n)}},async:function(t,e){return function(n){return Promise.resolve(t(n)).then(function(r){return X3(e)&&n&&typeof n=="object"?Object.keys(e.args[0]).length===Object.keys(n).length&&r:r}).catch(function(){return!1})}}}};function X3(t){return t&&t.name==="schema"&&t.args.length>0&&typeof t.args[0]=="object"}function pv(t){return typeof t=="string"?t.split(""):t}var jw={equal:function(t){return function(e){return e==t}},exact:function(t){return function(e){return e===t}},number:function(t){return t===void 0&&(t=!0),function(e){return typeof e=="number"&&(t||isFinite(e))}},integer:function(){return function(t){var e=Number.isInteger||pK;return e(t)}},numeric:function(){return function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},string:function(){return Pc("string")},boolean:function(){return Pc("boolean")},undefined:function(){return Pc("undefined")},null:function(){return Pc("null")},array:function(){return Pc("array")},object:function(){return Pc("object")},instanceOf:function(t){return function(e){return e instanceof t}},pattern:function(t){return function(e){return t.test(e)}},lowercase:function(){return function(t){return typeof t=="boolean"||t===t.toLowerCase()&&t.trim()!==""}},uppercase:function(){return function(t){return t===t.toUpperCase()&&t.trim()!==""}},vowel:function(){return function(t){return/^[aeiou]+$/i.test(t)}},consonant:function(){return function(t){return/^(?=[^aeiou])([a-z]+)$/i.test(t)}},first:function(t){return function(e){return e[0]==t}},last:function(t){return function(e){return e[e.length-1]==t}},empty:function(){return function(t){return t.length===0}},length:function(t,e){return function(n){return n.length>=t&&n.length<=(e||t)}},minLength:function(t){return function(e){return e.length>=t}},maxLength:function(t){return function(e){return e.length<=t}},negative:function(){return function(t){return t<0}},positive:function(){return function(t){return t>=0}},between:function(t,e){return function(n){return n>=t&&n<=e}},range:function(t,e){return function(n){return n>=t&&n<=e}},lessThan:function(t){return function(e){return e<t}},lessThanOrEqual:function(t){return function(e){return e<=t}},greaterThan:function(t){return function(e){return e>t}},greaterThanOrEqual:function(t){return function(e){return e>=t}},even:function(){return function(t){return t%2===0}},odd:function(){return function(t){return t%2!==0}},includes:function(t){return function(e){return~e.indexOf(t)}},schema:function(t){return mK(t)},passesAnyOf:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(n){return t.some(function(r){return r.test(n)})}},optional:hK};function Pc(t){return function(e){return Array.isArray(e)&&t==="array"||e===null&&t==="null"||typeof e===t}}function pK(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function mK(t){return{simple:function(e){var n=[];if(Object.keys(t).forEach(function(r){var i=t[r];try{i.check((e||{})[r])}catch(s){s.target=r,n.push(s)}}),n.length>0)throw n;return!0},async:function(e){var n=[],r=Object.keys(t).map(function(i){var s=t[i];return s.testAsync((e||{})[i]).catch(function(o){o.target=i,n.push(o)})});return Promise.all(r).then(function(){if(n.length>0)throw n;return!0})}}}var on="colors",Qr="sizes",Qe="space",gK={gap:Qe,gridGap:Qe,columnGap:Qe,gridColumnGap:Qe,rowGap:Qe,gridRowGap:Qe,inset:Qe,insetBlock:Qe,insetBlockEnd:Qe,insetBlockStart:Qe,insetInline:Qe,insetInlineEnd:Qe,insetInlineStart:Qe,margin:Qe,marginTop:Qe,marginRight:Qe,marginBottom:Qe,marginLeft:Qe,marginBlock:Qe,marginBlockEnd:Qe,marginBlockStart:Qe,marginInline:Qe,marginInlineEnd:Qe,marginInlineStart:Qe,padding:Qe,paddingTop:Qe,paddingRight:Qe,paddingBottom:Qe,paddingLeft:Qe,paddingBlock:Qe,paddingBlockEnd:Qe,paddingBlockStart:Qe,paddingInline:Qe,paddingInlineEnd:Qe,paddingInlineStart:Qe,top:Qe,right:Qe,bottom:Qe,left:Qe,scrollMargin:Qe,scrollMarginTop:Qe,scrollMarginRight:Qe,scrollMarginBottom:Qe,scrollMarginLeft:Qe,scrollMarginX:Qe,scrollMarginY:Qe,scrollMarginBlock:Qe,scrollMarginBlockEnd:Qe,scrollMarginBlockStart:Qe,scrollMarginInline:Qe,scrollMarginInlineEnd:Qe,scrollMarginInlineStart:Qe,scrollPadding:Qe,scrollPaddingTop:Qe,scrollPaddingRight:Qe,scrollPaddingBottom:Qe,scrollPaddingLeft:Qe,scrollPaddingX:Qe,scrollPaddingY:Qe,scrollPaddingBlock:Qe,scrollPaddingBlockEnd:Qe,scrollPaddingBlockStart:Qe,scrollPaddingInline:Qe,scrollPaddingInlineEnd:Qe,scrollPaddingInlineStart:Qe,fontSize:"fontSizes",background:on,backgroundColor:on,backgroundImage:on,borderImage:on,border:on,borderBlock:on,borderBlockEnd:on,borderBlockStart:on,borderBottom:on,borderBottomColor:on,borderColor:on,borderInline:on,borderInlineEnd:on,borderInlineStart:on,borderLeft:on,borderLeftColor:on,borderRight:on,borderRightColor:on,borderTop:on,borderTopColor:on,caretColor:on,color:on,columnRuleColor:on,fill:on,outline:on,outlineColor:on,stroke:on,textDecorationColor:on,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:Qr,minBlockSize:Qr,maxBlockSize:Qr,inlineSize:Qr,minInlineSize:Qr,maxInlineSize:Qr,width:Qr,minWidth:Qr,maxWidth:Qr,height:Qr,minHeight:Qr,maxHeight:Qr,flexBasis:Qr,gridTemplateColumns:Qr,gridTemplateRows:Qr,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},vK=(t,e)=>typeof e=="function"?{"()":Function.prototype.toString.call(e)}:e,Xf=()=>{const t=Object.create(null);return(e,n,...r)=>{const i=(s=>JSON.stringify(s,vK))(e);return i in t?t[i]:t[i]=n(e,...r)}},hu=Symbol.for("sxs.internal"),vE=(t,e)=>Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)),K3=t=>{for(const e in t)return!0;return!1},{hasOwnProperty:yK}=Object.prototype,Xw=t=>t.includes("-")?t:t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),xK=/\s+(?![^()]*\))/,Cc=t=>e=>t(...typeof e=="string"?String(e).split(xK):[e]),Y3={appearance:t=>({WebkitAppearance:t,appearance:t}),backfaceVisibility:t=>({WebkitBackfaceVisibility:t,backfaceVisibility:t}),backdropFilter:t=>({WebkitBackdropFilter:t,backdropFilter:t}),backgroundClip:t=>({WebkitBackgroundClip:t,backgroundClip:t}),boxDecorationBreak:t=>({WebkitBoxDecorationBreak:t,boxDecorationBreak:t}),clipPath:t=>({WebkitClipPath:t,clipPath:t}),content:t=>({content:t.includes('"')||t.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(t)?t:`"${t}"`}),hyphens:t=>({WebkitHyphens:t,hyphens:t}),maskImage:t=>({WebkitMaskImage:t,maskImage:t}),maskSize:t=>({WebkitMaskSize:t,maskSize:t}),tabSize:t=>({MozTabSize:t,tabSize:t}),textSizeAdjust:t=>({WebkitTextSizeAdjust:t,textSizeAdjust:t}),userSelect:t=>({WebkitUserSelect:t,userSelect:t}),marginBlock:Cc((t,e)=>({marginBlockStart:t,marginBlockEnd:e||t})),marginInline:Cc((t,e)=>({marginInlineStart:t,marginInlineEnd:e||t})),maxSize:Cc((t,e)=>({maxBlockSize:t,maxInlineSize:e||t})),minSize:Cc((t,e)=>({minBlockSize:t,minInlineSize:e||t})),paddingBlock:Cc((t,e)=>({paddingBlockStart:t,paddingBlockEnd:e||t})),paddingInline:Cc((t,e)=>({paddingInlineStart:t,paddingInlineEnd:e||t}))},N_=/([\d.]+)([^]*)/,_K=(t,e)=>t.length?t.reduce((n,r)=>(n.push(...e.map(i=>i.includes("&")?i.replace(/&/g,/[ +>|~]/.test(r)&&/&.*&/.test(i)?`:is(${r})`:r):r+" "+i)),n),[]):e,SK=(t,e)=>t in wK&&typeof e=="string"?e.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(n,r,i,s)=>r+(i==="stretch"?`-moz-available${s};${Xw(t)}:${r}-webkit-fill-available`:`-moz-fit-content${s};${Xw(t)}:${r}fit-content`)+s):String(e),wK={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},ua=t=>t?t+"-":"",Jk=(t,e,n)=>t.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(r,i,s,o,a)=>o=="$"==!!s?r:(i||o=="--"?"calc(":"")+"var(--"+(o==="$"?ua(e)+(a.includes("$")?"":ua(n))+a.replace(/\$/g,"-"):a)+")"+(i||o=="--"?"*"+(i||"")+(s||"1")+")":"")),bK=/\s*,\s*(?![^()]*\))/,MK=Object.prototype.toString,ef=(t,e,n,r,i)=>{let s,o,a;const l=(u,d,h)=>{let p,g;const v=_=>{for(p in _){const S=p.charCodeAt(0)===64,w=S&&Array.isArray(_[p])?_[p]:[_[p]];for(g of w){const M=/[A-Z]/.test(m=p)?m:m.replace(/-[^]/g,P=>P[1].toUpperCase()),I=typeof g=="object"&&g&&g.toString===MK&&(!r.utils[M]||!d.length);if(M in r.utils&&!I){const P=r.utils[M];if(P!==o){o=P,v(P(g)),o=null;continue}}else if(M in Y3){const P=Y3[M];if(P!==a){a=P,v(P(g)),a=null;continue}}if(S&&(x=p.slice(1)in r.media?"@media "+r.media[p.slice(1)]:p,p=x.replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(P,D,A,T,E,O)=>{const N=N_.test(D),H=.0625*(N?-1:1),[K,Y]=N?[T,D]:[D,T];return"("+(A[0]==="="?"":A[0]===">"===N?"max-":"min-")+K+":"+(A[0]!=="="&&A.length===1?Y.replace(N_,(Q,ee,F)=>Number(ee)+H*(A===">"?1:-1)+F):Y)+(E?") and ("+(E[0]===">"?"min-":"max-")+K+":"+(E.length===1?O.replace(N_,(Q,ee,F)=>Number(ee)+H*(E===">"?-1:1)+F):O):"")+")"})),I){const P=S?h.concat(p):[...h],D=S?[...d]:_K(d,p.split(bK));s!==void 0&&i(q3(...s)),s=void 0,l(g,D,P)}else s===void 0&&(s=[[],d,h]),p=S||p.charCodeAt(0)!==36?p:`--${ua(r.prefix)}${p.slice(1).replace(/\$/g,"-")}`,g=I?g:typeof g=="number"?g&&M in EK?String(g)+"px":String(g):Jk(SK(M,g??""),r.prefix,r.themeMap[M]),s[0].push(`${S?`${p} `:`${Xw(p)}:`}${g}`)}}var x,m};v(u),s!==void 0&&i(q3(...s)),s=void 0};l(t,e,n)},q3=(t,e,n)=>`${n.map(r=>`${r}{`).join("")}${e.length?`${e.join(",")}{`:""}${t.join(";")}${e.length?"}":""}${Array(n.length?n.length+1:0).join("}")}`,EK={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},Z3=t=>String.fromCharCode(t+(t>25?39:97)),pu=t=>(e=>{let n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=Z3(n%52)+r;return Z3(n%52)+r})(((e,n)=>{let r=n.length;for(;r;)e=33*e^n.charCodeAt(--r);return e})(5381,JSON.stringify(t))>>>0),fh=["themed","global","styled","onevar","resonevar","allvar","inline"],TK=t=>{if(t.href&&!t.href.startsWith(location.origin))return!1;try{return!!t.cssRules}catch{return!1}},PK=t=>{let e;const n=()=>{const{cssRules:i}=e.sheet;return[].map.call(i,(s,o)=>{const{cssText:a}=s;let l="";if(a.startsWith("--sxs"))return"";if(i[o-1]&&(l=i[o-1].cssText).startsWith("--sxs")){if(!s.cssRules.length)return"";for(const u in e.rules)if(e.rules[u].group===s)return`--sxs{--sxs:${[...e.rules[u].cache].join(" ")}}${a}`;return s.cssRules.length?`${l}${a}`:""}return a}).join("")},r=()=>{if(e){const{rules:a,sheet:l}=e;if(!l.deleteRule){for(;Object(Object(l.cssRules)[0]).type===3;)l.cssRules.splice(0,1);l.cssRules=[]}for(const u in a)delete a[u]}const i=Object(t).styleSheets||[];for(const a of i)if(TK(a)){for(let l=0,u=a.cssRules;u[l];++l){const d=Object(u[l]);if(d.type!==1)continue;const h=Object(u[l+1]);if(h.type!==4)continue;++l;const{cssText:p}=d;if(!p.startsWith("--sxs"))continue;const g=p.slice(14,-3).trim().split(/\s+/),v=fh[g[0]];v&&(e||(e={sheet:a,reset:r,rules:{},toString:n}),e.rules[v]={group:h,index:l,cache:new Set(g)})}if(e)break}if(!e){const a=(l,u)=>({type:u,cssRules:[],insertRule(d,h){this.cssRules.splice(h,0,a(d,{import:3,undefined:1}[(d.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return l==="@media{}"?`@media{${[].map.call(this.cssRules,d=>d.cssText).join("")}}`:l}});e={sheet:t?(t.head||t).appendChild(document.createElement("style")).sheet:a("","text/css"),rules:{},reset:r,toString:n}}const{sheet:s,rules:o}=e;for(let a=fh.length-1;a>=0;--a){const l=fh[a];if(!o[l]){const u=fh[a+1],d=o[u]?o[u].index:s.cssRules.length;s.insertRule("@media{}",d),s.insertRule(`--sxs{--sxs:${a}}`,d),o[l]={group:s.cssRules[d+1],index:d,cache:new Set([a])}}CK(o[l])}};return r(),e},CK=t=>{const e=t.group;let n=e.cssRules.length;t.apply=r=>{try{e.insertRule(r,n),++n}catch{}}},Jd=Symbol(),AK=Xf(),Q3=(t,e)=>AK(t,()=>(...n)=>{let r={type:null,composers:new Set};for(const i of n)if(i!=null)if(i[hu]){r.type==null&&(r.type=i[hu].type);for(const s of i[hu].composers)r.composers.add(s)}else i.constructor!==Object||i.$$typeof?r.type==null&&(r.type=i):r.composers.add(RK(i,t));return r.type==null&&(r.type="span"),r.composers.size||r.composers.add(["PJLV",{},[],[],{},[]]),IK(t,r,e)}),RK=({variants:t,compoundVariants:e,defaultVariants:n,...r},i)=>{const s=`${ua(i.prefix)}c-${pu(r)}`,o=[],a=[],l=Object.create(null),u=[];for(const p in n)l[p]=String(n[p]);if(typeof t=="object"&&t)for(const p in t){d=l,h=p,yK.call(d,h)||(l[p]="undefined");const g=t[p];for(const v in g){const _={[p]:String(v)};String(v)==="undefined"&&u.push(p);const x=g[v],m=[_,x,!K3(x)];o.push(m)}}var d,h;if(typeof e=="object"&&e)for(const p of e){let{css:g,...v}=p;g=typeof g=="object"&&g||{};for(const x in v)v[x]=String(v[x]);const _=[v,g,!K3(g)];a.push(_)}return[s,r,o,a,l,u]},IK=(t,e,n)=>{const[r,i,s,o]=DK(e.composers),a=typeof e.type=="function"||e.type.$$typeof?(h=>{function p(){for(let g=0;g<p[Jd].length;g++){const[v,_]=p[Jd][g];h.rules[v].apply(_)}return p[Jd]=[],null}return p[Jd]=[],p.rules={},fh.forEach(g=>p.rules[g]={apply:v=>p[Jd].push([g,v])}),p})(n):null,l=(a||n).rules,u=`.${r}${i.length>1?`:where(.${i.slice(1).join(".")})`:""}`,d=h=>{h=typeof h=="object"&&h||LK;const{css:p,...g}=h,v={};for(const m in s)if(delete g[m],m in h){let S=h[m];typeof S=="object"&&S?v[m]={"@initial":s[m],...S}:(S=String(S),v[m]=S!=="undefined"||o.has(m)?S:s[m])}else v[m]=s[m];const _=new Set([...i]);for(const[m,S,w,M]of e.composers){n.rules.styled.cache.has(m)||(n.rules.styled.cache.add(m),ef(S,[`.${m}`],[],t,D=>{l.styled.apply(D)}));const I=J3(w,v,t.media),P=J3(M,v,t.media,!0);for(const D of I)if(D!==void 0)for(const[A,T,E]of D){const O=`${m}-${pu(T)}-${A}`;_.add(O);const N=(E?n.rules.resonevar:n.rules.onevar).cache,H=E?l.resonevar:l.onevar;N.has(O)||(N.add(O),ef(T,[`.${O}`],[],t,K=>{H.apply(K)}))}for(const D of P)if(D!==void 0)for(const[A,T]of D){const E=`${m}-${pu(T)}-${A}`;_.add(E),n.rules.allvar.cache.has(E)||(n.rules.allvar.cache.add(E),ef(T,[`.${E}`],[],t,O=>{l.allvar.apply(O)}))}}if(typeof p=="object"&&p){const m=`${r}-i${pu(p)}-css`;_.add(m),n.rules.inline.cache.has(m)||(n.rules.inline.cache.add(m),ef(p,[`.${m}`],[],t,S=>{l.inline.apply(S)}))}for(const m of String(h.className||"").trim().split(/\s+/))m&&_.add(m);const x=g.className=[..._].join(" ");return{type:e.type,className:x,selector:u,props:g,toString:()=>x,deferredInjector:a}};return vE(d,{className:r,selector:u,[hu]:e,toString:()=>(n.rules.styled.cache.has(r)||d(),r)})},DK=t=>{let e="";const n=[],r={},i=[];for(const[s,,,,o,a]of t){e===""&&(e=s),n.push(s),i.push(...a);for(const l in o){const u=o[l];(r[l]===void 0||u!=="undefined"||a.includes(u))&&(r[l]=u)}}return[e,n,r,new Set(i)]},J3=(t,e,n,r)=>{const i=[];e:for(let[s,o,a]of t){if(a)continue;let l,u=0,d=!1;for(l in s){const h=s[l];let p=e[l];if(p!==h){if(typeof p!="object"||!p)continue e;{let g,v,_=0;for(const x in p){if(h===String(p[x])){if(x!=="@initial"){const m=x.slice(1);(v=v||[]).push(m in n?n[m]:x.replace(/^@media ?/,"")),d=!0}u+=_,g=!0}++_}if(v&&v.length&&(o={["@media "+v.join(", ")]:o}),!g)continue e}}}(i[u]=i[u]||[]).push([r?"cv":`${l}-${s[l]}`,o,d])}return i},LK={},OK=Xf(),kK=(t,e)=>OK(t,()=>(...n)=>{const r=()=>{for(let i of n){i=typeof i=="object"&&i||{};let s=pu(i);if(!e.rules.global.cache.has(s)){if(e.rules.global.cache.add(s),"@import"in i){let o=[].indexOf.call(e.sheet.cssRules,e.rules.themed.group)-1;for(let a of[].concat(i["@import"]))a=a.includes('"')||a.includes("'")?a:`"${a}"`,e.sheet.insertRule(`@import ${a};`,o++);delete i["@import"]}ef(i,[],[],t,o=>{e.rules.global.apply(o)})}}return""};return vE(r,{toString:r})}),UK=Xf(),NK=(t,e)=>UK(t,()=>n=>{const r=`${ua(t.prefix)}k-${pu(n)}`,i=()=>{if(!e.rules.global.cache.has(r)){e.rules.global.cache.add(r);const s=[];ef(n,[],[],t,a=>s.push(a));const o=`@keyframes ${r}{${s.join("")}}`;e.rules.global.apply(o)}return r};return vE(i,{get name(){return i()},toString:i})}),FK=class{constructor(t,e,n,r){this.token=t==null?"":String(t),this.value=e==null?"":String(e),this.scale=n==null?"":String(n),this.prefix=r==null?"":String(r)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+ua(this.prefix)+ua(this.scale)+this.token}toString(){return this.computedValue}},zK=Xf(),BK=(t,e)=>zK(t,()=>(n,r)=>{r=typeof n=="object"&&n||Object(r);const i=`.${n=(n=typeof n=="string"?n:"")||`${ua(t.prefix)}t-${pu(r)}`}`,s={},o=[];for(const l in r){s[l]={};for(const u in r[l]){const d=`--${ua(t.prefix)}${l}-${u}`,h=Jk(String(r[l][u]),t.prefix,l);s[l][u]=new FK(u,h,l,t.prefix),o.push(`${d}:${h}`)}}const a=()=>{if(o.length&&!e.rules.themed.cache.has(n)){e.rules.themed.cache.add(n);const l=`${r===t.theme?":root,":""}.${n}{${o.join(";")}}`;e.rules.themed.apply(l)}return n};return{...s,get className(){return a()},selector:i,toString:a}}),HK=Xf(),VK=Xf(),GK=t=>{const e=(n=>{let r=!1;const i=HK(n,s=>{r=!0;const o="prefix"in(s=typeof s=="object"&&s||{})?String(s.prefix):"",a=typeof s.media=="object"&&s.media||{},l=typeof s.root=="object"?s.root||null:globalThis.document||null,u=typeof s.theme=="object"&&s.theme||{},d={prefix:o,media:a,theme:u,themeMap:typeof s.themeMap=="object"&&s.themeMap||{...gK},utils:typeof s.utils=="object"&&s.utils||{}},h=PK(l),p={css:Q3(d,h),globalCss:kK(d,h),keyframes:NK(d,h),createTheme:BK(d,h),reset(){h.reset(),p.theme.toString()},theme:{},sheet:h,config:d,prefix:o,getCssText:h.toString,toString:h.toString};return String(p.theme=p.createTheme(u)),p});return r||i.reset(),i})(t);return e.styled=(({config:n,sheet:r})=>VK(n,()=>{const i=Q3(n,r);return(...s)=>{const o=i(...s),a=o[hu].type,l=Z.forwardRef((u,d)=>{const h=u&&u.as||a,{props:p,deferredInjector:g}=o(u);return delete p.as,p.ref=d,g?Z.createElement(Z.Fragment,null,Z.createElement(h,p),Z.createElement(g,null)):Z.createElement(h,p)});return l.className=o.className,l.displayName=`Styled.${a.displayName||a.name||a}`,l.selector=o.selector,l.toString=()=>o.selector,l[hu]=o[hu],l}}))(e),e};const WK=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},$K=nS["useId".toString()]||(()=>{});let jK=0;function XK(t){const[e,n]=R.useState($K());return WK(()=>{t||n(r=>r??String(jK++))},[t]),t||(e?`radix-${e}`:"")}function eU(...t){return e=>t.forEach(n=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(n,e))}function yE(...t){return R.useCallback(eU(...t),t)}const tU=R.forwardRef((t,e)=>{const{children:n,...r}=t;return R.Children.toArray(n).some(eR)?R.createElement(R.Fragment,null,R.Children.map(n,i=>eR(i)?R.createElement(Kw,Oe({},r,{ref:e}),i.props.children):i)):R.createElement(Kw,Oe({},r,{ref:e}),n)});tU.displayName="Slot";const Kw=R.forwardRef((t,e)=>{const{children:n,...r}=t;return R.isValidElement(n)?R.cloneElement(n,{...KK(r,n.props),ref:eU(e,n.ref)}):R.Children.count(n)>1?R.Children.only(null):null});Kw.displayName="SlotClone";const nU=({children:t})=>R.createElement(R.Fragment,null,t);function eR(t){return R.isValidElement(t)&&t.type===nU}function KK(t,e){const n={...e};for(const r in e){const i=t[r],s=e[r];/^on[A-Z]/.test(r)?n[r]=(...o)=>{s==null||s(...o),i==null||i(...o)}:r==="style"?n[r]={...i,...s}:r==="className"&&(n[r]=[i,s].filter(Boolean).join(" "))}return{...t,...n}}const Kf=["a","button","div","h2","h3","img","li","nav","p","span","svg","ul"].reduce((t,e)=>({...t,[e]:R.forwardRef((n,r)=>{const{asChild:i,...s}=n,o=i?tU:e;return R.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),n.as&&console.error(YK),R.createElement(o,Oe({},s,{ref:r}))})}),{}),YK="Warning: The `as` prop has been removed in favour of `asChild`. For details, see https://radix-ui.com/docs/primitives/overview/styling#changing-the-rendered-element",qK=R.forwardRef((t,e)=>R.createElement(Kf.span,Oe({},t,{ref:e,style:{...t.style,position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}}))),ZK=qK,QK=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{},JK=R.forwardRef((t,e)=>{var n,r;const{containerRef:i,style:s,...o}=t,a=(n=i==null?void 0:i.current)!==null&&n!==void 0?n:globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,[,l]=R.useState({});return QK(()=>{l({})},[]),a?x4.createPortal(R.createElement(Kf.div,Oe({"data-radix-portal":""},o,{ref:e,style:a===document.body?{position:"absolute",top:0,left:0,zIndex:2147483647,...s}:void 0})),a):null}),eY=R.forwardRef((t,e)=>{const{children:n,width:r=10,height:i=5,...s}=t;return R.createElement(Kf.svg,Oe({},s,{ref:e,width:r,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),t.asChild?n:R.createElement("polygon",{points:"0,0 30,0 15,10"}))}),tY=eY;function tR(t){const[e,n]=R.useState(void 0);return R.useEffect(()=>{if(t){const r=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let o,a;if("borderBoxSize"in s){const l=s.borderBoxSize,u=Array.isArray(l)?l[0]:l;o=u.inlineSize,a=u.blockSize}else{const l=t.getBoundingClientRect();o=l.width,a=l.height}n({width:o,height:a})});return r.observe(t,{box:"border-box"}),()=>{n(void 0),r.unobserve(t)}}},[t]),e}function nY(t,e){const n=Gl.get(t);return n===void 0?(Gl.set(t,{rect:{},callbacks:[e]}),Gl.size===1&&(Yw=requestAnimationFrame(rU))):(n.callbacks.push(e),e(t.getBoundingClientRect())),()=>{const r=Gl.get(t);if(r===void 0)return;const i=r.callbacks.indexOf(e);i>-1&&r.callbacks.splice(i,1),r.callbacks.length===0&&(Gl.delete(t),Gl.size===0&&cancelAnimationFrame(Yw))}}let Yw;const Gl=new Map;function rU(){const t=[];Gl.forEach((e,n)=>{const r=n.getBoundingClientRect();var i,s;i=e.rect,s=r,(i.width!==s.width||i.height!==s.height||i.top!==s.top||i.right!==s.right||i.bottom!==s.bottom||i.left!==s.left)&&(e.rect=r,t.push(e))}),t.forEach(e=>{e.callbacks.forEach(n=>n(e.rect))}),Yw=requestAnimationFrame(rU)}function iU(t){const[e,n]=R.useState();return R.useEffect(()=>{if(t){const r=nY(t,n);return()=>{n(void 0),r()}}},[t]),e}function sU(t,e=[]){let n=[];const r=()=>{const i=n.map(s=>R.createContext(s));return function(s){const o=(s==null?void 0:s[t])||i;return R.useMemo(()=>({[`__scope${t}`]:{...s,[t]:o}}),[s,o])}};return r.scopeName=t,[function(i,s){const o=R.createContext(s),a=n.length;function l(u){const{scope:d,children:h,...p}=u,g=(d==null?void 0:d[t][a])||o,v=R.useMemo(()=>p,Object.values(p));return R.createElement(g.Provider,{value:v},h)}return n=[...n,s],l.displayName=i+"Provider",[l,function(u,d){const h=(d==null?void 0:d[t][a])||o,p=R.useContext(h);if(p)return p;if(s!==void 0)return s;throw new Error(`\`${u}\` must be used within \`${i}\``)}]},rY(r,...e)]}function rY(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(i){const s=r.reduce((o,{useScope:a,scopeName:l})=>({...o,...a(i)[`__scope${l}`]}),{});return R.useMemo(()=>({[`__scope${e.scopeName}`]:s}),[s])}};return n.scopeName=e.scopeName,n}function iY({anchorRect:t,popperSize:e,arrowSize:n,arrowOffset:r=0,side:i,sideOffset:s=0,align:o,alignOffset:a=0,shouldAvoidCollisions:l=!0,collisionBoundariesRect:u,collisionTolerance:d=0}){if(!t||!e||!u)return{popperStyles:sY,arrowStyles:F_};const h=function(D,A,T=0,E=0,O){const N=O?O.height:0,H=nR(A,D,"x"),K=nR(A,D,"y"),Y=K.before-T-N,Q=K.after+T+N,ee=H.before-T-N,F=H.after+T+N;return{top:{start:{x:H.start+E,y:Y},center:{x:H.center,y:Y},end:{x:H.end-E,y:Y}},right:{start:{x:F,y:K.start+E},center:{x:F,y:K.center},end:{x:F,y:K.end-E}},bottom:{start:{x:H.start+E,y:Q},center:{x:H.center,y:Q},end:{x:H.end-E,y:Q}},left:{start:{x:ee,y:K.start+E},center:{x:ee,y:K.center},end:{x:ee,y:K.end-E}}}}(e,t,s,a,n),p=h[i][o];if(l===!1){const D=rR(p);let A=F_;return n&&(A=sR({popperSize:e,arrowSize:n,arrowOffset:r,side:i,align:o})),{popperStyles:{...D,"--radix-popper-transform-origin":iR(e,i,o,r,n)},arrowStyles:A,placedSide:i,placedAlign:o}}const g=DOMRect.fromRect({...e,...p}),v=(_=u,x=d,DOMRect.fromRect({width:_.width-2*x,height:_.height-2*x,x:_.left+x,y:_.top+x}));var _,x;const m=aR(g,v),S=h[oR(i)][o],w=function(D,A,T){const E=oR(D);return A[D]&&!T[E]?E:D}(i,m,aR(DOMRect.fromRect({...e,...S}),v)),M=function(D,A,T,E,O){const N=T==="top"||T==="bottom",H=N?"left":"top",K=N?"right":"bottom",Y=N?"width":"height",Q=A[Y]>D[Y];return(E==="start"||E==="center")&&(O[H]&&Q||O[K]&&!Q)?"end":(E==="end"||E==="center")&&(O[K]&&Q||O[H]&&!Q)?"start":E}(e,t,i,o,m),I=rR(h[w][M]);let P=F_;return n&&(P=sR({popperSize:e,arrowSize:n,arrowOffset:r,side:w,align:M})),{popperStyles:{...I,"--radix-popper-transform-origin":iR(e,w,M,r,n)},arrowStyles:P,placedSide:w,placedAlign:M}}function nR(t,e,n){const r=t[n==="x"?"left":"top"],i=n==="x"?"width":"height",s=t[i],o=e[i];return{before:r-o,start:r,center:r+(s-o)/2,end:r+s-o,after:r+s}}function rR(t){return{position:"absolute",top:0,left:0,minWidth:"max-content",willChange:"transform",transform:`translate3d(${Math.round(t.x+window.scrollX)}px, ${Math.round(t.y+window.scrollY)}px, 0)`}}function iR(t,e,n,r,i){const s=e==="top"||e==="bottom",o=i?i.width:0,a=i?i.height:0,l=o/2+r;let u="",d="";return s?(u={start:`${l}px`,center:"center",end:t.width-l+"px"}[n],d=e==="top"?`${t.height+a}px`:-a+"px"):(u=e==="left"?`${t.width+a}px`:-a+"px",d={start:`${l}px`,center:"center",end:t.height-l+"px"}[n]),`${u} ${d}`}const sY={position:"fixed",top:0,left:0,opacity:0,transform:"translate3d(0, -200%, 0)"},F_={position:"absolute",opacity:0};function sR({popperSize:t,arrowSize:e,arrowOffset:n,side:r,align:i}){const s=(t.width-e.width)/2,o=(t.height-e.width)/2,a={top:0,right:90,bottom:180,left:-90}[r],l=Math.max(e.width,e.height),u={width:`${l}px`,height:`${l}px`,transform:`rotate(${a}deg)`,willChange:"transform",position:"absolute",[r]:"100%",direction:oY(r,i)};return r!=="top"&&r!=="bottom"||(i==="start"&&(u.left=`${n}px`),i==="center"&&(u.left=`${s}px`),i==="end"&&(u.right=`${n}px`)),r!=="left"&&r!=="right"||(i==="start"&&(u.top=`${n}px`),i==="center"&&(u.top=`${o}px`),i==="end"&&(u.bottom=`${n}px`)),u}function oY(t,e){return(t!=="top"&&t!=="right"||e!=="end")&&(t!=="bottom"&&t!=="left"||e==="end")?"ltr":"rtl"}function oR(t){return{top:"bottom",right:"left",bottom:"top",left:"right"}[t]}function aR(t,e){return{top:t.top<e.top,right:t.right>e.right,bottom:t.bottom>e.bottom,left:t.left<e.left}}const[oU,aU]=sU("Popper"),[aY,lU]=oU("Popper"),lY=t=>{const{__scopePopper:e,children:n}=t,[r,i]=R.useState(null);return R.createElement(aY,{scope:e,anchor:r,onAnchorChange:i},n)},uY=R.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...i}=t,s=lU("PopperAnchor",n),o=R.useRef(null),a=yE(e,o);return R.useEffect(()=>{s.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:R.createElement(Kf.div,Oe({},i,{ref:a}))}),[cY,fY]=oU("PopperContent"),dY=R.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:i,align:s="center",alignOffset:o,collisionTolerance:a,avoidCollisions:l=!0,...u}=t,d=lU("PopperContent",n),[h,p]=R.useState(),g=iU(d.anchor),[v,_]=R.useState(null),x=tR(v),[m,S]=R.useState(null),w=tR(m),M=yE(e,N=>_(N)),I=function(){const[N,H]=R.useState(void 0);return R.useEffect(()=>{let K;function Y(){H({width:window.innerWidth,height:window.innerHeight})}function Q(){window.clearTimeout(K),K=window.setTimeout(Y,100)}return Y(),window.addEventListener("resize",Q),()=>window.removeEventListener("resize",Q)},[]),N}(),P=I?DOMRect.fromRect({...I,x:0,y:0}):void 0,{popperStyles:D,arrowStyles:A,placedSide:T,placedAlign:E}=iY({anchorRect:g,popperSize:x,arrowSize:w,arrowOffset:h,side:r,sideOffset:i,align:s,alignOffset:o,shouldAvoidCollisions:l,collisionBoundariesRect:P,collisionTolerance:a}),O=T!==void 0;return R.createElement("div",{style:D,"data-radix-popper-content-wrapper":""},R.createElement(cY,{scope:n,arrowStyles:A,onArrowChange:S,onArrowOffsetChange:p},R.createElement(Kf.div,Oe({"data-side":T,"data-align":E},u,{style:{...u.style,animation:O?void 0:"none"},ref:M}))))}),hY=R.forwardRef(function(t,e){const{__scopePopper:n,offset:r,...i}=t,s=fY("PopperArrow",n),{onArrowOffsetChange:o}=s;return R.useEffect(()=>o(r),[o,r]),R.createElement("span",{style:{...s.arrowStyles,pointerEvents:"none"}},R.createElement("span",{ref:s.onArrowChange,style:{display:"inline-block",verticalAlign:"top",pointerEvents:"auto"}},R.createElement(tY,Oe({},i,{ref:e,style:{...i.style,display:"block"}}))))}),pY=lY,mY=uY,gY=dY,vY=hY,lR=globalThis!=null&&globalThis.document?R.useLayoutEffect:()=>{};function yY(...t){return e=>t.forEach(n=>function(r,i){typeof r=="function"?r(i):r!=null&&(r.current=i)}(n,e))}function xY(...t){return R.useCallback(yY(...t),t)}const uU=t=>{const{present:e,children:n}=t,r=function(o){const[a,l]=R.useState(),u=R.useRef({}),d=R.useRef(o),h=R.useRef("none"),p=o?"mounted":"unmounted",[g,v]=function(_,x){return R.useReducer((m,S)=>{const w=x[m][S];return w??m},_)}(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return R.useEffect(()=>{const _=mv(u.current);h.current=g==="mounted"?_:"none"},[g]),lR(()=>{const _=u.current,x=d.current;if(x!==o){const m=h.current,S=mv(_);o?v("MOUNT"):S==="none"||(_==null?void 0:_.display)==="none"?v("UNMOUNT"):v(x&&m!==S?"ANIMATION_OUT":"UNMOUNT"),d.current=o}},[o,v]),lR(()=>{if(a){const _=m=>{const S=mv(u.current).includes(m.animationName);m.target===a&&S&&v("ANIMATION_END")},x=m=>{m.target===a&&(h.current=mv(u.current))};return a.addEventListener("animationstart",x),a.addEventListener("animationcancel",_),a.addEventListener("animationend",_),()=>{a.removeEventListener("animationstart",x),a.removeEventListener("animationcancel",_),a.removeEventListener("animationend",_)}}},[a,v]),{isPresent:["mounted","unmountSuspended"].includes(g),ref:R.useCallback(_=>{_&&(u.current=getComputedStyle(_)),l(_)},[])}}(e),i=typeof n=="function"?n({present:r.isPresent}):R.Children.only(n),s=xY(r.ref,i.ref);return typeof n=="function"||r.isPresent?R.cloneElement(i,{ref:s}):null};function mv(t){return(t==null?void 0:t.animationName)||"none"}uU.displayName="Presence";function uR(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t},[t]),e.current}function _Y(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function SY(t){const e=_Y(t);R.useEffect(()=>{const n=r=>{r.key==="Escape"&&e(r)};return document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)},[e])}function cR(t){const e=R.useRef(t);return R.useEffect(()=>{e.current=t}),R.useMemo(()=>(...n)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...n)},[])}function wY({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,i]=function({defaultProp:l,onChange:u}){const d=R.useState(l),[h]=d,p=R.useRef(h),g=cR(u);return R.useEffect(()=>{p.current!==h&&(g(h),p.current=h)},[h,p,g]),d}({defaultProp:e,onChange:n}),s=t!==void 0,o=s?t:r,a=cR(n);return[o,R.useCallback(l=>{if(s){const u=l,d=typeof l=="function"?u(t):l;d!==t&&a(d)}else i(l)},[s,t,i,a])]}function Ac(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t==null||t(r),n===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}const[cU,Mue]=sU("Tooltip",[aU]),Ry=aU(),bY=700,[Eue,MY]=cU("TooltipProvider",{isOpenDelayed:!0,delayDuration:bY,onOpen:()=>{},onClose:()=>{}}),[EY,Iy]=cU("Tooltip"),TY=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:i=!1,onOpenChange:s,delayDuration:o}=t,a=MY("Tooltip",e),l=Ry(e),[u,d]=R.useState(null),h=XK(),p=R.useRef(0),g=o??a.delayDuration,v=R.useRef(!1),{onOpen:_,onClose:x}=a,[m=!1,S]=wY({prop:r,defaultProp:i,onChange:P=>{P&&(document.dispatchEvent(new CustomEvent("tooltip.open")),_()),s==null||s(P)}}),w=R.useMemo(()=>m?v.current?"delayed-open":"instant-open":"closed",[m]),M=R.useCallback(()=>{window.clearTimeout(p.current),v.current=!1,S(!0)},[S]),I=R.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>{v.current=!0,S(!0)},g)},[g,S]);return R.useEffect(()=>()=>window.clearTimeout(p.current),[]),R.createElement(pY,l,R.createElement(EY,{scope:e,contentId:h,open:m,stateAttribute:w,trigger:u,onTriggerChange:d,onTriggerEnter:R.useCallback(()=>{a.isOpenDelayed?I():M()},[a.isOpenDelayed,I,M]),onOpen:R.useCallback(M,[M]),onClose:R.useCallback(()=>{window.clearTimeout(p.current),S(!1),x()},[S,x])},n))},PY=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Iy("TooltipTrigger",n),s=Ry(n),o=yE(e,i.onTriggerChange),a=R.useRef(!1),l=R.useCallback(()=>a.current=!1,[]);return R.useEffect(()=>()=>document.removeEventListener("mouseup",l),[l]),R.createElement(mY,Oe({asChild:!0},s),R.createElement(Kf.button,Oe({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},r,{ref:o,onMouseEnter:Ac(t.onMouseEnter,i.onTriggerEnter),onMouseLeave:Ac(t.onMouseLeave,i.onClose),onMouseDown:Ac(t.onMouseDown,()=>{i.onClose(),a.current=!0,document.addEventListener("mouseup",l,{once:!0})}),onFocus:Ac(t.onFocus,()=>{a.current||i.onOpen()}),onBlur:Ac(t.onBlur,i.onClose),onClick:Ac(t.onClick,i.onClose)})))}),CY=R.forwardRef((t,e)=>{const{forceMount:n,...r}=t,i=Iy("TooltipContent",t.__scopeTooltip);return R.createElement(uU,{present:n||i.open},R.createElement(AY,Oe({ref:e},r)))}),AY=R.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":i,portalled:s=!0,...o}=t,a=Iy("TooltipContent",n),l=Ry(n),u=s?JK:R.Fragment,{onClose:d}=a;return SY(()=>d()),R.useEffect(()=>(document.addEventListener("tooltip.open",d),()=>document.removeEventListener("tooltip.open",d)),[d]),R.createElement(u,null,R.createElement(IY,{__scopeTooltip:n}),R.createElement(gY,Oe({"data-state":a.stateAttribute},l,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)"}}),R.createElement(nU,null,r),R.createElement(ZK,{id:a.contentId,role:"tooltip"},i||r)))}),RY=R.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,i=Ry(n);return R.createElement(vY,Oe({},i,r,{ref:e}))});function IY(t){const{__scopeTooltip:e}=t,n=Iy("CheckTriggerMoved",e),r=iU(n.trigger),i=r==null?void 0:r.left,s=uR(i),o=r==null?void 0:r.top,a=uR(o),l=n.onClose;return R.useEffect(()=>{(s!==void 0&&s!==i||a!==void 0&&a!==o)&&l()},[l,s,a,i,o]),null}const DY=TY,LY=PY,OY=CY,kY=RY;function UY(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function hn(t,e){if(t==null)return{};var n=UY(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}let Tn;(function(t){t[t.UNSUPPORTED_INPUT=0]="UNSUPPORTED_INPUT",t[t.NO_COMPONENT_FOR_TYPE=1]="NO_COMPONENT_FOR_TYPE",t[t.UNKNOWN_INPUT=2]="UNKNOWN_INPUT",t[t.DUPLICATE_KEYS=3]="DUPLICATE_KEYS",t[t.ALREADY_REGISTERED_TYPE=4]="ALREADY_REGISTERED_TYPE",t[t.CLIPBOARD_ERROR=5]="CLIPBOARD_ERROR",t[t.THEME_ERROR=6]="THEME_ERROR",t[t.PATH_DOESNT_EXIST=7]="PATH_DOESNT_EXIST",t[t.INPUT_TYPE_OVERRIDE=8]="INPUT_TYPE_OVERRIDE",t[t.EMPTY_KEY=9]="EMPTY_KEY"})(Tn||(Tn={}));const NY={[Tn.UNSUPPORTED_INPUT]:(t,e)=>[`An input with type \`${t}\` input was found at path \`${e}\` but it's not supported yet.`],[Tn.NO_COMPONENT_FOR_TYPE]:(t,e)=>[`Type \`${t}\` found at path \`${e}\` can't be displayed in panel because no component supports it yet.`],[Tn.UNKNOWN_INPUT]:(t,e)=>[`input at path \`${t}\` is not recognized.`,e],[Tn.DUPLICATE_KEYS]:(t,e,n)=>[`Key \`${t}\` of path \`${e}\` already exists at path \`${n}\`. Even nested keys need to be unique. Rename one of the keys.`],[Tn.ALREADY_REGISTERED_TYPE]:t=>[`Type ${t} has already been registered. You can't register a component with the same type.`],[Tn.CLIPBOARD_ERROR]:t=>["Error copying the value",t],[Tn.THEME_ERROR]:(t,e)=>[`Error accessing the theme \`${t}.${e}\` value.`],[Tn.PATH_DOESNT_EXIST]:t=>[`Error getting the value at path \`${t}\`. There is probably an error in your \`render\` function.`],[Tn.PATH_DOESNT_EXIST]:t=>[`Error accessing the value at path \`${t}\``],[Tn.INPUT_TYPE_OVERRIDE]:(t,e,n)=>[`Input at path \`${t}\` already exists with type: \`${e}\`. Its type cannot be overridden with type \`${n}\`.`],[Tn.EMPTY_KEY]:()=>["Keys can not be empty, if you want to hide a label use whitespace."]};function fU(t,e,...n){const[r,...i]=NY[e](...n);console[t]("LEVA: "+r,...i)}const Ko=fU.bind(null,"warn"),FY=fU.bind(null,"log"),zY=["value"],BY=["schema"],HY=["value"],dU=[],Mu={};function fR(t){let{value:e}=t,n=hn(t,zY);for(let r of dU){const i=r(e,n);if(i)return i}}function ma(t,e){let{schema:n}=e,r=hn(e,BY);if(t in Mu){Ko(Tn.ALREADY_REGISTERED_TYPE,t);return}dU.push((i,s)=>n(i,s)&&t),Mu[t]=r}function z_(t,e,n,r){const{normalize:i}=Mu[t];if(i)return i(e,n,r);if(typeof e!="object"||!("value"in e))return{value:e};const{value:s}=e,o=hn(e,HY);return{value:s,settings:o}}function VY(t,e,n,r,i,s){const{sanitize:o}=Mu[t];return o?o(e,n,r,i,s):e}function dR(t,e,n){const{format:r}=Mu[t];return r?r(e,n):e}function GY(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hR(Object(n),!0).forEach(function(r){GY(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}const ul=(t,e,n)=>t>n?n:t<e?e:t,WY=t=>{if(t===""||typeof t=="number")return t;try{const e=Ua(t);if(!isNaN(e))return e}catch{}return parseFloat(t)},$Y=Math.log(10);function pR(t){let e=Math.abs(+String(t).replace(".",""));if(e===0)return .01;for(;e!==0&&e%10===0;)e/=10;const n=Math.floor(Math.log(e)/$Y)+1,r=Math.floor(Math.log10(Math.abs(t))),i=Math.pow(10,r-n);return Math.max(i,.001)}const k0=(t,e,n)=>n===e?0:(ul(t,e,n)-e)/(n-e),U0=(t,e,n)=>t*(n-e)+e,jY=()=>"_"+Math.random().toString(36).substr(2,9),mR=/\(([0-9+\-*/^ .]+)\)/,gR=/(\d+(?:\.\d+)?) ?\^ ?(\d+(?:\.\d+)?)/,vR=/(\d+(?:\.\d+)?) ?\* ?(\d+(?:\.\d+)?)/,yR=/(\d+(?:\.\d+)?) ?\/ ?(\d+(?:\.\d+)?)/,xR=/(\d+(?:\.\d+)?) ?\+ ?(\d+(?:\.\d+)?)/,_R=/(\d+(?:\.\d+)?) ?- ?(\d+(?:\.\d+)?)/;function Ua(t){if(isNaN(Number(t)))if(mR.test(t)){const e=t.replace(mR,(n,r)=>String(Ua(r)));return Ua(e)}else if(gR.test(t)){const e=t.replace(gR,(n,r,i)=>String(Math.pow(Number(r),Number(i))));return Ua(e)}else if(vR.test(t)){const e=t.replace(vR,(n,r,i)=>String(Number(r)*Number(i)));return Ua(e)}else if(yR.test(t)){const e=t.replace(yR,(n,r,i)=>{if(i!=0)return String(Number(r)/Number(i));throw new Error("Division by zero")});return Ua(e)}else if(xR.test(t)){const e=t.replace(xR,(n,r,i)=>String(Number(r)+Number(i)));return Ua(e)}else if(_R.test(t)){const e=t.replace(_R,(n,r,i)=>String(Number(r)-Number(i)));return Ua(e)}else return Number(t);return Number(t)}function XY(t,e){const n=xt({},t);return e.forEach(r=>r in t&&delete n[r]),n}function KY(t,e){return t.reduce((n,r,i)=>Object.assign(n,{[e[i]]:r}),{})}function hU(t){return Object.prototype.toString.call(t)==="[object Object]"}const YY=t=>hU(t)&&Object.keys(t).length===0;let wo;(function(t){t.BUTTON="BUTTON",t.BUTTON_GROUP="BUTTON_GROUP",t.MONITOR="MONITOR",t.FOLDER="FOLDER"})(wo||(wo={}));let Ks;(function(t){t.SELECT="SELECT",t.IMAGE="IMAGE",t.NUMBER="NUMBER",t.COLOR="COLOR",t.STRING="STRING",t.BOOLEAN="BOOLEAN",t.INTERVAL="INTERVAL",t.VECTOR3D="VECTOR3D",t.VECTOR2D="VECTOR2D"})(Ks||(Ks={}));const qY=["type","__customInput"],ZY=["render","label","optional","order","disabled","hint","onChange","onEditStart","onEditEnd","transient"],QY=["type"];function pU(t,e,n={},r){var i,s;if(typeof t!="object"||Array.isArray(t))return{type:r,input:t,options:xt({key:e,label:e,optional:!1,disabled:!1,order:0},n)};if("__customInput"in t){const{type:I,__customInput:P}=t,D=hn(t,qY);return pU(P,e,D,I)}const{render:o,label:a,optional:l,order:u=0,disabled:d,hint:h,onChange:p,onEditStart:g,onEditEnd:v,transient:_}=t,x=hn(t,ZY),m=xt({render:o,key:e,label:a??e,hint:h,transient:_??!!p,onEditStart:g,onEditEnd:v,disabled:d,optional:l,order:u},n);let{type:S}=x,w=hn(x,QY);if(S=r??S,S in wo)return{type:S,input:w,options:m};let M;return r&&hU(w)&&"value"in w?M=w.value:M=YY(w)?void 0:w,{type:S,input:M,options:xt(xt({},m),{},{onChange:p,optional:(i=m.optional)!==null&&i!==void 0?i:!1,disabled:(s=m.disabled)!==null&&s!==void 0?s:!1})}}function JY(t,e,n,r){const i=pU(t,e),{type:s,input:o,options:a}=i;if(s)return s in wo?i:{type:s,input:z_(s,o,n,r),options:a};let l=fR(o);return l?{type:l,input:z_(l,o,n,r),options:a}:(l=fR({value:o}),l?{type:l,input:z_(l,{value:o},n,r),options:a}:!1)}function SR(t,e,n,r,i){const{value:s,type:o,settings:a}=t;t.value=mU({type:o,value:s,settings:a},e,n,r),t.fromPanel=i}const eq=function(e,n,r){this.type="LEVA_ERROR",this.message="LEVA: "+e,this.previousValue=n,this.error=r};function mU({type:t,value:e,settings:n},r,i,s){const o=t!=="SELECT"&&typeof r=="function"?r(e):r;let a;try{a=VY(t,o,n,e,i,s)}catch(l){throw new eq(`The value \`${r}\` did not result in a correct value.`,e,l)}return L0(a,e)?e:a}const gU=(t,e,n=!1)=>{let r=0;return function(){const i=arguments,s=n&&!r,o=()=>t.apply(this,i);window.clearTimeout(r),r=window.setTimeout(o,e),s&&o()}},vU=t=>t.shiftKey?5:t.altKey?1/5:1,tq=["value"],nq=["min","max"],rq=t=>{if(typeof t=="number")return!0;if(typeof t=="string"){const e=parseFloat(t);return isNaN(e)?!1:t.substring((""+e).length).trim().length<4}return!1},yU=(t,{min:e=-1/0,max:n=1/0,suffix:r})=>{const i=parseFloat(t);if(t===""||isNaN(i))throw Error("Invalid number");const s=ul(i,e,n);return r?s+r:s},iq=(t,{pad:e=0,suffix:n})=>{const r=parseFloat(t).toFixed(e);return n?r+n:r},xU=t=>{let{value:e}=t,n=hn(t,tq);const{min:r=-1/0,max:i=1/0}=n,s=hn(n,nq);let o=parseFloat(e);const a=typeof e=="string"?e.substring((""+o).length):void 0;o=ul(o,r,i);let l=n.step;l||(Number.isFinite(r)?Number.isFinite(i)?l=+(Math.abs(i-r)/100).toPrecision(1):l=+(Math.abs(o-r)/100).toPrecision(1):Number.isFinite(i)&&(l=+(Math.abs(i-o)/100).toPrecision(1)));const u=l?pR(l)*10:pR(o);l=l||u/10;const d=Math.round(ul(Math.log10(1/u),0,2));return{value:a?o+a:o,settings:xt({initialValue:o,step:l,pad:d,min:r,max:i,suffix:a},s)}},_U=(t,{step:e,initialValue:n})=>{const r=Math.round((t-n)/e);return n+r*e};var SU=Object.freeze({__proto__:null,schema:rq,sanitize:yU,format:iq,normalize:xU,sanitizeStep:_U});function Jn(){return Jn=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jn.apply(this,arguments)}const wU=R.createContext({});function Xr(){return R.useContext(wU)}const bU=R.createContext(null),MU=R.createContext(null),EU=R.createContext(null);function Jp(){return R.useContext(MU)}function sq(){return R.useContext(EU)}const oq=()=>({colors:{elevation1:"#292d39",elevation2:"#181c20",elevation3:"#373c4b",accent1:"#0066dc",accent2:"#007bff",accent3:"#3c93ff",highlight1:"#535760",highlight2:"#8c92a4",highlight3:"#fefefe",vivid1:"#ffcc00",folderWidgetColor:"$highlight2",folderTextColor:"$highlight3",toolTipBackground:"$highlight3",toolTipText:"$elevation2"},radii:{xs:"2px",sm:"3px",lg:"10px"},space:{xs:"3px",sm:"6px",md:"10px",rowGap:"7px",colGap:"7px"},fonts:{mono:"ui-monospace, SFMono-Regular, Menlo, 'Roboto Mono', monospace",sans:"system-ui, sans-serif"},fontSizes:{root:"11px",toolTip:"$root"},sizes:{rootWidth:"280px",controlWidth:"160px",numberInputMinWidth:"38px",scrubberWidth:"8px",scrubberHeight:"16px",rowHeight:"24px",folderTitleHeight:"20px",checkboxSize:"16px",joystickWidth:"100px",joystickHeight:"100px",colorPickerWidth:"$controlWidth",colorPickerHeight:"100px",imagePreviewWidth:"$controlWidth",imagePreviewHeight:"100px",monitorHeight:"60px",titleBarHeight:"39px"},shadows:{level1:"0 0 9px 0 #00000088",level2:"0 4px 14px #00000033"},borderWidths:{root:"0px",input:"1px",focus:"1px",hover:"1px",active:"1px",folder:"1px"},fontWeights:{label:"normal",folder:"normal",button:"normal"}});function gv(t,e){const[n,r]=t.split(" "),i={};return n!=="none"&&(i.boxShadow=`${e.inset?"inset ":""}0 0 0 $borderWidths${[e.key]} $colors${n!=="default"&&n||e.borderColor}`),r&&(i.backgroundColor=r),i}const eh={$inputStyle:()=>t=>gv(t,{key:"$input",borderColor:"$highlight1",inset:!0}),$focusStyle:()=>t=>gv(t,{key:"$focus",borderColor:"$accent2"}),$hoverStyle:()=>t=>gv(t,{key:"$hover",borderColor:"$accent1",inset:!0}),$activeStyle:()=>t=>gv(t,{key:"$active",borderColor:"$accent1",inset:!0})},{styled:ft,css:Tue,createTheme:Pue,globalCss:aq,keyframes:Cue}=GK({prefix:"leva",theme:oq(),utils:xt(xt({},eh),{},{$flex:()=>({display:"flex",alignItems:"center"}),$flexCenter:()=>({display:"flex",alignItems:"center",justifyContent:"center"}),$reset:()=>({outline:"none",fontSize:"inherit",fontWeight:"inherit",color:"inherit",fontFamily:"inherit",border:"none",backgroundColor:"transparent",appearance:"none"}),$draggable:()=>({touchAction:"none",WebkitUserDrag:"none",userSelect:"none"}),$focus:t=>({"&:focus":eh.$focusStyle()(t)}),$focusWithin:t=>({"&:focus-within":eh.$focusStyle()(t)}),$hover:t=>({"&:hover":eh.$hoverStyle()(t)}),$active:t=>({"&:active":eh.$activeStyle()(t)})})}),lq=aq({".leva__panel__dragged":{WebkitUserDrag:"none",userSelect:"none",input:{userSelect:"none"},"*":{cursor:"ew-resize !important"}}});function ea(t,e){const{theme:n}=R.useContext(bU);if(!(t in n)||!(e in n[t]))return Ko(Tn.THEME_ERROR,t,e),"";let r=e;for(;;){let i=n[t][r];if(typeof i=="string"&&i.charAt(0)==="$")r=i.substr(1);else return i}}const TU=ft("input",{$reset:"",padding:"0 $sm",width:0,minWidth:0,flex:1,height:"100%",variants:{levaType:{number:{textAlign:"right"}},as:{textarea:{padding:"$sm"}}}}),PU=ft("div",{$draggable:"",height:"100%",$flexCenter:"",position:"relative",padding:"0 $xs",fontSize:"0.8em",opacity:.8,cursor:"default",touchAction:"none",[`& + ${TU}`]:{paddingLeft:0}}),uq=ft(PU,{cursor:"ew-resize",marginRight:"-$xs",textTransform:"uppercase",opacity:.3,"&:hover":{opacity:1},variants:{dragging:{true:{backgroundColor:"$accent2",opacity:1}}}}),cq=ft("div",{$flex:"",position:"relative",borderRadius:"$sm",overflow:"hidden",color:"inherit",height:"$rowHeight",backgroundColor:"$elevation3",$inputStyle:"$elevation1",$hover:"",$focusWithin:"",variants:{textArea:{true:{height:"auto"}}}}),fq=["innerLabel","value","onUpdate","onChange","onKeyDown","type","id","inputType","rows"],dq=["onUpdate"];function xE(t){let{innerLabel:e,value:n,onUpdate:r,onChange:i,onKeyDown:s,type:o,id:a,inputType:l="text",rows:u=0}=t,d=hn(t,fq);const{id:h,emitOnEditStart:p,emitOnEditEnd:g,disabled:v}=Xr(),_=a||h,x=R.useRef(null),m=u>0,S=m?"textarea":"input",w=R.useCallback(P=>D=>{const A=D.currentTarget.value;P(A)},[]);Z.useEffect(()=>{const P=x.current,D=w(A=>{r(A),g()});return P==null||P.addEventListener("blur",D),()=>P==null?void 0:P.removeEventListener("blur",D)},[w,r,g]);const M=R.useCallback(P=>{P.key==="Enter"&&w(r)(P)},[w,r]),I=Object.assign({as:S},m?{rows:u}:{},d);return Z.createElement(cq,{textArea:m},e&&typeof e=="string"?Z.createElement(PU,null,e):e,Z.createElement(TU,Jn({levaType:o,ref:x,id:_,type:l,autoComplete:"off",spellCheck:"false",value:n,onChange:w(i),onFocus:()=>p(),onKeyPress:M,onKeyDown:s,disabled:v},I)))}function hq(t){let{onUpdate:e}=t,n=hn(t,dq);const r=R.useCallback(s=>e(WY(s)),[e]),i=R.useCallback(s=>{const o=s.key==="ArrowUp"?1:s.key==="ArrowDown"?-1:0;if(o){s.preventDefault();const a=s.altKey?.1:s.shiftKey?10:1;e(l=>parseFloat(l)+o*a)}},[e]);return Z.createElement(xE,Jn({},n,{onUpdate:r,onKeyDown:i,type:"number"}))}const N0=ft("div",{}),qw=ft("div",{position:"relative",background:"$elevation2",transition:"height 300ms ease",variants:{fill:{true:{},false:{}},flat:{false:{},true:{}},isRoot:{true:{},false:{paddingLeft:"$md","&::after":{content:'""',position:"absolute",left:0,top:0,width:"$borderWidths$folder",height:"100%",backgroundColor:"$folderWidgetColor",opacity:.4,transform:"translateX(-50%)"}}}},compoundVariants:[{isRoot:!0,fill:!1,css:{overflowY:"auto",maxHeight:"calc(100vh - 20px - $$titleBarHeight)"}},{isRoot:!0,flat:!1,css:{borderRadius:"$lg"}}]}),pq=ft("div",{$flex:"",color:"$folderTextColor",userSelect:"none",cursor:"pointer",height:"$folderTitleHeight",fontWeight:"$folder","> svg":{marginLeft:-4,marginRight:4,cursor:"pointer",fill:"$folderWidgetColor",opacity:.6},"&:hover > svg":{fill:"$folderWidgetColor"},[`&:hover + ${qw}::after`]:{opacity:.6},[`${N0}:hover > & + ${qw}::after`]:{opacity:.6},[`${N0}:hover > & > svg`]:{opacity:1}}),CU=ft("div",{position:"relative",display:"grid",gridTemplateColumns:"100%",rowGap:"$rowGap",transition:"opacity 250ms ease",variants:{toggled:{true:{opacity:1,transitionDelay:"250ms"},false:{opacity:0,transitionDelay:"0ms",pointerEvents:"none"}},isRoot:{true:{"& > div":{paddingLeft:"$md",paddingRight:"$md"},"& > div:first-of-type":{paddingTop:"$sm"},"& > div:last-of-type":{paddingBottom:"$sm"},[`> ${N0}:not(:first-of-type)`]:{paddingTop:"$sm",marginTop:"$md",borderTop:"$borderWidths$folder solid $colors$elevation1"}}}}}),AU=ft("div",{position:"relative",zIndex:100,display:"grid",rowGap:"$rowGap",gridTemplateRows:"minmax($sizes$rowHeight, max-content)",alignItems:"center",color:"$highlight2",[`${CU} > &`]:{"&:first-of-type":{marginTop:"$rowGap"},"&:last-of-type":{marginBottom:"$rowGap"}},variants:{disabled:{true:{pointerEvents:"none"},false:{"&:hover,&:focus-within":{color:"$highlight3"}}}}}),RU=ft(AU,{gridTemplateColumns:"auto $sizes$controlWidth",columnGap:"$colGap"}),mq=ft("div",{$flex:"",height:"100%",position:"relative",overflow:"hidden","& > div":{marginLeft:"$colGap",padding:"0 $xs",opacity:.4},"& > div:hover":{opacity:.8},"& > div > svg":{display:"none",cursor:"pointer",width:13,minWidth:13,height:13,backgroundColor:"$elevation2"},"&:hover > div > svg":{display:"block"},variants:{align:{top:{height:"100%",alignItems:"flex-start",paddingTop:"$sm"}}}}),gq=ft("input",{$reset:"",height:0,width:0,opacity:0,margin:0,"& + label":{position:"relative",$flexCenter:"",height:"100%",userSelect:"none",cursor:"pointer",paddingLeft:2,paddingRight:"$sm",pointerEvents:"auto"},"& + label:after":{content:'""',width:6,height:6,backgroundColor:"$elevation3",borderRadius:"50%",$activeStyle:""},"&:focus + label:after":{$focusStyle:""},"& + label:active:after":{backgroundColor:"$accent1",$focusStyle:""},"&:checked + label:after":{backgroundColor:"$accent1"}}),Zw=ft("label",{fontWeight:"$label",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap","& > svg":{display:"block"}}),vq=ft("div",{opacity:1,variants:{disabled:{true:{opacity:.6,pointerEvents:"none",[`& ${Zw}`]:{pointerEvents:"auto"}}}}}),IU=ft("div",{position:"fixed",top:0,bottom:0,right:0,left:0,zIndex:1e3,userSelect:"none"}),yq=ft("div",{background:"$toolTipBackground",fontFamily:"$sans",fontSize:"$toolTip",padding:"$xs $sm",color:"$toolTipText",borderRadius:"$xs",boxShadow:"$level2",maxWidth:260}),xq=ft(kY,{fill:"$toolTipBackground"});function _E({children:t}){const{className:e}=R.useContext(bU);return Z.createElement(fK,{className:e},t)}const _q=["align"];function Sq(){const{id:t,disable:e,disabled:n}=Xr();return Z.createElement(Z.Fragment,null,Z.createElement(gq,{id:t+"__disable",type:"checkbox",checked:!n,onChange:()=>e(!n)}),Z.createElement("label",{htmlFor:t+"__disable"}))}function wq(t){const{id:e,optional:n,hint:r}=Xr(),i=t.htmlFor||(e?{htmlFor:e}:null),s=!r&&typeof t.children=="string"?{title:t.children}:null;return Z.createElement(Z.Fragment,null,n&&Z.createElement(Sq,null),r!==void 0?Z.createElement(DY,null,Z.createElement(LY,{asChild:!0},Z.createElement(Zw,Jn({},i,t))),Z.createElement(OY,{side:"top",sideOffset:2},Z.createElement(yq,null,r,Z.createElement(xq,null)))):Z.createElement(Zw,Jn({},i,s,t)))}function Qs(t){let{align:e}=t,n=hn(t,_q);const{value:r,label:i,key:s,disabled:o}=Xr(),{hideCopyButton:a}=sq(),l=!a&&s!==void 0,[u,d]=R.useState(!1),h=async()=>{try{await navigator.clipboard.writeText(JSON.stringify({[s]:r??""})),d(!0)}catch{Ko(Tn.CLIPBOARD_ERROR,{[s]:r})}};return Z.createElement(mq,{align:e,onPointerLeave:()=>d(!1)},Z.createElement(wq,n),l&&!o&&Z.createElement("div",{title:`Click to copy ${typeof i=="string"?i:s} value`},u?Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Z.createElement("path",{d:"M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"}),Z.createElement("path",{fillRule:"evenodd",d:"M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})):Z.createElement("svg",{onClick:h,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},Z.createElement("path",{d:"M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"}),Z.createElement("path",{d:"M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"}))))}const bq=["toggled"],Mq=ft("svg",{fill:"currentColor",transition:"transform 350ms ease, fill 250ms ease"});function SE(t){let{toggled:e}=t,n=hn(t,bq);return Z.createElement(Mq,Jn({width:"9",height:"5",viewBox:"0 0 9 5",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${e?0:-90}deg)`}},n),Z.createElement("path",{d:"M3.8 4.4c.4.3 1 .3 1.4 0L8 1.7A1 1 0 007.4 0H1.6a1 1 0 00-.7 1.7l3 2.7z"}))}const Eq=["input"];function ws(t){let{input:e}=t,n=hn(t,Eq);return e?Z.createElement(RU,n):Z.createElement(AU,n)}function DU({value:t,type:e,settings:n,setValue:r}){const[i,s]=R.useState(dR(e,t,n)),o=R.useRef(t),a=R.useRef(n);a.current=n;const l=R.useCallback(d=>s(dR(e,d,a.current)),[e]),u=R.useCallback(d=>{try{r(d)}catch(h){const{type:p,previousValue:g}=h;if(p!=="LEVA_ERROR")throw h;l(g)}},[l,r]);return R.useEffect(()=>{L0(t,o.current)||l(t),o.current=t},[t,l]),{displayValue:i,onChange:s,onUpdate:u}}function em(t,e){const{emitOnEditStart:n,emitOnEditEnd:r}=Xr();return Kj(i=>{i.first&&(document.body.classList.add("leva__panel__dragged"),n==null||n());const s=t(i);return i.last&&(document.body.classList.remove("leva__panel__dragged"),r==null||r()),s},e)}function Tq(t){const e=R.useRef(null),n=R.useRef(null),r=R.useRef(!1);return R.useEffect(()=>{const i=gU(()=>{e.current.width=e.current.offsetWidth*window.devicePixelRatio,e.current.height=e.current.offsetHeight*window.devicePixelRatio,t(e.current,n.current)},250);return window.addEventListener("resize",i),r.current||(i(),r.current=!0),()=>window.removeEventListener("resize",i)},[t]),R.useEffect(()=>{n.current=e.current.getContext("2d")},[]),[e,n]}function LU(){const t=R.useRef(null),e=R.useRef({x:0,y:0}),n=R.useCallback(r=>{Object.assign(e.current,r),t.current&&(t.current.style.transform=`translate3d(${e.current.x}px, ${e.current.y}px, 0)`)},[]);return[t,n]}const Pq=["__refCount"],B_=(t,e)=>{if(!t[e])return null;const n=t[e];return hn(n,Pq)};function Cq(t){const e=Jp(),[n,r]=R.useState(B_(e.getData(),t)),i=R.useCallback(u=>e.setValueAtPath(t,u,!0),[t,e]),s=R.useCallback(u=>e.setSettingsAtPath(t,u),[t,e]),o=R.useCallback(u=>e.disableInputAtPath(t,u),[t,e]),a=R.useCallback(()=>e.emitOnEditStart(t),[t,e]),l=R.useCallback(()=>e.emitOnEditEnd(t),[t,e]);return R.useEffect(()=>{r(B_(e.getData(),t));const u=e.useStore.subscribe(d=>B_(d.data,t),r,{equalityFn:Kk});return()=>u()},[e,t]),[n,{set:i,setSettings:s,disable:o,storeId:e.storeId,emitOnEditStart:a,emitOnEditEnd:l}]}const Aq=ft("div",{variants:{hasRange:{true:{position:"relative",display:"grid",gridTemplateColumns:"auto $sizes$numberInputMinWidth",columnGap:"$colGap",alignItems:"center"}}}}),OU=ft("div",{position:"relative",width:"100%",height:2,borderRadius:"$xs",backgroundColor:"$elevation1"}),Qw=ft("div",{position:"absolute",width:"$scrubberWidth",height:"$scrubberHeight",borderRadius:"$xs",boxShadow:"0 0 0 2px $colors$elevation2",backgroundColor:"$accent2",cursor:"pointer",$active:"none $accent1",$hover:"none $accent3",variants:{position:{left:{borderTopRightRadius:0,borderBottomRightRadius:0,transform:"translateX(calc(-0.5 * ($sizes$scrubberWidth + 4px)))"},right:{borderTopLeftRadius:0,borderBottomLeftRadius:0,transform:"translateX(calc(0.5 * ($sizes$scrubberWidth + 4px)))"}}}}),kU=ft("div",{position:"relative",$flex:"",height:"100%",cursor:"pointer",touchAction:"none"}),UU=ft("div",{position:"absolute",height:"100%",backgroundColor:"$accent2"});function Rq({value:t,min:e,max:n,onDrag:r,step:i,initialValue:s}){const o=R.useRef(null),a=R.useRef(null),l=R.useRef(0),u=ea("sizes","scrubberWidth"),d=em(({event:p,first:g,xy:[v],movement:[_],memo:x})=>{if(g){const{width:S,left:w}=o.current.getBoundingClientRect();l.current=S-parseFloat(u),x=(p==null?void 0:p.target)===a.current?t:U0((v-w)/S,e,n)}const m=x+U0(_/l.current,0,n-e);return r(_U(m,{step:i,initialValue:s})),x}),h=k0(t,e,n);return Z.createElement(kU,Jn({ref:o},d()),Z.createElement(OU,null,Z.createElement(UU,{style:{left:0,right:`${(1-h)*100}%`}})),Z.createElement(Qw,{ref:a,style:{left:`calc(${h} * (100% - ${u}))`}}))}const Iq=Z.memo(({label:t,onUpdate:e,step:n,innerLabelTrim:r})=>{const[i,s]=R.useState(!1),o=em(({active:a,delta:[l],event:u,memo:d=0})=>(s(a),d+=l/2,Math.abs(d)>=1&&(e(h=>parseFloat(h)+Math.floor(d)*n*vU(u)),d=0),d));return Z.createElement(uq,Jn({dragging:i,title:t.length>1?t:""},o()),t.slice(0,r))});function NU({label:t,id:e,displayValue:n,onUpdate:r,onChange:i,settings:s,innerLabelTrim:o=1}){const a=o>0&&Z.createElement(Iq,{label:t,step:s.step,onUpdate:r,innerLabelTrim:o});return Z.createElement(hq,{id:e,value:String(n),onUpdate:r,onChange:i,innerLabel:a})}function Dq(){const t=Xr(),{label:e,value:n,onUpdate:r,settings:i,id:s}=t,{min:o,max:a}=i,l=a!==1/0&&o!==-1/0;return Z.createElement(ws,{input:!0},Z.createElement(Qs,null,e),Z.createElement(Aq,{hasRange:l},l&&Z.createElement(Rq,Jn({value:parseFloat(n),onDrag:r},i)),Z.createElement(NU,Jn({},t,{id:s,label:"value",innerLabelTrim:l?0:1}))))}const{sanitizeStep:Lq}=SU,Oq=hn(SU,["sanitizeStep"]);var kq=xt({component:Dq},Oq);const Uq=(t,e)=>yi().schema({options:yi().passesAnyOf(yi().object(),yi().array())}).test(e),Nq=(t,{values:e})=>{if(e.indexOf(t)<0)throw Error("Selected value doesn't match Select options");return t},Fq=(t,{values:e})=>e.indexOf(t),zq=t=>{let{value:e,options:n}=t,r,i;return Array.isArray(n)?(i=n,r=n.map(s=>String(s))):(i=Object.values(n),r=Object.keys(n)),"value"in t?i.includes(e)||(r.unshift(String(e)),i.unshift(e)):e=i[0],Object.values(n).includes(e)||(n[String(e)]=e),{value:e,settings:{keys:r,values:i}}};var Bq=Object.freeze({__proto__:null,schema:Uq,sanitize:Nq,format:Fq,normalize:zq});const Hq=ft("div",{$flexCenter:"",position:"relative","> svg":{pointerEvents:"none",position:"absolute",right:"$md"}}),Jw=ft("select",{position:"absolute",top:0,left:0,width:"100%",height:"100%",opacity:0}),Vq=ft("div",{display:"flex",alignItems:"center",width:"100%",height:"$rowHeight",backgroundColor:"$elevation3",borderRadius:"$sm",padding:"0 $sm",cursor:"pointer",[`${Jw}:focus + &`]:{$focusStyle:""},[`${Jw}:hover + &`]:{$hoverStyle:""}});function Gq({displayValue:t,value:e,onUpdate:n,id:r,settings:i,disabled:s}){const{keys:o,values:a}=i,l=R.useRef();return e===a[t]&&(l.current=o[t]),Z.createElement(Hq,null,Z.createElement(Jw,{id:r,value:t,onChange:u=>n(a[Number(u.currentTarget.value)]),disabled:s},o.map((u,d)=>Z.createElement("option",{key:u,value:d},u))),Z.createElement(Vq,null,l.current),Z.createElement(SE,{toggled:!0}))}function Wq(){const{label:t,value:e,displayValue:n,onUpdate:r,id:i,disabled:s,settings:o}=Xr();return Z.createElement(ws,{input:!0},Z.createElement(Qs,null,t),Z.createElement(Gq,{id:i,value:e,displayValue:n,onUpdate:r,settings:o,disabled:s}))}var $q=xt({component:Wq},Bq);const jq=t=>yi().string().test(t),Xq=t=>{if(typeof t!="string")throw Error("Invalid string");return t},Kq=({value:t,editable:e=!0,rows:n=!1})=>({value:t,settings:{editable:e,rows:typeof n=="number"?n:n?5:0}});var Yq=Object.freeze({__proto__:null,schema:jq,sanitize:Xq,normalize:Kq});const qq=["displayValue","onUpdate","onChange","editable"],Zq=ft("div",{whiteSpace:"pre-wrap"});function Qq(t){let{displayValue:e,onUpdate:n,onChange:r,editable:i=!0}=t,s=hn(t,qq);return i?Z.createElement(xE,Jn({value:e,onUpdate:n,onChange:r},s)):Z.createElement(Zq,null,e)}function Jq(){const{label:t,settings:e,displayValue:n,onUpdate:r,onChange:i}=Xr();return Z.createElement(ws,{input:!0},Z.createElement(Qs,null,t),Z.createElement(Qq,Jn({displayValue:n,onUpdate:r,onChange:i},e)))}var eZ=xt({component:Jq},Yq);const tZ=t=>yi().boolean().test(t),nZ=t=>{if(typeof t!="boolean")throw Error("Invalid boolean");return t};var rZ=Object.freeze({__proto__:null,schema:tZ,sanitize:nZ});const iZ=ft("div",{position:"relative",$flex:"",height:"$rowHeight",input:{$reset:"",height:0,width:0,opacity:0,margin:0},label:{position:"relative",$flexCenter:"",userSelect:"none",cursor:"pointer",height:"$checkboxSize",width:"$checkboxSize",backgroundColor:"$elevation3",borderRadius:"$sm",$hover:""},"input:focus + label":{$focusStyle:""},"input:focus:checked + label, input:checked + label:hover":{$hoverStyle:"$accent3"},"input + label:active":{backgroundColor:"$accent1"},"input:checked + label:active":{backgroundColor:"$accent1"},"label > svg":{display:"none",width:"90%",height:"90%",stroke:"$highlight3"},"input:checked + label":{backgroundColor:"$accent2"},"input:checked + label > svg":{display:"block"}});function sZ({value:t,onUpdate:e,id:n,disabled:r}){return Z.createElement(iZ,null,Z.createElement("input",{id:n,type:"checkbox",checked:t,onChange:i=>e(i.currentTarget.checked),disabled:r}),Z.createElement("label",{htmlFor:n},Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Z.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"}))))}function oZ(){const{label:t,value:e,onUpdate:n,disabled:r,id:i}=Xr();return Z.createElement(ws,{input:!0},Z.createElement(Qs,null,t),Z.createElement(sZ,{value:e,onUpdate:n,id:i,disabled:r}))}var aZ=xt({component:oZ},rZ);const lZ=["locked"];function uZ({value:t,id:e,valueKey:n,settings:r,onUpdate:i,innerLabelTrim:s}){const o=R.useRef(t[n]);o.current=t[n];const a=R.useCallback(u=>i({[n]:mU({type:"NUMBER",value:o.current,settings:r},u)}),[i,r,n]),l=DU({type:"NUMBER",value:t[n],settings:r,setValue:a});return Z.createElement(NU,{id:e,label:n,value:t[n],displayValue:l.displayValue,onUpdate:l.onUpdate,onChange:l.onChange,settings:r,innerLabelTrim:s})}const cZ=ft("div",{display:"grid",columnGap:"$colGap",gridAutoFlow:"column dense",alignItems:"center",variants:{withLock:{true:{gridTemplateColumns:"10px auto","> svg":{cursor:"pointer"}}}}});function fZ(t){let{locked:e}=t,n=hn(t,lZ);return Z.createElement("svg",Jn({width:"10",height:"10",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n),e?Z.createElement("path",{d:"M5 4.63601C5 3.76031 5.24219 3.1054 5.64323 2.67357C6.03934 2.24705 6.64582 1.9783 7.5014 1.9783C8.35745 1.9783 8.96306 2.24652 9.35823 2.67208C9.75838 3.10299 10 3.75708 10 4.63325V5.99999H5V4.63601ZM4 5.99999V4.63601C4 3.58148 4.29339 2.65754 4.91049 1.99307C5.53252 1.32329 6.42675 0.978302 7.5014 0.978302C8.57583 0.978302 9.46952 1.32233 10.091 1.99162C10.7076 2.65557 11 3.57896 11 4.63325V5.99999H12C12.5523 5.99999 13 6.44771 13 6.99999V13C13 13.5523 12.5523 14 12 14H3C2.44772 14 2 13.5523 2 13V6.99999C2 6.44771 2.44772 5.99999 3 5.99999H4ZM3 6.99999H12V13H3V6.99999Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}):Z.createElement("path",{d:"M9 3.63601C9 2.76044 9.24207 2.11211 9.64154 1.68623C10.0366 1.26502 10.6432 1 11.5014 1C12.4485 1 13.0839 1.30552 13.4722 1.80636C13.8031 2.23312 14 2.84313 14 3.63325H15C15 2.68242 14.7626 1.83856 14.2625 1.19361C13.6389 0.38943 12.6743 0 11.5014 0C10.4294 0 9.53523 0.337871 8.91218 1.0021C8.29351 1.66167 8 2.58135 8 3.63601V6H1C0.447715 6 0 6.44772 0 7V13C0 13.5523 0.447715 14 1 14H10C10.5523 14 11 13.5523 11 13V7C11 6.44772 10.5523 6 10 6H9V3.63601ZM1 7H10V13H1V7Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}function wE({value:t,onUpdate:e,settings:n,innerLabelTrim:r}){const{id:i,setSettings:s}=Xr(),{lock:o,locked:a}=n;return Z.createElement(cZ,{withLock:o},o&&Z.createElement(fZ,{locked:a,onClick:()=>s({locked:!a})}),Object.keys(t).map((l,u)=>Z.createElement(uZ,{id:u===0?i:`${i}.${l}`,key:l,valueKey:l,value:t,settings:n[l],onUpdate:e,innerLabelTrim:r})))}const FU=(t,e)=>{const n={};let r=0,i=1/0;Object.entries(t).forEach(([s,o])=>{n[s]=xU(xt({value:o},e[s])).settings,r=Math.max(r,n[s].step),i=Math.min(i,n[s].pad)});for(let s in n){const{step:o,min:a,max:l}=e[s]||{};!isFinite(o)&&(!isFinite(a)||!isFinite(l))&&(n[s].step=r,n[s].pad=i)}return n},dZ=["lock"],hZ=["value"];function pZ(t){const e=yi().array().length(t).every.number(),n=r=>{if(!r||typeof r!="object")return!1;const i=Object.values(r);return i.length===t&&i.every(s=>isFinite(s))};return r=>e.test(r)||n(r)}function mZ(t){return Array.isArray(t)?"array":"object"}function Ih(t,e,n){return mZ(t)===e?t:e==="array"?Object.values(t):KY(t,n)}const gZ=(t,e,n)=>{const r=Ih(t,"object",e.keys);for(let o in r)r[o]=yU(r[o],e[o]);const i=Object.keys(r);let s={};if(i.length===e.keys.length)s=r;else{const o=Ih(n,"object",e.keys);if(i.length===1&&e.locked){const a=i[0],l=r[a],u=o[a],d=u!==0?l/u:1;for(let h in o)h===a?s[a]=l:s[h]=o[h]*d}else s=xt(xt({},o),r)}return Ih(s,e.format,e.keys)},vZ=(t,e)=>Ih(t,"object",e.keys),yZ=t=>!!t&&("step"in t||"min"in t||"max"in t);function xZ(t,e,n=[]){const{lock:r=!1}=e,i=hn(e,dZ),s=Array.isArray(t)?"array":"object",o=s==="object"?Object.keys(t):n,a=Ih(t,"object",o),l=yZ(i)?o.reduce((d,h)=>Object.assign(d,{[h]:i}),{}):i,u=FU(a,l);return{value:s==="array"?t:a,settings:xt(xt({},u),{},{format:s,keys:o,lock:r,locked:!1})}}function zU(t){return{schema:pZ(t.length),normalize:e=>{let{value:n}=e,r=hn(e,hZ);return xZ(n,r,t)},format:(e,n)=>vZ(e,n),sanitize:(e,n,r)=>gZ(e,n,r)}}var _Z={grad:.9,turn:360,rad:360/(2*Math.PI)},Go=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},yr=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},ds=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},BU=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},wR=function(t){return{r:ds(t.r,0,255),g:ds(t.g,0,255),b:ds(t.b,0,255),a:ds(t.a)}},H_=function(t){return{r:yr(t.r),g:yr(t.g),b:yr(t.b),a:yr(t.a,3)}},SZ=/^#([0-9a-f]{3,8})$/i,vv=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},HU=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},VU=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),u=s%6;return{r:255*[r,a,o,o,l,r][u],g:255*[l,r,r,a,o,o][u],b:255*[o,o,l,r,r,a][u],a:i}},bR=function(t){return{h:BU(t.h),s:ds(t.s,0,100),l:ds(t.l,0,100),a:ds(t.a)}},MR=function(t){return{h:yr(t.h),s:yr(t.s),l:yr(t.l),a:yr(t.a,3)}},ER=function(t){return VU((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},Dh=function(t){return{h:(e=HU(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},wZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bZ=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,MZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,EZ=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,eb={string:[[function(t){var e=SZ.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?yr(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?yr(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=MZ.exec(t)||EZ.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:wR({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=wZ.exec(t)||bZ.exec(t);if(!e)return null;var n,r,i=bR({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(_Z[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return ER(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return Go(e)&&Go(n)&&Go(r)?wR({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!Go(e)||!Go(n)||!Go(r))return null;var o=bR({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return ER(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!Go(e)||!Go(n)||!Go(r))return null;var o=function(a){return{h:BU(a.h),s:ds(a.s,0,100),v:ds(a.v,0,100),a:ds(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return VU(o)},"hsv"]]},TR=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},GU=function(t){return typeof t=="string"?TR(t.trim(),eb.string):typeof t=="object"&&t!==null?TR(t,eb.object):[null,void 0]},TZ=function(t){return GU(t)[1]},V_=function(t,e){var n=Dh(t);return{h:n.h,s:ds(n.s+100*e,0,100),l:n.l,a:n.a}},G_=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},PR=function(t,e){var n=Dh(t);return{h:n.h,s:n.s,l:ds(n.l+100*e,0,100),a:n.a}},tb=function(){function t(e){this.parsed=GU(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return yr(G_(this.rgba),2)},t.prototype.isDark=function(){return G_(this.rgba)<.5},t.prototype.isLight=function(){return G_(this.rgba)>=.5},t.prototype.toHex=function(){return e=H_(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?vv(yr(255*s)):"","#"+vv(n)+vv(r)+vv(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return H_(this.rgba)},t.prototype.toRgbString=function(){return e=H_(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return MR(Dh(this.rgba))},t.prototype.toHslString=function(){return e=MR(Dh(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=HU(this.rgba),{h:yr(e.h),s:yr(e.s),v:yr(e.v),a:yr(e.a,3)};var e},t.prototype.invert=function(){return ti({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),ti(V_(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),ti(V_(this.rgba,-e))},t.prototype.grayscale=function(){return ti(V_(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),ti(PR(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),ti(PR(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?ti({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):yr(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Dh(this.rgba);return typeof e=="number"?ti({h:e,s:n.s,l:n.l,a:n.a}):yr(n.h)},t.prototype.isEqual=function(e){return this.toHex()===ti(e).toHex()},t}(),ti=function(t){return t instanceof tb?t:new tb(t)},CR=[],PZ=function(t){t.forEach(function(e){CR.indexOf(e)<0&&(e(tb,eb),CR.push(e))})};function CZ(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=r[this.toHex()];if(u)return u;if(o!=null&&o.closest){var d=this.toRgb(),h=1/0,p="black";if(!s.length)for(var g in n)s[g]=new t(n[g]).toRgb();for(var v in n){var _=(a=d,l=s[v],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));_<h&&(h=_,p=v)}return p}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}function Yf(){return(Yf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function bE(t,e){if(t==null)return{};var n,r,i={},s=Object.keys(t);for(r=0;r<s.length;r++)e.indexOf(n=s[r])>=0||(i[n]=t[n]);return i}function nb(t){var e=R.useRef(t),n=R.useRef(function(r){e.current&&e.current(r)});return e.current=t,n.current}var Af=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t<e?e:t},Lh=function(t){return"touches"in t},rb=function(t){return t&&t.ownerDocument.defaultView||self},AR=function(t,e,n){var r=t.getBoundingClientRect(),i=Lh(e)?function(s,o){for(var a=0;a<s.length;a++)if(s[a].identifier===o)return s[a];return s[0]}(e.touches,n):e;return{left:Af((i.pageX-(r.left+rb(t).pageXOffset))/r.width),top:Af((i.pageY-(r.top+rb(t).pageYOffset))/r.height)}},RR=function(t){!Lh(t)&&t.preventDefault()},ME=Z.memo(function(t){var e=t.onMove,n=t.onKey,r=bE(t,["onMove","onKey"]),i=R.useRef(null),s=nb(e),o=nb(n),a=R.useRef(null),l=R.useRef(!1),u=R.useMemo(function(){var g=function(x){RR(x),(Lh(x)?x.touches.length>0:x.buttons>0)&&i.current?s(AR(i.current,x,a.current)):_(!1)},v=function(){return _(!1)};function _(x){var m=l.current,S=rb(i.current),w=x?S.addEventListener:S.removeEventListener;w(m?"touchmove":"mousemove",g),w(m?"touchend":"mouseup",v)}return[function(x){var m=x.nativeEvent,S=i.current;if(S&&(RR(m),!function(M,I){return I&&!Lh(M)}(m,l.current)&&S)){if(Lh(m)){l.current=!0;var w=m.changedTouches||[];w.length&&(a.current=w[0].identifier)}S.focus(),s(AR(S,m,a.current)),_(!0)}},function(x){var m=x.which||x.keyCode;m<37||m>40||(x.preventDefault(),o({left:m===39?.05:m===37?-.05:0,top:m===40?.05:m===38?-.05:0}))},_]},[o,s]),d=u[0],h=u[1],p=u[2];return R.useEffect(function(){return p},[p]),Z.createElement("div",Yf({},r,{onTouchStart:d,onMouseDown:d,className:"react-colorful__interactive",ref:i,onKeyDown:h,tabIndex:0,role:"slider"}))}),tm=function(t){return t.filter(Boolean).join(" ")},EE=function(t){var e=t.color,n=t.left,r=t.top,i=r===void 0?.5:r,s=tm(["react-colorful__pointer",t.className]);return Z.createElement("div",{className:s,style:{top:100*i+"%",left:100*n+"%"}},Z.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:e}}))},ri=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n},WU=function(t){var e=t.s,n=t.v,r=t.a,i=(200-e)*n/100;return{h:ri(t.h),s:ri(i>0&&i<200?e*n/100/(i<=100?i:200-i)*100:0),l:ri(i/2),a:ri(r,2)}},ib=function(t){var e=WU(t);return"hsl("+e.h+", "+e.s+"%, "+e.l+"%)"},W_=function(t){var e=WU(t);return"hsla("+e.h+", "+e.s+"%, "+e.l+"%, "+e.a+")"},$U=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),u=s%6;return{r:ri(255*[r,a,o,o,l,r][u]),g:ri(255*[l,r,r,a,o,o][u]),b:ri(255*[o,o,l,r,r,a][u]),a:ri(i,2)}},jU=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:ri(60*(a<0?a+6:a)),s:ri(s?o/s*100:0),v:ri(s/255*100),a:i}},XU=Z.memo(function(t){var e=t.hue,n=t.onChange,r=tm(["react-colorful__hue",t.className]);return Z.createElement("div",{className:r},Z.createElement(ME,{onMove:function(i){n({h:360*i.left})},onKey:function(i){n({h:Af(e+360*i.left,0,360)})},"aria-label":"Hue","aria-valuenow":ri(e),"aria-valuemax":"360","aria-valuemin":"0"},Z.createElement(EE,{className:"react-colorful__hue-pointer",left:e/360,color:ib({h:e,s:100,v:100,a:1})})))}),KU=Z.memo(function(t){var e=t.hsva,n=t.onChange,r={backgroundColor:ib({h:e.h,s:100,v:100,a:1})};return Z.createElement("div",{className:"react-colorful__saturation",style:r},Z.createElement(ME,{onMove:function(i){n({s:100*i.left,v:100-100*i.top})},onKey:function(i){n({s:Af(e.s+100*i.left,0,100),v:Af(e.v-100*i.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+ri(e.s)+"%, Brightness "+ri(e.v)+"%"},Z.createElement(EE,{className:"react-colorful__saturation-pointer",top:1-e.v/100,left:e.s/100,color:ib(e)})))}),TE=function(t,e){if(t===e)return!0;for(var n in t)if(t[n]!==e[n])return!1;return!0};function YU(t,e,n){var r=nb(n),i=R.useState(function(){return t.toHsva(e)}),s=i[0],o=i[1],a=R.useRef({color:e,hsva:s});R.useEffect(function(){if(!t.equal(e,a.current.color)){var u=t.toHsva(e);a.current={hsva:u,color:e},o(u)}},[e,t]),R.useEffect(function(){var u;TE(s,a.current.hsva)||t.equal(u=t.fromHsva(s),a.current.color)||(a.current={hsva:s,color:u},r(u))},[s,t,r]);var l=R.useCallback(function(u){o(function(d){return Object.assign({},d,u)})},[]);return[s,l]}var AZ=typeof window<"u"?R.useLayoutEffect:R.useEffect,RZ=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},IR=new Map,qU=function(t){AZ(function(){var e=t.current?t.current.ownerDocument:document;if(e!==void 0&&!IR.has(e)){var n=e.createElement("style");n.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,IR.set(e,n);var r=RZ();r&&n.setAttribute("nonce",r),e.head.appendChild(n)}},[])},IZ=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,s=t.onChange,o=bE(t,["className","colorModel","color","onChange"]),a=R.useRef(null);qU(a);var l=YU(n,i,s),u=l[0],d=l[1],h=tm(["react-colorful",e]);return Z.createElement("div",Yf({},o,{ref:a,className:h}),Z.createElement(KU,{hsva:u,onChange:d}),Z.createElement(XU,{hue:u.h,onChange:d,className:"react-colorful__last-control"}))},DZ=function(t){var e=t.className,n=t.hsva,r=t.onChange,i={backgroundImage:"linear-gradient(90deg, "+W_(Object.assign({},n,{a:0}))+", "+W_(Object.assign({},n,{a:1}))+")"},s=tm(["react-colorful__alpha",e]),o=ri(100*n.a);return Z.createElement("div",{className:s},Z.createElement("div",{className:"react-colorful__alpha-gradient",style:i}),Z.createElement(ME,{onMove:function(a){r({a:a.left})},onKey:function(a){r({a:Af(n.a+a.left)})},"aria-label":"Alpha","aria-valuetext":o+"%","aria-valuenow":o,"aria-valuemin":"0","aria-valuemax":"100"},Z.createElement(EE,{className:"react-colorful__alpha-pointer",left:n.a,color:W_(n)})))},LZ=function(t){var e=t.className,n=t.colorModel,r=t.color,i=r===void 0?n.defaultColor:r,s=t.onChange,o=bE(t,["className","colorModel","color","onChange"]),a=R.useRef(null);qU(a);var l=YU(n,i,s),u=l[0],d=l[1],h=tm(["react-colorful",e]);return Z.createElement("div",Yf({},o,{ref:a,className:h}),Z.createElement(KU,{hsva:u,onChange:d}),Z.createElement(XU,{hue:u.h,onChange:d}),Z.createElement(DZ,{hsva:u,onChange:d,className:"react-colorful__last-control"}))},OZ={defaultColor:{r:0,g:0,b:0,a:1},toHsva:jU,fromHsva:$U,equal:TE},kZ=function(t){return Z.createElement(LZ,Yf({},t,{colorModel:OZ}))},UZ={defaultColor:{r:0,g:0,b:0},toHsva:function(t){return jU({r:t.r,g:t.g,b:t.b,a:1})},fromHsva:function(t){return{r:(e=$U(t)).r,g:e.g,b:e.b};var e},equal:TE},NZ=function(t){return Z.createElement(IZ,Yf({},t,{colorModel:UZ}))};function qf(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(d){try{u(r.next(d))}catch(h){o(h)}}function l(d){try{u(r.throw(d))}catch(h){o(h)}}function u(d){d.done?s(d.value):i(d.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function Zf(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return l([u,d])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,u[0]&&(n=0)),n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function FZ(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function zZ(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(FZ(arguments[e]));return t}var BZ=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function nm(t,e){var n=HZ(t);if(typeof n.path!="string"){var r=t.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof e=="string"?e:typeof r=="string"&&r.length>0?r:t.name,writable:!1,configurable:!1,enumerable:!0})}return n}function HZ(t){var e=t.name,n=e&&e.lastIndexOf(".")!==-1;if(n&&!t.type){var r=e.split(".").pop().toLowerCase(),i=BZ.get(r);i&&Object.defineProperty(t,"type",{value:i,writable:!1,configurable:!1,enumerable:!0})}return t}var VZ=[".DS_Store","Thumbs.db"];function GZ(t){return qf(this,void 0,void 0,function(){return Zf(this,function(e){return F0(t)&&WZ(t)?[2,KZ(t.dataTransfer,t.type)]:$Z(t)?[2,jZ(t)]:Array.isArray(t)&&t.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,XZ(t)]:[2,[]]})})}function WZ(t){return F0(t.dataTransfer)}function $Z(t){return F0(t)&&F0(t.target)}function F0(t){return typeof t=="object"&&t!==null}function jZ(t){return sb(t.target.files).map(function(e){return nm(e)})}function XZ(t){return qf(this,void 0,void 0,function(){var e;return Zf(this,function(n){switch(n.label){case 0:return[4,Promise.all(t.map(function(r){return r.getFile()}))];case 1:return e=n.sent(),[2,e.map(function(r){return nm(r)})]}})})}function KZ(t,e){return qf(this,void 0,void 0,function(){var n,r;return Zf(this,function(i){switch(i.label){case 0:return t===null?[2,[]]:t.items?(n=sb(t.items).filter(function(s){return s.kind==="file"}),e!=="drop"?[2,n]:[4,Promise.all(n.map(YZ))]):[3,2];case 1:return r=i.sent(),[2,DR(ZU(r))];case 2:return[2,DR(sb(t.files).map(function(s){return nm(s)}))]}})})}function DR(t){return t.filter(function(e){return VZ.indexOf(e.name)===-1})}function sb(t){if(t===null)return[];for(var e=[],n=0;n<t.length;n++){var r=t[n];e.push(r)}return e}function YZ(t){if(typeof t.webkitGetAsEntry!="function")return LR(t);var e=t.webkitGetAsEntry();return e&&e.isDirectory?QU(e):LR(t)}function ZU(t){return t.reduce(function(e,n){return zZ(e,Array.isArray(n)?ZU(n):[n])},[])}function LR(t){var e=t.getAsFile();if(!e)return Promise.reject(t+" is not a File");var n=nm(e);return Promise.resolve(n)}function qZ(t){return qf(this,void 0,void 0,function(){return Zf(this,function(e){return[2,t.isDirectory?QU(t):ZZ(t)]})})}function QU(t){var e=t.createReader();return new Promise(function(n,r){var i=[];function s(){var o=this;e.readEntries(function(a){return qf(o,void 0,void 0,function(){var l,u,d;return Zf(this,function(h){switch(h.label){case 0:if(a.length)return[3,5];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all(i)];case 2:return l=h.sent(),n(l),[3,4];case 3:return u=h.sent(),r(u),[3,4];case 4:return[3,6];case 5:d=Promise.all(a.map(qZ)),i.push(d),s(),h.label=6;case 6:return[2]}})})},function(a){r(a)})}s()})}function ZZ(t){return qf(this,void 0,void 0,function(){return Zf(this,function(e){return[2,new Promise(function(n,r){t.file(function(i){var s=nm(i,t.fullPath);n(s)},function(i){r(i)})})]})})}var QZ=function(t,e){if(t&&e){var n=Array.isArray(e)?e:e.split(","),r=t.name||"",i=(t.type||"").toLowerCase(),s=i.replace(/\/.*$/,"");return n.some(function(o){var a=o.trim().toLowerCase();return a.charAt(0)==="."?r.toLowerCase().endsWith(a):a.endsWith("/*")?s===a.replace(/\/.*$/,""):i===a})}return!0};function OR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?OR(Object(n),!0).forEach(function(r){JU(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function JU(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UR(t,e){return nQ(t)||tQ(t,e)||eQ(t,e)||JZ()}function JZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eQ(t,e){if(t){if(typeof t=="string")return NR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NR(t,e)}}function NR(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function tQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function nQ(t){if(Array.isArray(t))return t}var rQ="file-invalid-type",iQ="file-too-large",sQ="file-too-small",oQ="too-many-files",aQ=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:rQ,message:"File type must be ".concat(n)}},FR=function(e){return{code:iQ,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},zR=function(e){return{code:sQ,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},lQ={code:oQ,message:"Too many files"};function eN(t,e){var n=t.type==="application/x-moz-file"||QZ(t,e);return[n,n?null:aQ(e)]}function tN(t,e,n){if(th(t.size))if(th(e)&&th(n)){if(t.size>n)return[!1,FR(n)];if(t.size<e)return[!1,zR(e)]}else{if(th(e)&&t.size<e)return[!1,zR(e)];if(th(n)&&t.size>n)return[!1,FR(n)]}return[!0,null]}function th(t){return t!=null}function uQ(t){var e=t.files,n=t.accept,r=t.minSize,i=t.maxSize,s=t.multiple,o=t.maxFiles;return!s&&e.length>1||s&&o>=1&&e.length>o?!1:e.every(function(a){var l=eN(a,n),u=UR(l,1),d=u[0],h=tN(a,r,i),p=UR(h,1),g=p[0];return d&&g})}function z0(t){return typeof t.isPropagationStopped=="function"?t.isPropagationStopped():typeof t.cancelBubble<"u"?t.cancelBubble:!1}function yv(t){return t.dataTransfer?Array.prototype.some.call(t.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!t.target&&!!t.target.files}function BR(t){t.preventDefault()}function cQ(t){return t.indexOf("MSIE")!==-1||t.indexOf("Trident/")!==-1}function fQ(t){return t.indexOf("Edge/")!==-1}function dQ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return cQ(t)||fQ(t)}function fo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return e.some(function(a){return!z0(r)&&a&&a.apply(void 0,[r].concat(s)),z0(r)})}}function hQ(){return"showOpenFilePicker"in window}function pQ(t){return t=typeof t=="string"?t.split(","):t,[{description:"everything",accept:Array.isArray(t)?t.filter(function(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}).reduce(function(e,n){return kR(kR({},e),{},JU({},n,[]))},{}):{}}]}function mQ(t){return t instanceof DOMException&&(t.name==="AbortError"||t.code===t.ABORT_ERR)}function gQ(t){return t instanceof DOMException&&(t.name==="SecurityError"||t.code===t.SECURITY_ERR)}var vQ=["children"],yQ=["open"],xQ=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],_Q=["refKey","onChange","onClick"];function SQ(t){return MQ(t)||bQ(t)||nN(t)||wQ()}function wQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bQ(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function MQ(t){if(Array.isArray(t))return ob(t)}function $_(t,e){return PQ(t)||TQ(t,e)||nN(t,e)||EQ()}function EQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nN(t,e){if(t){if(typeof t=="string")return ob(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ob(t,e)}}function ob(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TQ(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function PQ(t){if(Array.isArray(t))return t}function HR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function En(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HR(Object(n),!0).forEach(function(r){ab(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HR(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ab(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B0(t,e){if(t==null)return{};var n=CQ(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CQ(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var PE=R.forwardRef(function(t,e){var n=t.children,r=B0(t,vQ),i=iN(r),s=i.open,o=B0(i,yQ);return R.useImperativeHandle(e,function(){return{open:s}},[s]),Z.createElement(R.Fragment,null,n(En(En({},o),{},{open:s})))});PE.displayName="Dropzone";var rN={disabled:!1,getFilesFromEvent:GZ,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0};PE.defaultProps=rN;PE.propTypes={children:cn.func,accept:cn.oneOfType([cn.string,cn.arrayOf(cn.string)]),multiple:cn.bool,preventDropOnDocument:cn.bool,noClick:cn.bool,noKeyboard:cn.bool,noDrag:cn.bool,noDragEventsBubbling:cn.bool,minSize:cn.number,maxSize:cn.number,maxFiles:cn.number,disabled:cn.bool,getFilesFromEvent:cn.func,onFileDialogCancel:cn.func,onFileDialogOpen:cn.func,useFsAccessApi:cn.bool,onDragEnter:cn.func,onDragLeave:cn.func,onDragOver:cn.func,onDrop:cn.func,onDropAccepted:cn.func,onDropRejected:cn.func,validator:cn.func};var lb={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,draggedFiles:[],acceptedFiles:[],fileRejections:[]};function iN(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=En(En({},rN),t),n=e.accept,r=e.disabled,i=e.getFilesFromEvent,s=e.maxSize,o=e.minSize,a=e.multiple,l=e.maxFiles,u=e.onDragEnter,d=e.onDragLeave,h=e.onDragOver,p=e.onDrop,g=e.onDropAccepted,v=e.onDropRejected,_=e.onFileDialogCancel,x=e.onFileDialogOpen,m=e.useFsAccessApi,S=e.preventDropOnDocument,w=e.noClick,M=e.noKeyboard,I=e.noDrag,P=e.noDragEventsBubbling,D=e.validator,A=R.useMemo(function(){return typeof x=="function"?x:VR},[x]),T=R.useMemo(function(){return typeof _=="function"?_:VR},[_]),E=R.useRef(null),O=R.useRef(null),N=R.useReducer(AQ,lb),H=$_(N,2),K=H[0],Y=H[1],Q=K.isFocused,ee=K.isFileDialogActive,F=K.draggedFiles,j=R.useRef(typeof window<"u"&&window.isSecureContext&&m&&hQ()),V=function(){!j.current&&ee&&setTimeout(function(){if(O.current){var re=O.current.files;re.length||(Y({type:"closeDialog"}),T())}},300)};R.useEffect(function(){return window.addEventListener("focus",V,!1),function(){window.removeEventListener("focus",V,!1)}},[O,ee,T,j]);var ce=R.useRef([]),ae=function(re){E.current&&E.current.contains(re.target)||(re.preventDefault(),ce.current=[])};R.useEffect(function(){return S&&(document.addEventListener("dragover",BR,!1),document.addEventListener("drop",ae,!1)),function(){S&&(document.removeEventListener("dragover",BR),document.removeEventListener("drop",ae))}},[E,S]);var fe=R.useCallback(function(k){k.preventDefault(),k.persist(),Le(k),ce.current=[].concat(SQ(ce.current),[k.target]),yv(k)&&Promise.resolve(i(k)).then(function(re){z0(k)&&!P||(Y({draggedFiles:re,isDragActive:!0,type:"setDraggedFiles"}),u&&u(k))})},[i,u,P]),de=R.useCallback(function(k){k.preventDefault(),k.persist(),Le(k);var re=yv(k);if(re&&k.dataTransfer)try{k.dataTransfer.dropEffect="copy"}catch{}return re&&h&&h(k),!1},[h,P]),De=R.useCallback(function(k){k.preventDefault(),k.persist(),Le(k);var re=ce.current.filter(function(Ae){return E.current&&E.current.contains(Ae)}),be=re.indexOf(k.target);be!==-1&&re.splice(be,1),ce.current=re,!(re.length>0)&&(Y({isDragActive:!1,type:"setDraggedFiles",draggedFiles:[]}),yv(k)&&d&&d(k))},[E,d,P]),Ee=R.useCallback(function(k,re){var be=[],Ae=[];k.forEach(function(Ue){var tt=eN(Ue,n),Pe=$_(tt,2),Se=Pe[0],Ke=Pe[1],te=tN(Ue,o,s),xe=$_(te,2),Re=xe[0],Ne=xe[1],nt=D?D(Ue):null;if(Se&&Re&&!nt)be.push(Ue);else{var pt=[Ke,Ne];nt&&(pt=pt.concat(nt)),Ae.push({file:Ue,errors:pt.filter(function(Kt){return Kt})})}}),(!a&&be.length>1||a&&l>=1&&be.length>l)&&(be.forEach(function(Ue){Ae.push({file:Ue,errors:[lQ]})}),be.splice(0)),Y({acceptedFiles:be,fileRejections:Ae,type:"setFiles"}),p&&p(be,Ae,re),Ae.length>0&&v&&v(Ae,re),be.length>0&&g&&g(be,re)},[Y,a,n,o,s,l,p,g,v,D]),J=R.useCallback(function(k){k.preventDefault(),k.persist(),Le(k),ce.current=[],yv(k)&&Promise.resolve(i(k)).then(function(re){z0(k)&&!P||Ee(re,k)}),Y({type:"reset"})},[i,Ee,P]),ve=R.useCallback(function(){if(j.current){Y({type:"openDialog"}),A();var k={multiple:a,types:pQ(n)};window.showOpenFilePicker(k).then(function(re){return i(re)}).then(function(re){Ee(re,null),Y({type:"closeDialog"})}).catch(function(re){mQ(re)?(T(re),Y({type:"closeDialog"})):gQ(re)&&(j.current=!1,O.current&&(O.current.value=null,O.current.click()))});return}O.current&&(Y({type:"openDialog"}),A(),O.current.value=null,O.current.click())},[Y,A,T,m,Ee,n,a]),U=R.useCallback(function(k){!E.current||!E.current.isEqualNode(k.target)||(k.key===" "||k.key==="Enter"||k.keyCode===32||k.keyCode===13)&&(k.preventDefault(),ve())},[E,ve]),z=R.useCallback(function(){Y({type:"focus"})},[]),W=R.useCallback(function(){Y({type:"blur"})},[]),ne=R.useCallback(function(){w||(dQ()?setTimeout(ve,0):ve())},[w,ve]),q=function(re){return r?null:re},se=function(re){return M?null:q(re)},Ce=function(re){return I?null:q(re)},Le=function(re){P&&re.stopPropagation()},He=R.useMemo(function(){return function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=k.refKey,be=re===void 0?"ref":re,Ae=k.role,Ue=k.onKeyDown,tt=k.onFocus,Pe=k.onBlur,Se=k.onClick,Ke=k.onDragEnter,te=k.onDragOver,xe=k.onDragLeave,Re=k.onDrop,Ne=B0(k,xQ);return En(En(ab({onKeyDown:se(fo(Ue,U)),onFocus:se(fo(tt,z)),onBlur:se(fo(Pe,W)),onClick:q(fo(Se,ne)),onDragEnter:Ce(fo(Ke,fe)),onDragOver:Ce(fo(te,de)),onDragLeave:Ce(fo(xe,De)),onDrop:Ce(fo(Re,J)),role:typeof Ae=="string"&&Ae!==""?Ae:"button"},be,E),!r&&!M?{tabIndex:0}:{}),Ne)}},[E,U,z,W,ne,fe,de,De,J,M,I,r]),We=R.useCallback(function(k){k.stopPropagation()},[]),Ge=R.useMemo(function(){return function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},re=k.refKey,be=re===void 0?"ref":re,Ae=k.onChange,Ue=k.onClick,tt=B0(k,_Q),Pe=ab({accept:n,multiple:a,type:"file",style:{display:"none"},onChange:q(fo(Ae,J)),onClick:q(fo(Ue,We)),tabIndex:-1},be,O);return En(En({},Pe),tt)}},[O,n,a,J,r]),je=F.length,Je=je>0&&uQ({files:F,accept:n,minSize:o,maxSize:s,multiple:a,maxFiles:l}),G=je>0&&!Je;return En(En({},K),{},{isDragAccept:Je,isDragReject:G,isFocused:Q&&!r,getRootProps:He,getInputProps:Ge,rootRef:E,inputRef:O,open:q(ve)})}function AQ(t,e){switch(e.type){case"focus":return En(En({},t),{},{isFocused:!0});case"blur":return En(En({},t),{},{isFocused:!1});case"openDialog":return En(En({},lb),{},{isFileDialogActive:!0});case"closeDialog":return En(En({},t),{},{isFileDialogActive:!1});case"setDraggedFiles":var n=e.isDragActive,r=e.draggedFiles;return En(En({},t),{},{draggedFiles:r,isDragActive:n});case"setFiles":return En(En({},t),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections});case"reset":return En({},lb);default:return t}}function VR(){}function RQ(t){let e;const n=new Set,r=(u,d)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const p=e;e=d?h:Object.assign({},e,h),n.forEach(g=>g(e,p))}},i=()=>e,s=(u,d=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let p=d(e);function g(){const v=d(e);if(!h(p,v)){const _=p;u(p=v,_)}}return n.add(g),()=>n.delete(g)},l={setState:r,getState:i,subscribe:(u,d,h)=>d||h?s(u,d,h):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const IQ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),GR=IQ?R.useEffect:R.useLayoutEffect;function DQ(t){const e=typeof t=="function"?RQ(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=R.useReducer(x=>x+1,0),o=e.getState(),a=R.useRef(o),l=R.useRef(r),u=R.useRef(i),d=R.useRef(!1),h=R.useRef();h.current===void 0&&(h.current=r(o));let p,g=!1;(a.current!==o||l.current!==r||u.current!==i||d.current)&&(p=r(o),g=!i(h.current,p)),GR(()=>{g&&(h.current=p),a.current=o,l.current=r,u.current=i,d.current=!1});const v=R.useRef(o);GR(()=>{const x=()=>{try{const S=e.getState(),w=l.current(S);u.current(h.current,w)||(a.current=S,h.current=w,s())}catch{d.current=!0,s()}},m=e.subscribe(x);return e.getState()!==v.current&&x(),m},[]);const _=g?p:h.current;return R.useDebugValue(_),_};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}const LQ=t=>(e,n,r)=>{const i=r.subscribe;return r.subscribe=(o,a,l)=>{let u=o;if(a){const d=(l==null?void 0:l.equalityFn)||Object.is;let h=o(r.getState());u=p=>{const g=o(p);if(!d(h,g)){const v=h;a(h=g,v)}},l!=null&&l.fireImmediately&&a(h,h)}return i(u)},t(e,n,r)};/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var OQ=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1};/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var kQ=OQ;function WR(t){return kQ(t)===!0&&Object.prototype.toString.call(t)==="[object Object]"}var sN=function(e){var n,r;return!(WR(e)===!1||(n=e.constructor,typeof n!="function")||(r=n.prototype,WR(r)===!1)||r.hasOwnProperty("isPrototypeOf")===!1)};/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var UQ=sN,CE=function(e){return UQ(e)||typeof e=="function"||Array.isArray(e)};/*!
 * for-in <https://github.com/jonschlinkert/for-in>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var NQ=function(e,n,r){for(var i in e)if(n.call(r,e[i],i,e)===!1)break},FQ=CE,zQ=NQ;function oN(t,e){for(var n=arguments.length,r=0;++r<n;){var i=arguments[r];ub(i)&&zQ(i,BQ,t)}return t}function BQ(t,e){if(HQ(e)){var n=this[e];ub(t)&&ub(n)?oN(n,t):this[e]=t}}function ub(t){return FQ(t)&&!Array.isArray(t)}function HQ(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var VQ=oN;/*!
 * get-value <https://github.com/jonschlinkert/get-value>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var GQ=function(t,e,n,r,i){if(!WQ(t)||!e)return t;if(e=xv(e),n&&(e+="."+xv(n)),r&&(e+="."+xv(r)),i&&(e+="."+xv(i)),e in t)return t[e];for(var s=e.split("."),o=s.length,a=-1;t&&++a<o;){for(var l=s[a];l[l.length-1]==="\\";)l=l.slice(0,-1)+"."+s[++a];t=t[l]}return t};function WQ(t){return t!==null&&(typeof t=="object"||typeof t=="function")}function xv(t){return t?Array.isArray(t)?t.join("."):t:""}/*!
 * assign-symbols <https://github.com/jonschlinkert/assign-symbols>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var $Q=function(t,e){if(t===null||typeof t>"u")throw new TypeError("expected first argument to be an object.");if(typeof e>"u"||typeof Symbol>"u"||typeof Object.getOwnPropertySymbols!="function")return t;for(var n=Object.prototype.propertyIsEnumerable,r=Object(t),i=arguments.length,s=0;++s<i;)for(var o=Object(arguments[s]),a=Object.getOwnPropertySymbols(o),l=0;l<a.length;l++){var u=a[l];n.call(o,u)&&(r[u]=o[u])}return r},jQ=CE,XQ=$Q,KQ=Object.assign||function(t){if(t===null||typeof t>"u")throw new TypeError("Cannot convert undefined or null to object");$R(t)||(t={});for(var e=1;e<arguments.length;e++){var n=arguments[e];qQ(n)&&(n=ZQ(n)),$R(n)&&(YQ(t,n),XQ(t,n))}return t};function YQ(t,e){for(var n in e)QQ(e,n)&&(t[n]=e[n])}function qQ(t){return t&&typeof t=="string"}function ZQ(t){var e={};for(var n in t)e[n]=t[n];return e}function $R(t){return t&&typeof t=="object"||jQ(t)}function QQ(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * split-string <https://github.com/jonschlinkert/split-string>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var JQ=KQ,eJ=function(t,e,n){if(typeof t!="string")throw new TypeError("expected a string");typeof e=="function"&&(n=e,e=null),typeof e=="string"&&(e={sep:e});var r=JQ({sep:"."},e),i=r.quotes||['"',"'","`"],s;r.brackets===!0?s={"<":">","(":")","[":"]","{":"}"}:r.brackets&&(s=r.brackets);var o=[],a=[],l=[""],u=r.sep,d=t.length,h=-1,p;function g(){if(s&&a.length)return s[a[a.length-1]]}for(;++h<d;){var v=t[h],_=t[h+1],x={val:v,idx:h,arr:l,str:t};if(o.push(x),v==="\\"){x.val=nJ(r,t,h)===!0?v+_:_,x.escaped=!0,typeof n=="function"&&n(x),l[l.length-1]+=x.val,h++;continue}if(s&&s[v]){a.push(v);var m=g(),S=h+1;if(t.indexOf(m,S+1)!==-1)for(;a.length&&S<d;){var w=t[++S];if(w==="\\"){w++;continue}if(i.indexOf(w)!==-1){S=cb(t,w,S+1);continue}if(m=g(),a.length&&t.indexOf(m,S+1)===-1)break;if(s[w]){a.push(w);continue}m===w&&a.pop()}if(p=S,p===-1){l[l.length-1]+=v;continue}v=t.slice(h,p+1),x.val=v,x.idx=h=p}if(i.indexOf(v)!==-1){if(p=cb(t,v,h+1),p===-1){l[l.length-1]+=v;continue}tJ(v,r)===!0?v=t.slice(h,p+1):v=t.slice(h+1,p),x.val=v,x.idx=h=p}if(typeof n=="function"&&(n(x,o),v=x.val,h=x.idx),x.val===u&&x.split!==!1){l.push("");continue}l[l.length-1]+=x.val}return l};function cb(t,e,n,r){var i=t.indexOf(e,n);return t.charAt(i-1)==="\\"?cb(t,e,i+1):i}function tJ(t,e){return e.keepDoubleQuotes===!0&&t==='"'||e.keepSingleQuotes===!0&&t==="'"?!0:e.keepQuotes}function nJ(t,e,n){return typeof t.keepEscaping=="function"?t.keepEscaping(e,n):t.keepEscaping===!0||e[n+1]==="\\"}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var rJ=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")},jR=rJ,iJ=function(e){jR(e)||(e={});for(var n=arguments.length,r=1;r<n;r++){var i=arguments[r];jR(i)&&sJ(e,i)}return e};function sJ(t,e){for(var n in e)oJ(e,n)&&(t[n]=e[n])}function oJ(t,e){return Object.prototype.hasOwnProperty.call(t,e)}/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var aJ=function(e){return typeof e<"u"&&e!==null&&(typeof e=="object"||typeof e=="function")};/*!
 * set-value <https://github.com/jonschlinkert/set-value>
 *
 * Copyright (c) 2014-2015, 2017, Jon Schlinkert.
 * Released under the MIT License.
 */var lJ=eJ,uJ=iJ,XR=sN,KR=aJ,cJ=function(t,e,n){if(!KR(t)||(Array.isArray(e)&&(e=[].concat.apply([],e).join(".")),typeof e!="string"))return t;for(var r=lJ(e,{sep:".",brackets:!0}).filter(fJ),i=r.length,s=-1,o=t;++s<i;){var a=r[s];if(s!==i-1){KR(o[a])||(o[a]={}),o=o[a];continue}XR(o[a])&&XR(n)?o[a]=uJ({},o[a],n):o[a]=n}return t};function fJ(t){return t!=="__proto__"&&t!=="constructor"&&t!=="prototype"}var j_=CE,YR=VQ,dJ=GQ,qR=cJ,hJ=function(e,n,r){if(!j_(e))throw new TypeError("expected an object");if(typeof n!="string"||r==null)return YR.apply(null,arguments);if(typeof r=="string")return qR(e,n,r),e;var i=dJ(e,n);return j_(r)&&j_(i)&&(r=YR({},i,r)),qR(e,n,r),e};const pJ=_s(hJ),AE=(...t)=>t.filter(Boolean).join(".");function mJ(t){const e=t.split(".");return[e.pop(),e.join(".")||void 0]}function gJ(t){const e=R.useRef(null),n=R.useRef(null),r=R.useRef(!0);return R.useLayoutEffect(()=>{t||(e.current.style.height="0px",e.current.style.overflow="hidden")},[]),R.useEffect(()=>{if(r.current){r.current=!1;return}let i;const s=e.current,o=()=>{t&&(s.style.removeProperty("height"),s.style.removeProperty("overflow"),n.current.scrollIntoView({behavior:"smooth",block:"nearest"}))};s.addEventListener("transitionend",o,{once:!0});const{height:a}=n.current.getBoundingClientRect();return s.style.height=a+"px",t||(s.style.overflow="hidden",i=window.setTimeout(()=>s.style.height="0px",50)),()=>{s.removeEventListener("transitionend",o),clearTimeout(i)}},[t]),{wrapperRef:e,contentRef:n}}const vJ=t=>{const[e,n]=R.useState(t.getVisiblePaths());return R.useEffect(()=>{n(t.getVisiblePaths());const r=t.useStore.subscribe(t.getVisiblePaths,n,{equalityFn:Kk});return()=>r()},[t]),e};function aN(t=3){const e=R.useRef(null),n=R.useRef(null),[r,i]=R.useState(!1),s=R.useCallback(()=>i(!0),[]),o=R.useCallback(()=>i(!1),[]);return R.useLayoutEffect(()=>{if(r){const{bottom:a,top:l,left:u}=e.current.getBoundingClientRect(),{height:d}=n.current.getBoundingClientRect(),h=a+d>window.innerHeight-40?"up":"down";n.current.style.position="fixed",n.current.style.zIndex="10000",n.current.style.left=u+"px",h==="down"?n.current.style.top=a+t+"px":n.current.style.bottom=window.innerHeight-l+t+"px"}},[t,r]),{popinRef:e,wrapperRef:n,shown:r,show:s,hide:o}}PZ([CZ]);const yJ={rgb:"toRgb",hsl:"toHsl",hsv:"toHsv",hex:"toHex"};yi.extend({color:()=>t=>ti(t).isValid()});const xJ=t=>yi().color().test(t);function lN(t,{format:e,hasAlpha:n,isString:r}){const i=yJ[e]+(r&&e!=="hex"?"String":""),s=t[i]();return typeof s=="object"&&!n?XY(s,["a"]):s}const uN=(t,e)=>{const n=ti(t);if(!n.isValid())throw Error("Invalid color");return lN(n,e)},_J=(t,e)=>lN(ti(t),xt(xt({},e),{},{isString:!0,format:"hex"})),SJ=({value:t})=>{const e=TZ(t),n=e==="name"?"hex":e,r=typeof t=="object"?"a"in t:e==="hex"&&t.length===8||/^(rgba)|(hsla)|(hsva)/.test(t),i={format:n,hasAlpha:r,isString:typeof t=="string"};return{value:uN(t,i),settings:i}};var wJ=Object.freeze({__proto__:null,schema:xJ,sanitize:uN,format:_J,normalize:SJ});const bJ=ft("div",{position:"relative",boxSizing:"border-box",borderRadius:"$sm",overflow:"hidden",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",backgroundColor:"#fff",backgroundImage:`url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')`,$inputStyle:"",$hover:"",zIndex:1,variants:{active:{true:{$inputStyle:"$accent1"}}},"&::before":{content:'""',position:"absolute",top:0,bottom:0,right:0,left:0,backgroundColor:"currentColor",zIndex:1}}),MJ=ft("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto",columnGap:"$colGap",alignItems:"center"}),EJ=ft("div",{width:"$colorPickerWidth",height:"$colorPickerHeight",".react-colorful":{width:"100%",height:"100%",boxShadow:"$level2",cursor:"crosshair"},".react-colorful__saturation":{borderRadius:"$sm $sm 0 0"},".react-colorful__alpha, .react-colorful__hue":{height:10},".react-colorful__last-control":{borderRadius:"0 0 $sm $sm"},".react-colorful__pointer":{height:12,width:12}});function ZR(t,e){return e!=="rgb"?ti(t).toRgb():t}function TJ({value:t,displayValue:e,settings:n,onUpdate:r}){const{emitOnEditStart:i,emitOnEditEnd:s}=Xr(),{format:o,hasAlpha:a}=n,{popinRef:l,wrapperRef:u,shown:d,show:h,hide:p}=aN(),g=R.useRef(0),[v,_]=R.useState(()=>ZR(t,o)),x=a?kZ:NZ,m=()=>{_(ZR(t,o)),h(),i()},S=()=>{p(),s(),window.clearTimeout(g.current)},w=()=>{g.current=window.setTimeout(S,500)};return R.useEffect(()=>()=>window.clearTimeout(g.current),[]),Z.createElement(Z.Fragment,null,Z.createElement(bJ,{ref:l,active:d,onClick:()=>m(),style:{color:e}}),d&&Z.createElement(_E,null,Z.createElement(IU,{onPointerUp:S}),Z.createElement(EJ,{ref:u,onMouseEnter:()=>window.clearTimeout(g.current),onMouseLeave:M=>M.buttons===0&&w()},Z.createElement(x,{color:v,onChange:r}))))}function PJ(){const{value:t,displayValue:e,label:n,onChange:r,onUpdate:i,settings:s}=Xr();return Z.createElement(ws,{input:!0},Z.createElement(Qs,null,n),Z.createElement(MJ,null,Z.createElement(TJ,{value:t,displayValue:e,onChange:r,onUpdate:i,settings:s}),Z.createElement(xE,{value:e,onChange:r,onUpdate:i})))}var CJ=xt({component:PJ},wJ);function AJ(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Xr();return Z.createElement(ws,{input:!0},Z.createElement(Qs,null,t),Z.createElement(wE,{value:e,settings:r,onUpdate:n}))}var RJ=xt({component:AJ},zU(["x","y","z"]));const IJ=ft("div",{$flexCenter:"",position:"relative",backgroundColor:"$elevation3",borderRadius:"$sm",cursor:"pointer",height:"$rowHeight",width:"$rowHeight",touchAction:"none",$draggable:"",$hover:"","&:active":{cursor:"none"},"&::after":{content:'""',backgroundColor:"$accent2",height:4,width:4,borderRadius:2}}),DJ=ft("div",{$flexCenter:"",width:"$joystickWidth",height:"$joystickHeight",borderRadius:"$sm",boxShadow:"$level2",position:"fixed",zIndex:1e4,overflow:"hidden",$draggable:"",transform:"translate(-50%, -50%)",variants:{isOutOfBounds:{true:{backgroundColor:"$elevation1"},false:{backgroundColor:"$elevation3"}}},"> div":{position:"absolute",$flexCenter:"",borderStyle:"solid",borderWidth:1,borderColor:"$highlight1",backgroundColor:"$elevation3",width:"80%",height:"80%","&::after,&::before":{content:'""',position:"absolute",zindex:10,backgroundColor:"$highlight1"},"&::before":{width:"100%",height:1},"&::after":{height:"100%",width:1}},"> span":{position:"relative",zindex:100,width:10,height:10,backgroundColor:"$accent2",borderRadius:"50%"}});function LJ({value:t,settings:e,onUpdate:n}){const r=R.useRef(),i=R.useRef(0),s=R.useRef(0),o=R.useRef(1),[a,l]=R.useState(!1),[u,d]=R.useState(!1),[h,p]=LU(),g=R.useRef(null),v=R.useRef(null);R.useLayoutEffect(()=>{if(a){const{top:N,left:H,width:K,height:Y}=g.current.getBoundingClientRect();v.current.style.left=H+K/2+"px",v.current.style.top=N+Y/2+"px"}},[a]);const{keys:[_,x],joystick:m}=e,S=m==="invertY"?1:-1,{[_]:{step:w},[x]:{step:M}}=e,I=ea("sizes","joystickWidth"),P=ea("sizes","joystickHeight"),D=parseFloat(I)*.8/2,A=parseFloat(P)*.8/2,T=R.useCallback(()=>{r.current||(d(!0),i.current&&p({x:i.current*D}),s.current&&p({y:s.current*-A}),r.current=window.setInterval(()=>{n(N=>{const H=w*i.current*o.current,K=S*M*s.current*o.current;return Array.isArray(N)?{[_]:N[0]+H,[x]:N[1]+K}:{[_]:N[_]+H,[x]:N[x]+K}})},16))},[D,A,n,p,w,M,_,x,S]),E=R.useCallback(()=>{window.clearTimeout(r.current),r.current=void 0,d(!1)},[]);R.useEffect(()=>{function N(H){o.current=vU(H)}return window.addEventListener("keydown",N),window.addEventListener("keyup",N),()=>{window.clearTimeout(r.current),window.removeEventListener("keydown",N),window.removeEventListener("keyup",N)}},[]);const O=em(({first:N,active:H,delta:[K,Y],movement:[Q,ee]})=>{N&&l(!0);const F=ul(Q,-D,D),j=ul(ee,-A,A);i.current=Math.abs(Q)>Math.abs(F)?Math.sign(Q-F):0,s.current=Math.abs(ee)>Math.abs(j)?Math.sign(j-ee):0;let V=t[_],ce=t[x];H?(i.current||(V+=K*w*o.current,p({x:F})),s.current||(ce-=S*Y*M*o.current,p({y:j})),i.current||s.current?T():E(),n({[_]:V,[x]:ce})):(l(!1),i.current=0,s.current=0,p({x:0,y:0}),E())});return Z.createElement(IJ,Jn({ref:g},O()),a&&Z.createElement(_E,null,Z.createElement(DJ,{ref:v,isOutOfBounds:u},Z.createElement("div",null),Z.createElement("span",{ref:h}))))}const OJ=ft("div",{display:"grid",columnGap:"$colGap",variants:{withJoystick:{true:{gridTemplateColumns:"$sizes$rowHeight auto"},false:{gridTemplateColumns:"auto"}}}});function kJ(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Xr();return Z.createElement(ws,{input:!0},Z.createElement(Qs,null,t),Z.createElement(OJ,{withJoystick:!!r.joystick},r.joystick&&Z.createElement(LJ,{value:e,settings:r,onUpdate:n}),Z.createElement(wE,{value:e,settings:r,onUpdate:n})))}const UJ=["joystick"],cN=zU(["x","y"]),NJ=t=>{let{joystick:e=!0}=t,n=hn(t,UJ);const{value:r,settings:i}=cN.normalize(n);return{value:r,settings:xt(xt({},i),{},{joystick:e})}};var FJ=xt(xt({component:kJ},cN),{},{normalize:NJ});const zJ=t=>{if(t!==void 0){if(t instanceof File)try{return URL.createObjectURL(t)}catch{return}if(typeof t=="string"&&t.indexOf("blob:")===0)return t;throw Error("Invalid image format [undefined | blob |File].")}},BJ=(t,e)=>typeof e=="object"&&"image"in e,HJ=({image:t})=>({value:t});var VJ=Object.freeze({__proto__:null,sanitize:zJ,schema:BJ,normalize:HJ});const GJ=ft("div",{position:"relative",display:"grid",gridTemplateColumns:"$sizes$rowHeight auto 20px",columnGap:"$colGap",alignItems:"center"}),WJ=ft("div",{$flexCenter:"",overflow:"hidden",height:"$rowHeight",background:"$elevation3",textAlign:"center",color:"inherit",borderRadius:"$sm",outline:"none",userSelect:"none",cursor:"pointer",$inputStyle:"",$hover:"",$focusWithin:"",$active:"$accent1 $elevation1",variants:{isDragAccept:{true:{$inputStyle:"$accent1",backgroundColor:"$elevation1"}}}}),$J=ft("div",{boxSizing:"border-box",borderRadius:"$sm",height:"$rowHeight",width:"$rowHeight",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center",variants:{hasImage:{true:{cursor:"pointer",$hover:"",$active:""}}}}),jJ=ft("div",{$flexCenter:"",width:"$imagePreviewWidth",height:"$imagePreviewHeight",borderRadius:"$sm",boxShadow:"$level2",pointerEvents:"none",$inputStyle:"",backgroundSize:"cover",backgroundPosition:"center"}),XJ=ft("div",{fontSize:"0.8em",height:"100%",padding:"$rowGap $md"}),KJ=ft("div",{$flexCenter:"",top:"0",right:"0",marginRight:"$sm",height:"100%",cursor:"pointer",variants:{disabled:{true:{color:"$elevation3",cursor:"default"}}},"&::after,&::before":{content:'""',position:"absolute",height:2,width:10,borderRadius:1,backgroundColor:"currentColor"},"&::after":{transform:"rotate(45deg)"},"&::before":{transform:"rotate(-45deg)"}});function YJ(){const{label:t,value:e,onUpdate:n,disabled:r}=Xr(),{popinRef:i,wrapperRef:s,shown:o,show:a,hide:l}=aN(),u=R.useCallback(v=>{v.length&&n(v[0])},[n]),d=R.useCallback(v=>{v.stopPropagation(),n(void 0)},[n]),{getRootProps:h,getInputProps:p,isDragAccept:g}=iN({maxFiles:1,accept:"image/*",onDrop:u,disabled:r});return Z.createElement(ws,{input:!0},Z.createElement(Qs,null,t),Z.createElement(GJ,null,Z.createElement($J,{ref:i,hasImage:!!e,onPointerDown:()=>!!e&&a(),onPointerUp:l,style:{backgroundImage:e?`url(${e})`:"none"}}),o&&!!e&&Z.createElement(_E,null,Z.createElement(IU,{onPointerUp:l,style:{cursor:"pointer"}}),Z.createElement(jJ,{ref:s,style:{backgroundImage:`url(${e})`}})),Z.createElement(WJ,h({isDragAccept:g}),Z.createElement("input",p()),Z.createElement(XJ,null,g?"drop image":"click or drop")),Z.createElement(KJ,{onClick:d,disabled:!e})))}var qJ=xt({component:YJ},VJ);const QR=yi().number(),ZJ=(t,e)=>yi().array().length(2).every.number().test(t)&&yi().schema({min:QR,max:QR}).test(e),H0=t=>({min:t[0],max:t[1]}),fN=(t,{bounds:[e,n]},r)=>{const i=Array.isArray(t)?H0(t):t,s={min:r[0],max:r[1]},{min:o,max:a}=xt(xt({},s),i);return[ul(Number(o),e,Math.max(e,a)),ul(Number(a),Math.min(n,o),n)]},QJ=({value:t,min:e,max:n})=>{const r={min:e,max:n},i=FU(H0(t),{min:r,max:r}),s=[e,n],o=xt(xt({},i),{},{bounds:s});return{value:fN(H0(t),o,t),settings:o}};var JJ=Object.freeze({__proto__:null,schema:ZJ,format:H0,sanitize:fN,normalize:QJ});const eee=["value","bounds","onDrag"],tee=["bounds"],nee=ft("div",{display:"grid",columnGap:"$colGap",gridTemplateColumns:"auto calc($sizes$numberInputMinWidth * 2 + $space$rowGap)"});function ree(t){let{value:e,bounds:[n,r],onDrag:i}=t,s=hn(t,eee);const o=R.useRef(null),a=R.useRef(null),l=R.useRef(null),u=R.useRef(0),d=ea("sizes","scrubberWidth"),h=em(({event:v,first:_,xy:[x],movement:[m],memo:S={}})=>{if(_){const{width:M,left:I}=o.current.getBoundingClientRect();u.current=M-parseFloat(d);const P=(v==null?void 0:v.target)===a.current||(v==null?void 0:v.target)===l.current;S.pos=U0((x-I)/M,n,r);const D=Math.abs(S.pos-e.min)-Math.abs(S.pos-e.max);S.key=D<0||D===0&&S.pos<=e.min?"min":"max",P&&(S.pos=e[S.key])}const w=S.pos+U0(m/u.current,0,r-n);return i({[S.key]:Lq(w,s[S.key])}),S}),p=`calc(${k0(e.min,n,r)} * (100% - ${d} - 8px) + 4px)`,g=`calc(${1-k0(e.max,n,r)} * (100% - ${d} - 8px) + 4px)`;return Z.createElement(kU,Jn({ref:o},h()),Z.createElement(OU,null,Z.createElement(UU,{style:{left:p,right:g}})),Z.createElement(Qw,{position:"left",ref:a,style:{left:p}}),Z.createElement(Qw,{position:"right",ref:l,style:{right:g}}))}function iee(){const{label:t,displayValue:e,onUpdate:n,settings:r}=Xr(),i=hn(r,tee);return Z.createElement(Z.Fragment,null,Z.createElement(ws,{input:!0},Z.createElement(Qs,null,t),Z.createElement(nee,null,Z.createElement(ree,Jn({value:e},r,{onDrag:n})),Z.createElement(wE,{value:e,settings:i,onUpdate:n,innerLabelTrim:0}))))}var see=xt({component:iee},JJ);const oee=()=>{const t=new Map;return{on:(e,n)=>{let r=t.get(e);r===void 0&&(r=new Set,t.set(e,r)),r.add(n)},off:(e,n)=>{const r=t.get(e);r!==void 0&&(r.delete(n),r.size===0&&t.delete(e))},emit:(e,...n)=>{const r=t.get(e);if(r!==void 0)for(const i of r)i(...n)}}},aee=["type","value"],lee=["onChange","transient","onEditStart","onEditEnd"],uee=function(){const e=DQ(LQ(()=>({data:{}}))),n=oee();this.storeId=jY(),this.useStore=e;const r={},i=new Set;this.getVisiblePaths=()=>{const o=this.getData(),a=Object.keys(o),l=[];Object.entries(r).forEach(([d,h])=>{h.render&&a.some(p=>p.indexOf(d)===0)&&!h.render(this.get)&&l.push(d+".")});const u=[];return i.forEach(d=>{d in o&&o[d].__refCount>0&&l.every(h=>d.indexOf(h)===-1)&&(!o[d].render||o[d].render(this.get))&&u.push(d)}),u},this.setOrderedPaths=o=>{o.forEach(a=>i.add(a))},this.orderPaths=o=>(this.setOrderedPaths(o),o),this.disposePaths=o=>{e.setState(a=>{const l=a.data;return o.forEach(u=>{if(u in l){const d=l[u];d.__refCount--,d.__refCount===0&&d.type in wo&&delete l[u]}}),{data:l}})},this.dispose=()=>{e.setState(()=>({data:{}}))},this.getFolderSettings=o=>r[o]||{},this.getData=()=>e.getState().data,this.addData=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([d,h])=>{let p=u[d];if(p){const{type:g,value:v}=h,_=hn(h,aee);g!==p.type?Ko(Tn.INPUT_TYPE_OVERRIDE,g):((p.__refCount===0||a)&&Object.assign(p,_),p.__refCount++)}else u[d]=xt(xt({},h),{},{__refCount:1})}),{data:u}})},this.setValueAtPath=(o,a,l)=>{e.setState(u=>{const d=u.data;return SR(d[o],a,o,this,l),{data:d}})},this.setSettingsAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].settings=xt(xt({},u[o].settings),a),{data:u}})},this.disableInputAtPath=(o,a)=>{e.setState(l=>{const u=l.data;return u[o].disabled=a,{data:u}})},this.set=(o,a)=>{e.setState(l=>{const u=l.data;return Object.entries(o).forEach(([d,h])=>{try{SR(u[d],h,void 0,void 0,a)}catch{}}),{data:u}})},this.getInput=o=>{try{return this.getData()[o]}catch{Ko(Tn.PATH_DOESNT_EXIST,o)}},this.get=o=>{var a;return(a=this.getInput(o))===null||a===void 0?void 0:a.value},this.emitOnEditStart=o=>{n.emit(`onEditStart:${o}`,this.get(o),o,xt(xt({},this.getInput(o)),{},{get:this.get}))},this.emitOnEditEnd=o=>{n.emit(`onEditEnd:${o}`,this.get(o),o,xt(xt({},this.getInput(o)),{},{get:this.get}))},this.subscribeToEditStart=(o,a)=>{const l=`onEditStart:${o}`;return n.on(l,a),()=>n.off(l,a)},this.subscribeToEditEnd=(o,a)=>{const l=`onEditEnd:${o}`;return n.on(l,a),()=>n.off(l,a)};const s=(o,a,l)=>{const u={};return Object.entries(o).forEach(([d,h])=>{if(d==="")return Ko(Tn.EMPTY_KEY);let p=AE(a,d);if(h.type===wo.FOLDER){const g=s(h.schema,p,l);Object.assign(u,g),p in r||(r[p]=h.settings)}else if(d in l)Ko(Tn.DUPLICATE_KEYS,d,p,l[d].path);else{const g=JY(h,d,p,u);if(g){const{type:v,options:_,input:x}=g,{onChange:m,transient:S,onEditStart:w,onEditEnd:M}=_,I=hn(_,lee);u[p]=xt(xt(xt({type:v},I),x),{},{fromPanel:!0}),l[d]={path:p,onChange:m,transient:S,onEditStart:w,onEditEnd:M}}else Ko(Tn.UNKNOWN_INPUT,p,h)}}),u};this.getDataFromSchema=o=>{const a={};return[s(o,"",a),a]}};new uee;const JR=t=>"__levaInput"in t,cee=(t,e)=>{const n={},r=e?e.toLowerCase():null;return t.forEach(i=>{const[s,o]=mJ(i);(!r||s.toLowerCase().indexOf(r)>-1)&&pJ(n,o,{[s]:{__levaInput:!0,path:i}})}),n},fee=["type","label","path","valueKey","value","settings","setValue","disabled"];function dee(t){let{type:e,label:n,path:r,valueKey:i,value:s,settings:o,setValue:a,disabled:l}=t,u=hn(t,fee);const{displayValue:d,onChange:h,onUpdate:p}=DU({type:e,value:s,settings:o,setValue:a}),g=Mu[e].component;return g?Z.createElement(wU.Provider,{value:xt({key:i,path:r,id:""+r,label:n,displayValue:d,value:s,onChange:h,onUpdate:p,settings:o,setValue:a,disabled:l},u)},Z.createElement(vq,{disabled:l},Z.createElement(g,null))):(Ko(Tn.NO_COMPONENT_FOR_TYPE,e,r),null)}const hee=ft("button",{display:"block",$reset:"",fontWeight:"$button",height:"$rowHeight",borderStyle:"none",borderRadius:"$sm",backgroundColor:"$elevation1",color:"$highlight1","&:not(:disabled)":{color:"$highlight3",backgroundColor:"$accent2",cursor:"pointer",$hover:"$accent3",$active:"$accent3 $accent1",$focus:""}});function pee({onClick:t,settings:e,label:n}){const r=Jp();return Z.createElement(ws,null,Z.createElement(hee,{disabled:e.disabled,onClick:()=>t(r.get)},n))}const mee=ft("div",{$flex:"",justifyContent:"flex-end",gap:"$colGap"}),gee=ft("button",{$reset:"",cursor:"pointer",borderRadius:"$xs","&:hover":{backgroundColor:"$elevation3"}}),vee=({label:t,opts:e})=>{let n=typeof t=="string"&&t.trim()===""?null:t,r=e;return typeof e.opts=="object"&&(r.label!==void 0&&(n=e.label),r=e.opts),{label:n,opts:r}};function yee(t){const{label:e,opts:n}=vee(t),r=Jp();return Z.createElement(ws,{input:!!e},e&&Z.createElement(Qs,null,e),Z.createElement(mee,null,Object.entries(n).map(([i,s])=>Z.createElement(gee,{key:i,onClick:()=>s(r.get)},i))))}const xee=ft("canvas",{height:"$monitorHeight",width:"100%",display:"block",borderRadius:"$sm"}),dN=100;function _ee(t,e){t.push(e),t.length>dN&&t.shift()}const See=R.forwardRef(function({initialValue:t},e){const n=ea("colors","highlight3"),r=ea("colors","elevation2"),i=ea("colors","highlight1"),[s,o]=R.useMemo(()=>[ti(i).alpha(.4).toRgbString(),ti(i).alpha(.1).toRgbString()],[i]),a=R.useRef([t]),l=R.useRef(t),u=R.useRef(t),d=R.useRef(),h=R.useCallback((v,_)=>{if(!v)return;const{width:x,height:m}=v,S=new Path2D,w=x/dN,M=m*.05;for(let D=0;D<a.current.length;D++){const A=k0(a.current[D],l.current,u.current),T=w*D,E=m-A*(m-M*2)-M;S.lineTo(T,E)}_.clearRect(0,0,x,m);const I=new Path2D(S);I.lineTo(w*(a.current.length+1),m),I.lineTo(0,m),I.lineTo(0,0);const P=_.createLinearGradient(0,0,0,m);P.addColorStop(0,s),P.addColorStop(1,o),_.fillStyle=P,_.fill(I),_.strokeStyle=r,_.lineJoin="round",_.lineWidth=14,_.stroke(S),_.strokeStyle=n,_.lineWidth=2,_.stroke(S)},[n,r,s,o]),[p,g]=Tq(h);return R.useImperativeHandle(e,()=>({frame:v=>{(l.current===void 0||v<l.current)&&(l.current=v),(u.current===void 0||v>u.current)&&(u.current=v),_ee(a.current,v),d.current=requestAnimationFrame(()=>h(p.current,g.current))}}),[p,g,h]),R.useEffect(()=>()=>cancelAnimationFrame(d.current),[]),Z.createElement(xee,{ref:p})}),eI=t=>Number.isFinite(t)?t.toPrecision(2):t.toString(),wee=R.forwardRef(function({initialValue:t},e){const[n,r]=R.useState(eI(t));return R.useImperativeHandle(e,()=>({frame:i=>r(eI(i))}),[]),Z.createElement("div",null,n)});function tI(t){return typeof t=="function"?t():t.current}function bee({label:t,objectOrFn:e,settings:n}){const r=R.useRef(),i=R.useRef(tI(e));return R.useEffect(()=>{const s=window.setInterval(()=>{var o;document.hidden||(o=r.current)===null||o===void 0||o.frame(tI(e))},n.interval);return()=>window.clearInterval(s)},[e,n.interval]),Z.createElement(ws,{input:!0},Z.createElement(Qs,{align:"top"},t),n.graph?Z.createElement(See,{ref:r,initialValue:i.current}):Z.createElement(wee,{ref:r,initialValue:i.current}))}const Mee=["type","label","key"],Eee={[wo.BUTTON]:pee,[wo.BUTTON_GROUP]:yee,[wo.MONITOR]:bee},Tee=Z.memo(({path:t})=>{const[e,{set:n,setSettings:r,disable:i,storeId:s,emitOnEditStart:o,emitOnEditEnd:a}]=Cq(t);if(!e)return null;const{type:l,label:u,key:d}=e,h=hn(e,Mee);if(l in wo){const p=Eee[l];return Z.createElement(p,Jn({label:u,path:t},h))}return l in Mu?Z.createElement(dee,Jn({key:s+t,type:l,label:u,storeId:s,path:t,valueKey:d,setValue:n,setSettings:r,disable:i,emitOnEditStart:o,emitOnEditEnd:a},h)):(FY(Tn.UNSUPPORTED_INPUT,l,t),null)});function Pee({toggle:t,toggled:e,name:n}){return Z.createElement(pq,{onClick:()=>t()},Z.createElement(SE,{toggled:e}),Z.createElement("div",null,n))}const Cee=({name:t,path:e,tree:n})=>{const r=Jp(),i=AE(e,t),{collapsed:s,color:o}=r.getFolderSettings(i),[a,l]=R.useState(!s),u=R.useRef(null),d=ea("colors","folderWidgetColor"),h=ea("colors","folderTextColor");return R.useLayoutEffect(()=>{u.current.style.setProperty("--leva-colors-folderWidgetColor",o||d),u.current.style.setProperty("--leva-colors-folderTextColor",o||h)},[o,d,h]),Z.createElement(N0,{ref:u},Z.createElement(Pee,{name:t,toggled:a,toggle:()=>l(p=>!p)}),Z.createElement(hN,{parent:i,tree:n,toggled:a}))},hN=Z.memo(({isRoot:t=!1,fill:e=!1,flat:n=!1,parent:r,tree:i,toggled:s})=>{const{wrapperRef:o,contentRef:a}=gJ(s),l=Jp(),u=([h,p])=>{var g;return(JR(p)?(g=l.getInput(p.path))===null||g===void 0?void 0:g.order:l.getFolderSettings(AE(r,h)).order)||0},d=Object.entries(i).sort((h,p)=>u(h)-u(p));return Z.createElement(qw,{ref:o,isRoot:t,fill:e,flat:n},Z.createElement(CU,{ref:a,isRoot:t,toggled:s},d.map(([h,p])=>JR(p)?Z.createElement(Tee,{key:p.path,valueKey:p.valueKey,path:p.path}):Z.createElement(Cee,{key:h,name:h,path:r,tree:p}))))}),Aee=ft("div",{position:"relative",fontFamily:"$mono",fontSize:"$root",color:"$rootText",backgroundColor:"$elevation1",variants:{fill:{false:{position:"fixed",top:"10px",right:"10px",zIndex:1e3,width:"$rootWidth"},true:{position:"relative",width:"100%"}},flat:{false:{borderRadius:"$lg",boxShadow:"$level1"}},oneLineLabels:{true:{[`${RU}`]:{gridTemplateColumns:"auto",gridAutoColumns:"minmax(max-content, 1fr)",gridAutoRows:"minmax($sizes$rowHeight), auto)",rowGap:0,columnGap:0,marginTop:"$rowGap"}}},hideTitleBar:{true:{$$titleBarHeight:"0px"},false:{$$titleBarHeight:"$sizes$titleBarHeight"}}},"&,*,*:after,*:before":{boxSizing:"border-box"},"*::selection":{backgroundColor:"$accent2"}}),pN=40,V0=ft("i",{$flexCenter:"",width:pN,userSelect:"none",cursor:"pointer","> svg":{fill:"$highlight1",transition:"transform 350ms ease, fill 250ms ease"},"&:hover > svg":{fill:"$highlight3"},variants:{active:{true:{"> svg":{fill:"$highlight2"}}}}}),Ree=ft("div",{display:"flex",alignItems:"stretch",justifyContent:"space-between",height:"$titleBarHeight",variants:{mode:{drag:{cursor:"grab"}}}}),Iee=ft("div",{$flex:"",position:"relative",width:"100%",overflow:"hidden",transition:"height 250ms ease",color:"$highlight3",paddingLeft:"$md",[`> ${V0}`]:{height:30},variants:{toggled:{true:{height:30},false:{height:0}}}}),Dee=ft("input",{$reset:"",flex:1,position:"relative",height:30,width:"100%",backgroundColor:"transparent",fontSize:"10px",borderRadius:"$root","&:focus":{},"&::placeholder":{color:"$highlight2"}}),Lee=ft("div",{touchAction:"none",$flexCenter:"",flex:1,"> svg":{fill:"$highlight1"},color:"$highlight1",variants:{drag:{true:{$draggable:"","> svg":{transition:"fill 250ms ease"},"&:hover":{color:"$highlight3"},"&:hover > svg":{fill:"$highlight3"}}},filterEnabled:{false:{paddingRight:pN}}}}),Oee=Z.forwardRef(({setFilter:t,toggle:e},n)=>{const[r,i]=R.useState(""),s=R.useMemo(()=>gU(t,250),[t]),o=()=>{t(""),i("")},a=l=>{const u=l.currentTarget.value;e(!0),i(u)};return R.useEffect(()=>{s(r)},[r,s]),Z.createElement(Z.Fragment,null,Z.createElement(Dee,{ref:n,value:r,placeholder:"[Open filter with CMD+SHIFT+L]",onPointerDown:l=>l.stopPropagation(),onChange:a}),Z.createElement(V0,{onClick:()=>o(),style:{visibility:r?"visible":"hidden"}},Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"14",width:"14",viewBox:"0 0 20 20",fill:"currentColor"},Z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))))});function kee({setFilter:t,onDrag:e,onDragStart:n,onDragEnd:r,toggle:i,toggled:s,title:o,drag:a,filterEnabled:l,from:u}){const[d,h]=R.useState(!1),p=R.useRef(null);R.useEffect(()=>{var v,_;d?(v=p.current)===null||v===void 0||v.focus():(_=p.current)===null||_===void 0||_.blur()},[d]);const g=em(({offset:[v,_],first:x,last:m})=>{e({x:v,y:_}),x&&n({x:v,y:_}),m&&r({x:v,y:_})},{filterTaps:!0,from:({offset:[v,_]})=>[(u==null?void 0:u.x)||v,(u==null?void 0:u.y)||_]});return R.useEffect(()=>{const v=_=>{_.key==="L"&&_.shiftKey&&_.metaKey&&h(x=>!x)};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[]),Z.createElement(Z.Fragment,null,Z.createElement(Ree,{mode:a?"drag":void 0},Z.createElement(V0,{active:!s,onClick:()=>i()},Z.createElement(SE,{toggled:s,width:12,height:8})),Z.createElement(Lee,Jn({},a?g():{},{drag:a,filterEnabled:l}),o===void 0&&a?Z.createElement("svg",{width:"20",height:"10",viewBox:"0 0 28 14",xmlns:"http://www.w3.org/2000/svg"},Z.createElement("circle",{cx:"2",cy:"2",r:"2"}),Z.createElement("circle",{cx:"14",cy:"2",r:"2"}),Z.createElement("circle",{cx:"26",cy:"2",r:"2"}),Z.createElement("circle",{cx:"2",cy:"12",r:"2"}),Z.createElement("circle",{cx:"14",cy:"12",r:"2"}),Z.createElement("circle",{cx:"26",cy:"12",r:"2"})):o),l&&Z.createElement(V0,{active:d,onClick:()=>h(v=>!v)},Z.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 0 20 20"},Z.createElement("path",{d:"M9 9a2 2 0 114 0 2 2 0 01-4 0z"}),Z.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a4 4 0 00-3.446 6.032l-2.261 2.26a1 1 0 101.414 1.415l2.261-2.261A4 4 0 1011 5z",clipRule:"evenodd"})))),Z.createElement(Iee,{toggled:d},Z.createElement(Oee,{ref:p,setFilter:t,toggle:i})))}Z.memo(({store:t,rootClass:e,fill:n=!1,flat:r=!1,neverHide:i=!1,oneLineLabels:s=!1,titleBar:o={title:void 0,drag:!0,filter:!0,position:void 0,onDrag:void 0,onDragStart:void 0,onDragEnd:void 0},hideCopyButton:a=!1,toggled:l,setToggle:u})=>{var d,h;const p=vJ(t),[g,v]=R.useState(""),_=R.useMemo(()=>cee(p,g),[p,g]),[x,m]=LU(),S=i||p.length>0,w=typeof o=="object"&&o.title||void 0,M=typeof o=="object"&&(d=o.drag)!==null&&d!==void 0?d:!0,I=typeof o=="object"&&(h=o.filter)!==null&&h!==void 0?h:!0,P=typeof o=="object"&&o.position||void 0,D=typeof o=="object"&&o.onDrag||void 0,A=typeof o=="object"&&o.onDragStart||void 0,T=typeof o=="object"&&o.onDragEnd||void 0;return Z.useEffect(()=>{m({x:P==null?void 0:P.x,y:P==null?void 0:P.y})},[P,m]),lq(),Z.createElement(EU.Provider,{value:{hideCopyButton:a}},Z.createElement(Aee,{ref:x,className:e,fill:n,flat:r,oneLineLabels:s,hideTitleBar:!o,style:{display:S?"block":"none"}},o&&Z.createElement(kee,{onDrag:E=>{m(E),D==null||D(E)},onDragStart:E=>A==null?void 0:A(E),onDragEnd:E=>T==null?void 0:T(E),setFilter:v,toggle:E=>u(O=>E??!O),toggled:l,title:w,drag:M,filterEnabled:I,from:P}),S&&Z.createElement(MU.Provider,{value:t},Z.createElement(hN,{isRoot:!0,fill:n,flat:r,tree:_,toggled:l}))))});ma(Ks.SELECT,$q);ma(Ks.IMAGE,qJ);ma(Ks.NUMBER,kq);ma(Ks.COLOR,CJ);ma(Ks.STRING,eZ);ma(Ks.BOOLEAN,aZ);ma(Ks.INTERVAL,see);ma(Ks.VECTOR3D,RJ);ma(Ks.VECTOR2D,FJ);function nI(t){return typeof t=="string"?new ze(t).convertLinearToSRGB():t}function Uee(t){switch(t){case"alpha":return{min:0,max:1};case"scale":return{min:0};case"map":return{image:void 0};default:return{}}}function Nee({color:t,alpha:e,lighting:n,name:r,...i}={}){return[{color:t,alpha:e,lighting:n,name:r},i]}function mN(t){return t instanceof B||t instanceof ue||t instanceof bt||t instanceof Rt||t instanceof at}function rI(t){return mN(t)?t.toArray():t instanceof ze?"#"+t.clone().convertLinearToSRGB().getHexString():t instanceof Bn?t.image.src:t}const Fee={normal:"normal",add:"add",subtract:"subtract",multiply:"multiply",lighten:"lighten",darken:"darken",divide:"divide",overlay:"overlay",screen:"screen",softlight:"softlight",negation:"negation",reflect:"reflect"},gN={perlin:"perlin",simplex:"simplex",cell:"cell",curl:"curl",white:"white"},RE={local:"local",world:"world",uv:"uv"},zee={phong:XM,physical:jM,toon:KM,basic:Ys,lambert:qM,standard:Ey};class ga{constructor(e,n,r){this.uuid=dy.generateUUID().replace(/-/g,"_"),this.name="LayerMaterial",this.mode="normal",this.visible=!0;const s=Object.getOwnPropertyNames(e).filter(a=>a.startsWith("u_")).reduce((a,l)=>{var u;let d=(u=Object.getOwnPropertyDescriptor(e,l))==null?void 0:u.value;return(mN(d)||d instanceof ze)&&(d=d.clone()),{...a,[l.slice(1)]:d}},{});for(const a in s){const l=a.split("_")[1];(n==null?void 0:n[l])!==void 0&&(s[a]=n[l])}n&&Object.keys(n).map(a=>{n[a]!==void 0&&(this[a]=n[a])}),this.uniforms={},this.schema=[];const o={};Object.keys(s).map(a=>{const l=a.split("_")[1];this.uniforms[`u_${this.uuid}_${l}`]={value:nI(s[a])},this.schema.push({value:s[a],label:l}),o[l]={set:u=>{this.uniforms[`u_${this.uuid}_${l}`].value=nI(u)},get:()=>this.uniforms[`u_${this.uuid}_${l}`].value}}),n!=null&&n.name&&(this.name=n.name),n!=null&&n.mode&&(this.mode=n.mode),n!=null&&n.visible&&(this.visible=n.visible),Object.defineProperties(this,o),this.vertexShader="",this.fragmentShader="",this.vertexVariables="",this.fragmentVariables="",this.onParse=r,this.buildShaders(e),this.schema.push({value:this.mode,label:"mode",options:Object.values(Fee)}),this.schema.push({value:this.visible,label:"visible"})}buildShaders(e){var n;const r=Object.getOwnPropertyNames(e).filter(d=>d==="fragmentShader"||d==="vertexShader").reduce((d,h)=>{var p;return{...d,[h]:(p=Object.getOwnPropertyDescriptor(e,h))==null?void 0:p.value}},{}),i={vert:Vw(r.vertexShader||""),frag:Vw(r.fragmentShader||"")},s={vert:G3(i.vert,this.renameTokens.bind(this)),frag:G3(i.frag,this.renameTokens.bind(this))},o={vert:Gw(s.vert),frag:Gw(s.frag)},a={vert:o.vert.map(d=>d.name).indexOf("main"),frag:o.frag.map(d=>d.name).indexOf("main")},l={vert:a.vert>=0?Rh(s.vert.slice(0,o.vert[a.vert].outer[0])):"",frag:a.frag>=0?Rh(s.frag.slice(0,o.frag[a.frag].outer[0])):""},u={vert:a.vert>=0?this.getShaderFromIndex(s.vert,o.vert[a.vert].body):"",frag:a.frag>=0?this.getShaderFromIndex(s.frag,o.frag[a.frag].body):""};this.vertexShader=this.processFinal(u.vert,!0),this.fragmentShader=this.processFinal(u.frag),this.vertexVariables=l.vert,this.fragmentVariables=l.frag,(n=this.onParse)==null||n.call(this,this),this.schema=this.schema.filter((d,h)=>{const p=d.label;return h===this.schema.findIndex(g=>g.label===p)})}renameTokens(e){if(e.startsWith("u_")){const n=e.slice(2);return`u_${this.uuid}_${n}`}else if(e.startsWith("v_")){const n=e.slice(2);return`v_${this.uuid}_${n}`}else if(e.startsWith("f_")){const n=e.slice(2);return`f_${this.uuid}_${n}`}else return e}processFinal(e,n){const r=e.replace(/\sf_/gm,` f_${this.uuid}_`).replace(/\(f_/gm,`(f_${this.uuid}_`),i=r.match(/^.*return.*$/gm);let s=r.replace(/^.*return.*$/gm,"");if(i!=null&&i[0]){const o=i[0].replace("return","").trim().replace(";",""),a=this.getBlendMode(o,"lamina_finalColor");s+=n?`lamina_finalPosition = ${o};`:`lamina_finalColor = ${a};`}return s}getShaderFromIndex(e,n){return Rh(e.slice(n[0],n[1]))}getBlendMode(e,n){switch(this.mode){default:case"normal":return`lamina_blend_alpha(${n}, ${e}, ${e}.a)`;case"add":return`lamina_blend_add(${n}, ${e}, ${e}.a)`;case"subtract":return`lamina_blend_subtract(${n}, ${e}, ${e}.a)`;case"multiply":return`lamina_blend_multiply(${n}, ${e}, ${e}.a)`;case"lighten":return`lamina_blend_lighten(${n}, ${e}, ${e}.a)`;case"darken":return`lamina_blend_darken(${n}, ${e}, ${e}.a)`;case"divide":return`lamina_blend_divide(${n}, ${e}, ${e}.a)`;case"overlay":return`lamina_blend_overlay(${n}, ${e}, ${e}.a)`;case"screen":return`lamina_blend_screen(${n}, ${e}, ${e}.a)`;case"softlight":return`lamina_blend_softlight(${n}, ${e}, ${e}.a)`;case"reflect":return`lamina_blend_reflect(${n}, ${e}, ${e}.a)`;case"negation":return`lamina_blend_negation(${n}, ${e}, ${e}.a)`}}getSchema(){return this.schema.map(({label:n,options:r,...i})=>({label:n,options:r,...Uee(n),...i,value:rI(this[n])}))}serialize(){const e=this.constructor.name.split("$")[0];let n=Object.keys(this);n=n.filter(s=>!["uuid","uniforms","schema","fragmentShader","vertexShader","fragmentVariables","vertexVariables","attribs","events","__r3f","onParse"].includes(s));const r={};n.forEach(s=>{r[s]=this[s]});const i={};for(const s in this.uniforms){const o=s.replace(`u_${this.uuid}_`,"");i[o]=rI(this.uniforms[s].value)}return{constructor:e,properties:{...i,...r}}}}class ys extends ga{constructor(e){super(ys,{name:"Depth",...e},n=>{n.schema.push({value:n.mapping,label:"mapping",options:["vector","world","camera"]});const r=ys.getMapping(n.uuid,n.mapping);n.fragmentShader=n.fragmentShader.replace("lamina_mapping_template",r)}),this.mapping="vector"}static getMapping(e,n){switch(n){default:case"vector":return`length(v_${e}_worldPosition - u_${e}_origin)`;case"world":return`length(v_${e}_position - vec3(0.))`;case"camera":return`length(v_${e}_worldPosition - cameraPosition)`}}}ys.u_near=2;ys.u_far=10;ys.u_origin=new B(0,0,0);ys.u_colorA="white";ys.u_colorB="black";ys.u_alpha=1;ys.vertexShader=`
  varying vec3 v_worldPosition;
  varying vec3 v_position;

  void main() {
    v_worldPosition = (vec4(position, 1.0) * modelMatrix).xyz;
    v_position = position;
  }
  `;ys.fragmentShader=`   
    uniform float u_alpha;
    uniform float u_near;
    uniform float u_far;
    uniform float u_isVector;
    uniform vec3 u_origin;
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;

    varying vec3 v_worldPosition;
    varying vec3 v_position;

    void main() {
      float f_dist = lamina_mapping_template;
      float f_depth = (f_dist - u_near) / (u_far - u_near);
			vec3 f_depthColor =  mix(u_colorB, u_colorA, 1.0 - clamp(f_depth, 0., 1.));
  
  
      return vec4(f_depthColor, u_alpha);
    }
  `;class Qf extends ga{constructor(e){super(Qf,{name:"Color",...e})}}Qf.u_color="red";Qf.u_alpha=1;Qf.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;

    void main() {
      return vec4(u_color, u_alpha);
    }
  `;class bi extends ga{constructor(e){super(bi,{name:"noise",...e},n=>{n.schema.push({value:n.type,label:"type",options:Object.values(gN)}),n.schema.push({value:n.mapping,label:"mapping",options:Object.values(RE)});const r=bi.getNoiseFunction(n.type),i=bi.getMapping(n.mapping);n.vertexShader=n.vertexShader.replace("lamina_mapping_template",i),n.fragmentShader=n.fragmentShader.replace("lamina_noise_template",r)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}bi.u_colorA="#666666";bi.u_colorB="#666666";bi.u_colorC="#FFFFFF";bi.u_colorD="#FFFFFF";bi.u_alpha=1;bi.u_scale=1;bi.u_offset=new B(0,0,0);bi.vertexShader=`
    varying vec3 v_position;

    void main() {
        v_position = lamina_mapping_template;
    }
  `;bi.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_colorC;
    uniform vec3 u_colorD;
    uniform vec3 u_offset;

    uniform float u_alpha;
    uniform float u_scale;

    varying vec3 v_position;


    void main() {
        float f_n = lamina_noise_template((v_position + u_offset) * u_scale);

        float f_step1 = 0.;
        float f_step2 = 0.2;
        float f_step3 = 0.6;
        float f_step4 = 1.;

        vec3 f_color = mix(u_colorA, u_colorB, smoothstep(f_step1, f_step2, f_n));
        f_color = mix(f_color, u_colorC, smoothstep(f_step2, f_step3, f_n));
        f_color = mix(f_color, u_colorD, smoothstep(f_step3, f_step4, f_n));

        return vec4(f_color, u_alpha);
    }
  `;class Js extends ga{constructor(e){super(Js,{name:"Fresnel",...e})}}Js.u_color="white";Js.u_alpha=1;Js.u_bias=0;Js.u_intensity=1;Js.u_power=2;Js.u_factor=1;Js.vertexShader=`
    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        v_worldPosition = vec3(-viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2]);
        v_worldNormal = normalize( mat3( modelMatrix[0].xyz, modelMatrix[1].xyz, modelMatrix[2].xyz ) * normal );
        
    }
  `;Js.fragmentShader=`   
    uniform vec3 u_color;
    uniform float u_alpha;
    uniform float u_bias;
    uniform float u_intensity;
    uniform float u_power;
    uniform float u_factor;

    varying vec3 v_worldPosition;
    varying vec3 v_worldNormal;

    void main() {
        float f_a = (u_factor  + dot(v_worldPosition, v_worldNormal));
        float f_fresnel = u_bias + u_intensity * pow(abs(f_a), u_power);

        f_fresnel = clamp(f_fresnel, 0.0, 1.0);
        return vec4(f_fresnel * u_color, u_alpha);
    }
  `;class xs extends ga{constructor(e){super(xs,{name:"Gradient",...e},n=>{n.schema.push({value:n.axes,label:"axes",options:["x","y","z"]}),n.schema.push({value:n.mapping,label:"mapping",options:Object.values(RE)});const r=xs.getMapping(n.mapping);n.vertexShader=n.vertexShader.replace("lamina_mapping_template",r||"local"),n.fragmentShader=n.fragmentShader.replace("axes_template",n.axes||"x")}),this.axes="x",this.mapping="local"}static getMapping(e){switch(e){default:case"local":return"position";case"world":return"(modelMatrix * vec4(position,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}xs.u_colorA="white";xs.u_colorB="black";xs.u_alpha=1;xs.u_start=1;xs.u_end=-1;xs.u_contrast=1;xs.vertexShader=`
		varying vec3 v_position;

		vod main() {
      v_position = lamina_mapping_template;
		}
  `;xs.fragmentShader=`   
    uniform vec3 u_colorA;
    uniform vec3 u_colorB;
    uniform vec3 u_axis;
    uniform float u_alpha;
    uniform float u_start;
    uniform float u_end;
    uniform float u_contrast;

		varying vec3 v_position;

    void main() {

      float f_step = smoothstep(u_start, u_end, v_position.axes_template * u_contrast);
      vec3 f_color = mix(u_colorA, u_colorB, f_step);

      return vec4(f_color, u_alpha);
    }
  `;class ku extends ga{constructor(e){super(ku,{name:"Matcap",...e})}}ku.u_alpha=1;ku.u_map=void 0;ku.vertexShader=`
    varying vec3 v_position;
    varying vec3 v_normal;
    
    void main() {
      v_position = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );
      v_normal = normalize( normalMatrix * normal );
    }
    `;ku.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec3 v_position;
		varying vec3 v_normal;

		
    void main() {
			vec3 f_r = reflect( v_position, v_normal );
			float f_m = 2. * sqrt( pow( f_r.x, 2. ) + pow( f_r.y, 2. ) + pow( f_r.z + 1., 2. ) );
			vec2 f_vN = f_r.xy / f_m + .5;

			vec3 f_base = texture2D(u_map, f_vN).rgb;

      return vec4(f_base, u_alpha);
    }
  `;class Uu extends ga{constructor(e){super(Uu,{name:"Texture",...e})}}Uu.u_alpha=1;Uu.u_map=void 0;Uu.vertexShader=`
    varying vec2 v_uv;
    
    void main() {
        v_uv = uv;
    }
    `;Uu.fragmentShader=` 
		uniform sampler2D u_map;  
		uniform float u_alpha;  
		varying vec2 v_uv;

    void main() {
			vec4 f_color = texture2D(u_map, v_uv);
      return vec4(f_color.rgb, f_color.a * u_alpha);
    }
  `;class ta extends ga{constructor(e){super(ta,{name:"Displace",...e},n=>{n.schema.push({value:n.type,label:"type",options:Object.values(gN)}),n.schema.push({value:n.mapping,label:"mapping",options:Object.values(RE)});const r=ta.getNoiseFunction(n.type),i=ta.getMapping(n.mapping);n.vertexVariables=n.vertexVariables.replace("lamina_mapping_template",i),n.vertexVariables=n.vertexVariables.replace("lamina_noise_template",r)}),this.type="perlin",this.mapping="local"}static getNoiseFunction(e){switch(e){default:case"perlin":return"lamina_noise_perlin";case"simplex":return"lamina_noise_simplex";case"cell":return"lamina_noise_worley";case"white":return"lamina_noise_white";case"curl":return"lamina_noise_swirl"}}static getMapping(e){switch(e){default:case"local":return"p";case"world":return"(modelMatrix * vec4(p,1.0)).xyz";case"uv":return"vec3(uv, 0.)"}}}ta.u_strength=1;ta.u_scale=1;ta.u_offset=new B(0,0,0);ta.vertexShader=`
       
      uniform float u_strength;
      uniform float u_scale;
      uniform vec3 u_offset;

      vec3 displace(vec3 p) {
				vec3 f_position = lamina_mapping_template;
        float f_n = lamina_noise_template((f_position + u_offset) * u_scale) * u_strength;
        vec3 f_newPosition = p + (f_n * normal);

				return f_newPosition;
      }

      
			vec3 orthogonal(vec3 v) {
  		  return normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0)
  		  : vec3(0.0, -v.z, v.y));
  		}
  		vec3 recalcNormals(vec3 newPos) {
  		  float offset = 0.001;
  		  vec3 tangent = orthogonal(normal);
  		  vec3 bitangent = normalize(cross(normal, tangent));
  		  vec3 neighbour1 = position + tangent * offset;
  		  vec3 neighbour2 = position + bitangent * offset;
  		  vec3 displacedNeighbour1 = displace(neighbour1);
  		  vec3 displacedNeighbour2 = displace(neighbour2);
  		  vec3 displacedTangent = displacedNeighbour1 - newPos;
  		  vec3 displacedBitangent = displacedNeighbour2 - newPos;
  		  return normalize(cross(displacedTangent, displacedBitangent));
  		}
  
  
      void main() {
       
				vec3 f_newPosition = displace(position);
        lamina_finalNormal = recalcNormals(f_newPosition);

        return f_newPosition;
      }
    `;class Nu extends ga{constructor(e){super(Nu,{name:"Normal",...e})}}Nu.u_alpha=1;Nu.u_direction=new B(1,1,1);Nu.vertexShader=`   
  varying vec3 v_normals; 

  void main() {
    v_normals = normal;
  }
`;Nu.fragmentShader=`   
  	uniform float u_alpha;
  	uniform vec3 u_color;
  	uniform vec3 u_direction;

		varying vec3 v_normals;

    void main() {
			vec3 f_normalColor = vec3(1.);
      f_normalColor.x = v_normals.x * u_direction.x;
      f_normalColor.y = v_normals.y * u_direction.y;
      f_normalColor.z = v_normals.z * u_direction.z;

      return vec4(f_normalColor, u_alpha);
    }
  `;var Bee=`
vec4 lamina_blend_add(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz + y.xyz, 1.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec3 lamina_blend_alpha(const in vec3 x, const in vec3 y, const in float opacity) {

	return y * opacity + x * (1.0 - opacity);

}

vec4 lamina_blend_alpha(const in vec4 x, const in vec4 y, const in float opacity) {

	float a = min(y.a, opacity);

	return vec4(lamina_blend_alpha(x.rgb, y.rgb, a), x.a);

}
vec4 lamina_blend_average(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz) * 0.5 * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_burn(const in float x, const in float y) {

	return (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);

}

vec4 lamina_blend_color_burn(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_burn(x.r, y.r),
		lamina_blend_color_burn(x.g, y.g),
		lamina_blend_color_burn(x.b, y.b),
		lamina_blend_color_burn(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_color_dodge(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x / (1.0 - y), 1.0);

}

vec4 lamina_blend_color_dodge(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_color_dodge(x.r, y.r),
		lamina_blend_color_dodge(x.g, y.g),
		lamina_blend_color_dodge(x.b, y.b),
		lamina_blend_color_dodge(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_darken(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(min(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_difference(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(abs(x.xyz - y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_divide(const in float x, const in float y) {

	return (y > 0.0) ? min(x / y, 1.0) : 1.0;

}

vec4 lamina_blend_divide(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_divide(x.r, y.r),
		lamina_blend_divide(x.g, y.g),
		lamina_blend_divide(x.b, y.b),
		lamina_blend_divide(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_exclusion(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((x.xyz + y.xyz - 2.0 * x.xyz * y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_lighten(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz, y.xyz) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_multiply(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4( x.xyz * y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_negation(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - abs(1.0 - x.xyz - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_normal(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(y.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_overlay(const in float x, const in float y) {

	return (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));

}

vec4 lamina_blend_overlay(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_overlay(x.r, y.r),
		lamina_blend_overlay(x.g, y.g),
		lamina_blend_overlay(x.b, y.b),
		lamina_blend_overlay(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_reflect(const in float x, const in float y) {

	return (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);

}

vec4 lamina_blend_reflect(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_reflect(x.r, y.r),
		lamina_blend_reflect(x.g, y.g),
		lamina_blend_reflect(x.b, y.b),
		lamina_blend_reflect(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_screen(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4((1.0 - (1.0 - x.xyz) * (1.0 - y.xyz)) * opacity + x.xyz * (1.0 - opacity), x.a);

}
float lamina_blend_softlight(const in float x, const in float y) {

	return (y < 0.5) ?
		(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :
		(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));

}

vec4 lamina_blend_softlight(const in vec4 x, const in vec4 y, const in float opacity) {

	vec4 z = vec4(
		lamina_blend_softlight(x.r, y.r),
		lamina_blend_softlight(x.g, y.g),
		lamina_blend_softlight(x.b, y.b),
		lamina_blend_softlight(x.a, y.a)
	);

	return vec4(z.xyz * opacity + x.xyz * (1.0 - opacity), x.a);

}
vec4 lamina_blend_subtract(const in vec4 x, const in vec4 y, const in float opacity) {

	return vec4(max(x.xyz + y.xyz - 1.0, 0.0) * opacity + x.xyz * (1.0 - opacity), x.a);

}

`,iI=`

// From: https://gist.github.com/patriciogonzalezvivo/670c22f3966e662d2f83
// Huge thanks to the creators of these algorithms

float lamina_noise_mod289(float x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}
vec4 lamina_noise_perm(vec4 x){return lamina_noise_mod289(((x * 34.0) + 1.0) * x);}
vec4 lamina_noise_permute(vec4 x) { return mod(((x * 34.0) + 1.0) * x, 289.0); }
vec4 lamina_noise_taylorInvSqrt(vec4 r) { return 1.79284291400159 - 0.85373472095314 * r; }


float lamina_noise_white(vec2 p) {
  return fract(1e4 * sin(17.0 * p.x + p.y * 0.1) *
               (0.1 + abs(sin(p.y * 13.0 + p.x))));
}

float lamina_noise_white(vec3 p) {
  return lamina_noise_white(p.xy);
}


vec3 lamina_noise_fade(vec3 t) { return t * t * t * (t * (t * 6.0 - 15.0) + 10.0); }

float lamina_noise_perlin(vec3 P) {
  vec3 Pi0 = floor(P);        // Integer part for indexing
  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1
  Pi0 = mod(Pi0, 289.0);
  Pi1 = mod(Pi1, 289.0);
  vec3 Pf0 = fract(P);        // Fractional part for interpolation
  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
  vec4 iy = vec4(Pi0.yy, Pi1.yy);
  vec4 iz0 = Pi0.zzzz;
  vec4 iz1 = Pi1.zzzz;

  vec4 ixy = lamina_noise_permute(lamina_noise_permute(ix) + iy);
  vec4 ixy0 = lamina_noise_permute(ixy + iz0);
  vec4 ixy1 = lamina_noise_permute(ixy + iz1);

  vec4 gx0 = ixy0 / 7.0;
  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;
  gx0 = fract(gx0);
  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
  vec4 sz0 = step(gz0, vec4(0.0));
  gx0 -= sz0 * (step(0.0, gx0) - 0.5);
  gy0 -= sz0 * (step(0.0, gy0) - 0.5);

  vec4 gx1 = ixy1 / 7.0;
  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;
  gx1 = fract(gx1);
  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
  vec4 sz1 = step(gz1, vec4(0.0));
  gx1 -= sz1 * (step(0.0, gx1) - 0.5);
  gy1 -= sz1 * (step(0.0, gy1) - 0.5);

  vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
  vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
  vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
  vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
  vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
  vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
  vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
  vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);

  vec4 norm0 = lamina_noise_taylorInvSqrt(
      vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
  g000 *= norm0.x;
  g010 *= norm0.y;
  g100 *= norm0.z;
  g110 *= norm0.w;
  vec4 norm1 = lamina_noise_taylorInvSqrt(
      vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
  g001 *= norm1.x;
  g011 *= norm1.y;
  g101 *= norm1.z;
  g111 *= norm1.w;

  float n000 = dot(g000, Pf0);
  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
  float n111 = dot(g111, Pf1);

  vec3 fade_xyz = lamina_noise_fade(Pf0);
  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111),
                 fade_xyz.z);
  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
  return lamina_normalize(2.2 * n_xyz);
}

float lamina_noise_simplex(vec3 v) {
  const vec2 C = vec2(1.0 / 6.0, 1.0 / 3.0);
  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);

  // First corner
  vec3 i = floor(v + dot(v, C.yyy));
  vec3 x0 = v - i + dot(i, C.xxx);

  // Other corners
  vec3 g = step(x0.yzx, x0.xyz);
  vec3 l = 1.0 - g;
  vec3 i1 = min(g.xyz, l.zxy);
  vec3 i2 = max(g.xyz, l.zxy);

  //  x0 = x0 - 0. + 0.0 * C
  vec3 x1 = x0 - i1 + 1.0 * C.xxx;
  vec3 x2 = x0 - i2 + 2.0 * C.xxx;
  vec3 x3 = x0 - 1. + 3.0 * C.xxx;

  // Permutations
  i = mod(i, 289.0);
  vec4 p = lamina_noise_permute(lamina_noise_permute(lamina_noise_permute(i.z + vec4(0.0, i1.z, i2.z, 1.0)) + i.y +
                             vec4(0.0, i1.y, i2.y, 1.0)) +
                    i.x + vec4(0.0, i1.x, i2.x, 1.0));

  // Gradients
  // ( N*N points uniformly over a square, mapped onto an octahedron.)
  float n_ = 1.0 / 7.0; // N=7
  vec3 ns = n_ * D.wyz - D.xzx;

  vec4 j = p - 49.0 * floor(p * ns.z * ns.z); //  mod(p,N*N)

  vec4 x_ = floor(j * ns.z);
  vec4 y_ = floor(j - 7.0 * x_); // mod(j,N)

  vec4 x = x_ * ns.x + ns.yyyy;
  vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1.0 - abs(x) - abs(y);

  vec4 b0 = vec4(x.xy, y.xy);
  vec4 b1 = vec4(x.zw, y.zw);

  vec4 s0 = floor(b0) * 2.0 + 1.0;
  vec4 s1 = floor(b1) * 2.0 + 1.0;
  vec4 sh = -step(h, vec4(0.0));

  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy;
  vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;

  vec3 p0 = vec3(a0.xy, h.x);
  vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z);
  vec3 p3 = vec3(a1.zw, h.w);

  // Normalise gradients
  vec4 norm =
      lamina_noise_taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));
  p0 *= norm.x;
  p1 *= norm.y;
  p2 *= norm.z;
  p3 *= norm.w;

  // Mix final noise value
  vec4 m =
      max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);
  m = m * m;
  return lamina_normalize(42.0 *
         dot(m * m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3))));
}

vec3 lamina_noise_simplex3(vec3 x) {
  float s = lamina_noise_simplex(vec3(x));
  float s1 = lamina_noise_simplex(vec3(x.y - 19.1, x.z + 33.4, x.x + 47.2));
  float s2 = lamina_noise_simplex(vec3(x.z + 74.2, x.x - 124.5, x.y + 99.4));
  vec3 c = vec3(s, s1, s2);
  return c;
}

vec3 lamina_noise_curl(vec3 p) {
  const float e = .1;
  vec3 dx = vec3(e, 0.0, 0.0);
  vec3 dy = vec3(0.0, e, 0.0);
  vec3 dz = vec3(0.0, 0.0, e);

  vec3 p_x0 = lamina_noise_simplex3(p - dx);
  vec3 p_x1 = lamina_noise_simplex3(p + dx);
  vec3 p_y0 = lamina_noise_simplex3(p - dy);
  vec3 p_y1 = lamina_noise_simplex3(p + dy);
  vec3 p_z0 = lamina_noise_simplex3(p - dz);
  vec3 p_z1 = lamina_noise_simplex3(p + dz);

  float x = p_y1.z - p_y0.z - p_z1.y + p_z0.y;
  float y = p_z1.x - p_z0.x - p_x1.z + p_x0.z;
  float z = p_x1.y - p_x0.y - p_y1.x + p_y0.x;

  const float divisor = 1.0 / (2.0 * e);
  return normalize(vec3(x, y, z) * divisor);
}

vec3 lamina_permute(vec3 x) {
  return mod((34.0 * x + 1.0) * x, 289.0);
}

vec3 lamina_dist(vec3 x, vec3 y, vec3 z,  bool manhattanDistance) {
  return manhattanDistance ?  abs(x) + abs(y) + abs(z) :  (x * x + y * y + z * z);
}

// From: https://github.com/Erkaman/glsl-worley
float lamina_noise_worley(vec3 P) {
  float jitter = 1.;
  bool manhattanDistance = false; 

  float K = 0.142857142857; // 1/7
  float Ko = 0.428571428571; // 1/2-K/2
  float  K2 = 0.020408163265306; // 1/(7*7)
  float Kz = 0.166666666667; // 1/6
  float Kzo = 0.416666666667; // 1/2-1/6*2

	vec3 Pi = mod(floor(P), 289.0);
 	vec3 Pf = fract(P) - 0.5;

	vec3 Pfx = Pf.x + vec3(1.0, 0.0, -1.0);
	vec3 Pfy = Pf.y + vec3(1.0, 0.0, -1.0);
	vec3 Pfz = Pf.z + vec3(1.0, 0.0, -1.0);

	vec3 p = lamina_permute(Pi.x + vec3(-1.0, 0.0, 1.0));
	vec3 p1 = lamina_permute(p + Pi.y - 1.0);
	vec3 p2 = lamina_permute(p + Pi.y);
	vec3 p3 = lamina_permute(p + Pi.y + 1.0);

	vec3 p11 = lamina_permute(p1 + Pi.z - 1.0);
	vec3 p12 = lamina_permute(p1 + Pi.z);
	vec3 p13 = lamina_permute(p1 + Pi.z + 1.0);

	vec3 p21 = lamina_permute(p2 + Pi.z - 1.0);
	vec3 p22 = lamina_permute(p2 + Pi.z);
	vec3 p23 = lamina_permute(p2 + Pi.z + 1.0);

	vec3 p31 = lamina_permute(p3 + Pi.z - 1.0);
	vec3 p32 = lamina_permute(p3 + Pi.z);
	vec3 p33 = lamina_permute(p3 + Pi.z + 1.0);

	vec3 ox11 = fract(p11*K) - Ko;
	vec3 oy11 = mod(floor(p11*K), 7.0)*K - Ko;
	vec3 oz11 = floor(p11*K2)*Kz - Kzo; // p11 < 289 guaranteed

	vec3 ox12 = fract(p12*K) - Ko;
	vec3 oy12 = mod(floor(p12*K), 7.0)*K - Ko;
	vec3 oz12 = floor(p12*K2)*Kz - Kzo;

	vec3 ox13 = fract(p13*K) - Ko;
	vec3 oy13 = mod(floor(p13*K), 7.0)*K - Ko;
	vec3 oz13 = floor(p13*K2)*Kz - Kzo;

	vec3 ox21 = fract(p21*K) - Ko;
	vec3 oy21 = mod(floor(p21*K), 7.0)*K - Ko;
	vec3 oz21 = floor(p21*K2)*Kz - Kzo;

	vec3 ox22 = fract(p22*K) - Ko;
	vec3 oy22 = mod(floor(p22*K), 7.0)*K - Ko;
	vec3 oz22 = floor(p22*K2)*Kz - Kzo;

	vec3 ox23 = fract(p23*K) - Ko;
	vec3 oy23 = mod(floor(p23*K), 7.0)*K - Ko;
	vec3 oz23 = floor(p23*K2)*Kz - Kzo;

	vec3 ox31 = fract(p31*K) - Ko;
	vec3 oy31 = mod(floor(p31*K), 7.0)*K - Ko;
	vec3 oz31 = floor(p31*K2)*Kz - Kzo;

	vec3 ox32 = fract(p32*K) - Ko;
	vec3 oy32 = mod(floor(p32*K), 7.0)*K - Ko;
	vec3 oz32 = floor(p32*K2)*Kz - Kzo;

	vec3 ox33 = fract(p33*K) - Ko;
	vec3 oy33 = mod(floor(p33*K), 7.0)*K - Ko;
	vec3 oz33 = floor(p33*K2)*Kz - Kzo;

	vec3 dx11 = Pfx + jitter*ox11;
	vec3 dy11 = Pfy.x + jitter*oy11;
	vec3 dz11 = Pfz.x + jitter*oz11;

	vec3 dx12 = Pfx + jitter*ox12;
	vec3 dy12 = Pfy.x + jitter*oy12;
	vec3 dz12 = Pfz.y + jitter*oz12;

	vec3 dx13 = Pfx + jitter*ox13;
	vec3 dy13 = Pfy.x + jitter*oy13;
	vec3 dz13 = Pfz.z + jitter*oz13;

	vec3 dx21 = Pfx + jitter*ox21;
	vec3 dy21 = Pfy.y + jitter*oy21;
	vec3 dz21 = Pfz.x + jitter*oz21;

	vec3 dx22 = Pfx + jitter*ox22;
	vec3 dy22 = Pfy.y + jitter*oy22;
	vec3 dz22 = Pfz.y + jitter*oz22;

	vec3 dx23 = Pfx + jitter*ox23;
	vec3 dy23 = Pfy.y + jitter*oy23;
	vec3 dz23 = Pfz.z + jitter*oz23;

	vec3 dx31 = Pfx + jitter*ox31;
	vec3 dy31 = Pfy.z + jitter*oy31;
	vec3 dz31 = Pfz.x + jitter*oz31;

	vec3 dx32 = Pfx + jitter*ox32;
	vec3 dy32 = Pfy.z + jitter*oy32;
	vec3 dz32 = Pfz.y + jitter*oz32;

	vec3 dx33 = Pfx + jitter*ox33;
	vec3 dy33 = Pfy.z + jitter*oy33;
	vec3 dz33 = Pfz.z + jitter*oz33;

	vec3 d11 = lamina_dist(dx11, dy11, dz11, manhattanDistance);
	vec3 d12 = lamina_dist(dx12, dy12, dz12, manhattanDistance);
	vec3 d13 = lamina_dist(dx13, dy13, dz13, manhattanDistance);
	vec3 d21 = lamina_dist(dx21, dy21, dz21, manhattanDistance);
	vec3 d22 = lamina_dist(dx22, dy22, dz22, manhattanDistance);
	vec3 d23 = lamina_dist(dx23, dy23, dz23, manhattanDistance);
	vec3 d31 = lamina_dist(dx31, dy31, dz31, manhattanDistance);
	vec3 d32 = lamina_dist(dx32, dy32, dz32, manhattanDistance);
	vec3 d33 = lamina_dist(dx33, dy33, dz33, manhattanDistance);

	vec3 d1a = min(d11, d12);
	d12 = max(d11, d12);
	d11 = min(d1a, d13); // Smallest now not in d12 or d13
	d13 = max(d1a, d13);
	d12 = min(d12, d13); // 2nd smallest now not in d13
	vec3 d2a = min(d21, d22);
	d22 = max(d21, d22);
	d21 = min(d2a, d23); // Smallest now not in d22 or d23
	d23 = max(d2a, d23);
	d22 = min(d22, d23); // 2nd smallest now not in d23
	vec3 d3a = min(d31, d32);
	d32 = max(d31, d32);
	d31 = min(d3a, d33); // Smallest now not in d32 or d33
	d33 = max(d3a, d33);
	d32 = min(d32, d33); // 2nd smallest now not in d33
	vec3 da = min(d11, d21);
	d21 = max(d11, d21);
	d11 = min(da, d31); // Smallest now in d11
	d31 = max(da, d31); // 2nd smallest now not in d31
	d11.xy = (d11.x < d11.y) ? d11.xy : d11.yx;
	d11.xz = (d11.x < d11.z) ? d11.xz : d11.zx; // d11.x now smallest
	d12 = min(d12, d21); // 2nd smallest now not in d21
	d12 = min(d12, d22); // nor in d22
	d12 = min(d12, d31); // nor in d31
	d12 = min(d12, d32); // nor in d32
	d11.yz = min(d11.yz,d12.xy); // nor in d12.yz
	d11.y = min(d11.y,d12.z); // Only two more to go
	d11.y = min(d11.y,d11.z); // Done! (Phew!)

  vec2 F = sqrt(d11.xy);
	return F.x; // F1, F2

}

float lamina_noise_swirl(vec3 position) {
    float scale = 0.1;
    float freq = 4. * scale;
    float t = 1.;

    vec3 pos = (position * scale) + lamina_noise_curl(position * 7. * scale);

    float worley1 = 1. - lamina_noise_worley((pos * (freq * 2.)) +  (t * 2.));
    float worley2 = 1. - lamina_noise_worley((pos * (freq * 4.)) +  (t * 4.));
    float worley3 = 1. - lamina_noise_worley((pos * (freq * 8.)) +  (t * 8.));
    float worley4 = 1. - lamina_noise_worley((pos * (freq * 16.)) +  (t * 16.));
    
    float fbm1 = worley1 * .625 + worley2 * .25 + worley3 * .125;
    float fbm2 = worley2 * .625 + worley3 * .25 + worley4 * .125;
    float fbm3 = worley3 * .75 + worley4 * .25;

    vec3 curlWorleyFbm = vec3(fbm1, fbm2, fbm3);
    float curlWorley = curlWorleyFbm.r * .625 + curlWorleyFbm.g * .25 + 
        curlWorleyFbm.b * .125;

    return curlWorley;
}
  
  
`,sI=`

float lamina_map(float value, float min1, float max1, float min2, float max2) {
  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
}

float lamina_normalize(float v) { return lamina_map(v, -1.0, 1.0, 0.0, 1.0); }
`;class vN extends iK{constructor({color:e,alpha:n,lighting:r,layers:i,name:s,...o}={}){super({baseMaterial:zee[r||"basic"],...o}),this.name="LayerMaterial",this.layers=[],this.lighting="basic";const a=e||"white",l=n??1;this.uniforms={u_lamina_color:{value:typeof a=="string"?new ze(a).convertSRGBToLinear():a},u_lamina_alpha:{value:l}},this.layers=i||this.layers,this.lighting=r||this.lighting,this.name=s||this.name,this.refresh()}genShaders(){let e="",n="",r="",i="",s={};return this.layers.filter(o=>o.visible).forEach(o=>{e+=o.vertexVariables+`
`,n+=o.fragmentVariables+`
`,r+=o.vertexShader+`
`,i+=o.fragmentShader+`
`,s={...s,...o.uniforms}}),s={...s,...this.uniforms},{uniforms:s,vertexShader:`
        ${sI}
        ${iI}
        ${e}

        void main() {
          vec3 lamina_finalPosition = position;
          vec3 lamina_finalNormal = normal;

          ${r}

          csm_Position = lamina_finalPosition;
          csm_Normal = lamina_finalNormal;
        }
        `,fragmentShader:`
        ${sI}
        ${iI}
        ${Bee}
        ${n}

        uniform vec3 u_lamina_color;
        uniform float u_lamina_alpha;

        void main() {
          vec4 lamina_finalColor = vec4(u_lamina_color, u_lamina_alpha);

          ${i}

          csm_DiffuseColor = lamina_finalColor;
         
        }
        `}}refresh(){const{uniforms:e,fragmentShader:n,vertexShader:r}=this.genShaders();super.update({fragmentShader:n,vertexShader:r,uniforms:e})}serialize(){return{constructor:"LayerMaterial",properties:{color:this.color,alpha:this.alpha,name:this.name,lighting:this.lighting}}}set color(e){var n,r;(n=this.uniforms)!=null&&(r=n.u_lamina_color)!=null&&r.value&&(this.uniforms.u_lamina_color.value=typeof e=="string"?new ze(e).convertSRGBToLinear():e)}get color(){var e,n;return(e=this.uniforms)==null||(n=e.u_lamina_color)==null?void 0:n.value}set alpha(e){this.uniforms.u_lamina_alpha.value=e}get alpha(){return this.uniforms.u_lamina_alpha.value}}Yp({LayerMaterial:vN});Yp({LayerMaterial:vN,Depth_:ys,Color_:Qf,Noise_:bi,Fresnel_:Js,Gradient_:xs,Matcap_:ku,Texture_:Uu,Displace_:ta,Normal_:Nu});const yN=Z.forwardRef(({children:t,...e},n)=>{const r=Z.useRef(null);R.useImperativeHandle(n,()=>r.current),Z.useLayoutEffect(()=>{r.current.layers=r.current.__r3f.objects,r.current.refresh()},[t]);const[i,s]=R.useMemo(()=>Nee(e),[e]);return Z.createElement("layerMaterial",Oe({args:[i],ref:r},s),t)});function IE(t){return[{mode:t==null?void 0:t.mode,visible:t==null?void 0:t.visible,type:t==null?void 0:t.type,mapping:t==null?void 0:t.mapping,map:t==null?void 0:t.map,axes:t==null?void 0:t.axes}]}const Hee=Z.forwardRef((t,e)=>Z.createElement("color_",Oe({ref:e,args:IE(t)},t))),Vee=Z.forwardRef((t,e)=>Z.createElement("fresnel_",Oe({ref:e,args:IE(t)},t))),xN=Z.forwardRef((t,e)=>Z.createElement("texture_",Oe({ref:e,args:IE(t)},t))),Gee=({diameter:t,base:e})=>{const n=bu(Pf,e);let r=0;return ml(()=>r+=100),Ie.jsx(Bk,{position:[0,0,0],args:[t/2,64,64],name:"sun",children:Ie.jsx(yN,{lighting:"physical",emissiveMap:n,emissive:"white",emissiveIntensity:10,toneMapped:!1,children:Ie.jsx(xN,{map:n})})})},X_={oort_cloud:{diameter:18921460945160,radius:9460730472580},parent:{id:"0",name:"Sun",diameter:1391016,mass:1988500,gravity:274,density:1408,rotationPeriod:609.12,distanceFromParent:null,orbitalPeriod:null,orbitalVelocity:null,orbitalInclination:null,axialTilt:null,meanTemperature:"5778 K",solarConstant:1.365,composition:{majorElements:[{abbr:"H",element:"Hydrogen",percentageOfComposition:90.965},{abbr:"He",element:"Helium",percentageOfComposition:8.889}]},_3d:{textures:{base:"src/assets/textures/sun.jpg"}}},planets:[{id:1,name:"Mercury",diameter:4879,mass:.33,gravity:3.7,density:5427,rotationPeriod:1407.6,lengthOfDay:4222.6,distanceFromParent:579e5,orbitalPeriod:88,orbitalVelocity:47.4,orbitalInclination:7,axialTilt:.01,orbitPositionOffset:48,meanTemperature:167,surfaceTemps:{min:100,mean:340,max:700},rings:!1,satellites:[],_3d:{textures:{base:"src/assets/textures/mercury.jpg",topo:"/src/assets/textures/mercury_topo.jpg"}}},{id:2,name:"Venus",diameter:12104,mass:4.87,gravity:8.9,density:5243,rotationPeriod:-5832.5,lengthOfDay:2802,distanceFromParent:1082e5,orbitalPeriod:224.7,orbitalVelocity:35,orbitalInclination:3.4,axialTilt:177.4,orbitPositionOffset:155,meanTemperature:464,surfaceTemps:{min:655,mean:735,max:1100},rings:!1,satellites:[],_3d:{textures:{base:"/src/assets/textures/venus.jpg",topo:"/src/assets/textures/venus_topo.jpg"}}},{id:3,name:"Earth",diameter:12756,mass:5.97,gravity:9.8,density:5514,rotationPeriod:23.9,lengthOfDay:24,distanceFromParent:1496e5,orbitalPeriod:365.2,orbitalVelocity:29.8,orbitalInclination:0,axialTilt:23.4,orbitPositionOffset:0,meanTemperature:15,surfaceTemps:{min:185,mean:288,max:331},rings:!1,satellites:[{id:"3a",name:"Moon",diameter:3476.2,mass:.07342,distanceFromParent:384400,orbitalPeriod:27.3,orbitalInclination:21,gravity:1.62,surfaceTemps:{min:-110,max:130},_3d:{textures:{base:"src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}}],satellites_mech:[{ISS:{distanceFromParent:400}}],_3d:{textures:{base:"/src/assets/textures/earth.jpg",topo:"/src/assets/textures/earth_topo_4k.jpg",specular:"/src/assets/textures/earth_ocean_reflectance_10k.jpg",clouds:"/src/assets/textures/earth_clouds_active2.png"}}},{id:4,name:"Mars",diameter:6792,mass:.642,gravity:3.7,density:3933,rotationPeriod:24.6,lengthOfDay:24.7,distanceFromParent:2279e5,orbitalPeriod:687,orbitalVelocity:24.1,orbitalInclination:1.85,axialTilt:25.2,orbitPositionOffset:85,meanTemperature:-65,surfaceTemps:{min:130,mean:210,max:293},rings:!1,satellites:[{id:"4a",name:"Phobos",diameter:22,mass:"1.0659 * 10^16",distanceFromParent:5989,orbitalPeriod:.31875,orbitalInclination:1.093,gravity:.0057,surfaceTemps:{min:-40.15,max:-40.15,mean:-40.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"4b",name:"Deimos",diameter:12.4,mass:"1.4762 * 10^15",distanceFromParent:23455,orbitalPeriod:1.25,orbitalInclination:.93,gravity:.003,surfaceTemps:{min:-40.15,max:-40.15,mean:-40.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}}],_3d:{textures:{base:"src/assets/textures/mars.jpg",topo:"/src/assets/textures/mars_topo.jpg"}}},{id:5,name:"Jupiter",diameter:142984,mass:1898,gravity:23.1,density:1326,rotationPeriod:9.9,lengthOfDay:9.9,distanceFromParent:7786e5,orbitalPeriod:4331,orbitalVelocity:13.1,orbitalInclination:1.303,axialTilt:3.13,orbitPositionOffset:2692,meanTemperature:-110,surfaceTemps:{min:null,mean:125,max:null},rings:{innerRadius:110500,outerRadius:129e3,textures:{base:"src/assets/textures/jupiter_ring_color.png",alpha:"src/assets/textures/jupiter_ring_alpha.png"}},satellites:[{id:"5a",name:"Europa",diameter:3121.6,mass:"4.799844 * 10^22",distanceFromParent:670900,orbitalPeriod:3.55,orbitalInclination:.47,gravity:1.314,surfaceTemps:{min:-214.15,max:-148.15,mean:-171.15},_3d:{textures:{base:"/src/assets/textures/jupiter/satellites/europa.jpg",topo:null}}},{id:"5b",name:"Io",distanceFromParent:421700,orbitalPeriod:1.769,orbitalInclination:.05,diameter:3643.2,mass:"8.931938 * 10^22",gravity:1.796,surfaceTemps:{min:-183.15,max:-143.15,mean:-163.15},_3d:{textures:{base:"/src/assets/textures/jupiter/satellites/io.jpg",topo:null}}},{id:"5c",name:"Ganymede",distanceFromParent:1070400,orbitalPeriod:7.155,orbitalInclination:.204,diameter:5268.2,mass:"1.4819 * 10^23",gravity:1.428,surfaceTemps:{min:-203.15,max:-121.15,mean:-163.15},_3d:{textures:{base:"/src/assets/textures/jupiter/satellites/ganymede.jpg",topo:null}}},{id:"5d",name:"Callisto",distanceFromParent:1882700,orbitalPeriod:16.689,orbitalInclination:.205,diameter:4820.6,mass:"1.075938 * 10^23",gravity:1.235,surfaceTemps:{min:80,max:134,mean:165},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5e",name:"Amalthea",distanceFromParent:181366,orbitalPeriod:.498,orbitalInclination:.374,diameter:187,mass:"2.08 * 10^15",gravity:.02,surfaceTemps:{min:-195,max:-108.15,mean:-153.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5f",name:"Adrastea",distanceFromParent:128690,orbitalPeriod:.29826,orbitalInclination:.03,diameter:20,mass:"0.2 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5g",name:"Lysithea",distanceFromParent:11740560,orbitalPeriod:259.89,orbitalInclination:28.3,diameter:36,mass:"6.3 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5h",name:"Leda",distanceFromParent:11187781,orbitalPeriod:240.82,orbitalInclination:29.01,diameter:16,mass:"0.6 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5i",name:"Anake",distanceFromParent:21454952,orbitalPeriod:"-640.38",orbitalInclination:149.9,diameter:28,mass:"3.0 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5j",name:"Carme",distanceFromParent:23197992,orbitalPeriod:"763.95",orbitalInclination:167.53,diameter:46,mass:"13 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5k",name:"Pasiphae",distanceFromParent:23609042,orbitalPeriod:"739.8",orbitalInclination:143.04,diameter:60,mass:"30 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5l",name:"Elara",distanceFromParent:11778034,orbitalPeriod:257.62,orbitalInclination:30.66,diameter:86,mass:"87 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5m",name:"Themisto",distanceFromParent:7393216,orbitalPeriod:129.87,orbitalInclination:47.48,diameter:8,mass:"0.069 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5n",name:"Himalia",distanceFromParent:11451971,orbitalPeriod:250.23,orbitalInclination:29.59,diameter:170,mass:"670 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5o",name:"Metis",distanceFromParent:127690,orbitalPeriod:.24,orbitalInclination:.06,diameter:60,mass:"3.6 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5p",name:"Thebe",distanceFromParent:221889,orbitalPeriod:.6745,orbitalInclination:1.076,diameter:58,mass:"43 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5q",name:"Dia",distanceFromParent:12570424,orbitalPeriod:274,orbitalInclination:28.2,diameter:4,mass:"0.009 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5r",name:"Carpo",distanceFromParent:17144873,orbitalPeriod:458.62,orbitalInclination:55,diameter:3,mass:"0.0045 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5s",name:"Euporie",diameter:2,distanceFromParent:19088434,orbitalPeriod:"538.78",orbitalInclination:144.694,mass:"0.0045 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5t",name:"Thelxinoe",diameter:2,distanceFromParent:20453753,orbitalPeriod:"597.607",orbitalInclination:153,mass:"0.0015 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5u",name:"Euanthe",diameter:3,distanceFromParent:20464854,orbitalPeriod:"598.093",orbitalInclination:142,mass:"0.0045 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5v",name:"Helike",diameter:4,distanceFromParent:20540266,orbitalPeriod:"601.402",orbitalInclination:156,mass:"0.0090 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5w",name:"Praxidike",diameter:7,distanceFromParent:20823948,orbitalPeriod:"613.904",orbitalInclination:143,mass:"0.043 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5x",name:"Sinope",diameter:38,distanceFromParent:24057865,orbitalPeriod:"724.1",orbitalInclination:153.12,mass:"7.5 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5y",name:"Pasithee",diameter:2,distanceFromParent:23307318,orbitalPeriod:"726.93",orbitalInclination:164,mass:"0.0015 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5z",name:"Thyone",diameter:4,distanceFromParent:21406e3,orbitalPeriod:"-639.803",orbitalInclination:147,mass:"0.0015 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5aa",name:"Aitne",diameter:3,distanceFromParent:22285e3,orbitalPeriod:"-679.641",orbitalInclination:164,mass:"0.0015 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5bb",name:"Chaldene",diameter:3.8,distanceFromParent:22713e3,orbitalPeriod:"-699.327",orbitalInclination:169,mass:"0.0015 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5cc",name:"Megaclite",diameter:5.4,distanceFromParent:24687e3,orbitalPeriod:"-792.437",orbitalInclination:150,mass:"0.0015 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"5dd",name:"Megaclite",diameter:5.4,distanceFromParent:21064e3,orbitalPeriod:"-624.542",orbitalInclination:148,mass:"0.0015 * 10^16",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}}],_3d:{textures:{base:"src/assets/textures/jupiter.jpg"}}},{id:6,name:"Saturn",diameter:120536,mass:568,density:687,gravity:9,rotationPeriod:10.7,lengthOfDay:10.7,distanceFromParent:14335e5,orbitalPeriod:10747,orbitalVelocity:9.7,orbitalInclination:2.48524,axialTilt:26.73,orbitPositionOffset:13753,meanTemperature:-140,surfaceTemps:{min:null,mean:95,max:null},rings:{innerRadius:74510,outerRadius:140220,textures:{base:"src/assets/textures/saturn_ring_color.png",alpha:"src/assets/textures/saturn_ring_alpha.png"}},satellites:[{id:"6a",name:"Pan",distanceFromParent:133584,orbitalPeriod:.575,orbitalInclination:.001,diameter:86.2,mass:"159.5 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6b",name:"Prometheus",distanceFromParent:139380,orbitalPeriod:.613,orbitalInclination:.008,diameter:28.2,mass:"4.95 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6c",name:"Pandora",distanceFromParent:141720,orbitalPeriod:.6285,orbitalInclination:.05,diameter:81.4,mass:"137.1 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6d",name:"Epimetheus",distanceFromParent:151422,orbitalPeriod:.694,orbitalInclination:.351,diameter:116.2,mass:"526.6 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6e",name:"Janus",distanceFromParent:151472,orbitalPeriod:.695,orbitalInclination:.165,diameter:179,mass:"1897.5 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6f",name:"Aegaeon",distanceFromParent:167500,orbitalPeriod:.80812,orbitalInclination:.001,diameter:1,mass:"0.0001 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6g",name:"Tethys",distanceFromParent:294619,orbitalPeriod:1.8878,orbitalInclination:1.12,diameter:1062,mass:"617449 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/saturn/satellites/tethys.jpg",topo:null}}},{id:"6h",name:"Hyperion",distanceFromParent:1481010,orbitalPeriod:21.276,orbitalInclination:.43,diameter:270,mass:"5620 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6i",name:"Titan",distanceFromParent:1221870,orbitalPeriod:15.945,orbitalInclination:.34854,diameter:5151,mass:"1.3452 * 10^23",gravity:1.352,surfaceTemps:{min:-179.45,max:-179.45,mean:-179.45},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6j",name:"Enceladus",distanceFromParent:237948,orbitalPeriod:1.37,orbitalInclination:.019,diameter:504.2,mass:"1.08022 * 10^20",gravity:.113,surfaceTemps:{min:-240,max:-128,mean:-198},_3d:{textures:{base:"/src/assets/textures/saturn/satellites/enceladus.jpg",topo:null}}},{id:"6k",name:"Dione",distanceFromParent:377396,orbitalPeriod:2.737,orbitalInclination:.02,diameter:1122.8,mass:"1.095452 * 10^21",gravity:.232,surfaceTemps:{min:-186,max:-186,mean:-186},_3d:{textures:{base:"/src/assets/textures/saturn/satellites/dione.jpg",topo:null}}},{id:"6l",name:"Rhea",distanceFromParent:527108,orbitalPeriod:4.518,orbitalInclination:.345,diameter:1527.6,mass:"2.306518 * 10^21",gravity:.264,surfaceTemps:{min:-220.15,max:-174.15,mean:-197.15},_3d:{textures:{base:"/src/assets/textures/saturn/satellites/rhea.jpg",topo:null}}},{id:"6m",name:"Mimas",distanceFromParent:185539,orbitalPeriod:.942,orbitalInclination:1.574,diameter:396.4,mass:"3.7493 * 10^19",gravity:.064,surfaceTemps:{min:-209.15,max:-209.15,mean:-209.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6n",name:"Iapetus",distanceFromParent:3560820,orbitalPeriod:79.32,orbitalInclination:15.47,diameter:1469,mass:"1.805635 * 10^21",gravity:.223,surfaceTemps:{min:-183.15,max:-143.15,mean:-163.15},_3d:{textures:{base:"/src/assets/textures/saturn/satellites/iapetus.jpg",topo:null}}},{id:"6o",name:"Daphnis",diameter:7.6,distanceFromParent:136505,orbitalPeriod:.59408,orbitalInclination:.0036,mass:"0.084 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6p",name:"Atlas",diameter:30.2,distanceFromParent:137670,orbitalPeriod:.60169,orbitalInclination:.003,mass:"6.6 * 10^15",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6q",name:"Methone",diameter:3.2,mass:"0.02 * 10^15",distanceFromParent:194440,orbitalPeriod:1.00957,orbitalInclination:.007,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6r",name:"Anthe",diameter:1,mass:"0.007 * 10^15",distanceFromParent:197700,orbitalPeriod:1.0365,orbitalInclination:.1,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6s",name:"Pallene",diameter:6,mass:"0.05 * 10^15",distanceFromParent:212280,orbitalPeriod:1.15375,orbitalInclination:.181,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6t",name:"Telesto",diameter:24.8,mass:"9.41 * 10^15",distanceFromParent:294619,orbitalPeriod:1.887802,orbitalInclination:1.19,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6u",name:"Calypso",diameter:21.4,mass:"6.3 * 10^15",distanceFromParent:294619,orbitalPeriod:1.887802,orbitalInclination:1.56,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6v",name:"Helene",diameter:35.2,mass:"24.46 * 10^15",distanceFromParent:377396,orbitalPeriod:2.736915,orbitalInclination:.199,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6w",name:"Kiviuq",diameter:16,mass:"2.79 * 10^15",distanceFromParent:11294800,orbitalPeriod:448.16,orbitalInclination:49.087,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6x",name:"Ijiraq",diameter:12,mass:"1.18 * 10^15",distanceFromParent:11355316,orbitalPeriod:451.77,orbitalInclination:50.212,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6y",name:"Albiorix",diameter:32,mass:"22.3 * 10^15",distanceFromParent:16266700,orbitalPeriod:774.58,orbitalInclination:38.042,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6z",name:"Siarnaq",diameter:40,mass:"43.5 * 10^15",distanceFromParent:17776600,orbitalPeriod:884.88,orbitalInclination:45.798,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"6aa",name:"Tarvos",diameter:15,mass:"2.3 * 10^15",distanceFromParent:18562800,orbitalPeriod:944.23,orbitalInclination:34.679,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}}],_3d:{textures:{base:"src/assets/textures/saturn.jpg"}}},{id:7,name:"Uranus",mass:86.8,diameter:51118,density:1271,gravity:8.7,rotationPeriod:-17.2,lengthOfDay:17.2,distanceFromParent:28725e5,orbitalPeriod:30589,orbitalVelocity:6.8,orbitalInclination:.8,axialTilt:97.8,orbitPositionOffset:29654,meanTemperature:-195,surfaceTemps:{min:null,mean:57,max:null},rings:!1,satellites:[{id:"7a",name:"Cordelia",distanceFromParent:49770,orbitalPeriod:.335,orbitalInclination:.08479,diameter:40,mass:"0.044 * 10^18",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7b",name:"Ophelia",distanceFromParent:53790,orbitalPeriod:.376,orbitalInclination:.1036,diameter:43,mass:"0.053 * 10^18",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7c",name:"Cressida",distanceFromParent:61780,orbitalPeriod:.464,orbitalInclination:.006,diameter:80,mass:"0.34 * 10^18",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7d",name:"Juliet",distanceFromParent:64350,orbitalPeriod:.493,orbitalInclination:.06546,diameter:94,mass:"0.56 * 10^18",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7e",name:"Portia",distanceFromParent:66090,orbitalPeriod:.513,orbitalInclination:.059,diameter:135,mass:"1.7 * 10^18",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7f",name:"Belinda",distanceFromParent:75260,orbitalPeriod:.623,orbitalInclination:.031,diameter:90,mass:"0.49 * 10^18",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7g",name:"Puck",diameter:162,distanceFromParent:86010,orbitalPeriod:.762,orbitalInclination:.3192,mass:"2.9 * 10^18",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7h",name:"Miranda",distanceFromParent:129390,orbitalPeriod:1.413,orbitalInclination:4.232,diameter:471.6,mass:"6.59 * 10^19",gravity:.079,surfaceTemps:{min:-160.15,max:-189.15,mean:-213.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7i",name:"Ariel",distanceFromParent:191020,orbitalPeriod:2.52,orbitalInclination:.26,diameter:1157.8,mass:"1.353 * 10^21",gravity:.269,surfaceTemps:{min:-160.15,max:-189.15,mean:-213.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7j",name:"Umbriel",distanceFromParent:266e3,orbitalPeriod:4.144,orbitalInclination:.205,diameter:1169.4,mass:"1.172 * 10^21",gravity:.2,surfaceTemps:{min:-160.15,max:-188.15,mean:-198.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7k",name:"Titania",distanceFromParent:435910,orbitalPeriod:8.706,orbitalInclination:.34,diameter:1576.8,mass:"3.527 * 10^21",gravity:.379,surfaceTemps:{min:-213.15,max:-184.15,mean:-203.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7l",name:"Oberon",distanceFromParent:583520,orbitalPeriod:13.463,orbitalInclination:.058,diameter:1522.8,mass:"3.014 * 10^21",gravity:.346,surfaceTemps:{min:-203.15,max:-193.15,mean:-198.15},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7m",name:"Francisco",distanceFromParent:4276e3,orbitalPeriod:"266.56",orbitalInclination:147.459,diameter:22,mass:"0.0072 * 10^21",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7n",name:"Caliban",distanceFromParent:723e4,orbitalPeriod:"579.5",orbitalInclination:139.885,diameter:72,mass:"0.25 * 10^21",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7o",name:"Stephano",distanceFromParent:8002e3,orbitalPeriod:"676.50",orbitalInclination:141.873,diameter:32,mass:"0.022 * 10^21",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7p",name:"Margaret",distanceFromParent:14345e3,orbitalPeriod:1694.8,orbitalInclination:51.455,diameter:20,mass:"0.0054 * 10^21",gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7q",name:"Bianca",diameter:51,mass:"0.092 * 10^18",distanceFromParent:59170,orbitalPeriod:.434579,orbitalInclination:.193,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7r",name:"Desdemona",diameter:64,mass:"0.18 * 10^18",distanceFromParent:62680,orbitalPeriod:.47365,orbitalInclination:.11125,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7s",name:"Rosalind",diameter:72,mass:"0.25 * 10^18",distanceFromParent:69940,orbitalPeriod:.55846,orbitalInclination:.279,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7t",name:"Cupid",diameter:18,mass:"0.0038 * 10^18",distanceFromParent:74800,orbitalPeriod:.618,orbitalInclination:.1,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7u",name:"Perdita",diameter:30,mass:"0.018 * 10^18",distanceFromParent:76400,orbitalPeriod:.638,orbitalInclination:0,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7v",name:"Mab",diameter:25,mass:"0.01 * 10^18",distanceFromParent:97700,orbitalPeriod:.923,orbitalInclination:.1335,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7w",name:"Trinculo",diameter:18,mass:"0.0039 * 10^18",distanceFromParent:8571e3,orbitalPeriod:"-758.10",orbitalInclination:166.252,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7x",name:"Sycorax",diameter:165,mass:"2.3 * 10^18",distanceFromParent:12179e3,orbitalPeriod:"-1283.4",orbitalInclination:152.456,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"7y",name:"Prospero",diameter:50,mass:"0.085 * 10^18",distanceFromParent:16418e3,orbitalPeriod:"-1992.8",orbitalInclination:146.017,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}}],_3d:{textures:{base:"src/assets/textures/uranus.jpg"}}},{id:8,name:"Neptune",mass:102,diameter:49528,density:1638,gravity:11,rotationPeriod:16.1,lengthOfDay:16.1,distanceFromParent:44951e5,orbitalPeriod:59800,orbitalVelocity:5.4,orbitalInclination:1.8,axialTilt:28.3,orbitPositionOffset:62885,meanTemperature:-200,surfaceTemps:{min:null,mean:59,max:null},rings:!1,satellites:[{id:"8a",name:"Naiad",diameter:66,mass:"19 * 10^16",distanceFromParent:48227,orbitalPeriod:.294,orbitalInclination:4.75,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8b",name:"Thalassa",diameter:82,mass:"35 * 10^16",distanceFromParent:50074,orbitalPeriod:.311,orbitalInclination:.135,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8c",name:"Despina",diameter:150,mass:"210 * 10^16",distanceFromParent:52526,orbitalPeriod:.335,orbitalInclination:.216,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8d",name:"Galatea",diameter:176,mass:"375 * 10^16",distanceFromParent:61953,orbitalPeriod:.429,orbitalInclination:.052,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8e",name:"Larissa",diameter:194,mass:"495 * 10^16",distanceFromParent:73548,orbitalPeriod:.555,orbitalInclination:.251,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8f",name:"Triton",distanceFromParent:354759,orbitalPeriod:-5.877,orbitalInclination:156.885,diameter:2706.8,mass:"2.14 * 10^22",gravity:.779,surfaceTemps:{min:-235,max:-235,mean:-235},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8g",name:"Nereid",distanceFromParent:5513787,orbitalPeriod:360.14,orbitalInclination:32.55,diameter:340,mass:"2.14 * 10^16",gravity:.002,surfaceTemps:{min:-223,max:-223,mean:-223},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8h",name:"Proteus",distanceFromParent:117647,orbitalPeriod:1.122,orbitalInclination:.524,diameter:420,mass:"4.4 * 10^19",gravity:.07,surfaceTemps:{min:-222,max:-222,mean:-222},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8i",name:"Halimede",diameter:62,mass:"16 * 10^16",distanceFromParent:16611e3,orbitalPeriod:"1879.08",orbitalInclination:112.898,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8j",name:"Sao",diameter:44,mass:"6 * 10^16",distanceFromParent:22228e3,orbitalPeriod:2912.72,orbitalInclination:53.483,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8k",name:"Laomedeia",diameter:42,mass:"5 * 10^16",distanceFromParent:23567e3,orbitalPeriod:3171.33,orbitalInclination:34.049,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8l",name:"Psamathe",diameter:40,mass:"4 * 10^16",distanceFromParent:48096e3,orbitalPeriod:"-9074.30",orbitalInclination:137.679,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"8m",name:"Neso",diameter:60,mass:"15 * 10^16",distanceFromParent:49285e3,orbitalPeriod:"-9740.73",orbitalInclination:131.265,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}}],_3d:{textures:{base:"src/assets/textures/neptune.jpg"}}},{id:9,name:"Pluto",mass:102,diameter:2374,density:1638,gravity:11,rotationPeriod:16.1,lengthOfDay:6.39,distanceFromParent:5874e6,orbitalPeriod:90570,orbitalVelocity:4.67,orbitalInclination:17.2,axialTilt:119.59,orbitPositionOffset:20,meanTemperature:-229,surfaceTemps:{min:40,mean:45,max:50},rings:!1,satellites:[{id:"9a",name:"Charon",distanceFromParent:19571,orbitalPeriod:6.387,orbitalInclination:.001,diameter:1212,mass:"1.586 * 10^21",gravity:.288,surfaceTemps:{min:-220,max:-220,mean:-220},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"9b",name:"Styx",diameter:7,mass:null,distanceFromParent:42656,orbitalPeriod:20.161,orbitalInclination:.81,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"9c",name:"Nix",distanceFromParent:48694,orbitalPeriod:24.85,orbitalInclination:.133,diameter:54,mass:"4.5 * 10^16",gravity:.001,surfaceTemps:{min:-240,max:-218,mean:-231},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"9d",name:"Kerberos",diameter:12,mass:null,distanceFromParent:57783,orbitalPeriod:32.168,orbitalInclination:.389,gravity:null,surfaceTemps:{min:null,max:null,mean:null},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}},{id:"9e",name:"Hydra",distanceFromParent:64738,orbitalPeriod:38.2,orbitalInclination:.242,diameter:41,mass:"4.8 * 10^16",gravity:.001,surfaceTemps:{min:-240,max:-218,mean:-231},_3d:{textures:{base:"/src/assets/textures/earth/satellites/moon_1k.jpg",topo:"/src/assets/textures/earth/satellites/moon_topo_1k.jpg"}}}],_3d:{textures:{base:"src/assets/textures/pluto.jpg"}}}]},oI=t=>{let e;const n=new Set,r=(l,u)=>{const d=typeof l=="function"?l(e):l;if(!Object.is(d,e)){const h=e;e=u??typeof d!="object"?d:Object.assign({},e,d),n.forEach(p=>p(e,h))}},i=()=>e,a={setState:r,getState:i,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return e=t(r,i,a),a},Wee=t=>t?oI(t):oI;var _N={exports:{}},SN={},wN={exports:{}},bN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rf=R;function $ee(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var jee=typeof Object.is=="function"?Object.is:$ee,Xee=Rf.useState,Kee=Rf.useEffect,Yee=Rf.useLayoutEffect,qee=Rf.useDebugValue;function Zee(t,e){var n=e(),r=Xee({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Yee(function(){i.value=n,i.getSnapshot=e,K_(i)&&s({inst:i})},[t,n,e]),Kee(function(){return K_(i)&&s({inst:i}),t(function(){K_(i)&&s({inst:i})})},[t]),qee(n),n}function K_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!jee(t,n)}catch{return!0}}function Qee(t,e){return e()}var Jee=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Qee:Zee;bN.useSyncExternalStore=Rf.useSyncExternalStore!==void 0?Rf.useSyncExternalStore:Jee;wN.exports=bN;var ete=wN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy=R,tte=ete;function nte(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rte=typeof Object.is=="function"?Object.is:nte,ite=tte.useSyncExternalStore,ste=Dy.useRef,ote=Dy.useEffect,ate=Dy.useMemo,lte=Dy.useDebugValue;SN.useSyncExternalStoreWithSelector=function(t,e,n,r,i){var s=ste(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=ate(function(){function l(g){if(!u){if(u=!0,d=g,g=r(g),i!==void 0&&o.hasValue){var v=o.value;if(i(v,g))return h=v}return h=g}if(v=h,rte(d,g))return v;var _=r(g);return i!==void 0&&i(v,_)?v:(d=g,h=_)}var u=!1,d,h,p=n===void 0?null:n;return[function(){return l(e())},p===null?void 0:function(){return l(p())}]},[e,n,r,i]);var a=ite(t,s[0],s[1]);return ote(function(){o.hasValue=!0,o.value=a},[a]),lte(a),a};_N.exports=SN;var ute=_N.exports;const cte=_s(ute),{useSyncExternalStoreWithSelector:fte}=cte;function dte(t,e=t.getState,n){const r=fte(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return R.useDebugValue(r),r}const aI=t=>{({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}&&"production")!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?Wee(t):t,n=(r,i)=>dte(e,r,i);return Object.assign(n,e),n},hte=t=>t?aI(t):aI,Jf=hte(t=>({planetScale:14e3,planetDistanceScale:5e5,isOverview:!1,setIsOverview:()=>t(e=>({isOverview:!e.isOverview})),isOrbitLines:!0,setIsOrbitLines:()=>t(e=>({isOrbitLines:!e.isOrbitLines})),isCaptions:!0,setIsCaptions:()=>t(e=>({isCaptions:!e.isCaptions})),controlsTarget:[0,0,0],setControlsTarget:e=>t({controlsTarget:e}),isInfosBox:!0,setIsInfosBox:()=>t(e=>({isInfosBox:!e.isInfosBox})),infosBoxData:"earth",setInfosBoxData:e=>t({infosBoxData:e})}));function pte({radius:t}){const e=Jf(i=>i.isOrbitLines),n=[],r=256;for(let i=0;i<=r;i++){const s=i/r*Math.PI*2,o=Math.cos(s)*t,a=0,l=Math.sin(s)*t;n.push(o,a,l)}return Ie.jsx(Ie.Fragment,{children:e?Ie.jsx(iX,{points:n,color:"grey",lineWidth:1,linecap:"round",linejoin:"round",transparent:!0}):void 0})}const mte={black:"#000",white:"#fff"},bp=mte,gte={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},Rc=gte,vte={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Ic=vte,yte={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Dc=yte,xte={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Wl=xte,_te={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Lc=_te,Ste={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},nh=Ste,wte={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},bte=wte;function Xl(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function MN(t){if(!Xl(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=MN(t[n])}),e}function na(t,e,n={clone:!0}){const r=n.clone?Oe({},t):t;return Xl(t)&&Xl(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(Xl(e[i])&&i in t&&Xl(t[i])?r[i]=na(t[i],e[i],n):n.clone?r[i]=Xl(e[i])?MN(e[i]):e[i]:r[i]=e[i])}),r}function If(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}function zn(t){if(typeof t!="string")throw new Error(If(7));return t.charAt(0).toUpperCase()+t.slice(1)}function Mte(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const Ete=typeof window<"u"?R.useLayoutEffect:R.useEffect,Tte=Ete;function _v(t){const e=R.useRef(t);return Tte(()=>{e.current=t}),R.useCallback((...n)=>(0,e.current)(...n),[])}function lI(...t){return R.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{Mte(n,e)})},t)}let Ly=!0,fb=!1,uI;const Pte={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function Cte(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&Pte[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function Ate(t){t.metaKey||t.altKey||t.ctrlKey||(Ly=!0)}function Y_(){Ly=!1}function Rte(){this.visibilityState==="hidden"&&fb&&(Ly=!0)}function Ite(t){t.addEventListener("keydown",Ate,!0),t.addEventListener("mousedown",Y_,!0),t.addEventListener("pointerdown",Y_,!0),t.addEventListener("touchstart",Y_,!0),t.addEventListener("visibilitychange",Rte,!0)}function Dte(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return Ly||Cte(e)}function Lte(){const t=R.useCallback(i=>{i!=null&&Ite(i.ownerDocument)},[]),e=R.useRef(!1);function n(){return e.current?(fb=!0,window.clearTimeout(uI),uI=window.setTimeout(()=>{fb=!1},100),e.current=!1,!0):!1}function r(i){return Dte(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function EN(t,e){const n=Oe({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=Oe({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=Oe({},s),Object.keys(i).forEach(o=>{n[r][o]=EN(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function Fu(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const cI=t=>t,Ote=()=>{let t=cI;return{configure(e){t=e},generate(e){return t(e)},reset(){t=cI}}},kte=Ote(),TN=kte,Ute={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function gl(t,e,n="Mui"){const r=Ute[e];return r?`${n}-${r}`:`${TN.generate(t)}-${e}`}function vl(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=gl(t,i,n)}),r}const Eu="$$material";function tr(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function PN(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var Nte=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Fte=PN(function(t){return Nte.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function zte(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Bte(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Hte=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Bte(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=zte(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),Hr="-ms-",G0="-moz-",Wt="-webkit-",CN="comm",DE="rule",LE="decl",Vte="@import",AN="@keyframes",Gte="@layer",Wte=Math.abs,Oy=String.fromCharCode,$te=Object.assign;function jte(t,e){return Cr(t,0)^45?(((e<<2^Cr(t,0))<<2^Cr(t,1))<<2^Cr(t,2))<<2^Cr(t,3):0}function RN(t){return t.trim()}function Xte(t,e){return(t=e.exec(t))?t[0]:t}function $t(t,e,n){return t.replace(e,n)}function db(t,e){return t.indexOf(e)}function Cr(t,e){return t.charCodeAt(e)|0}function Mp(t,e,n){return t.slice(e,n)}function po(t){return t.length}function OE(t){return t.length}function Sv(t,e){return e.push(t),t}function Kte(t,e){return t.map(e).join("")}var ky=1,Df=1,IN=0,Mi=0,qn=0,ed="";function Uy(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:ky,column:Df,length:o,return:""}}function rh(t,e){return $te(Uy("",null,null,"",null,null,0),t,{length:-t.length},e)}function Yte(){return qn}function qte(){return qn=Mi>0?Cr(ed,--Mi):0,Df--,qn===10&&(Df=1,ky--),qn}function zi(){return qn=Mi<IN?Cr(ed,Mi++):0,Df++,qn===10&&(Df=1,ky++),qn}function bo(){return Cr(ed,Mi)}function Yv(){return Mi}function rm(t,e){return Mp(ed,t,e)}function Ep(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function DN(t){return ky=Df=1,IN=po(ed=t),Mi=0,[]}function LN(t){return ed="",t}function qv(t){return RN(rm(Mi-1,hb(t===91?t+2:t===40?t+1:t)))}function Zte(t){for(;(qn=bo())&&qn<33;)zi();return Ep(t)>2||Ep(qn)>3?"":" "}function Qte(t,e){for(;--e&&zi()&&!(qn<48||qn>102||qn>57&&qn<65||qn>70&&qn<97););return rm(t,Yv()+(e<6&&bo()==32&&zi()==32))}function hb(t){for(;zi();)switch(qn){case t:return Mi;case 34:case 39:t!==34&&t!==39&&hb(qn);break;case 40:t===41&&hb(t);break;case 92:zi();break}return Mi}function Jte(t,e){for(;zi()&&t+qn!==47+10;)if(t+qn===42+42&&bo()===47)break;return"/*"+rm(e,Mi-1)+"*"+Oy(t===47?t:zi())}function ene(t){for(;!Ep(bo());)zi();return rm(t,Mi)}function tne(t){return LN(Zv("",null,null,null,[""],t=DN(t),0,[0],t))}function Zv(t,e,n,r,i,s,o,a,l){for(var u=0,d=0,h=o,p=0,g=0,v=0,_=1,x=1,m=1,S=0,w="",M=i,I=s,P=r,D=w;x;)switch(v=S,S=zi()){case 40:if(v!=108&&Cr(D,h-1)==58){db(D+=$t(qv(S),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:D+=qv(S);break;case 9:case 10:case 13:case 32:D+=Zte(v);break;case 92:D+=Qte(Yv()-1,7);continue;case 47:switch(bo()){case 42:case 47:Sv(nne(Jte(zi(),Yv()),e,n),l);break;default:D+="/"}break;case 123*_:a[u++]=po(D)*m;case 125*_:case 59:case 0:switch(S){case 0:case 125:x=0;case 59+d:m==-1&&(D=$t(D,/\f/g,"")),g>0&&po(D)-h&&Sv(g>32?dI(D+";",r,n,h-1):dI($t(D," ","")+";",r,n,h-2),l);break;case 59:D+=";";default:if(Sv(P=fI(D,e,n,u,d,i,a,w,M=[],I=[],h),s),S===123)if(d===0)Zv(D,e,P,P,M,s,h,a,I);else switch(p===99&&Cr(D,3)===110?100:p){case 100:case 108:case 109:case 115:Zv(t,P,P,r&&Sv(fI(t,P,P,0,0,i,a,w,i,M=[],h),I),i,I,h,a,r?M:I);break;default:Zv(D,P,P,P,[""],I,0,a,I)}}u=d=g=0,_=m=1,w=D="",h=o;break;case 58:h=1+po(D),g=v;default:if(_<1){if(S==123)--_;else if(S==125&&_++==0&&qte()==125)continue}switch(D+=Oy(S),S*_){case 38:m=d>0?1:(D+="\f",-1);break;case 44:a[u++]=(po(D)-1)*m,m=1;break;case 64:bo()===45&&(D+=qv(zi())),p=bo(),d=h=po(w=D+=ene(Yv())),S++;break;case 45:v===45&&po(D)==2&&(_=0)}}return s}function fI(t,e,n,r,i,s,o,a,l,u,d){for(var h=i-1,p=i===0?s:[""],g=OE(p),v=0,_=0,x=0;v<r;++v)for(var m=0,S=Mp(t,h+1,h=Wte(_=o[v])),w=t;m<g;++m)(w=RN(_>0?p[m]+" "+S:$t(S,/&\f/g,p[m])))&&(l[x++]=w);return Uy(t,e,n,i===0?DE:a,l,u,d)}function nne(t,e,n){return Uy(t,e,n,CN,Oy(Yte()),Mp(t,2,-2),0)}function dI(t,e,n,r){return Uy(t,e,n,LE,Mp(t,0,r),Mp(t,r+1,-1),r)}function pf(t,e){for(var n="",r=OE(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function rne(t,e,n,r){switch(t.type){case Gte:if(t.children.length)break;case Vte:case LE:return t.return=t.return||t.value;case CN:return"";case AN:return t.return=t.value+"{"+pf(t.children,r)+"}";case DE:t.value=t.props.join(",")}return po(n=pf(t.children,r))?t.return=t.value+"{"+n+"}":""}function ine(t){var e=OE(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function sne(t){return function(e){e.root||(e=e.return)&&t(e)}}var one=function(e,n,r){for(var i=0,s=0;i=s,s=bo(),i===38&&s===12&&(n[r]=1),!Ep(s);)zi();return rm(e,Mi)},ane=function(e,n){var r=-1,i=44;do switch(Ep(i)){case 0:i===38&&bo()===12&&(n[r]=1),e[r]+=one(Mi-1,n,r);break;case 2:e[r]+=qv(i);break;case 4:if(i===44){e[++r]=bo()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=Oy(i)}while(i=zi());return e},lne=function(e,n){return LN(ane(DN(e),n))},hI=new WeakMap,une=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!hI.get(r))&&!i){hI.set(e,!0);for(var s=[],o=lne(n,s),a=r.props,l=0,u=0;l<o.length;l++)for(var d=0;d<a.length;d++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[d]):a[d]+" "+o[l]}}},cne=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function ON(t,e){switch(jte(t,e)){case 5103:return Wt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Wt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Wt+t+G0+t+Hr+t+t;case 6828:case 4268:return Wt+t+Hr+t+t;case 6165:return Wt+t+Hr+"flex-"+t+t;case 5187:return Wt+t+$t(t,/(\w+).+(:[^]+)/,Wt+"box-$1$2"+Hr+"flex-$1$2")+t;case 5443:return Wt+t+Hr+"flex-item-"+$t(t,/flex-|-self/,"")+t;case 4675:return Wt+t+Hr+"flex-line-pack"+$t(t,/align-content|flex-|-self/,"")+t;case 5548:return Wt+t+Hr+$t(t,"shrink","negative")+t;case 5292:return Wt+t+Hr+$t(t,"basis","preferred-size")+t;case 6060:return Wt+"box-"+$t(t,"-grow","")+Wt+t+Hr+$t(t,"grow","positive")+t;case 4554:return Wt+$t(t,/([^-])(transform)/g,"$1"+Wt+"$2")+t;case 6187:return $t($t($t(t,/(zoom-|grab)/,Wt+"$1"),/(image-set)/,Wt+"$1"),t,"")+t;case 5495:case 3959:return $t(t,/(image-set\([^]*)/,Wt+"$1$`$1");case 4968:return $t($t(t,/(.+:)(flex-)?(.*)/,Wt+"box-pack:$3"+Hr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Wt+t+t;case 4095:case 3583:case 4068:case 2532:return $t(t,/(.+)-inline(.+)/,Wt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(po(t)-1-e>6)switch(Cr(t,e+1)){case 109:if(Cr(t,e+4)!==45)break;case 102:return $t(t,/(.+:)(.+)-([^]+)/,"$1"+Wt+"$2-$3$1"+G0+(Cr(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~db(t,"stretch")?ON($t(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Cr(t,e+1)!==115)break;case 6444:switch(Cr(t,po(t)-3-(~db(t,"!important")&&10))){case 107:return $t(t,":",":"+Wt)+t;case 101:return $t(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Wt+(Cr(t,14)===45?"inline-":"")+"box$3$1"+Wt+"$2$3$1"+Hr+"$2box$3")+t}break;case 5936:switch(Cr(t,e+11)){case 114:return Wt+t+Hr+$t(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Wt+t+Hr+$t(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Wt+t+Hr+$t(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Wt+t+Hr+t+t}return t}var fne=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case LE:e.return=ON(e.value,e.length);break;case AN:return pf([rh(e,{value:$t(e.value,"@","@"+Wt)})],i);case DE:if(e.length)return Kte(e.props,function(s){switch(Xte(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return pf([rh(e,{props:[$t(s,/:(read-\w+)/,":"+G0+"$1")]})],i);case"::placeholder":return pf([rh(e,{props:[$t(s,/:(plac\w+)/,":"+Wt+"input-$1")]}),rh(e,{props:[$t(s,/:(plac\w+)/,":"+G0+"$1")]}),rh(e,{props:[$t(s,/:(plac\w+)/,Hr+"input-$1")]})],i)}return""})}},dne=[fne],hne=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(_){var x=_.getAttribute("data-emotion");x.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var i=e.stylisPlugins||dne,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(_){for(var x=_.getAttribute("data-emotion").split(" "),m=1;m<x.length;m++)s[x[m]]=!0;a.push(_)});var l,u=[une,cne];{var d,h=[rne,sne(function(_){d.insert(_)})],p=ine(u.concat(i,h)),g=function(x){return pf(tne(x),p)};l=function(x,m,S,w){d=S,g(x?x+"{"+m.styles+"}":m.styles),w&&(v.inserted[m.name]=!0)}}var v={key:n,sheet:new Hte({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return v.sheet.hydrate(a),v},kN={exports:{}},rn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sr=typeof Symbol=="function"&&Symbol.for,kE=Sr?Symbol.for("react.element"):60103,UE=Sr?Symbol.for("react.portal"):60106,Ny=Sr?Symbol.for("react.fragment"):60107,Fy=Sr?Symbol.for("react.strict_mode"):60108,zy=Sr?Symbol.for("react.profiler"):60114,By=Sr?Symbol.for("react.provider"):60109,Hy=Sr?Symbol.for("react.context"):60110,NE=Sr?Symbol.for("react.async_mode"):60111,Vy=Sr?Symbol.for("react.concurrent_mode"):60111,Gy=Sr?Symbol.for("react.forward_ref"):60112,Wy=Sr?Symbol.for("react.suspense"):60113,pne=Sr?Symbol.for("react.suspense_list"):60120,$y=Sr?Symbol.for("react.memo"):60115,jy=Sr?Symbol.for("react.lazy"):60116,mne=Sr?Symbol.for("react.block"):60121,gne=Sr?Symbol.for("react.fundamental"):60117,vne=Sr?Symbol.for("react.responder"):60118,yne=Sr?Symbol.for("react.scope"):60119;function ji(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case kE:switch(t=t.type,t){case NE:case Vy:case Ny:case zy:case Fy:case Wy:return t;default:switch(t=t&&t.$$typeof,t){case Hy:case Gy:case jy:case $y:case By:return t;default:return e}}case UE:return e}}}function UN(t){return ji(t)===Vy}rn.AsyncMode=NE;rn.ConcurrentMode=Vy;rn.ContextConsumer=Hy;rn.ContextProvider=By;rn.Element=kE;rn.ForwardRef=Gy;rn.Fragment=Ny;rn.Lazy=jy;rn.Memo=$y;rn.Portal=UE;rn.Profiler=zy;rn.StrictMode=Fy;rn.Suspense=Wy;rn.isAsyncMode=function(t){return UN(t)||ji(t)===NE};rn.isConcurrentMode=UN;rn.isContextConsumer=function(t){return ji(t)===Hy};rn.isContextProvider=function(t){return ji(t)===By};rn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===kE};rn.isForwardRef=function(t){return ji(t)===Gy};rn.isFragment=function(t){return ji(t)===Ny};rn.isLazy=function(t){return ji(t)===jy};rn.isMemo=function(t){return ji(t)===$y};rn.isPortal=function(t){return ji(t)===UE};rn.isProfiler=function(t){return ji(t)===zy};rn.isStrictMode=function(t){return ji(t)===Fy};rn.isSuspense=function(t){return ji(t)===Wy};rn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ny||t===Vy||t===zy||t===Fy||t===Wy||t===pne||typeof t=="object"&&t!==null&&(t.$$typeof===jy||t.$$typeof===$y||t.$$typeof===By||t.$$typeof===Hy||t.$$typeof===Gy||t.$$typeof===gne||t.$$typeof===vne||t.$$typeof===yne||t.$$typeof===mne)};rn.typeOf=ji;kN.exports=rn;var xne=kN.exports,NN=xne,_ne={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Sne={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},FN={};FN[NN.ForwardRef]=_ne;FN[NN.Memo]=Sne;var wne=!0;function bne(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var zN=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||wne===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},BN=function(e,n,r){zN(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function Mne(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Ene={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Tne=/[A-Z]|^ms/g,Pne=/_EMO_([^_]+?)_([^]*?)_EMO_/g,HN=function(e){return e.charCodeAt(1)===45},pI=function(e){return e!=null&&typeof e!="boolean"},q_=PN(function(t){return HN(t)?t:t.replace(Tne,"-$&").toLowerCase()}),mI=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Pne,function(r,i,s){return mo={name:i,styles:s,next:mo},i})}return Ene[e]!==1&&!HN(e)&&typeof n=="number"&&n!==0?n+"px":n};function Tp(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return mo={name:n.name,styles:n.styles,next:mo},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)mo={name:r.name,styles:r.styles,next:mo},r=r.next;var i=n.styles+";";return i}return Cne(t,e,n)}case"function":{if(t!==void 0){var s=mo,o=n(t);return mo=s,Tp(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function Cne(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Tp(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":pI(o)&&(r+=q_(s)+":"+mI(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)pI(o[a])&&(r+=q_(s)+":"+mI(s,o[a])+";");else{var l=Tp(t,e,o);switch(s){case"animation":case"animationName":{r+=q_(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var gI=/label:\s*([^\s;\n{]+)\s*(;|$)/g,mo,FE=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";mo=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Tp(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Tp(r,n,e[a]),i&&(s+=o[a]);gI.lastIndex=0;for(var l="",u;(u=gI.exec(s))!==null;)l+="-"+u[1];var d=Mne(s)+l;return{name:d,styles:s,next:mo}},Ane=function(e){return e()},VN=nS["useInsertionEffect"]?nS["useInsertionEffect"]:!1,Rne=VN||Ane,vI=VN||R.useLayoutEffect,GN=R.createContext(typeof HTMLElement<"u"?hne({key:"css"}):null);GN.Provider;var WN=function(e){return R.forwardRef(function(n,r){var i=R.useContext(GN);return e(n,i,r)})},Xy=R.createContext({}),Ine=WN(function(t,e){var n=t.styles,r=FE([n],void 0,R.useContext(Xy)),i=R.useRef();return vI(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),vI(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&BN(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function Ky(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return FE(e)}var td=function(){var e=Ky.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},Dne=Fte,Lne=function(e){return e!=="theme"},yI=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?Dne:Lne},xI=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},One=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return zN(n,r,i),Rne(function(){return BN(n,r,i)}),null},kne=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=xI(e,n,r),l=a||yI(i),u=!l("as");return function(){var d=arguments,h=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&h.push("label:"+s+";"),d[0]==null||d[0].raw===void 0)h.push.apply(h,d);else{h.push(d[0][0]);for(var p=d.length,g=1;g<p;g++)h.push(d[g],d[0][g])}var v=WN(function(_,x,m){var S=u&&_.as||i,w="",M=[],I=_;if(_.theme==null){I={};for(var P in _)I[P]=_[P];I.theme=R.useContext(Xy)}typeof _.className=="string"?w=bne(x.registered,M,_.className):_.className!=null&&(w=_.className+" ");var D=FE(h.concat(M),x.registered,I);w+=x.key+"-"+D.name,o!==void 0&&(w+=" "+o);var A=u&&a===void 0?yI(S):l,T={};for(var E in _)u&&E==="as"||A(E)&&(T[E]=_[E]);return T.className=w,T.ref=m,R.createElement(R.Fragment,null,R.createElement(One,{cache:x,serialized:D,isStringTag:typeof S=="string"}),R.createElement(S,T))});return v.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",v.defaultProps=e.defaultProps,v.__emotion_real=v,v.__emotion_base=i,v.__emotion_styles=h,v.__emotion_forwardProp=a,Object.defineProperty(v,"toString",{value:function(){return"."+o}}),v.withComponent=function(_,x){return t(_,Oe({},n,x,{shouldForwardProp:xI(v,x,!0)})).apply(void 0,h)},v}},Une=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],pb=kne.bind();Une.forEach(function(t){pb[t]=pb(t)});function Nne(t){return t==null||Object.keys(t).length===0}function Fne(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(Nne(i)?n:i):e;return Ie.jsx(Ine,{styles:r})}/**
 * @mui/styled-engine v5.14.10
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function $N(t,e){return pb(t,e)}const zne=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},Bne=["values","unit","step"],Hne=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>Oe({},n,{[r.key]:r.val}),{})};function Vne(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=tr(t,Bne),s=Hne(e),o=Object.keys(s);function a(p){return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n})`}function l(p){return`@media (max-width:${(typeof e[p]=="number"?e[p]:p)-r/100}${n})`}function u(p,g){const v=o.indexOf(g);return`@media (min-width:${typeof e[p]=="number"?e[p]:p}${n}) and (max-width:${(v!==-1&&typeof e[o[v]]=="number"?e[o[v]]:g)-r/100}${n})`}function d(p){return o.indexOf(p)+1<o.length?u(p,o[o.indexOf(p)+1]):a(p)}function h(p){const g=o.indexOf(p);return g===0?a(o[1]):g===o.length-1?l(o[g]):u(p,o[o.indexOf(p)+1]).replace("@media","@media not all and")}return Oe({keys:o,values:s,up:a,down:l,between:u,only:d,not:h,unit:n},i)}const Gne={borderRadius:4},Wne=Gne;function Oh(t,e){return e?na(t,e,{clone:!1}):t}const zE={xs:0,sm:600,md:900,lg:1200,xl:1536},_I={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${zE[t]}px)`};function ca(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||_I;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||_I;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||zE).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function $ne(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function jne(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function Yy(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function W0(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=Yy(t,n)||r,e&&(i=e(i,r,t)),i}function en(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,u=Yy(l,r)||{};return ca(o,a,h=>{let p=W0(u,i,h);return h===p&&typeof h=="string"&&(p=W0(u,i,`${e}${h==="default"?"":zn(h)}`,h)),n===!1?p:{[n]:p}})};return s.propTypes={},s.filterProps=[e],s}function Xne(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const Kne={m:"margin",p:"padding"},Yne={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},SI={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},qne=Xne(t=>{if(t.length>2)if(SI[t])t=SI[t];else return[t];const[e,n]=t.split(""),r=Kne[e],i=Yne[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),BE=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],HE=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...BE,...HE];function im(t,e,n,r){var i;const s=(i=Yy(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function jN(t){return im(t,"spacing",8)}function sm(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function Zne(t,e){return n=>t.reduce((r,i)=>(r[i]=sm(e,n),r),{})}function Qne(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=qne(n),s=Zne(i,r),o=t[n];return ca(t,o,s)}function XN(t,e){const n=jN(t.theme);return Object.keys(t).map(r=>Qne(t,e,r,n)).reduce(Oh,{})}function On(t){return XN(t,BE)}On.propTypes={};On.filterProps=BE;function kn(t){return XN(t,HE)}kn.propTypes={};kn.filterProps=HE;function Jne(t=8){if(t.mui)return t;const e=jN({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function qy(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?Oh(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function yo(t){return typeof t!="number"?t:`${t}px solid`}const ere=en({prop:"border",themeKey:"borders",transform:yo}),tre=en({prop:"borderTop",themeKey:"borders",transform:yo}),nre=en({prop:"borderRight",themeKey:"borders",transform:yo}),rre=en({prop:"borderBottom",themeKey:"borders",transform:yo}),ire=en({prop:"borderLeft",themeKey:"borders",transform:yo}),sre=en({prop:"borderColor",themeKey:"palette"}),ore=en({prop:"borderTopColor",themeKey:"palette"}),are=en({prop:"borderRightColor",themeKey:"palette"}),lre=en({prop:"borderBottomColor",themeKey:"palette"}),ure=en({prop:"borderLeftColor",themeKey:"palette"}),Zy=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=im(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:sm(e,r)});return ca(t,t.borderRadius,n)}return null};Zy.propTypes={};Zy.filterProps=["borderRadius"];qy(ere,tre,nre,rre,ire,sre,ore,are,lre,ure,Zy);const Qy=t=>{if(t.gap!==void 0&&t.gap!==null){const e=im(t.theme,"spacing",8),n=r=>({gap:sm(e,r)});return ca(t,t.gap,n)}return null};Qy.propTypes={};Qy.filterProps=["gap"];const Jy=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=im(t.theme,"spacing",8),n=r=>({columnGap:sm(e,r)});return ca(t,t.columnGap,n)}return null};Jy.propTypes={};Jy.filterProps=["columnGap"];const e1=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=im(t.theme,"spacing",8),n=r=>({rowGap:sm(e,r)});return ca(t,t.rowGap,n)}return null};e1.propTypes={};e1.filterProps=["rowGap"];const cre=en({prop:"gridColumn"}),fre=en({prop:"gridRow"}),dre=en({prop:"gridAutoFlow"}),hre=en({prop:"gridAutoColumns"}),pre=en({prop:"gridAutoRows"}),mre=en({prop:"gridTemplateColumns"}),gre=en({prop:"gridTemplateRows"}),vre=en({prop:"gridTemplateAreas"}),yre=en({prop:"gridArea"});qy(Qy,Jy,e1,cre,fre,dre,hre,pre,mre,gre,vre,yre);function mf(t,e){return e==="grey"?e:t}const xre=en({prop:"color",themeKey:"palette",transform:mf}),_re=en({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:mf}),Sre=en({prop:"backgroundColor",themeKey:"palette",transform:mf});qy(xre,_re,Sre);function Li(t){return t<=1&&t!==0?`${t*100}%`:t}const wre=en({prop:"width",transform:Li}),VE=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||zE[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:Li(n)}};return ca(t,t.maxWidth,e)}return null};VE.filterProps=["maxWidth"];const bre=en({prop:"minWidth",transform:Li}),Mre=en({prop:"height",transform:Li}),Ere=en({prop:"maxHeight",transform:Li}),Tre=en({prop:"minHeight",transform:Li});en({prop:"size",cssProperty:"width",transform:Li});en({prop:"size",cssProperty:"height",transform:Li});const Pre=en({prop:"boxSizing"});qy(wre,VE,bre,Mre,Ere,Tre,Pre);const Cre={border:{themeKey:"borders",transform:yo},borderTop:{themeKey:"borders",transform:yo},borderRight:{themeKey:"borders",transform:yo},borderBottom:{themeKey:"borders",transform:yo},borderLeft:{themeKey:"borders",transform:yo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Zy},color:{themeKey:"palette",transform:mf},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:mf},backgroundColor:{themeKey:"palette",transform:mf},p:{style:kn},pt:{style:kn},pr:{style:kn},pb:{style:kn},pl:{style:kn},px:{style:kn},py:{style:kn},padding:{style:kn},paddingTop:{style:kn},paddingRight:{style:kn},paddingBottom:{style:kn},paddingLeft:{style:kn},paddingX:{style:kn},paddingY:{style:kn},paddingInline:{style:kn},paddingInlineStart:{style:kn},paddingInlineEnd:{style:kn},paddingBlock:{style:kn},paddingBlockStart:{style:kn},paddingBlockEnd:{style:kn},m:{style:On},mt:{style:On},mr:{style:On},mb:{style:On},ml:{style:On},mx:{style:On},my:{style:On},margin:{style:On},marginTop:{style:On},marginRight:{style:On},marginBottom:{style:On},marginLeft:{style:On},marginX:{style:On},marginY:{style:On},marginInline:{style:On},marginInlineStart:{style:On},marginInlineEnd:{style:On},marginBlock:{style:On},marginBlockStart:{style:On},marginBlockEnd:{style:On},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Qy},rowGap:{style:e1},columnGap:{style:Jy},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Li},maxWidth:{style:VE},minWidth:{transform:Li},height:{transform:Li},maxHeight:{transform:Li},minHeight:{transform:Li},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},t1=Cre;function Are(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Rre(t,e){return typeof t=="function"?t(e):t}function Ire(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:u,transform:d,style:h}=a;if(r==null)return null;if(u==="typography"&&r==="inherit")return{[n]:r};const p=Yy(i,u)||{};return h?h(o):ca(o,r,v=>{let _=W0(p,d,v);return v===_&&typeof v=="string"&&(_=W0(p,d,`${n}${v==="default"?"":zn(v)}`,v)),l===!1?_:{[l]:_}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:t1;function a(l){let u=l;if(typeof l=="function")u=l(s);else if(typeof l!="object")return l;if(!u)return null;const d=$ne(s.breakpoints),h=Object.keys(d);let p=d;return Object.keys(u).forEach(g=>{const v=Rre(u[g],s);if(v!=null)if(typeof v=="object")if(o[g])p=Oh(p,t(g,v,s,o));else{const _=ca({theme:s},v,x=>({[g]:x}));Are(_,v)?p[g]=e({sx:v,theme:s}):p=Oh(p,_)}else p=Oh(p,t(g,v,s,o))}),jne(h,p)}return Array.isArray(i)?i.map(a):a(i)}return e}const KN=Ire();KN.filterProps=["sx"];const n1=KN,Dre=["breakpoints","palette","spacing","shape"];function GE(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=tr(t,Dre),a=Vne(n),l=Jne(i);let u=na({breakpoints:a,direction:"ltr",components:{},palette:Oe({mode:"light"},r),spacing:l,shape:Oe({},Wne,s)},o);return u=e.reduce((d,h)=>na(d,h),u),u.unstable_sxConfig=Oe({},t1,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(h){return n1({sx:h,theme:this})},u}function Lre(t){return Object.keys(t).length===0}function YN(t=null){const e=R.useContext(Xy);return!e||Lre(e)?t:e}const Ore=GE();function r1(t=Ore){return YN(t)}function kre({styles:t,themeId:e,defaultTheme:n={}}){const r=r1(n),i=typeof t=="function"?t(e&&r[e]||r):t;return Ie.jsx(Fne,{styles:i})}const Ure=["sx"],Nre=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:t1;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function qN(t){const{sx:e}=t,n=tr(t,Ure),{systemProps:r,otherProps:i}=Nre(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Xl(a)?Oe({},r,a):r}:s=Oe({},r,e),Oe({},i,{sx:s})}function ZN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=ZN(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Ar(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=ZN(t))&&(r&&(r+=" "),r+=e);return r}const Fre=["className","component"];function zre(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=$N("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(n1);return R.forwardRef(function(l,u){const d=r1(n),h=qN(l),{className:p,component:g="div"}=h,v=tr(h,Fre);return Ie.jsx(s,Oe({as:g,ref:u,className:Ar(p,i?i(r):r),theme:e&&d[e]||d},v))})}const Bre=["variant"];function wI(t){return t.length===0}function QN(t){const{variant:e}=t,n=tr(t,Bre);let r=e||"";return Object.keys(n).sort().forEach(i=>{i==="color"?r+=wI(r)?t[i]:zn(t[i]):r+=`${wI(r)?i:zn(i)}${zn(t[i].toString())}`}),r}const Hre=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function Vre(t){return Object.keys(t).length===0}function Gre(t){return typeof t=="string"&&t.charCodeAt(0)>96}const Wre=(t,e)=>e.components&&e.components[t]&&e.components[t].styleOverrides?e.components[t].styleOverrides:null,$re=(t,e)=>{let n=[];e&&e.components&&e.components[t]&&e.components[t].variants&&(n=e.components[t].variants);const r={};return n.forEach(i=>{const s=QN(i.props);r[s]=i.style}),r},jre=(t,e,n,r)=>{var i;const{ownerState:s={}}=t,o=[],a=n==null||(i=n.components)==null||(i=i[r])==null?void 0:i.variants;return a&&a.forEach(l=>{let u=!0;Object.keys(l.props).forEach(d=>{s[d]!==l.props[d]&&t[d]!==l.props[d]&&(u=!1)}),u&&o.push(e[QN(l.props)])}),o};function Qv(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const Xre=GE(),Kre=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function ih({defaultTheme:t,theme:e,themeId:n}){return Vre(e)?t:e[n]||e}function Yre(t){return t?(e,n)=>n[t]:null}function qre(t={}){const{themeId:e,defaultTheme:n=Xre,rootShouldForwardProp:r=Qv,slotShouldForwardProp:i=Qv}=t,s=o=>n1(Oe({},o,{theme:ih(Oe({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{zne(o,M=>M.filter(I=>!(I!=null&&I.__mui_systemSx)));const{name:l,slot:u,skipVariantsResolver:d,skipSx:h,overridesResolver:p=Yre(Kre(u))}=a,g=tr(a,Hre),v=d!==void 0?d:u&&u!=="Root"&&u!=="root"||!1,_=h||!1;let x,m=Qv;u==="Root"||u==="root"?m=r:u?m=i:Gre(o)&&(m=void 0);const S=$N(o,Oe({shouldForwardProp:m,label:x},g)),w=(M,...I)=>{const P=I?I.map(E=>typeof E=="function"&&E.__emotion_real!==E?O=>E(Oe({},O,{theme:ih(Oe({},O,{defaultTheme:n,themeId:e}))})):E):[];let D=M;l&&p&&P.push(E=>{const O=ih(Oe({},E,{defaultTheme:n,themeId:e})),N=Wre(l,O);if(N){const H={};return Object.entries(N).forEach(([K,Y])=>{H[K]=typeof Y=="function"?Y(Oe({},E,{theme:O})):Y}),p(E,H)}return null}),l&&!v&&P.push(E=>{const O=ih(Oe({},E,{defaultTheme:n,themeId:e}));return jre(E,$re(l,O),O,l)}),_||P.push(s);const A=P.length-I.length;if(Array.isArray(M)&&A>0){const E=new Array(A).fill("");D=[...M,...E],D.raw=[...M.raw,...E]}else typeof M=="function"&&M.__emotion_real!==M&&(D=E=>M(Oe({},E,{theme:ih(Oe({},E,{defaultTheme:n,themeId:e}))})));const T=S(D,...P);return o.muiName&&(T.muiName=o.muiName),T};return S.withConfig&&(w.withConfig=S.withConfig),w}}function Zre(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:EN(e.components[n].defaultProps,r)}function Qre({props:t,name:e,defaultTheme:n,themeId:r}){let i=r1(n);return r&&(i=i[r]||i),Zre({theme:i,name:e,props:t})}function WE(t,e=0,n=1){return Math.min(Math.max(e,t),n)}function Jre(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function Tu(t){if(t.type)return t;if(t.charAt(0)==="#")return Tu(Jre(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(If(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(If(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function i1(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function eie(t){t=Tu(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(u,d=(u+n/30)%12)=>i-s*Math.max(Math.min(d-3,9-d,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),i1({type:a,values:l})}function bI(t){t=Tu(t);let e=t.type==="hsl"||t.type==="hsla"?Tu(eie(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function tie(t,e){const n=bI(t),r=bI(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function tf(t,e){return t=Tu(t),e=WE(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,i1(t)}function JN(t,e){if(t=Tu(t),e=WE(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return i1(t)}function eF(t,e){if(t=Tu(t),e=WE(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return i1(t)}const nie=R.createContext(null),tF=nie;function nF(){return R.useContext(tF)}const rie=typeof Symbol=="function"&&Symbol.for,iie=rie?Symbol.for("mui.nested"):"__THEME_NESTED__";function sie(t,e){return typeof e=="function"?e(t):Oe({},t,e)}function oie(t){const{children:e,theme:n}=t,r=nF(),i=R.useMemo(()=>{const s=r===null?n:sie(r,n);return s!=null&&(s[iie]=r!==null),s},[n,r]);return Ie.jsx(tF.Provider,{value:i,children:e})}const MI={};function EI(t,e,n,r=!1){return R.useMemo(()=>{const i=t&&e[t]||e;if(typeof n=="function"){const s=n(i),o=t?Oe({},e,{[t]:s}):s;return r?()=>o:o}return t?Oe({},e,{[t]:n}):Oe({},e,n)},[t,e,n,r])}function aie(t){const{children:e,theme:n,themeId:r}=t,i=YN(MI),s=nF()||MI,o=EI(r,i,n),a=EI(r,s,n,!0);return Ie.jsx(oie,{theme:a,children:Ie.jsx(Xy.Provider,{value:o,children:e})})}function lie(t,e){return Oe({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const uie=["mode","contrastThreshold","tonalOffset"],TI={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:bp.white,default:bp.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Z_={text:{primary:bp.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:bp.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function PI(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=eF(t.main,i):e==="dark"&&(t.dark=JN(t.main,s)))}function cie(t="light"){return t==="dark"?{main:Dc[200],light:Dc[50],dark:Dc[400]}:{main:Dc[700],light:Dc[400],dark:Dc[800]}}function fie(t="light"){return t==="dark"?{main:Ic[200],light:Ic[50],dark:Ic[400]}:{main:Ic[500],light:Ic[300],dark:Ic[700]}}function die(t="light"){return t==="dark"?{main:Rc[500],light:Rc[300],dark:Rc[700]}:{main:Rc[700],light:Rc[400],dark:Rc[800]}}function hie(t="light"){return t==="dark"?{main:Wl[400],light:Wl[300],dark:Wl[700]}:{main:Wl[700],light:Wl[500],dark:Wl[900]}}function pie(t="light"){return t==="dark"?{main:Lc[400],light:Lc[300],dark:Lc[700]}:{main:Lc[800],light:Lc[500],dark:Lc[900]}}function mie(t="light"){return t==="dark"?{main:nh[400],light:nh[300],dark:nh[700]}:{main:"#ed6c02",light:nh[500],dark:nh[900]}}function gie(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=tr(t,uie),s=t.primary||cie(e),o=t.secondary||fie(e),a=t.error||die(e),l=t.info||hie(e),u=t.success||pie(e),d=t.warning||mie(e);function h(_){return tie(_,Z_.text.primary)>=n?Z_.text.primary:TI.text.primary}const p=({color:_,name:x,mainShade:m=500,lightShade:S=300,darkShade:w=700})=>{if(_=Oe({},_),!_.main&&_[m]&&(_.main=_[m]),!_.hasOwnProperty("main"))throw new Error(If(11,x?` (${x})`:"",m));if(typeof _.main!="string")throw new Error(If(12,x?` (${x})`:"",JSON.stringify(_.main)));return PI(_,"light",S,r),PI(_,"dark",w,r),_.contrastText||(_.contrastText=h(_.main)),_},g={dark:Z_,light:TI};return na(Oe({common:Oe({},bp),mode:e,primary:p({color:s,name:"primary"}),secondary:p({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:p({color:a,name:"error"}),warning:p({color:d,name:"warning"}),info:p({color:l,name:"info"}),success:p({color:u,name:"success"}),grey:bte,contrastThreshold:n,getContrastText:h,augmentColor:p,tonalOffset:r},g[e]),i)}const vie=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function yie(t){return Math.round(t*1e5)/1e5}const CI={textTransform:"uppercase"},AI='"Roboto", "Helvetica", "Arial", sans-serif';function xie(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=AI,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:u=16,allVariants:d,pxToRem:h}=n,p=tr(n,vie),g=i/14,v=h||(m=>`${m/u*g}rem`),_=(m,S,w,M,I)=>Oe({fontFamily:r,fontWeight:m,fontSize:v(S),lineHeight:w},r===AI?{letterSpacing:`${yie(M/S)}em`}:{},I,d),x={h1:_(s,96,1.167,-1.5),h2:_(s,60,1.2,-.5),h3:_(o,48,1.167,0),h4:_(o,34,1.235,.25),h5:_(o,24,1.334,0),h6:_(a,20,1.6,.15),subtitle1:_(o,16,1.75,.15),subtitle2:_(a,14,1.57,.1),body1:_(o,16,1.5,.15),body2:_(o,14,1.43,.15),button:_(a,14,1.75,.4,CI),caption:_(o,12,1.66,.4),overline:_(o,12,2.66,1,CI),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return na(Oe({htmlFontSize:u,pxToRem:v,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},x),p,{clone:!1})}const _ie=.2,Sie=.14,wie=.12;function wn(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${_ie})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Sie})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${wie})`].join(",")}const bie=["none",wn(0,2,1,-1,0,1,1,0,0,1,3,0),wn(0,3,1,-2,0,2,2,0,0,1,5,0),wn(0,3,3,-2,0,3,4,0,0,1,8,0),wn(0,2,4,-1,0,4,5,0,0,1,10,0),wn(0,3,5,-1,0,5,8,0,0,1,14,0),wn(0,3,5,-1,0,6,10,0,0,1,18,0),wn(0,4,5,-2,0,7,10,1,0,2,16,1),wn(0,5,5,-3,0,8,10,1,0,3,14,2),wn(0,5,6,-3,0,9,12,1,0,3,16,2),wn(0,6,6,-3,0,10,14,1,0,4,18,3),wn(0,6,7,-4,0,11,15,1,0,4,20,3),wn(0,7,8,-4,0,12,17,2,0,5,22,4),wn(0,7,8,-4,0,13,19,2,0,5,24,4),wn(0,7,9,-4,0,14,21,2,0,5,26,4),wn(0,8,9,-5,0,15,22,2,0,6,28,5),wn(0,8,10,-5,0,16,24,2,0,6,30,5),wn(0,8,11,-5,0,17,26,2,0,6,32,5),wn(0,9,11,-5,0,18,28,2,0,7,34,6),wn(0,9,12,-6,0,19,29,2,0,7,36,6),wn(0,10,13,-6,0,20,31,3,0,8,38,7),wn(0,10,13,-6,0,21,33,3,0,8,40,7),wn(0,10,14,-6,0,22,35,3,0,8,42,7),wn(0,11,14,-7,0,23,36,3,0,9,44,8),wn(0,11,15,-7,0,24,38,3,0,9,46,8)],Mie=bie,Eie=["duration","easing","delay"],Tie={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Pie={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function RI(t){return`${Math.round(t)}ms`}function Cie(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function Aie(t){const e=Oe({},Tie,t.easing),n=Oe({},Pie,t.duration);return Oe({getAutoHeightDuration:Cie,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return tr(s,Eie),(Array.isArray(i)?i:[i]).map(u=>`${u} ${typeof o=="string"?o:RI(o)} ${a} ${typeof l=="string"?l:RI(l)}`).join(",")}},t,{easing:e,duration:n})}const Rie={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Iie=Rie,Die=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function $E(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=tr(t,Die);if(t.vars)throw new Error(If(18));const a=gie(r),l=GE(t);let u=na(l,{mixins:lie(l.breakpoints,n),palette:a,shadows:Mie.slice(),typography:xie(a,s),transitions:Aie(i),zIndex:Oe({},Iie)});return u=na(u,o),u=e.reduce((d,h)=>na(d,h),u),u.unstable_sxConfig=Oe({},t1,o==null?void 0:o.unstable_sxConfig),u.unstable_sx=function(h){return n1({sx:h,theme:this})},u}const Lie=$E(),s1=Lie;function rF(){const t=r1(s1);return t[Eu]||t}function va({props:t,name:e}){return Qre({props:t,name:e,defaultTheme:s1,themeId:Eu})}const Oie=t=>Qv(t)&&t!=="classes",kie=qre({themeId:Eu,defaultTheme:s1,rootShouldForwardProp:Oie}),bs=kie,Uie=["theme"];function Nie(t){let{theme:e}=t,n=tr(t,Uie);const r=e[Eu];return Ie.jsx(aie,Oe({},n,{themeId:r?Eu:void 0,theme:r||e}))}const Fie=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)},II=Fie;function mb(t,e){return mb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mb(t,e)}function zie(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,mb(t,e)}const DI=Z.createContext(null);function Bie(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jE(t,e){var n=function(s){return e&&R.isValidElement(s)?e(s):s},r=Object.create(null);return t&&R.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function Hie(t,e){t=t||{},e=e||{};function n(d){return d in e?e[d]:t[d]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var u=r[l][o];a[r[l][o]]=n(u)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function ru(t,e,n){return n[e]!=null?n[e]:t.props[e]}function Vie(t,e){return jE(t.children,function(n){return R.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:ru(n,"appear",t),enter:ru(n,"enter",t),exit:ru(n,"exit",t)})})}function Gie(t,e,n){var r=jE(t.children),i=Hie(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(R.isValidElement(o)){var a=s in e,l=s in r,u=e[s],d=R.isValidElement(u)&&!u.props.in;l&&(!a||d)?i[s]=R.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:ru(o,"exit",t),enter:ru(o,"enter",t)}):!l&&a&&!d?i[s]=R.cloneElement(o,{in:!1}):l&&a&&R.isValidElement(u)&&(i[s]=R.cloneElement(o,{onExited:n.bind(null,o),in:u.props.in,exit:ru(o,"exit",t),enter:ru(o,"enter",t)}))}}),i}var Wie=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},$ie={component:"div",childFactory:function(e){return e}},XE=function(t){zie(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(Bie(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?Vie(i,a):Gie(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=jE(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=Oe({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=tr(i,["component","childFactory"]),l=this.state.contextValue,u=Wie(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Z.createElement(DI.Provider,{value:l},u):Z.createElement(DI.Provider,{value:l},Z.createElement(s,a,u))},e}(Z.Component);XE.propTypes={};XE.defaultProps=$ie;const jie=XE;function Xie(t){return gl("MuiPaper",t)}vl("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const Kie=["className","component","elevation","square","variant"],Yie=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return Fu(s,Xie,i)},qie=bs("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return Oe({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&Oe({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${tf("#fff",II(e.elevation))}, ${tf("#fff",II(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),Zie=R.forwardRef(function(e,n){const r=va({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,u=tr(r,Kie),d=Oe({},r,{component:s,elevation:o,square:a,variant:l}),h=Yie(d);return Ie.jsx(qie,Oe({as:s,ownerState:d,className:Ar(h.root,i),ref:n},u))}),Qie=Zie;function Jie(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:u}=t,[d,h]=R.useState(!1),p=Ar(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),g={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},v=Ar(n.child,d&&n.childLeaving,r&&n.childPulsate);return!a&&!d&&h(!0),R.useEffect(()=>{if(!a&&l!=null){const _=setTimeout(l,u);return()=>{clearTimeout(_)}}},[l,a,u]),Ie.jsx("span",{className:p,style:g,children:Ie.jsx("span",{className:v})})}const ese=vl("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),as=ese,tse=["center","classes","className"];let o1=t=>t,LI,OI,kI,UI;const gb=550,nse=80,rse=td(LI||(LI=o1`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),ise=td(OI||(OI=o1`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),sse=td(kI||(kI=o1`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),ose=bs("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ase=bs(Jie,{name:"MuiTouchRipple",slot:"Ripple"})(UI||(UI=o1`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),as.rippleVisible,rse,gb,({theme:t})=>t.transitions.easing.easeInOut,as.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,as.child,as.childLeaving,ise,gb,({theme:t})=>t.transitions.easing.easeInOut,as.childPulsate,sse,({theme:t})=>t.transitions.easing.easeInOut),lse=R.forwardRef(function(e,n){const r=va({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=tr(r,tse),[l,u]=R.useState([]),d=R.useRef(0),h=R.useRef(null);R.useEffect(()=>{h.current&&(h.current(),h.current=null)},[l]);const p=R.useRef(!1),g=R.useRef(0),v=R.useRef(null),_=R.useRef(null);R.useEffect(()=>()=>{g.current&&clearTimeout(g.current)},[]);const x=R.useCallback(M=>{const{pulsate:I,rippleX:P,rippleY:D,rippleSize:A,cb:T}=M;u(E=>[...E,Ie.jsx(ase,{classes:{ripple:Ar(s.ripple,as.ripple),rippleVisible:Ar(s.rippleVisible,as.rippleVisible),ripplePulsate:Ar(s.ripplePulsate,as.ripplePulsate),child:Ar(s.child,as.child),childLeaving:Ar(s.childLeaving,as.childLeaving),childPulsate:Ar(s.childPulsate,as.childPulsate)},timeout:gb,pulsate:I,rippleX:P,rippleY:D,rippleSize:A},d.current)]),d.current+=1,h.current=T},[s]),m=R.useCallback((M={},I={},P=()=>{})=>{const{pulsate:D=!1,center:A=i||I.pulsate,fakeElement:T=!1}=I;if((M==null?void 0:M.type)==="mousedown"&&p.current){p.current=!1;return}(M==null?void 0:M.type)==="touchstart"&&(p.current=!0);const E=T?null:_.current,O=E?E.getBoundingClientRect():{width:0,height:0,left:0,top:0};let N,H,K;if(A||M===void 0||M.clientX===0&&M.clientY===0||!M.clientX&&!M.touches)N=Math.round(O.width/2),H=Math.round(O.height/2);else{const{clientX:Y,clientY:Q}=M.touches&&M.touches.length>0?M.touches[0]:M;N=Math.round(Y-O.left),H=Math.round(Q-O.top)}if(A)K=Math.sqrt((2*O.width**2+O.height**2)/3),K%2===0&&(K+=1);else{const Y=Math.max(Math.abs((E?E.clientWidth:0)-N),N)*2+2,Q=Math.max(Math.abs((E?E.clientHeight:0)-H),H)*2+2;K=Math.sqrt(Y**2+Q**2)}M!=null&&M.touches?v.current===null&&(v.current=()=>{x({pulsate:D,rippleX:N,rippleY:H,rippleSize:K,cb:P})},g.current=setTimeout(()=>{v.current&&(v.current(),v.current=null)},nse)):x({pulsate:D,rippleX:N,rippleY:H,rippleSize:K,cb:P})},[i,x]),S=R.useCallback(()=>{m({},{pulsate:!0})},[m]),w=R.useCallback((M,I)=>{if(clearTimeout(g.current),(M==null?void 0:M.type)==="touchend"&&v.current){v.current(),v.current=null,g.current=setTimeout(()=>{w(M,I)});return}v.current=null,u(P=>P.length>0?P.slice(1):P),h.current=I},[]);return R.useImperativeHandle(n,()=>({pulsate:S,start:m,stop:w}),[S,m,w]),Ie.jsx(ose,Oe({className:Ar(as.root,s.root,o),ref:_},a,{children:Ie.jsx(jie,{component:null,exit:!0,children:l})}))}),use=lse;function cse(t){return gl("MuiButtonBase",t)}const fse=vl("MuiButtonBase",["root","disabled","focusVisible"]),dse=fse,hse=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],pse=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=Fu({root:["root",e&&"disabled",n&&"focusVisible"]},cse,i);return n&&r&&(o.root+=` ${r}`),o},mse=bs("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${dse.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),gse=R.forwardRef(function(e,n){const r=va({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:u=!1,disableRipple:d=!1,disableTouchRipple:h=!1,focusRipple:p=!1,LinkComponent:g="a",onBlur:v,onClick:_,onContextMenu:x,onDragLeave:m,onFocus:S,onFocusVisible:w,onKeyDown:M,onKeyUp:I,onMouseDown:P,onMouseLeave:D,onMouseUp:A,onTouchEnd:T,onTouchMove:E,onTouchStart:O,tabIndex:N=0,TouchRippleProps:H,touchRippleRef:K,type:Y}=r,Q=tr(r,hse),ee=R.useRef(null),F=R.useRef(null),j=lI(F,K),{isFocusVisibleRef:V,onFocus:ce,onBlur:ae,ref:fe}=Lte(),[de,De]=R.useState(!1);u&&de&&De(!1),R.useImperativeHandle(i,()=>({focusVisible:()=>{De(!0),ee.current.focus()}}),[]);const[Ee,J]=R.useState(!1);R.useEffect(()=>{J(!0)},[]);const ve=Ee&&!d&&!u;R.useEffect(()=>{de&&p&&!d&&Ee&&F.current.pulsate()},[d,p,de,Ee]);function U(Pe,Se,Ke=h){return _v(te=>(Se&&Se(te),!Ke&&F.current&&F.current[Pe](te),!0))}const z=U("start",P),W=U("stop",x),ne=U("stop",m),q=U("stop",A),se=U("stop",Pe=>{de&&Pe.preventDefault(),D&&D(Pe)}),Ce=U("start",O),Le=U("stop",T),He=U("stop",E),We=U("stop",Pe=>{ae(Pe),V.current===!1&&De(!1),v&&v(Pe)},!1),Ge=_v(Pe=>{ee.current||(ee.current=Pe.currentTarget),ce(Pe),V.current===!0&&(De(!0),w&&w(Pe)),S&&S(Pe)}),je=()=>{const Pe=ee.current;return l&&l!=="button"&&!(Pe.tagName==="A"&&Pe.href)},Je=R.useRef(!1),G=_v(Pe=>{p&&!Je.current&&de&&F.current&&Pe.key===" "&&(Je.current=!0,F.current.stop(Pe,()=>{F.current.start(Pe)})),Pe.target===Pe.currentTarget&&je()&&Pe.key===" "&&Pe.preventDefault(),M&&M(Pe),Pe.target===Pe.currentTarget&&je()&&Pe.key==="Enter"&&!u&&(Pe.preventDefault(),_&&_(Pe))}),k=_v(Pe=>{p&&Pe.key===" "&&F.current&&de&&!Pe.defaultPrevented&&(Je.current=!1,F.current.stop(Pe,()=>{F.current.pulsate(Pe)})),I&&I(Pe),_&&Pe.target===Pe.currentTarget&&je()&&Pe.key===" "&&!Pe.defaultPrevented&&_(Pe)});let re=l;re==="button"&&(Q.href||Q.to)&&(re=g);const be={};re==="button"?(be.type=Y===void 0?"button":Y,be.disabled=u):(!Q.href&&!Q.to&&(be.role="button"),u&&(be["aria-disabled"]=u));const Ae=lI(n,fe,ee),Ue=Oe({},r,{centerRipple:s,component:l,disabled:u,disableRipple:d,disableTouchRipple:h,focusRipple:p,tabIndex:N,focusVisible:de}),tt=pse(Ue);return Ie.jsxs(mse,Oe({as:re,className:Ar(tt.root,a),ownerState:Ue,onBlur:We,onClick:_,onContextMenu:W,onFocus:Ge,onKeyDown:G,onKeyUp:k,onMouseDown:z,onMouseLeave:se,onMouseUp:q,onDragLeave:ne,onTouchEnd:Le,onTouchMove:He,onTouchStart:Ce,ref:Ae,tabIndex:u?-1:N,type:Y},be,Q,{children:[o,ve?Ie.jsx(use,Oe({ref:j,center:s},H)):null]}))}),vse=gse;function yse(t){return gl("MuiTypography",t)}vl("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const xse=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],_se=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${zn(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Fu(a,yse,o)},Sse=bs("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${zn(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>Oe({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),NI={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},wse={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},bse=t=>wse[t]||t,Mse=R.forwardRef(function(e,n){const r=va({props:e,name:"MuiTypography"}),i=bse(r.color),s=qN(Oe({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:u=!1,noWrap:d=!1,paragraph:h=!1,variant:p="body1",variantMapping:g=NI}=s,v=tr(s,xse),_=Oe({},s,{align:o,color:i,className:a,component:l,gutterBottom:u,noWrap:d,paragraph:h,variant:p,variantMapping:g}),x=l||(h?"p":g[p]||NI[p])||"span",m=_se(_);return Ie.jsx(Sse,Oe({as:x,ref:n,ownerState:_,className:Ar(m.root,a)},v))}),Jv=Mse;function Ese(t){return gl("MuiAppBar",t)}vl("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);const Tse=["className","color","enableColorOnDark","position"],Pse=t=>{const{color:e,position:n,classes:r}=t,i={root:["root",`color${zn(e)}`,`position${zn(n)}`]};return Fu(i,Ese,r)},wv=(t,e)=>t?`${t==null?void 0:t.replace(")","")}, ${e})`:e,Cse=bs(Qie,{name:"MuiAppBar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`position${zn(n.position)}`],e[`color${zn(n.color)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[100]:t.palette.grey[900];return Oe({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},e.position==="fixed"&&{position:"fixed",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},e.position==="absolute"&&{position:"absolute",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="sticky"&&{position:"sticky",zIndex:(t.vars||t).zIndex.appBar,top:0,left:"auto",right:0},e.position==="static"&&{position:"static"},e.position==="relative"&&{position:"relative"},!t.vars&&Oe({},e.color==="default"&&{backgroundColor:n,color:t.palette.getContrastText(n)},e.color&&e.color!=="default"&&e.color!=="inherit"&&e.color!=="transparent"&&{backgroundColor:t.palette[e.color].main,color:t.palette[e.color].contrastText},e.color==="inherit"&&{color:"inherit"},t.palette.mode==="dark"&&!e.enableColorOnDark&&{backgroundColor:null,color:null},e.color==="transparent"&&Oe({backgroundColor:"transparent",color:"inherit"},t.palette.mode==="dark"&&{backgroundImage:"none"})),t.vars&&Oe({},e.color==="default"&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette.AppBar.defaultBg:wv(t.vars.palette.AppBar.darkBg,t.vars.palette.AppBar.defaultBg),"--AppBar-color":e.enableColorOnDark?t.vars.palette.text.primary:wv(t.vars.palette.AppBar.darkColor,t.vars.palette.text.primary)},e.color&&!e.color.match(/^(default|inherit|transparent)$/)&&{"--AppBar-background":e.enableColorOnDark?t.vars.palette[e.color].main:wv(t.vars.palette.AppBar.darkBg,t.vars.palette[e.color].main),"--AppBar-color":e.enableColorOnDark?t.vars.palette[e.color].contrastText:wv(t.vars.palette.AppBar.darkColor,t.vars.palette[e.color].contrastText)},{backgroundColor:"var(--AppBar-background)",color:e.color==="inherit"?"inherit":"var(--AppBar-color)"},e.color==="transparent"&&{backgroundImage:"none",backgroundColor:"transparent",color:"inherit"}))}),Ase=R.forwardRef(function(e,n){const r=va({props:e,name:"MuiAppBar"}),{className:i,color:s="primary",enableColorOnDark:o=!1,position:a="fixed"}=r,l=tr(r,Tse),u=Oe({},r,{color:s,position:a,enableColorOnDark:o}),d=Pse(u);return Ie.jsx(Cse,Oe({square:!0,component:"header",ownerState:u,elevation:4,className:Ar(d.root,i,a==="fixed"&&"mui-fixed"),ref:n},l))}),Rse=Ase;function Ise(t){return Ie.jsx(kre,Oe({},t,{defaultTheme:s1,themeId:Eu}))}const Dse=$E(),Lse=zre({themeId:Eu,defaultTheme:Dse,defaultClassName:"MuiBox-root",generateClassName:TN.generate}),dh=Lse,Ose=(t,e)=>Oe({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},e&&!t.vars&&{colorScheme:t.palette.mode}),kse=t=>Oe({color:(t.vars||t).palette.text.primary},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.default,"@media print":{backgroundColor:(t.vars||t).palette.common.white}}),Use=(t,e=!1)=>{var n;const r={};e&&t.colorSchemes&&Object.entries(t.colorSchemes).forEach(([o,a])=>{var l;r[t.getColorSchemeSelector(o).replace(/\s*&/,"")]={colorScheme:(l=a.palette)==null?void 0:l.mode}});let i=Oe({html:Ose(t,e),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:t.typography.fontWeightBold},body:Oe({margin:0},kse(t),{"&::backdrop":{backgroundColor:(t.vars||t).palette.background.default}})},r);const s=(n=t.components)==null||(n=n.MuiCssBaseline)==null?void 0:n.styleOverrides;return s&&(i=[i,s]),i};function Nse(t){const e=va({props:t,name:"MuiCssBaseline"}),{children:n,enableColorScheme:r=!1}=e;return Ie.jsxs(R.Fragment,{children:[Ie.jsx(Ise,{styles:i=>Use(i,r)}),n]})}function Fse(t){return gl("MuiLinearProgress",t)}vl("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const zse=["className","color","value","valueBuffer","variant"];let nd=t=>t,FI,zI,BI,HI,VI,GI;const vb=4,Bse=td(FI||(FI=nd`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),Hse=td(zI||(zI=nd`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),Vse=td(BI||(BI=nd`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),Gse=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${zn(r)}`,n],dashed:["dashed",`dashedColor${zn(r)}`],bar1:["bar",`barColor${zn(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${zn(r)}`,n==="buffer"&&`color${zn(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return Fu(i,Fse,e)},KE=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?eF(t.palette[e].main,.62):JN(t.palette[e].main,.5),Wse=bs("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${zn(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>Oe({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:KE(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),$se=bs("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${zn(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=KE(e,t.color);return Oe({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},Ky(HI||(HI=nd`
    animation: ${0} 3s infinite linear;
  `),Vse)),jse=bs("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${zn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>Oe({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${vb}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${vb}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&Ky(VI||(VI=nd`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),Bse)),Xse=bs("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${zn(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>Oe({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:KE(e,t.color),transition:`transform .${vb}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&Ky(GI||(GI=nd`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),Hse)),Kse=R.forwardRef(function(e,n){const r=va({props:e,name:"MuiLinearProgress"}),{className:i,color:s="primary",value:o,valueBuffer:a,variant:l="indeterminate"}=r,u=tr(r,zse),d=Oe({},r,{color:s,variant:l}),h=Gse(d),p=rF(),g={},v={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&o!==void 0){g["aria-valuenow"]=Math.round(o),g["aria-valuemin"]=0,g["aria-valuemax"]=100;let _=o-100;p.direction==="rtl"&&(_=-_),v.bar1.transform=`translateX(${_}%)`}if(l==="buffer"&&a!==void 0){let _=(a||0)-100;p.direction==="rtl"&&(_=-_),v.bar2.transform=`translateX(${_}%)`}return Ie.jsxs(Wse,Oe({className:Ar(h.root,i),ownerState:d,role:"progressbar"},g,{ref:n},u,{children:[l==="buffer"?Ie.jsx($se,{className:h.dashed,ownerState:d}):null,Ie.jsx(jse,{className:h.bar1,ownerState:d,style:v.bar1}),l==="determinate"?null:Ie.jsx(Xse,{className:h.bar2,ownerState:d,style:v.bar2})]}))}),Yse=Kse;function qse(t){return gl("MuiToolbar",t)}vl("MuiToolbar",["root","gutters","regular","dense"]);const Zse=["className","component","disableGutters","variant"],Qse=t=>{const{classes:e,disableGutters:n,variant:r}=t;return Fu({root:["root",!n&&"gutters",r]},qse,e)},Jse=bs("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableGutters&&e.gutters,e[n.variant]]}})(({theme:t,ownerState:e})=>Oe({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:t,ownerState:e})=>e.variant==="regular"&&t.mixins.toolbar),eoe=R.forwardRef(function(e,n){const r=va({props:e,name:"MuiToolbar"}),{className:i,component:s="div",disableGutters:o=!1,variant:a="regular"}=r,l=tr(r,Zse),u=Oe({},r,{component:s,disableGutters:o,variant:a}),d=Qse(u);return Ie.jsx(Jse,Oe({as:s,className:Ar(d.root,i),ref:n,ownerState:u},l))}),toe=eoe;function noe(t){return gl("MuiToggleButton",t)}const roe=vl("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge"]),WI=roe,ioe=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],soe=t=>{const{classes:e,fullWidth:n,selected:r,disabled:i,size:s,color:o}=t,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${zn(s)}`,o]};return Fu(a,noe,e)},ooe=bs(vse,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${zn(n.size)}`]]}})(({theme:t,ownerState:e})=>{let n=e.color==="standard"?t.palette.text.primary:t.palette[e.color].main,r;return t.vars&&(n=e.color==="standard"?t.vars.palette.text.primary:t.vars.palette[e.color].main,r=e.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),Oe({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${WI.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:tf(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${WI.selected}`]:{color:n,backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:tf(n,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${r} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:tf(n,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:tf(n,t.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),aoe=R.forwardRef(function(e,n){const r=va({props:e,name:"MuiToggleButton"}),{children:i,className:s,color:o="standard",disabled:a=!1,disableFocusRipple:l=!1,fullWidth:u=!1,onChange:d,onClick:h,selected:p,size:g="medium",value:v}=r,_=tr(r,ioe),x=Oe({},r,{color:o,disabled:a,disableFocusRipple:l,fullWidth:u,size:g}),m=soe(x),S=w=>{h&&(h(w,v),w.defaultPrevented)||d&&d(w,v)};return Ie.jsx(ooe,Oe({className:Ar(m.root,s),disabled:a,focusRipple:!l,ref:n,onClick:S,onChange:d,value:v,ownerState:x,"aria-pressed":p},_,{children:i}))}),$I=aoe;function loe({name:t,action:e}){const n=Jf(i=>i.isCaptions),r=rF();return Ie.jsx(Ie.Fragment,{children:n?Ie.jsx(Pk,{zIndexRange:1,zIndex:1,children:Ie.jsx(dh,{className:"caption",onClick:e,sx:{zIndex:900,color:r.palette.text.secondary,userSelect:"none",fontSize:"10px",cursor:"pointer","&:hover":{color:r.palette.primary.main}},children:t})}):void 0})}function uoe({ring:t}){const e=bu(Pf,t.textures.base),n=bu(Pf,t.textures.alpha),r=new Ys({map:e,side:Wr,color:16777215,transparent:!0,alphaMap:n}),i=new Gf(t.innerRadius/1e3,t.outerRadius/1e3,256);var s=i.attributes.position,o=new B;for(let a=0;a<s.count;a++)o.fromBufferAttribute(s,a),i.attributes.uv.setXY(a,o.length()<(t.outerRadius/1e3+t.innerRadius/1e3)/2?0:1,1);return Ie.jsx("mesh",{geometry:i,material:r,rotation:[Math.PI/2,0,0]})}function coe({diameter:t,base:e}){const n=R.useRef(),r=bu(Pf,e);return ml(()=>n.current.rotation.y+=5e-4),Ie.jsx(Bk,{args:[t/2,64,64],ref:n,children:Ie.jsxs(yN,{color:"red",lighting:"physical",transmission:0,children:[Ie.jsx(Hee,{color:"white"}),Ie.jsx(xN,{map:r}),Ie.jsx(Vee,{color:r,power:5,intensity:10,mode:"softlight"})]})})}function foe({planet:t}){const e=R.useRef(),n=R.useRef(),{camera:r,controls:i}=ln(),{planetDistanceScale:s}=Jf(),o=(u,d)=>{const h=new B,p=new B(0,0,0),g=new B(u.x,u.y,u.z),v=p.distanceTo(g),_=d/v;return h.lerpVectors(g,p,_),h},a=R.useMemo(()=>{const u=Math.random()*Math.PI*2,d=Math.cos(u)*t.distanceFromParent/s,h=0,p=Math.sin(u)*t.distanceFromParent/s;return[d,h,p]},[t.distanceFromParent,s]),l=()=>{i.target.copy(e.current.position),r.position.copy(o(e.current.position,t.diameter/500))};return Ie.jsxs("group",{children:[Ie.jsxs("group",{ref:e,position:a,children:[Ie.jsx(coe,{diameter:t.diameter/1e3,base:t._3d.textures.base}),t.rings?Ie.jsx(uoe,{ring:t.rings}):void 0,Ie.jsx("group",{position:[0,t.diameter/1e3,0],rotation:[0,0,0],ref:n,children:Ie.jsx(loe,{name:t.name,action:l})})]}),Ie.jsx(pte,{radius:t.distanceFromParent/5e5})]})}function doe(){const{isOverview:t}=Jf();return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(aX,{makeDefault:!0,autoRotate:!0,autoRotateSpeed:-.05,enableRotate:!t,enableDamping:!1,enablePan:!1,maxDistance:t?3e4:1e4}),Ie.jsx(A3,{position:[0,200,400],makeDefault:!t,far:1e11}),Ie.jsx(A3,{position:[0,3e4,0],makeDefault:!!t,far:1e11})]})}/**
 * postprocessing v6.31.0 build Sun May 07 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var zu="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",hoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,bv=class extends Ot{constructor(t=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:t?"2":"1"},uniforms:{inputBuffer:new he(null),cocBuffer:new he(null),texelSize:new he(new ue),kernel64:new he(null),kernel16:new he(null),scale:new he(1)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:hoe,vertexShader:zu}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set cocBuffer(t){this.uniforms.cocBuffer.value=t}setCoCBuffer(t){this.uniforms.cocBuffer.value=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(t){return this.scale}setScale(t){this.scale=t}generateKernel(){const t=2.39996323,e=new Float64Array(128),n=new Float64Array(32);let r=0,i=0;for(let s=0,o=Math.sqrt(80);s<80;++s){const a=s*t,l=Math.sqrt(s)/o,u=l*Math.cos(a),d=l*Math.sin(a);s%5===0?(n[i++]=u,n[i++]=d):(e[r++]=u,e[r++]=d)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=n}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},iF="",Qt="srgb",Lf="srgb-linear",poe=Number(Au.replace(/\D+/g,"")),YE=poe>=152,sF=new Map([[Lp,Lf],[ps,Qt]]),moe=new Map([[Lf,Lp],[Qt,ps]]);function fa(t){return t===null?null:YE?t.outputColorSpace:sF.get(t.outputEncoding)}function lr(t,e){t!==null&&(YE?t.colorSpace=e:t.encoding=moe.get(e))}function Q_(t,e){t===null||e===null||(YE?e.colorSpace=t.colorSpace:e.encoding=t.encoding)}function nf(t,e,n){return t*(e-n)-e}function iu(t,e,n){return Math.min(Math.max((t+e)/(e-n),0),1)}var goe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,voe=class extends Ot{constructor(t){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new he(null),focusDistance:new he(0),focusRange:new he(0),cameraNear:new he(.3),cameraFar:new he(1e3)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:goe,vertexShader:zu}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(t)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=_r){this.depthBuffer=t,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(t){this.uniforms.focusDistance.value=t}get worldFocusDistance(){return-nf(this.focusDistance,this.near,this.far)}set worldFocusDistance(t){this.focusDistance=iu(-t,this.near,this.far)}getFocusDistance(t){this.uniforms.focusDistance.value=t}setFocusDistance(t){this.uniforms.focusDistance.value=t}get focalLength(){return this.focusRange}set focalLength(t){this.focusRange=t}get focusRange(){return this.uniforms.focusRange.value}set focusRange(t){this.uniforms.focusRange.value=t}get worldFocusRange(){return-nf(this.focusRange,this.near,this.far)}set worldFocusRange(t){this.focusRange=iu(-t,this.near,this.far)}getFocalLength(t){return this.focusRange}setFocalLength(t){this.focusRange=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof jt?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},gt={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},rf={RED:0,GREEN:1,BLUE:2,ALPHA:3},hh={FULL:0,SINGLE:1},kh={DEFAULT:0,KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},ms={NONE:0,DEPTH:1,CONVOLUTION:2},Vt={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Kl={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},rd={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},yoe={SCALE_UP:"lut.scaleup"},Uh={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},xoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <encodings_fragment>
}`,_oe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Soe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],woe=class extends Ot{constructor(t=new bt){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new he(null),texelSize:new he(new bt),scale:new he(1),kernel:new he(0)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:xoe,vertexShader:_oe}),this.setTexelSize(t.x,t.y),this.kernelSize=rd.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return Soe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,r=1/e;this.uniforms.texelSize.value.set(n,r,n*.5,r*.5)}},boe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <encodings_fragment>
#include <dithering_fragment>
}`,oF=class extends Ot{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new he(null),opacity:new he(1)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:boe,vertexShader:zu})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}getOpacity(t){return this.uniforms.opacity.value}setOpacity(t){this.uniforms.opacity.value=t}},Moe=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,Eoe=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,Toe=class extends Ot{constructor(t=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new he(null),cameraNear:new he(.3),cameraFar:new he(1e3)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Moe,vertexShader:Eoe}),this.depthBuffer=t,this.depthPacking=Eo,this.copyCameraSettings(e)}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Eo){this.depthBuffer=t,this.depthPacking=e}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof jt?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Poe=`#include <packing>
varying vec2 vUv;
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
#if INPUT_DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if INPUT_DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
void main(){
#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING
gl_FragColor=texture2D(depthBuffer,vUv);
#else
float depth=readDepth(vUv);
#if OUTPUT_DEPTH_PACKING == 3201
gl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);
#else
gl_FragColor=vec4(vec3(depth),1.0);
#endif
#endif
}`,Coe=`varying vec2 vUv;
#if DEPTH_COPY_MODE == 1
uniform vec2 texelPosition;
#endif
void main(){
#if DEPTH_COPY_MODE == 1
vUv=texelPosition;
#else
vUv=position.xy*0.5+0.5;
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,Aoe=class extends Ot{constructor(){super({name:"DepthCopyMaterial",defines:{INPUT_DEPTH_PACKING:"0",OUTPUT_DEPTH_PACKING:"0",DEPTH_COPY_MODE:"0"},uniforms:{depthBuffer:new he(null),texelPosition:new he(new ue)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Poe,vertexShader:Coe}),this.depthCopyMode=hh.FULL}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set inputDepthPacking(t){this.defines.INPUT_DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}get outputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}set outputDepthPacking(t){this.defines.OUTPUT_DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=_r){this.depthBuffer=t,this.inputDepthPacking=e}getInputDepthPacking(){return Number(this.defines.INPUT_DEPTH_PACKING)}setInputDepthPacking(t){this.defines.INPUT_DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}getOutputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}setOutputDepthPacking(t){this.defines.OUTPUT_DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}get texelPosition(){return this.uniforms.texelPosition.value}getTexelPosition(){return this.uniforms.texelPosition.value}setTexelPosition(t){this.uniforms.texelPosition.value=t}get mode(){return this.depthCopyMode}set mode(t){this.depthCopyMode=t,this.defines.DEPTH_COPY_MODE=t.toFixed(0),this.needsUpdate=!0}getMode(){return this.mode}setMode(t){this.mode=t}},Roe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,Ioe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",Doe=class extends Ot{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new he(null),normalBuffer:new he(null),texelSize:new he(new ue)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Roe,vertexShader:Ioe})}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=_r){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,t!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Loe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;
#else
uniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;
#endif
uniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}varying vec2 vUv;void main(){vec2 depth;
#if DEPTH_PACKING_0 == 3201
depth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));
#else
depth.x=texture2D(depthBuffer0,vUv).r;
#endif
#if DEPTH_PACKING_1 == 3201
depth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));
#else
depth.y=texture2D(depthBuffer1,vUv).r;
#endif
bool isMaxDepth=(depth.x==1.0);
#ifdef PERSPECTIVE_CAMERA
depth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);
#endif
#if DEPTH_TEST_STRATEGY == 0
bool keep=depthTest(depth.x,depth.y);
#elif DEPTH_TEST_STRATEGY == 1
bool keep=isMaxDepth||depthTest(depth.x,depth.y);
#else
bool keep=!isMaxDepth&&depthTest(depth.x,depth.y);
#endif
if(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}`,aF=class extends Ot{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:kh.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new he(null),depthBuffer0:new he(null),depthBuffer1:new he(null),cameraNearFar:new he(new ue(1,1))},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Loe,vertexShader:zu}),this.depthMode=T0}set depthBuffer0(t){this.uniforms.depthBuffer0.value=t}set depthPacking0(t){this.defines.DEPTH_PACKING_0=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(t,e=_r){this.depthBuffer0=t,this.depthPacking0=e}set depthBuffer1(t){this.uniforms.depthBuffer1.value=t}set depthPacking1(t){this.defines.DEPTH_PACKING_1=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(t,e=_r){this.depthBuffer1=t,this.depthPacking1=e}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(t){this.defines.DEPTH_TEST_STRATEGY=t.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(t){this.maxDepthStrategy=t?kh.KEEP_MAX_DEPTH:kh.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(t){this.maxDepthStrategy=t}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(t){this.defines.DEPTH_EPSILON=t.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(t){this.epsilon=t}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(t){let e;switch(t){case gM:e="false";break;case vM:e="true";break;case np:e="abs(d1 - d0) <= DEPTH_EPSILON";break;case ly:e="abs(d1 - d0) > DEPTH_EPSILON";break;case T0:e="d0 > d1";break;case tp:e="d0 >= d1";break;case yM:e="d0 <= d1";break;case xM:default:e="d0 < d1";break}this.defines.DEPTH_MODE=t.toFixed(0),this.defines["depthTest(d0, d1)"]=e,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(t){this.depthMode=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNearFar.value.set(t.near,t.far),t instanceof jt?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Ooe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <encodings_fragment>
}`,koe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",Uoe=class extends Ot{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new he(null),texelSize:new he(new ue)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Ooe,vertexShader:koe})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Noe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <encodings_fragment>
#endif
#include <dithering_fragment>
}`,Foe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",zoe=class extends Ot{constructor(t,e,n,r,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Au.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new he(null),depthBuffer:new he(null),resolution:new he(new ue),texelSize:new he(new ue),cameraNear:new he(.3),cameraFar:new he(1e3),aspect:new he(1),time:new he(0)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(r)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=_r){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=Noe.replace(Vt.FRAGMENT_HEAD,t.get(Vt.FRAGMENT_HEAD)||"").replace(Vt.FRAGMENT_MAIN_UV,t.get(Vt.FRAGMENT_MAIN_UV)||"").replace(Vt.FRAGMENT_MAIN_IMAGE,t.get(Vt.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=Foe.replace(Vt.VERTEX_HEAD,t.get(Vt.VERTEX_HEAD)||"").replace(Vt.VERTEX_MAIN_SUPPORT,t.get(Vt.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof jt?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return Vt}},Boe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);
#include <dithering_fragment>
}`,Hoe=class extends Ot{constructor(t){super({name:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new he(null),lightPosition:new he(t),density:new he(1),decay:new he(1),weight:new he(1),exposure:new he(1),clampMax:new he(1)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Boe,vertexShader:zu})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get lightPosition(){return this.uniforms.lightPosition.value}getLightPosition(){return this.uniforms.lightPosition.value}setLightPosition(t){this.uniforms.lightPosition.value=t}get density(){return this.uniforms.density.value}set density(t){this.uniforms.density.value=t}getDensity(){return this.uniforms.density.value}setDensity(t){this.uniforms.density.value=t}get decay(){return this.uniforms.decay.value}set decay(t){this.uniforms.decay.value=t}getDecay(){return this.uniforms.decay.value}setDecay(t){this.uniforms.decay.value=t}get weight(){return this.uniforms.weight.value}set weight(t){this.uniforms.weight.value=t}getWeight(){return this.uniforms.weight.value}setWeight(t){this.uniforms.weight.value=t}get exposure(){return this.uniforms.exposure.value}set exposure(t){this.uniforms.exposure.value=t}getExposure(){return this.uniforms.exposure.value}setExposure(t){this.uniforms.exposure.value=t}get maxIntensity(){return this.uniforms.clampMax.value}set maxIntensity(t){this.uniforms.clampMax.value=t}getMaxIntensity(){return this.uniforms.clampMax.value}setMaxIntensity(t){this.uniforms.clampMax.value=t}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(t){const e=Math.floor(t);this.defines.SAMPLES_INT=e.toFixed(0),this.defines.SAMPLES_FLOAT=e.toFixed(1),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(t){this.samples=t}},Voe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,Goe=class extends Ot{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Au.replace(/\D+/g,"")},uniforms:{inputBuffer:new he(null),threshold:new he(0),smoothing:new he(1),range:new he(null)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Voe,vertexShader:zu}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},Woe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,$oe=class extends Ot{constructor(t=null){super({name:"MaskMaterial",uniforms:{maskTexture:new he(t),inputBuffer:new he(null),strength:new he(1)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Woe,vertexShader:zu}),this.colorChannel=rf.RED,this.maskFunction=Uh.DISCARD}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set maskTexture(t){this.uniforms.maskTexture.value=t,delete this.defines.MASK_PRECISION_HIGH,t.type!==pn&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(t){this.maskTexture=t}set colorChannel(t){this.defines.COLOR_CHANNEL=t.toFixed(0),this.needsUpdate=!0}setColorChannel(t){this.colorChannel=t}set maskFunction(t){this.defines.MASK_FUNCTION=t.toFixed(0),this.needsUpdate=!0}setMaskFunction(t){this.maskFunction=t}get inverted(){return this.defines.INVERTED!==void 0}set inverted(t){this.inverted&&!t?delete this.defines.INVERTED:t&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get strength(){return this.uniforms.strength.value}set strength(t){this.uniforms.strength.value=t}getStrength(){return this.strength}setStrength(t){this.strength=t}},joe="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",Xoe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",Koe=class extends Ot{constructor(t=new ue){super({name:"OutlineMaterial",uniforms:{inputBuffer:new he(null),texelSize:new he(new ue)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:joe,vertexShader:Xoe}),this.uniforms.texelSize.value.set(t.x,t.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},Yoe=`#include <common>
#include <packing>
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
uniform lowp sampler2D normalBuffer;
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
uniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);
#ifdef PERSPECTIVE_CAMERA
float linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearSampleDepth=sampleDepth;
#endif
float proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){
#ifdef NORMAL_DEPTH
vec4 normalDepth=texture2D(normalDepthBuffer,vUv);
#else
vec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));
#endif
float ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);
#ifdef PERSPECTIVE_CAMERA
float linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearDepth=depth;
#endif
if(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);
#ifdef LEGACY_INTENSITY
ao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);
#endif
}gl_FragColor.r=ao;}`,qoe="uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}",Zoe=class extends Ot{constructor(t){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new he(null),normalBuffer:new he(null),normalDepthBuffer:new he(null),noiseTexture:new he(null),inverseProjectionMatrix:new he(new at),projectionMatrix:new he(new at),texelSize:new he(new ue),cameraNearFar:new he(new ue),distanceCutoff:new he(new ue),proximityCutoff:new he(new ue),noiseScale:new he(new ue),minRadiusScale:new he(.33),intensity:new he(1),fade:new he(.01),bias:new he(0)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Yoe,vertexShader:qoe}),this.copyCameraSettings(t),this.resolution=new ue,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(t){this.uniforms.normalDepthBuffer.value=t,t!==null?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(t){this.normalDepthBuffer=t}set normalBuffer(t){this.uniforms.normalBuffer.value=t}setNormalBuffer(t){this.uniforms.normalBuffer.value=t}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=_r){this.depthBuffer=t,this.depthPacking=e}set noiseTexture(t){this.uniforms.noiseTexture.value=t}setNoiseTexture(t){this.uniforms.noiseTexture.value=t}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(t){this.defines.SAMPLES_INT=t.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/t).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(t){this.samples=t}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(t){this.defines.SPIRAL_TURNS=t.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(t){this.rings=t}get intensity(){return this.uniforms.intensity.value}set intensity(t){this.uniforms.intensity.value=t,this.defines.LEGACY_INTENSITY===void 0&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(t){this.uniforms.intensity.value=t}get fade(){return this.uniforms.fade.value}set fade(t){this.uniforms.fade.value=t}getFade(){return this.uniforms.fade.value}setFade(t){this.uniforms.fade.value=t}get bias(){return this.uniforms.bias.value}set bias(t){this.uniforms.bias.value=t}getBias(){return this.uniforms.bias.value}setBias(t){this.uniforms.bias.value=t}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(t){this.uniforms.minRadiusScale.value=t}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(t){this.uniforms.minRadiusScale.value=t}updateRadius(){const t=this.r*this.resolution.height;this.defines.RADIUS=t.toFixed(11),this.defines.RADIUS_SQ=(t*t).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(t){this.r=Math.min(Math.max(t,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(t){this.radius=t}get distanceScaling(){return!0}set distanceScaling(t){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(t){this.distanceScaling=t}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(t){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-nf(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(t){this.distanceThreshold=iu(-t,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(t){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+t,0),1)}get worldDistanceFalloff(){return-nf(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(t){this.distanceFalloff=iu(-t,this.near,this.far)}setDistanceCutoff(t,e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+e,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(t){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-nf(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(t){this.proximityThreshold=iu(-t,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(t){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+t,0),1)}get worldProximityFalloff(){return-nf(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(t){this.proximityFalloff=iu(-t,this.near,this.far)}setProximityCutoff(t,e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+e,0),1))}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNearFar.value.set(t.near,t.far),this.uniforms.projectionMatrix.value.copy(t.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(t.projectionMatrix).invert(),t instanceof jt?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms,r=n.noiseTexture.value;r!==null&&n.noiseScale.value.set(t/r.image.width,e/r.image.height),n.texelSize.value.set(1/t,1/e),this.resolution.set(t,e),this.updateRadius()}},Qoe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <encodings_fragment>
}`,Joe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",eae=class extends Ot{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new he(null),supportBuffer:new he(null),texelSize:new he(new ue),radius:new he(.85)},blending:xn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Qoe,vertexShader:Joe})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},tae=new zf,Oa=null;function nae(){if(Oa===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Oa=new Mt,Oa.setAttribute!==void 0?(Oa.setAttribute("position",new Xt(t,3)),Oa.setAttribute("uv",new Xt(e,2))):(Oa.addAttribute("position",new Xt(t,3)),Oa.addAttribute("uv",new Xt(e,2)))}return Oa}var fr=class{constructor(t="Pass",e=new _u,n=tae){this.name=t,this.renderer=null,this.scene=e,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(t){if(this.rtt===t){const e=this.fullscreenMaterial;e!==null&&(e.needsUpdate=!0),this.rtt=!t}}set mainScene(t){}set mainCamera(t){}setRenderer(t){this.renderer=t}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(t){let e=this.screen;e!==null?e.material=t:(e=new Qn(nae(),t),e.frustumCulled=!1,this.scene===null&&(this.scene=new _u),this.scene.add(e),this.screen=e)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(t){this.fullscreenMaterial=t}getDepthTexture(){return null}setDepthTexture(t,e=_r){}render(t,e,n,r,i){throw new Error("Render method not implemented!")}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Lt||e instanceof er||e instanceof Bn||e instanceof fr)&&this[t].dispose()}}},lF=class extends fr{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new oF,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new Lt(1,1,{minFilter:ot,magFilter:ot,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,r,i){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==pn?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":fa(t)===Qt&&lr(this.renderTarget.texture,Qt))}},rae=class extends fr{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,r,i){const s=t.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},jI=new ze,om=class extends fr{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,r,i){const s=this.overrideClearColor,o=this.overrideClearAlpha,a=t.getClearAlpha(),l=s!==null,u=o>=0;l?(t.getClearColor(jI),t.setClearColor(s,u?o:a)):u&&t.setClearAlpha(o),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),l?t.setClearColor(jI,a):u&&t.setClearAlpha(a)}},ka=-1,Jt=class extends Gi{constructor(t,e=ka,n=ka,r=1){super(),this.resizable=t,this.baseSize=new ue(1,1),this.preferredSize=new ue(e,n),this.target=this.preferredSize,this.s=r,this.effectiveSize=new ue,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,r=this.scale;e.width!==ka?n.width=e.width:e.height!==ka?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*r),e.height!==ka?n.height=e.height:e.width!==ka?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*r)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(ka),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return ka}},J_=!1,XI=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case Wr:n=this.materialsFlatShadedDoubleSide;break;case or:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case Wr:n=this.materialsDoubleSide;break;case or:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof Ot))return t.clone();const e=t.uniforms,n=new Map;for(const i in e){const s=e[i].value;s.isRenderTargetTexture&&(e[i].value=null,n.set(i,s))}const r=t.clone();for(const i of n)e[i[0]].value=i[1],r.uniforms[i[0]].value=i[1];return r}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=Mo;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=or,r}),this.materialsDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.side=Wr,r}),this.materialsFlatShaded=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r}),this.materialsFlatShadedBackSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=or,r}),this.materialsFlatShadedDoubleSide=e.map(n=>{const r=this.cloneMaterial(n);return r.uniforms=Object.assign({},t.uniforms),r.flatShading=!0,r.side=Wr,r})}}render(t,e,n){const r=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,J_){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const s of i)s[0].material=s[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=i}t.shadowMap.enabled=r}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return J_}static set workaroundEnabled(t){J_=t}},id=class extends fr{constructor(t,e,n=null){super("RenderPass",t,e),this.needsSwap=!1,this.clearPass=new om,this.overrideMaterialManager=n===null?null:new XI(n),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get renderToScreen(){return super.renderToScreen}set renderToScreen(t){super.renderToScreen=t,this.clearPass.renderToScreen=t}get overrideMaterial(){const t=this.overrideMaterialManager;return t!==null?t.material:null}set overrideMaterial(t){const e=this.overrideMaterialManager;t!==null?e!==null?e.setMaterial(t):this.overrideMaterialManager=new XI(t):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(t){this.overrideMaterial=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getSelection(){return this.selection}setSelection(t){this.selection=t}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(t){this.skipShadowMapUpdate=t}getClearPass(){return this.clearPass}render(t,e,n,r,i){const s=this.scene,o=this.camera,a=this.selection,l=o.layers.mask,u=s.background,d=t.shadowMap.autoUpdate,h=this.renderToScreen?null:e;a!==null&&o.layers.set(a.getLayer()),this.skipShadowMapUpdate&&(t.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(t,e),t.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(t,s,o):t.render(s,o),o.layers.mask=l,s.background=u,t.shadowMap.autoUpdate=d}},qE=class extends fr{constructor(t,e,{renderTarget:n,resolutionScale:r=1,width:i=Jt.AUTO_SIZE,height:s=Jt.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new id(t,e,new vy({depthPacking:Eo}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const u=l.getClearPass();u.overrideClearColor=new ze(16777215),u.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Lt(1,1,{minFilter:kt,magFilter:kt}),this.renderTarget.texture.name="DepthPass.Target");const d=this.resolution=new Jt(this,o,a,r);d.addEventListener("change",h=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},uF=class extends fr{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=Jt.AUTO_SIZE,height:r=Jt.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("DepthDownsamplingPass");const o=new Doe;o.normalBuffer=t,this.fullscreenMaterial=o,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Lt(1,1,{minFilter:kt,magFilter:kt,depthBuffer:!1,type:Nn}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const a=this.resolution=new Jt(this,i,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=_r){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,r,i){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){const r=t.getContext();if(!(r.getExtension("EXT_color_buffer_float")||r.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},iae=class extends fr{constructor({depthPacking:t=Eo}={}){super("DepthCopyPass");const e=new Aoe;e.outputDepthPacking=t,this.fullscreenMaterial=e,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Lt(1,1,{type:t===Eo?pn:Nn,minFilter:kt,magFilter:kt,depthBuffer:!1}),this.renderTarget.texture.name="DepthCopyPass.Target"}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get depthPacking(){return this.fullscreenMaterial.outputDepthPacking}getDepthPacking(){return this.fullscreenMaterial.outputDepthPacking}setDepthTexture(t,e=_r){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.inputDepthPacking=e}render(t,e,n,r,i){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.renderTarget.setSize(t,e)}},Mv=new Float32Array([255/256/256**3,255/256/256**2,255/256/256,255/256]);function sae(t){return(t[0]*Mv[0]+t[1]*Mv[1]+t[2]*Mv[2]+t[3]*Mv[3])/255}var oae=class extends iae{constructor({depthPacking:t=Eo,mode:e=hh.SINGLE}={}){super({depthPacking:t}),this.name="DepthPickingPass",this.fullscreenMaterial.mode=e,this.pixelBuffer=t===Eo?new Uint8Array(4):new Float32Array(4),this.callback=null}readDepth(t){return this.fullscreenMaterial.texelPosition.set(t.x*.5+.5,t.y*.5+.5),new Promise(e=>{this.callback=e})}render(t,e,n,r,i){const s=this.fullscreenMaterial,o=s.mode;if(o===hh.FULL&&super.render(t),this.callback!==null){const a=this.renderTarget,l=this.pixelBuffer,u=a.texture.type!==Nn;let d=0,h=0;if(o===hh.SINGLE)super.render(t);else{const p=s.texelPosition;d=Math.round(p.x*a.width),h=Math.round(p.y*a.height)}t.readRenderTargetPixels(a,d,h,1,1,l),this.callback(u?sae(l):l[0]),this.callback=null}}setSize(t,e){this.fullscreenMaterial.mode===hh.FULL&&super.setSize(t,e)}};function KI(t,e,n){for(const r of e){const i="$1"+t+r.charAt(0).toUpperCase()+r.slice(1),s=new RegExp("([^\\.])(\\b"+r+"\\b)","g");for(const o of n.entries())o[1]!==null&&n.set(o[0],o[1].replace(s,i))}}function aae(t,e,n){let r=e.getFragmentShader(),i=e.getVertexShader();const s=r!==void 0&&/mainImage/.test(r),o=r!==void 0&&/mainUv/.test(r);if(n.attributes|=e.getAttributes(),r===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(o&&n.attributes&ms.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!o)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const a=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=n.shaderParts;let u=l.get(Vt.FRAGMENT_HEAD)||"",d=l.get(Vt.FRAGMENT_MAIN_UV)||"",h=l.get(Vt.FRAGMENT_MAIN_IMAGE)||"",p=l.get(Vt.VERTEX_HEAD)||"",g=l.get(Vt.VERTEX_MAIN_SUPPORT)||"";const v=new Set,_=new Set;if(o&&(d+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const S=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);g+=`	${t}MainSupport(`,g+=S?`vUv);
`:`);
`;for(const w of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const M of w[1].split(/\s*,\s*/))n.varyings.add(M),v.add(M),_.add(M);for(const w of i.matchAll(a))_.add(w[1])}for(const S of r.matchAll(a))_.add(S[1]);for(const S of e.defines.keys())_.add(S.replace(/\([\w\s,]*\)/g,""));for(const S of e.uniforms.keys())_.add(S);_.delete("while"),_.delete("for"),_.delete("if"),e.uniforms.forEach((S,w)=>n.uniforms.set(t+w.charAt(0).toUpperCase()+w.slice(1),S)),e.defines.forEach((S,w)=>n.defines.set(t+w.charAt(0).toUpperCase()+w.slice(1),S));const x=new Map([["fragment",r],["vertex",i]]);KI(t,_,n.defines),KI(t,_,x),r=x.get("fragment"),i=x.get("vertex");const m=e.blendMode;if(n.blendModes.set(m.blendFunction,m),s){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(h+=e.inputColorSpace===Qt?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==iF?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const S=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${t}MainImage(color0, UV, `,n.attributes&ms.DEPTH&&S.test(r)&&(h+="depth, ",n.readDepth=!0),h+=`color1);
	`;const w=t+"BlendOpacity";n.uniforms.set(w,m.opacity),h+=`color0 = blend${m.blendFunction}(color0, color1, ${w});

	`,u+=`uniform float ${w};

`}if(u+=r+`
`,i!==null&&(p+=i+`
`),l.set(Vt.FRAGMENT_HEAD,u),l.set(Vt.FRAGMENT_MAIN_UV,d),l.set(Vt.FRAGMENT_MAIN_IMAGE,h),l.set(Vt.VERTEX_HEAD,p),l.set(Vt.VERTEX_MAIN_SUPPORT,g),e.extensions!==null)for(const S of e.extensions)n.extensions.add(S)}}var lae=class extends fr{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new zoe(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new gae;let e=0;for(const o of this.effects)if(o.blendMode.blendFunction===gt.DST)t.attributes|=o.getAttributes()&ms.DEPTH;else{if(t.attributes&o.getAttributes()&ms.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${o.name})`);aae("e"+e++,o,t)}let n=t.shaderParts.get(Vt.FRAGMENT_HEAD),r=t.shaderParts.get(Vt.FRAGMENT_MAIN_IMAGE),i=t.shaderParts.get(Vt.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const o of t.blendModes.values())n+=o.getShaderCode().replace(s,`blend${o.blendFunction}`)+`
`;t.attributes&ms.DEPTH?(t.readDepth&&(r=`float depth = readDepth(UV);

	`+r),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===Qt&&(r+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(Vt.FRAGMENT_HEAD,n),t.shaderParts.set(Vt.FRAGMENT_MAIN_IMAGE,r),t.shaderParts.set(Vt.FRAGMENT_MAIN_UV,i);for(const[o,a]of t.shaderParts)a!==null&&t.shaderParts.set(o,a.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=_r){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,r,i){for(const s of this.effects)s.update(t,e,r);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=r*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const r of this.effects)r.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==pn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},a1=class extends fr{constructor({kernelSize:t=rd.MEDIUM,resolutionScale:e=.5,width:n=Jt.AUTO_SIZE,height:r=Jt.AUTO_SIZE,resolutionX:i=n,resolutionY:s=r}={}){super("KawaseBlurPass"),this.renderTargetA=new Lt(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const o=this.resolution=new Jt(this,i,s,e);o.addEventListener("change",a=>this.setSize(o.baseWidth,o.baseHeight)),this._blurMaterial=new woe,this._blurMaterial.kernelSize=t,this.copyMaterial=new oF}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const s=this.scene,o=this.camera,a=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,d=u.kernelSequence;let h=e;this.fullscreenMaterial=u;for(let p=0,g=d.length;p<g;++p){const v=p&1?l:a;u.kernel=d[p],u.inputBuffer=h.texture,t.setRenderTarget(v),t.render(s,o),h=v}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(s,o)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==pn?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):fa(t)===Qt&&(lr(this.renderTargetA.texture,Qt),lr(this.renderTargetB.texture,Qt)))}static get AUTO_SIZE(){return Jt.AUTO_SIZE}},uae=class extends fr{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:r=1,width:i=Jt.AUTO_SIZE,height:s=Jt.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("LuminancePass"),this.fullscreenMaterial=new Goe(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Lt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Jt(this,o,a,r);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,r,i){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==pn&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},cae=class extends fr{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new om(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,r,i){const s=t.getContext(),o=t.state.buffers,a=this.scene,l=this.camera,u=this.clearPass,d=this.inverted?0:1,h=1-d;o.color.setMask(!1),o.depth.setMask(!1),o.color.setLocked(!0),o.depth.setLocked(!0),o.stencil.setTest(!0),o.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.stencil.setFunc(s.ALWAYS,d,4294967295),o.stencil.setClear(h),o.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(t,null):(u.render(t,e),u.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(a,l)):(t.setRenderTarget(e),t.render(a,l),t.setRenderTarget(n),t.render(a,l)),o.color.setLocked(!1),o.depth.setLocked(!1),o.stencil.setLocked(!1),o.stencil.setFunc(s.EQUAL,1,4294967295),o.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),o.stencil.setLocked(!0)}},fae=class extends fr{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Lt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new Uoe,this.upsamplingMaterial=new eae,this.resolution=new ue}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const r=e.clone();r.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(r)}this.upsamplingMipmaps.push(e);for(let n=1,r=t-1;n<r;++n){const i=e.clone();i.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,r,i){const{scene:s,camera:o}=this,{downsamplingMaterial:a,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:d}=this;let h=e;this.fullscreenMaterial=a;for(let p=0,g=u.length;p<g;++p){const v=u[p];a.setSize(h.width,h.height),a.inputBuffer=h.texture,t.setRenderTarget(v),t.render(s,o),h=v}this.fullscreenMaterial=l;for(let p=d.length-1;p>=0;--p){const g=d[p];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=u[p].texture,t.setRenderTarget(g),t.render(s,o),h=g}}setSize(t,e){const n=this.resolution;n.set(t,e);let r=n.width,i=n.height;for(let s=0,o=this.downsamplingMipmaps.length;s<o;++s)r=Math.round(r*.5),i=Math.round(i*.5),this.downsamplingMipmaps[s].setSize(r,i),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(r,i)}initialize(t,e,n){if(n!==void 0){const r=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of r)i.texture.type=n;if(n!==pn)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(fa(t)===Qt)for(const i of r)lr(i.texture,Qt)}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},dae=class extends fr{constructor(t,e,{renderTarget:n,resolutionScale:r=1,width:i=Jt.AUTO_SIZE,height:s=Jt.AUTO_SIZE,resolutionX:o=i,resolutionY:a=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new id(t,e,new YM);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new ze(7829503),u.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new Lt(1,1,{minFilter:kt,magFilter:kt}),this.renderTarget.texture.name="NormalPass.Target");const d=this.resolution=new Jt(this,o,a,r);d.addEventListener("change",h=>this.setSize(d.baseWidth,d.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,r,i){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,s,s)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},Hs=class extends fr{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.input=e}setInput(t){this.input=t}render(t,e,n,r,i){const s=this.fullscreenMaterial.uniforms;e!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=e.texture),t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}initialize(t,e,n){n!==void 0&&n!==pn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},eS=1/1e3,hae=1e3,pae=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*eS}get fixedDelta(){return this._fixedDelta*eS}set fixedDelta(t){this._fixedDelta=t*hae}get elapsed(){return this._elapsed*eS}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},mae=class{constructor(e=null,{depthBuffer:n=!0,stencilBuffer:r=!1,multisampling:i=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(n,r,s,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new lF,this.depthTexture=null,this.passes=[],this.timer=new pae,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const n=this.inputBuffer,r=this.multisampling;r>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):r!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(n.depthBuffer,n.stencilBuffer,n.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const n=e.getSize(new ue),r=e.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===pn&&fa(e)===Qt&&(lr(this.inputBuffer.texture,Qt),lr(this.outputBuffer.texture,Qt),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(n.width,n.height);for(const s of this.passes)s.initialize(e,r,i)}}replaceRenderer(e,n=!0){const r=this.renderer,i=r.domElement.parentNode;return this.setRenderer(e),n&&i!==null&&(i.removeChild(r.domElement),i.appendChild(e.domElement)),r}createDepthTexture(){const e=this.depthTexture=new Up;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=al,e.type=Ja):e.type=Zo,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,n,r,i){const s=this.renderer,o=s===null?new ue:s.getDrawingBufferSize(new ue),a={minFilter:ot,magFilter:ot,stencilBuffer:n,depthBuffer:e,type:r},l=new Lt(o.width,o.height,a);return i>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=i),r===pn&&fa(s)===Qt&&lr(l.texture,Qt),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const n of this.passes)n.mainScene=e}setMainCamera(e){for(const n of this.passes)n.mainCamera=e}addPass(e,n){const r=this.passes,i=this.renderer,s=i.getDrawingBufferSize(new ue),o=i.getContext().getContextAttributes().alpha,a=this.inputBuffer.texture.type;if(e.setRenderer(i),e.setSize(s.width,s.height),e.initialize(i,o,a),this.autoRenderToScreen&&(r.length>0&&(r[r.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),n!==void 0?r.splice(n,0,e):r.push(e),this.autoRenderToScreen&&(r[r.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of r)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const n=this.passes,r=n.indexOf(e);if(r!==-1&&n.splice(r,1).length>0){if(this.depthTexture!==null){const o=(l,u)=>l||u.needsDepthTexture;n.reduce(o,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&r===n.length&&(e.renderToScreen=!1,n.length>0&&(n[n.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const n=this.renderer,r=this.copyPass;let i=this.inputBuffer,s=this.outputBuffer,o=!1,a,l,u;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const d of this.passes)d.enabled&&(d.render(n,i,s,e,o),d.needsSwap&&(o&&(r.renderToScreen=d.renderToScreen,a=n.getContext(),l=n.state.buffers.stencil,l.setFunc(a.NOTEQUAL,1,4294967295),r.render(n,i,s,e,o),l.setFunc(a.EQUAL,1,4294967295)),u=i,i=s,s=u),d instanceof cae?o=!0:d instanceof rae&&(o=!1))}setSize(e,n,r){const i=this.renderer,s=i.getSize(new ue);(e===void 0||n===void 0)&&(e=s.width,n=s.height),(s.width!==e||s.height!==n)&&i.setSize(e,n,r);const o=i.getDrawingBufferSize(new ue);this.inputBuffer.setSize(o.width,o.height),this.outputBuffer.setSize(o.width,o.height);for(const a of this.passes)a.setSize(o.width,o.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},gae=class{constructor(){this.shaderParts=new Map([[Vt.FRAGMENT_HEAD,null],[Vt.FRAGMENT_MAIN_UV,null],[Vt.FRAGMENT_MAIN_IMAGE,null],[Vt.VERTEX_HEAD,null],[Vt.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ms.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Lf}},ZE=class extends Set{constructor(t,e=10){super(),this.l=e,this.exclusive=!1,t!==void 0&&this.set(t)}get layer(){return this.l}set layer(t){const e=this.l;for(const n of this)n.layers.disable(e),n.layers.enable(t);this.l=t}getLayer(){return this.layer}setLayer(t){this.layer=t}isExclusive(){return this.exclusive}setExclusive(t){this.exclusive=t}clear(){const t=this.layer;for(const e of this)e.layers.disable(t);return super.clear()}set(t){this.clear();for(const e of t)this.add(e);return this}indexOf(t){return this.has(t)?0:-1}add(t){return this.exclusive?t.layers.set(this.layer):t.layers.enable(this.layer),super.add(t)}delete(t){return this.has(t)&&t.layers.disable(this.layer),super.delete(t)}toggle(t){let e;return this.has(t)?(this.delete(t),e=!1):(this.add(t),e=!0),e}setVisible(t){for(const e of this)t?e.layers.enable(0):e.layers.disable(0);return this}},vae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",yae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",xae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",_ae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Sae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",wae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",bae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Mae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Eae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",Tae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Pae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",Cae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Aae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Rae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Iae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Dae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Lae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Oae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",kae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Uae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Nae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Fae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",zae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Bae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Hae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Vae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",Gae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Wae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",$ae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",jae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Xae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",Kae="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Yae=new Map([[gt.ADD,vae],[gt.ALPHA,yae],[gt.AVERAGE,xae],[gt.COLOR,_ae],[gt.COLOR_BURN,Sae],[gt.COLOR_DODGE,wae],[gt.DARKEN,bae],[gt.DIFFERENCE,Mae],[gt.DIVIDE,Eae],[gt.DST,null],[gt.EXCLUSION,Tae],[gt.HARD_LIGHT,Pae],[gt.HARD_MIX,Cae],[gt.HUE,Aae],[gt.INVERT,Rae],[gt.INVERT_RGB,Iae],[gt.LIGHTEN,Dae],[gt.LINEAR_BURN,Lae],[gt.LINEAR_DODGE,Oae],[gt.LINEAR_LIGHT,kae],[gt.LUMINOSITY,Uae],[gt.MULTIPLY,Nae],[gt.NEGATION,Fae],[gt.NORMAL,zae],[gt.OVERLAY,Bae],[gt.PIN_LIGHT,Hae],[gt.REFLECT,Vae],[gt.SATURATION,Gae],[gt.SCREEN,Wae],[gt.SOFT_LIGHT,$ae],[gt.SRC,jae],[gt.SUBTRACT,Xae],[gt.VIVID_LIGHT,Kae]]),qae=class extends Gi{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new he(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Yae.get(this.blendFunction)}},Xi=class extends Gi{constructor(t,e,{attributes:n=ms.NONE,blendFunction:r=gt.NORMAL,defines:i=new Map,uniforms:s=new Map,extensions:o=null,vertexShader:a=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=a,this.defines=i,this.uniforms=s,this.extensions=o,this.blendMode=new qae(r),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=Lf,this._outputColorSpace=iF}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=_r){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof Lt||e instanceof er||e instanceof Bn||e instanceof fr)&&this[t].dispose()}}},Zae=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,cF=class extends Xi{constructor({blendFunction:t=gt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,mipmapBlur:r=!1,intensity:i=1,radius:s=.85,levels:o=8,kernelSize:a=rd.LARGE,resolutionScale:l=.5,width:u=Jt.AUTO_SIZE,height:d=Jt.AUTO_SIZE,resolutionX:h=u,resolutionY:p=d}={}){super("BloomEffect",Zae,{blendFunction:t,uniforms:new Map([["map",new he(null)],["intensity",new he(i)]])}),this.renderTarget=new Lt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new a1({kernelSize:a}),this.luminancePass=new uae({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new fae,this.mipmapBlurPass.enabled=r,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=o,this.uniforms.get("map").value=r?this.mipmapBlurPass.texture:this.renderTarget.texture;const g=this.resolution=new Jt(this,h,p,l);g.addEventListener("change",v=>this.setSize(g.baseWidth,g.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const r=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,i.renderTarget):this.blurPass.render(t,i.renderTarget,r)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,r)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,fa(t)===Qt&&lr(this.renderTarget.texture,Qt))}},Qae="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",Jae=class extends Xi{constructor(t){super("ColorAverageEffect",Qae,{blendFunction:t})}},ele=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,tle="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",nle=class extends Xi{constructor({offset:t=new ue(.001,5e-4),radialModulation:e=!1,modulationOffset:n=.15}={}){super("ChromaticAberrationEffect",ele,{vertexShader:tle,attributes:ms.CONVOLUTION,uniforms:new Map([["offset",new he(t)],["modulationOffset",new he(n)]])}),this.radialModulation=e}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(t){t?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(t){this.uniforms.get("modulationOffset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}},rle=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float cocNear=texture2D(nearCoCBuffer,uv).r;cocNear=min(cocNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,cocNear);outputColor=result;}`,ile=class extends Xi{constructor(t,{blendFunction:e,worldFocusDistance:n,worldFocusRange:r,focusDistance:i=0,focalLength:s=.1,focusRange:o=s,bokehScale:a=1,resolutionScale:l=1,width:u=Jt.AUTO_SIZE,height:d=Jt.AUTO_SIZE,resolutionX:h=u,resolutionY:p=d}={}){super("DepthOfFieldEffect",rle,{blendFunction:e,attributes:ms.DEPTH,uniforms:new Map([["nearColorBuffer",new he(null)],["farColorBuffer",new he(null)],["nearCoCBuffer",new he(null)],["scale",new he(1)]])}),this.camera=t,this.renderTarget=new Lt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Hs(new voe(t));const g=this.cocMaterial;g.focusDistance=i,g.focusRange=o,n!==void 0&&(g.worldFocusDistance=n),r!==void 0&&(g.worldFocusRange=r),this.blurPass=new a1({resolutionScale:l,resolutionX:h,resolutionY:p,kernelSize:rd.MEDIUM}),this.maskPass=new Hs(new $oe(this.renderTargetCoC.texture));const v=this.maskPass.fullscreenMaterial;v.maskFunction=Uh.MULTIPLY,v.colorChannel=rf.GREEN,this.bokehNearBasePass=new Hs(new bv(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Hs(new bv(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Hs(new bv(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Hs(new bv(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const _=this.resolution=new Jt(this,h,p,l);_.addEventListener("change",x=>this.setSize(_.baseWidth,_.baseHeight)),this.bokehScale=a}set mainCamera(t){this.camera=t,this.cocMaterial.copyCameraSettings(t)}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(t){this.bokehNearBasePass.fullscreenMaterial.scale=t,this.bokehNearFillPass.fullscreenMaterial.scale=t,this.bokehFarBasePass.fullscreenMaterial.scale=t,this.bokehFarFillPass.fullscreenMaterial.scale=t,this.maskPass.fullscreenMaterial.strength=t,this.uniforms.get("scale").value=t}getBokehScale(){return this.bokehScale}setBokehScale(t){this.bokehScale=t}getTarget(){return this.target}setTarget(t){this.target=t}calculateFocusDistance(t){const e=this.camera,n=e.position.distanceTo(t);return iu(-n,e.near,e.far)}setDepthTexture(t,e=_r){this.circleOfConfusionMaterial.depthBuffer=t,this.circleOfConfusionMaterial.depthPacking=e}update(t,e,n){const r=this.renderTarget,i=this.renderTargetCoC,s=this.renderTargetCoCBlurred,o=this.renderTargetMasked;if(this.target!==null){const a=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=a}this.cocPass.render(t,null,i),this.blurPass.render(t,i,s),this.maskPass.render(t,e,o),this.bokehFarBasePass.render(t,o,r),this.bokehFarFillPass.render(t,r,this.renderTargetFar),this.bokehNearBasePass.render(t,e,r),this.bokehNearFillPass.render(t,r,this.renderTargetNear)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.cocPass.setSize(t,e),this.blurPass.setSize(t,e),this.maskPass.setSize(t,e),this.renderTargetCoC.setSize(t,e),this.renderTargetMasked.setSize(t,e),this.renderTarget.setSize(r,i),this.renderTargetNear.setSize(r,i),this.renderTargetFar.setSize(r,i),this.renderTargetCoCBlurred.setSize(r,i),this.bokehNearBasePass.fullscreenMaterial.setSize(t,e),this.bokehNearFillPass.fullscreenMaterial.setSize(t,e),this.bokehFarBasePass.fullscreenMaterial.setSize(t,e),this.bokehFarFillPass.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){this.cocPass.initialize(t,e,n),this.maskPass.initialize(t,e,n),this.bokehNearBasePass.initialize(t,e,n),this.bokehNearFillPass.initialize(t,e,n),this.bokehFarBasePass.initialize(t,e,n),this.bokehFarFillPass.initialize(t,e,n),this.blurPass.initialize(t,e,pn);const r=this.maskPass.fullscreenMaterial;r.maskFunction=e?Uh.MULTIPLY:Uh.MULTIPLY_RGB_SET_ALPHA,n!==void 0&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,fa(t)===Qt&&(lr(this.renderTarget.texture,Qt),lr(this.renderTargetNear.texture,Qt),lr(this.renderTargetFar.texture,Qt),lr(this.renderTargetMasked.texture,Qt)))}};function sle(t,e,n){const r=new Map([[cy,1],[bM,1],[MM,2],[vn,4]]);let i;if(r.has(e)||console.error("Invalid noise texture format"),n===pn){i=new Uint8Array(t*r.get(e));for(let s=0,o=i.length;s<o;++s)i[s]=Math.random()*255+.5}else{i=new Float32Array(t*r.get(e));for(let s=0,o=i.length;s<o;++s)i[s]=Math.random()}return i}var yb=class extends Jo{constructor(t,e,n=cy,r=pn){super(sle(t*e,n,r),t,e,n,r),this.needsUpdate=!0}},ole="uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}",Ev="Glitch.Generated";function di(t,e){return t+Math.random()*(e-t)}var ale=class extends Xi{constructor({chromaticAberrationOffset:t=null,delay:e=new ue(1.5,3.5),duration:n=new ue(.6,1),strength:r=new ue(.3,1),columns:i=.05,ratio:s=.85,perturbationMap:o=null,dtSize:a=64}={}){if(super("GlitchEffect",ole,{uniforms:new Map([["perturbationMap",new he(null)],["columns",new he(i)],["active",new he(!1)],["random",new he(1)],["seeds",new he(new ue)],["distortion",new he(new ue)]])}),o===null){const l=new yb(a,a,vn);l.name=Ev,this.perturbationMap=l}else this.perturbationMap=o;this.time=0,this.distortion=this.uniforms.get("distortion").value,this.delay=e,this.duration=n,this.breakPoint=new ue(di(this.delay.x,this.delay.y),di(this.duration.x,this.duration.y)),this.strength=r,this.mode=Kl.SPORADIC,this.ratio=s,this.chromaticAberrationOffset=t}get seeds(){return this.uniforms.get("seeds").value}get active(){return this.uniforms.get("active").value}isActive(){return this.active}get minDelay(){return this.delay.x}set minDelay(t){this.delay.x=t}getMinDelay(){return this.delay.x}setMinDelay(t){this.delay.x=t}get maxDelay(){return this.delay.y}set maxDelay(t){this.delay.y=t}getMaxDelay(){return this.delay.y}setMaxDelay(t){this.delay.y=t}get minDuration(){return this.duration.x}set minDuration(t){this.duration.x=t}getMinDuration(){return this.duration.x}setMinDuration(t){this.duration.x=t}get maxDuration(){return this.duration.y}set maxDuration(t){this.duration.y=t}getMaxDuration(){return this.duration.y}setMaxDuration(t){this.duration.y=t}get minStrength(){return this.strength.x}set minStrength(t){this.strength.x=t}getMinStrength(){return this.strength.x}setMinStrength(t){this.strength.x=t}get maxStrength(){return this.strength.y}set maxStrength(t){this.strength.y=t}getMaxStrength(){return this.strength.y}setMaxStrength(t){this.strength.y=t}getMode(){return this.mode}setMode(t){this.mode=t}getGlitchRatio(){return 1-this.ratio}setGlitchRatio(t){this.ratio=Math.min(Math.max(1-t,0),1)}get columns(){return this.uniforms.get("columns").value}set columns(t){this.uniforms.get("columns").value=t}getGlitchColumns(){return this.columns}setGlitchColumns(t){this.columns=t}getChromaticAberrationOffset(){return this.chromaticAberrationOffset}setChromaticAberrationOffset(t){this.chromaticAberrationOffset=t}get perturbationMap(){return this.uniforms.get("perturbationMap").value}set perturbationMap(t){const e=this.perturbationMap;e!==null&&e.name===Ev&&e.dispose(),t.minFilter=t.magFilter=kt,t.wrapS=t.wrapT=aa,t.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=t}getPerturbationMap(){return this.perturbationMap}setPerturbationMap(t){this.perturbationMap=t}generatePerturbationMap(t=64){const e=new yb(t,t,vn);return e.name=Ev,e}update(t,e,n){const r=this.mode,i=this.breakPoint,s=this.chromaticAberrationOffset,o=this.strength;let a=this.time,l=!1,u=0,d=0,h;r!==Kl.DISABLED&&(r===Kl.SPORADIC&&(a+=n,h=a>i.x,a>=i.x+i.y&&(i.set(di(this.delay.x,this.delay.y),di(this.duration.x,this.duration.y)),a=0)),u=Math.random(),this.uniforms.get("random").value=u,h&&u>this.ratio||r===Kl.CONSTANT_WILD?(l=!0,u*=o.y*.03,d=di(-Math.PI,Math.PI),this.seeds.set(di(-o.y,o.y),di(-o.y,o.y)),this.distortion.set(di(0,1),di(0,1))):(h||r===Kl.CONSTANT_MILD)&&(l=!0,u*=o.x*.03,d=di(-Math.PI,Math.PI),this.seeds.set(di(-o.x,o.x),di(-o.x,o.x)),this.distortion.set(di(0,1),di(0,1))),this.time=a),s!==null&&(l?s.set(Math.cos(d),Math.sin(d)).multiplyScalar(u):s.set(0,0)),this.uniforms.get("active").value=l}dispose(){const t=this.perturbationMap;t!==null&&t.name===Ev&&t.dispose()}},lle=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}`,tS=new B,YI=new at,ule=class extends Xi{constructor(t,e,{blendFunction:n=gt.SCREEN,samples:r=60,density:i=.96,decay:s=.9,weight:o=.4,exposure:a=.6,clampMax:l=1,blur:u=!0,kernelSize:d=rd.SMALL,resolutionScale:h=.5,width:p=Jt.AUTO_SIZE,height:g=Jt.AUTO_SIZE,resolutionX:v=p,resolutionY:_=g}={}){super("GodRaysEffect",lle,{blendFunction:n,attributes:ms.DEPTH,uniforms:new Map([["map",new he(null)]])}),this.camera=t,this._lightSource=e,this.lightSource=e,this.lightScene=new _u,this.screenPosition=new ue,this.renderTargetA=new Lt(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("map").value=this.renderTargetB.texture,this.renderTargetLight=new Lt(1,1),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthTexture=new Up,this.renderPassLight=new id(this.lightScene,t),this.renderPassLight.clearPass.overrideClearColor=new ze(0),this.clearPass=new om(!0,!1,!1),this.clearPass.overrideClearColor=new ze(0),this.blurPass=new a1({kernelSize:d}),this.blurPass.enabled=u,this.depthMaskPass=new Hs(new aF);const x=this.depthMaskMaterial;x.depthBuffer1=this.renderTargetLight.depthTexture,x.copyCameraSettings(t),this.godRaysPass=new Hs(new Hoe(this.screenPosition));const m=this.godRaysMaterial;m.density=i,m.decay=s,m.weight=o,m.exposure=a,m.maxIntensity=l,m.samples=r;const S=this.resolution=new Jt(this,v,_,h);S.addEventListener("change",w=>this.setSize(S.baseWidth,S.baseHeight))}set mainCamera(t){this.camera=t,this.renderPassLight.mainCamera=t,this.depthMaskMaterial.copyCameraSettings(t)}get lightSource(){return this._lightSource}set lightSource(t){this._lightSource=t,t!==null&&(t.material.depthWrite=!1,t.material.transparent=!0)}getBlurPass(){return this.blurPass}get texture(){return this.renderTargetB.texture}getTexture(){return this.texture}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get godRaysMaterial(){return this.godRaysPass.fullscreenMaterial}getGodRaysMaterial(){return this.godRaysMaterial}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.godRaysMaterial.dithering}set dithering(t){const e=this.godRaysMaterial;e.dithering=t,e.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(t){this.blurPass.enabled=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}get samples(){return this.godRaysMaterial.samples}set samples(t){this.godRaysMaterial.samples=t}setDepthTexture(t,e=_r){this.depthMaskPass.fullscreenMaterial.depthBuffer0=t,this.depthMaskPass.fullscreenMaterial.depthPacking0=e}update(t,e,n){const r=this.lightSource,i=r.parent,s=r.matrixAutoUpdate,o=this.renderTargetA,a=this.renderTargetLight;r.material.depthWrite=!0,r.matrixAutoUpdate=!1,r.updateWorldMatrix(!0,!1),i!==null&&(s||YI.copy(r.matrix),r.matrix.copy(r.matrixWorld)),this.lightScene.add(r),this.renderPassLight.render(t,a),this.clearPass.render(t,o),this.depthMaskPass.render(t,a,o),r.material.depthWrite=!1,r.matrixAutoUpdate=s,i!==null&&(s||r.matrix.copy(YI),i.add(r)),tS.setFromMatrixPosition(r.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max((tS.x+1)*.5,-1),2),Math.min(Math.max((tS.y+1)*.5,-1),2)),this.blurPass.enabled&&this.blurPass.render(t,o,o),this.godRaysPass.render(t,o,this.renderTargetB)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.renderTargetA.setSize(r,i),this.renderTargetB.setSize(r,i),this.renderTargetLight.setSize(r,i),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.renderPassLight.initialize(t,e,n),this.depthMaskPass.initialize(t,e,n),this.godRaysPass.initialize(t,e,n),n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,this.renderTargetLight.texture.type=n,fa(t)===Qt&&(lr(this.renderTargetA.texture,Qt),lr(this.renderTargetB.texture,Qt),lr(this.renderTargetLight.texture,Qt)))}},cle="uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",fle=class extends Xi{constructor({blendFunction:t=gt.OVERLAY,scale:e=1,lineWidth:n=0}={}){super("GridEffect",cle,{blendFunction:t,uniforms:new Map([["scale",new he(new ue)],["lineWidth",new he(n)]])}),this.resolution=new ue,this.s=0,this.scale=e,this.l=0,this.lineWidth=n}get scale(){return this.s}set scale(t){this.s=Math.max(t,1e-6),this.setSize(this.resolution.width,this.resolution.height)}getScale(){return this.scale}setScale(t){this.scale=t}get lineWidth(){return this.l}set lineWidth(t){this.l=t,this.setSize(this.resolution.width,this.resolution.height)}getLineWidth(){return this.lineWidth}setLineWidth(t){this.lineWidth=t}setSize(t,e){this.resolution.set(t,e);const n=t/e,r=this.scale*(e*.125);this.uniforms.get("scale").value.set(n*r,r),this.uniforms.get("lineWidth").value=r/e+this.lineWidth}};function qI(t,e,n){const r=document.createElement("canvas"),i=r.getContext("2d");if(r.width=t,r.height=e,n instanceof Image)i.drawImage(n,0,0);else{const s=i.createImageData(t,e);s.data.set(n),i.putImageData(s,0,0)}return r}var fF=class{constructor(t=0,e=0,n=null){this.width=t,this.height=e,this.data=n}toCanvas(){return typeof document>"u"?null:qI(this.width,this.height,this.data)}static from(t){const{width:e,height:n}=t;let r;if(t instanceof Image){const i=qI(e,n,t);i!==null&&(r=i.getContext("2d").getImageData(0,0,e,n).data)}else r=t.data;return new fF(e,n,r)}},dle=`"use strict";(()=>{var O=Math.pow;var _={SCALE_UP:"lut.scaleup"};var k=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function j(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=k[0];P[0]=s,P[1]=F,P[2]=f;let o=k[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(O(r,3)*4),y=t instanceof Uint8Array?255:1,h=O(r,2),A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;j(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case _.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();
`,ZI=new ze,e0=class extends uu{constructor(t,e){super(t,e,e,e),this.type=Nn,this.format=vn,this.minFilter=ot,this.magFilter=ot,this.wrapS=ir,this.wrapT=ir,this.wrapR=ir,this.unpackAlignment=1,this.needsUpdate=!0,lr(this,Lf),this.domainMin=new B(0,0,0),this.domainMax=new B(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(t,e=!0){const n=this.image;let r;return t<=n.width?r=Promise.reject(new Error("The target size must be greater than the current size")):r=new Promise((i,s)=>{const o=URL.createObjectURL(new Blob([dle],{type:"text/javascript"})),a=new Worker(o);a.addEventListener("error",u=>s(u.error)),a.addEventListener("message",u=>{const d=new e0(u.data,t);Q_(this,d),d.type=this.type,d.name=this.name,URL.revokeObjectURL(o),i(d)});const l=e?[n.data.buffer]:[];a.postMessage({operation:yoe.SCALE_UP,data:n.data,size:t},l)}),r}applyLUT(t){const e=this.image,n=t.image,r=Math.min(e.width,e.height,e.depth),i=Math.min(n.width,n.height,n.depth);if(r!==i)console.error("Size mismatch");else if(t.type!==Nn||this.type!==Nn)console.error("Both LUTs must be FloatType textures");else if(t.format!==vn||this.format!==vn)console.error("Both LUTs must be RGBA textures");else{const s=e.data,o=n.data,a=r,l=a**2,u=a-1;for(let d=0,h=a**3;d<h;++d){const p=d*4,g=s[p+0]*u,v=s[p+1]*u,_=s[p+2]*u,x=Math.round(g+v*a+_*l)*4;s[p+0]=o[x+0],s[p+1]=o[x+1],s[p+2]=o[x+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===Nn){const t=this.image.data,e=new Uint8Array(t.length);for(let n=0,r=t.length;n<r;++n)e[n]=t[n]*255+.5;this.image.data=e,this.type=pn,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===pn){const t=this.image.data,e=new Float32Array(t.length);for(let n=0,r=t.length;n<r;++n)e[n]=t[n]/255;this.image.data=e,this.type=Nn,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const t=this.image.data;if(this.type===Nn){for(let e=0,n=t.length;e<n;e+=4)ZI.fromArray(t,e).convertLinearToSRGB().toArray(t,e);lr(this,Qt),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const t=this.image.data;if(this.type===Nn){for(let e=0,n=t.length;e<n;e+=4)ZI.fromArray(t,e).convertSRGBToLinear().toArray(t,e);lr(this,Lf),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const t=this.image.width,e=this.image.height*this.image.depth,n=new Jo(this.image.data,t,e);return n.name=this.name,n.type=this.type,n.format=this.format,n.minFilter=ot,n.magFilter=ot,n.wrapS=this.wrapS,n.wrapT=this.wrapT,n.generateMipmaps=!1,n.needsUpdate=!0,Q_(this,n),n}static from(t){const e=t.image,{width:n,height:r}=e,i=Math.min(n,r);let s;if(e instanceof Image){const l=fF.from(e).data;if(n>r){s=new Uint8Array(l.length);for(let u=0;u<i;++u)for(let d=0;d<i;++d)for(let h=0;h<i;++h){const p=(h+u*i+d*i*i)*4,g=(h+d*i+u*i*i)*4;s[g+0]=l[p+0],s[g+1]=l[p+1],s[g+2]=l[p+2],s[g+3]=l[p+3]}}else s=new Uint8Array(l.buffer)}else s=e.data.slice();const o=new e0(s,i);return o.type=t.type,o.name=t.name,Q_(t,o),o}static createNeutral(t){const e=new Float32Array(t**3*4),n=t**2,r=1/(t-1);for(let s=0;s<t;++s)for(let o=0;o<t;++o)for(let a=0;a<t;++a){const l=(s+o*t+a*n)*4;e[l+0]=s*r,e[l+1]=o*r,e[l+2]=a*r,e[l+3]=1}const i=new e0(e,t);return i.name="neutral",i}},hle=`uniform vec3 scale;uniform vec3 offset;
#ifdef CUSTOM_INPUT_DOMAIN
uniform vec3 domainMin;uniform vec3 domainMax;
#endif
#ifdef LUT_3D
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler3D lut;
#else
uniform mediump sampler3D lut;
#endif
#else
uniform lowp sampler3D lut;
#endif
vec4 applyLUT(const in vec3 rgb){
#ifdef TETRAHEDRAL_INTERPOLATION
vec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);
#else
return texture(lut,rgb);
#endif
}
#else
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D lut;
#else
uniform mediump sampler2D lut;
#endif
#else
uniform lowp sampler2D lut;
#endif
vec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);
#ifdef LUT_STRIP_HORIZONTAL
float xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);
#else
float yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);
#endif
vec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;
#ifdef CUSTOM_INPUT_DOMAIN
if(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}
#else
#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)
c=clamp(c,0.0,1.0);
#endif
c=applyLUT(scale*c+offset).rgb;
#endif
outputColor=vec4(c,inputColor.a);}`,ple=class extends Xi{constructor(t,{blendFunction:e=gt.SRC,tetrahedralInterpolation:n=!1,inputEncoding:r=ps,inputColorSpace:i}={}){super("LUT3DEffect",hle,{blendFunction:e,uniforms:new Map([["lut",new he(null)],["scale",new he(new B)],["offset",new he(new B)],["domainMin",new he(null)],["domainMax",new he(null)]])}),this.tetrahedralInterpolation=n,this.inputColorSpace=i||sF.get(r),this.lut=t}get inputEncoding(){return this.inputColorSpace}set inputEncoding(t){this.inputColorSpace=t}getInputEncoding(){return this.inputColorSpace}setInputEncoding(t){this.inputColorSpace=t}getOutputEncoding(){return this.outputColorSpace}get lut(){return this.uniforms.get("lut").value}set lut(t){const e=this.defines,n=this.uniforms;if(this.lut!==t&&(n.get("lut").value=t,t!==null)){const r=t.image,i=this.tetrahedralInterpolation;if(e.clear(),e.set("LUT_SIZE",Math.min(r.width,r.height).toFixed(16)),e.set("LUT_TEXEL_WIDTH",(1/r.width).toFixed(16)),e.set("LUT_TEXEL_HEIGHT",(1/r.height).toFixed(16)),n.get("domainMin").value=null,n.get("domainMax").value=null,(t.type===Nn||t.type===wi)&&e.set("LUT_PRECISION_HIGH","1"),r.width>r.height?e.set("LUT_STRIP_HORIZONTAL","1"):t instanceof uu&&e.set("LUT_3D","1"),t instanceof e0){const s=t.domainMin,o=t.domainMax;(s.x!==0||s.y!==0||s.z!==0||o.x!==1||o.y!==1||o.z!==1)&&(e.set("CUSTOM_INPUT_DOMAIN","1"),n.get("domainMin").value=s.clone(),n.get("domainMax").value=o.clone())}this.tetrahedralInterpolation=i}}getLUT(){return this.lut}setLUT(t){this.lut=t}updateScaleOffset(){const t=this.lut;if(t!==null){const e=Math.min(t.image.width,t.image.height),n=this.uniforms.get("scale").value,r=this.uniforms.get("offset").value;if(this.tetrahedralInterpolation&&t instanceof uu)if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const i=t.domainMax.clone().sub(t.domainMin);n.setScalar(e-1).divide(i),r.copy(t.domainMin).negate().multiply(n)}else n.setScalar(e-1),r.setScalar(0);else if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const i=t.domainMax.clone().sub(t.domainMin).multiplyScalar(e);n.setScalar(e-1).divide(i),r.copy(t.domainMin).negate().multiply(n).addScalar(1/(2*e))}else n.setScalar((e-1)/e),r.setScalar(1/(2*e))}}configureTetrahedralInterpolation(){const t=this.lut;t!==null&&(t.minFilter=ot,t.magFilter=ot,this.tetrahedralInterpolation&&(t instanceof uu?(t.minFilter=kt,t.magFilter=kt):console.warn("Tetrahedral interpolation requires a 3D texture")),t.source===void 0&&(t.needsUpdate=!0))}get tetrahedralInterpolation(){return this.defines.has("TETRAHEDRAL_INTERPOLATION")}set tetrahedralInterpolation(t){t?this.defines.set("TETRAHEDRAL_INTERPOLATION","1"):this.defines.delete("TETRAHEDRAL_INTERPOLATION"),this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setChanged()}setTetrahedralInterpolationEnabled(t){this.tetrahedralInterpolation=t}},mle=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,gle="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",vle=class extends Xi{constructor(t,e,{blendFunction:n=gt.SCREEN,patternTexture:r=null,patternScale:i=1,edgeStrength:s=1,pulseSpeed:o=0,visibleEdgeColor:a=16777215,hiddenEdgeColor:l=2230538,kernelSize:u=rd.VERY_SMALL,blur:d=!1,xRay:h=!0,multisampling:p=0,resolutionScale:g=.5,width:v=Jt.AUTO_SIZE,height:_=Jt.AUTO_SIZE,resolutionX:x=v,resolutionY:m=_}={}){super("OutlineEffect",mle,{uniforms:new Map([["maskTexture",new he(null)],["edgeTexture",new he(null)],["edgeStrength",new he(s)],["visibleEdgeColor",new he(new ze(a))],["hiddenEdgeColor",new he(new ze(l))],["pulse",new he(1)],["patternScale",new he(i)],["patternTexture",new he(null)]])}),this.blendMode.addEventListener("change",I=>{this.blendMode.blendFunction===gt.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=n,this.patternTexture=r,this.xRay=h,this.scene=t,this.camera=e,this.renderTargetMask=new Lt(1,1),this.renderTargetMask.samples=p,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new Lt(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new om,this.clearPass.overrideClearColor=new ze(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new qE(t,e),this.maskPass=new id(t,e,new Toe(this.depthPass.texture,e));const S=this.maskPass.clearPass;S.overrideClearColor=new ze(16777215),S.overrideClearAlpha=1,this.blurPass=new a1({resolutionScale:g,resolutionX:x,resolutionY:m,kernelSize:u}),this.blurPass.enabled=d;const w=this.blurPass.resolution;w.addEventListener("change",I=>this.setSize(w.baseWidth,w.baseHeight)),this.outlinePass=new Hs(new Koe);const M=this.outlinePass.fullscreenMaterial;M.inputBuffer=this.renderTargetMask.texture,this.time=0,this.active=!1,this.selection=new ZE,this.selection.layer=10,this.pulseSpeed=o}set mainScene(t){this.scene=t,this.depthPass.mainScene=t,this.maskPass.mainScene=t}set mainCamera(t){this.camera=t,this.depthPass.mainCamera=t,this.maskPass.mainCamera=t,this.maskPass.overrideMaterial.copyCameraSettings(t)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(t){this.renderTargetMask.samples=t,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(t){this.uniforms.get("patternScale").value=t}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(t){this.uniforms.get("edgeStrength").value=t}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(t){this.uniforms.get("visibleEdgeColor").value=t}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(t){this.uniforms.get("hiddenEdgeColor").value=t}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(t){this.pulseSpeed=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get selectionLayer(){return this.selection.layer}set selectionLayer(t){this.selection.layer=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get blur(){return this.blurPass.enabled}set blur(t){this.blurPass.enabled=t}get xRay(){return this.defines.has("X_RAY")}set xRay(t){this.xRay!==t&&(t?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(t){this.xRay=t}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(t){t!==null?(t.wrapS=t.wrapT=aa,this.defines.set("USE_PATTERN","1"),this.setVertexShader(gle)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=t,this.setChanged()}setPatternTexture(t){this.patternTexture=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}setSelection(t){return this.selection.set(t),this}clearSelection(){return this.selection.clear(),this}selectObject(t){return this.selection.add(t),this}deselectObject(t){return this.selection.delete(t),this}update(t,e,n){const r=this.scene,i=this.camera,s=this.selection,a=this.uniforms.get("pulse"),l=r.background,u=i.layers.mask;s.size>0?(r.background=null,a.value=1,this.pulseSpeed>0&&(a.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.active=!0,this.time+=n,s.setVisible(!1),this.depthPass.render(t),s.setVisible(!0),i.layers.set(s.layer),this.maskPass.render(t,this.renderTargetMask),i.layers.mask=u,r.background=l,this.outlinePass.render(t,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(t,this.renderTargetOutline,this.renderTargetOutline)):this.active&&(this.clearPass.render(t,this.renderTargetOutline),this.active=!1)}setSize(t,e){this.blurPass.setSize(t,e),this.renderTargetMask.setSize(t,e);const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.depthPass.setSize(r,i),this.renderTargetOutline.setSize(r,i),this.outlinePass.fullscreenMaterial.setSize(r,i)}initialize(t,e,n){this.blurPass.initialize(t,e,pn),n!==void 0&&(this.depthPass.initialize(t,e,n),this.maskPass.initialize(t,e,n),this.outlinePass.initialize(t,e,n))}},yle="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",xle=class extends Xi{constructor(t=30){super("PixelationEffect",yle,{uniforms:new Map([["active",new he(!1)],["d",new he(new bt)]])}),this.resolution=new ue,this._granularity=0,this.granularity=t}get granularity(){return this._granularity}set granularity(t){let e=Math.floor(t);e%2>0&&(e+=1),this._granularity=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(t){this.granularity=t}setSize(t,e){const n=this.resolution;n.set(t,e);const r=this.granularity,i=r/n.x,s=r/n.y;this.uniforms.get("d").value.set(i,s,1/i,1/s)}};new B;new B;var _le=class extends cF{constructor(t,e,n){super(n),this.setAttributes(this.getAttributes()|ms.DEPTH),this.camera=e,this.depthPass=new qE(t,e),this.clearPass=new om(!0,!1,!1),this.clearPass.overrideClearColor=new ze(0),this.depthMaskPass=new Hs(new aF);const r=this.depthMaskMaterial;r.copyCameraSettings(e),r.depthBuffer1=this.depthPass.texture,r.depthPacking1=Eo,r.depthMode=np,this.renderTargetMasked=new Lt(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new ZE,this.selection.layer=11,this._inverted=!1,this._ignoreBackground=!1}set mainScene(t){this.depthPass.mainScene=t}set mainCamera(t){this.camera=t,this.depthPass.mainCamera=t,this.depthMaskMaterial.copyCameraSettings(t)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(t){this._inverted=t,this.depthMaskMaterial.depthMode=t?ly:np}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(t){this._ignoreBackground=t,this.depthMaskMaterial.maxDepthStrategy=t?kh.DISCARD_MAX_DEPTH:kh.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}setDepthTexture(t,e=_r){this.depthMaskMaterial.depthBuffer0=t,this.depthMaskMaterial.depthPacking0=e}update(t,e,n){const r=this.camera,i=this.selection,s=this.inverted;let o=e;if(this.ignoreBackground||!s||i.size>0){const a=r.layers.mask;r.layers.set(i.layer),this.depthPass.render(t),r.layers.mask=a,o=this.renderTargetMasked,this.clearPass.render(t,o),this.depthMaskPass.render(t,e,o)}super.update(t,o,n)}setSize(t,e){super.setSize(t,e),this.renderTargetMasked.setSize(t,e),this.depthPass.setSize(t,e)}initialize(t,e,n){super.initialize(t,e,n),this.clearPass.initialize(t,e,n),this.depthPass.initialize(t,e,n),this.depthMaskPass.initialize(t,e,n),n!==void 0&&(this.renderTargetMasked.texture.type=n,fa(t)===Qt&&lr(this.renderTargetMasked.texture,Qt))}},Sle=`uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
#endif
#ifdef COLORIZE
uniform vec3 color;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300
vec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);
#else
float ao=aoLinear;
#endif
float l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);
#ifdef COLORIZE
outputColor=vec4(1.0-ao*(1.0-color),inputColor.a);
#else
outputColor=vec4(vec3(1.0-ao),inputColor.a);
#endif
}`,QI=64,wle=class extends Xi{constructor(t,e,{blendFunction:n=gt.MULTIPLY,samples:r=9,rings:i=7,normalDepthBuffer:s=null,depthAwareUpsampling:o=!0,worldDistanceThreshold:a,worldDistanceFalloff:l,worldProximityThreshold:u,worldProximityFalloff:d,distanceThreshold:h=.97,distanceFalloff:p=.03,rangeThreshold:g=5e-4,rangeFalloff:v=.001,minRadiusScale:_=.1,luminanceInfluence:x=.7,radius:m=.1825,intensity:S=1,bias:w=.025,fade:M=.01,color:I=null,resolutionScale:P=1,width:D=Jt.AUTO_SIZE,height:A=Jt.AUTO_SIZE,resolutionX:T=D,resolutionY:E=A}={}){super("SSAOEffect",Sle,{blendFunction:n,attributes:ms.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new he(null)],["normalDepthBuffer",new he(s)],["luminanceInfluence",new he(x)],["color",new he(null)],["intensity",new he(S)],["scale",new he(0)]])}),this.renderTarget=new Lt(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const O=this.resolution=new Jt(this,T,E,P);O.addEventListener("change",K=>this.setSize(O.baseWidth,O.baseHeight)),this.camera=t,this.depthDownsamplingPass=new uF({normalBuffer:e,resolutionScale:P}),this.depthDownsamplingPass.enabled=s===null,this.ssaoPass=new Hs(new Zoe(t));const N=new yb(QI,QI,vn);N.wrapS=N.wrapT=aa;const H=this.ssaoMaterial;H.normalBuffer=e,H.noiseTexture=N,H.minRadiusScale=_,H.samples=r,H.radius=m,H.rings=i,H.fade=M,H.bias=w,H.distanceThreshold=h,H.distanceFalloff=p,H.proximityThreshold=g,H.proximityFalloff=v,a!==void 0&&(H.worldDistanceThreshold=a),l!==void 0&&(H.worldDistanceFalloff=l),u!==void 0&&(H.worldProximityThreshold=u),d!==void 0&&(H.worldProximityFalloff=d),s!==null&&(this.ssaoMaterial.normalDepthBuffer=s,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=o,this.color=I}set mainCamera(t){this.camera=t,this.ssaoMaterial.copyCameraSettings(t)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(t){this.ssaoMaterial.normalBuffer=t,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=t}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(t){this.ssaoMaterial.samples=t}get rings(){return this.ssaoMaterial.rings}set rings(t){this.ssaoMaterial.rings=t}get radius(){return this.ssaoMaterial.radius}set radius(t){this.ssaoMaterial.radius=t}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(t){this.depthAwareUpsampling!==t&&(t?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(t){this.depthAwareUpsampling=t}get distanceScaling(){return!0}set distanceScaling(t){}get color(){return this.uniforms.get("color").value}set color(t){const e=this.uniforms,n=this.defines;t!==null?n.has("COLORIZE")?e.get("color").value.set(t):(n.set("COLORIZE","1"),e.get("color").value=new ze(t),this.setChanged()):n.has("COLORIZE")&&(n.delete("COLORIZE"),e.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(t){this.uniforms.get("luminanceInfluence").value=t}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getColor(){return this.color}setColor(t){this.color=t}setDistanceCutoff(t,e){this.ssaoMaterial.distanceThreshold=t,this.ssaoMaterial.distanceFalloff=e}setProximityCutoff(t,e){this.ssaoMaterial.proximityThreshold=t,this.ssaoMaterial.proximityFalloff=e}setDepthTexture(t,e=_r){this.depthDownsamplingPass.setDepthTexture(t,e),this.ssaoMaterial.depthBuffer=t,this.ssaoMaterial.depthPacking=e}update(t,e,n){const r=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(t),this.ssaoPass.render(t,null,r)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const r=n.width,i=n.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(r,i),this.renderTarget.setSize(r,i),this.depthDownsamplingPass.resolution.scale=n.scale,this.depthDownsamplingPass.setSize(t,e)}initialize(t,e,n){try{let r=this.uniforms.get("normalDepthBuffer").value;r===null&&(this.depthDownsamplingPass.initialize(t,e,n),r=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=r,this.ssaoMaterial.normalDepthBuffer=r,this.defines.set("NORMAL_DEPTH","1"))}catch{this.depthDownsamplingPass.enabled=!1}}},ble=`#ifdef TEXTURE_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
varying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#ifdef UV_TRANSFORM
vec4 texel=texture2D(map,vUv2);
#else
vec4 texel=texture2D(map,uv);
#endif
outputColor=TEXEL;}`,Mle=`#ifdef ASPECT_CORRECTION
uniform float scale;
#else
uniform mat3 uvTransform;
#endif
varying vec2 vUv2;void mainSupport(const in vec2 uv){
#ifdef ASPECT_CORRECTION
vUv2=uv*vec2(aspect,1.0)*scale;
#else
vUv2=(uvTransform*vec3(uv,1.0)).xy;
#endif
}`,Ele=class extends Xi{constructor({blendFunction:t,texture:e=null,aspectCorrection:n=!1}={}){super("TextureEffect",ble,{blendFunction:t,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["map",new he(null)],["scale",new he(1)],["uvTransform",new he(null)]])}),this.texture=e,this.aspectCorrection=n}get texture(){return this.uniforms.get("map").value}set texture(t){const e=this.texture,n=this.uniforms,r=this.defines;e!==t&&(n.get("map").value=t,n.get("uvTransform").value=t.matrix,r.delete("TEXTURE_PRECISION_HIGH"),t!==null&&(t.matrixAutoUpdate?(r.set("UV_TRANSFORM","1"),this.setVertexShader(Mle)):(r.delete("UV_TRANSFORM"),this.setVertexShader(null)),t.type!==pn&&r.set("TEXTURE_PRECISION_HIGH","1"),(e===null||e.type!==t.type||e.encoding!==t.encoding)&&this.setChanged()))}getTexture(){return this.texture}setTexture(t){this.texture=t}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(t){this.aspectCorrection!==t&&(t?this.defines.set("ASPECT_CORRECTION","1"):this.defines.delete("ASPECT_CORRECTION"),this.setChanged())}get uvTransform(){const t=this.texture;return t!==null&&t.matrixAutoUpdate}set uvTransform(t){const e=this.texture;e!==null&&(e.matrixAutoUpdate=t)}setTextureSwizzleRGBA(t,e=t,n=t,r=t){const i="rgba";let s="";(t!==rf.RED||e!==rf.GREEN||n!==rf.BLUE||r!==rf.ALPHA)&&(s=[".",i[t],i[e],i[n],i[r]].join("")),this.defines.set("TEXEL","texel"+s),this.setChanged()}update(t,e,n){this.texture.matrixAutoUpdate&&this.texture.updateMatrix()}};function xb(){return xb=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xb.apply(this,arguments)}var Tle=`#define GLSLIFY 1
uniform float blur;uniform float blurSharpness;uniform int blurKernel;vec3 denoise(vec3 center,sampler2D tex,vec2 uv,vec2 invTexSize,float blur,float blurSharpness,int blurKernel){vec3 color;float total;vec3 col;float weight;for(int x=-blurKernel;x<=blurKernel;x++){for(int y=-blurKernel;y<=blurKernel;y++){col=textureLod(tex,uv+vec2(x,y)*invTexSize,0.).rgb;weight=1.0-abs(dot(col-center,vec3(0.25)));weight=pow(weight,blurSharpness);color+=col*weight;total+=weight;}}return color/total;}`,Ple=`#define GLSLIFY 1
#define MODE_DEFAULT 0
#define MODE_REFLECTIONS 1
#define MODE_RAW_REFLECTION 2
#define MODE_BLURRED_REFLECTIONS 3
#define MODE_INPUT 4
#define MODE_BLUR_MIX 5
#define FLOAT_EPSILON 0.00001
uniform sampler2D inputTexture;uniform sampler2D reflectionsTexture;uniform float samples;
#include <boxBlur>
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 reflectionsTexel=texture2D(reflectionsTexture,vUv);ivec2 size=textureSize(reflectionsTexture,0);vec2 invTexSize=1./vec2(size.x,size.y);vec3 reflectionClr=reflectionsTexel.xyz;if(blur>FLOAT_EPSILON){vec3 blurredReflectionsColor=denoise(reflectionsTexel.rgb,reflectionsTexture,vUv,invTexSize,blur,blurSharpness,blurKernel);reflectionClr=mix(reflectionClr,blurredReflectionsColor.rgb,blur);}
#if RENDER_MODE == MODE_DEFAULT
outputColor=vec4(inputColor.rgb+reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_REFLECTIONS
outputColor=vec4(reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_RAW_REFLECTION
outputColor=vec4(reflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLURRED_REFLECTIONS
outputColor=vec4(blurredReflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_INPUT
outputColor=vec4(inputColor.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLUR_MIX
outputColor=vec4(vec3(blur),1.0);
#endif
}`,dF=`#define GLSLIFY 1
vec3 getViewPosition(const float depth){float clipW=_projectionMatrix[2][3]*depth+_projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(vUv,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(_inverseProjectionMatrix*clipPosition).xyz;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 screenSpaceToWorldSpace(const vec2 uv,const float depth){vec4 ndc=vec4((uv.x-0.5)*2.0,(uv.y-0.5)*2.0,(depth-0.5)*2.0,1.0);vec4 clip=_inverseProjectionMatrix*ndc;vec4 view=cameraMatrixWorld*(clip/clip.w);return view.xyz;}
#define Scale (vec3(0.8, 0.8, 0.8))
#define K (19.19)
vec3 hash(vec3 a){a=fract(a*Scale);a+=dot(a,a.yxz+K);return fract((a.xxy+a.yxx)*a.zyx);}float fresnel_dielectric_cos(float cosi,float eta){float c=abs(cosi);float g=eta*eta-1.0+c*c;float result;if(g>0.0){g=sqrt(g);float A=(g-c)/(g+c);float B=(c*(g+c)-1.0)/(c*(g-c)+1.0);result=0.5*A*A*(1.0+B*B);}else{result=1.0;}return result;}float fresnel_dielectric(vec3 Incoming,vec3 Normal,float eta){float cosine=dot(Incoming,Normal);return min(1.0,5.0*fresnel_dielectric_cos(cosine,eta));}`,Cle=`#define GLSLIFY 1
#define INV_EULER 0.36787944117144233
alpha=velocityDisocclusion<FLOAT_EPSILON ?(alpha+0.0075): 0.0;alpha=clamp(alpha,0.0,1.0);bool needsBlur=!didReproject||velocityDisocclusion>0.5;
#ifdef boxBlur
if(needsBlur)inputColor=boxBlurredColor;
#endif
if(alpha==1.0){outputColor=accumulatedColor;}else{float m=mix(alpha,1.0,blend);if(needsBlur)m=0.0;outputColor=accumulatedColor*m+inputColor*(1.0-m);}`;class Ale extends Ot{constructor(){super({type:"MRTMaterial",defines:{USE_UV:"",TEMPORAL_RESOLVE:""},uniforms:{opacity:new he(1),normalMap:new he(null),normalScale:new he(new ue(1,1)),uvTransform:new he(new Rt),roughness:new he(1),roughnessMap:new he(null)},vertexShader:`
                #ifdef USE_MRT
                 varying vec2 vHighPrecisionZW;
                #endif
                #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <common>
                #include <uv_pars_vertex>
                #include <displacementmap_pars_vertex>
                #include <normal_pars_vertex>
                #include <morphtarget_pars_vertex>
                #include <skinning_pars_vertex>
                #include <logdepthbuf_pars_vertex>
                #include <clipping_planes_pars_vertex>
                void main() {
                    #include <uv_vertex>
                    #include <beginnormal_vertex>
                    #include <morphnormal_vertex>
                    #include <skinbase_vertex>
                    #include <skinnormal_vertex>
                    #include <defaultnormal_vertex>
                    #include <normal_vertex>
                    #include <begin_vertex>
                    #include <morphtarget_vertex>
                    #include <skinning_vertex>
                    #include <displacementmap_vertex>
                    #include <project_vertex>
                    #include <logdepthbuf_vertex>
                    #include <clipping_planes_vertex>
                    #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                        vViewPosition = - mvPosition.xyz;
                    #endif
                    #ifdef USE_MRT
                        vHighPrecisionZW = gl_Position.zw;
                    #endif 
                    #ifdef USE_UV
                        vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
                    #endif
                }
            `,fragmentShader:`
                 #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <packing>
                #include <uv_pars_fragment>
                #include <normal_pars_fragment>
                #include <bumpmap_pars_fragment>
                #include <normalmap_pars_fragment>
                #include <logdepthbuf_pars_fragment>
                #include <clipping_planes_pars_fragment>
                #include <roughnessmap_pars_fragment>
                
                #ifdef USE_MRT
                layout(location = 0) out vec4 gNormal;
                layout(location = 1) out vec4 gDepth;
                
                varying vec2 vHighPrecisionZW;
                #endif
                uniform float roughness;
                void main() {
                    #include <clipping_planes_fragment>
                    #include <logdepthbuf_fragment>
                    #include <normal_fragment_begin>
                    #include <normal_fragment_maps>

                    float roughnessFactor = roughness;
                    
                    if(roughness > 10.0e9){
                        roughnessFactor = 1.;
                    }else{
                        #ifdef useRoughnessMap
                            vec4 texelRoughness = texture2D( roughnessMap, vUv );
                            // reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
                            roughnessFactor *= texelRoughness.g;
                        #endif
                    }

                    vec3 normalColor = packNormalToRGB( normal );
                    #ifdef USE_MRT
                        float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
                        vec4 depthColor = packDepthToRGBA( fragCoordZ );
                        gNormal = vec4( normalColor, roughnessFactor );
                        gDepth = depthColor;
                    #else
                        gl_FragColor = vec4(normalColor, roughnessFactor);
                    #endif
                }
            `,toneMapped:!1}),this.normalMapType=ha,this.normalScale=new ue(1,1),Object.defineProperty(this,"glslVersion",{get(){return"USE_MRT"in this.defines?C0:null},set(e){}})}}var Rle=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,Ile=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D normalTexture;uniform sampler2D depthTexture;uniform sampler2D envMap;uniform mat4 _projectionMatrix;uniform mat4 _inverseProjectionMatrix;uniform mat4 cameraMatrixWorld;uniform float cameraNear;uniform float cameraFar;uniform float rayDistance;uniform float intensity;uniform float maxDepthDifference;uniform float roughnessFade;uniform float maxRoughness;uniform float fade;uniform float thickness;uniform float ior;uniform float samples;uniform float jitter;uniform float jitterRoughness;
#define INVALID_RAY_COORDS vec2(-1.0);
#define EARLY_OUT_COLOR vec4(0.0, 0.0, 0.0, 1.0)
#define FLOAT_EPSILON 0.00001
float nearMinusFar;float nearMulFar;float farMinusNear;
#include <packing>
#include <helperFunctions>
vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);float fastGetViewZ(const in float depth);vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness);void main(){vec4 depthTexel=textureLod(depthTexture,vUv,0.0);if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON){gl_FragColor=EARLY_OUT_COLOR;return;}float unpackedDepth=unpackRGBAToDepth(depthTexel);vec4 normalTexel=textureLod(normalTexture,vUv,0.0);float roughness=normalTexel.a;float specular=1.0-roughness;nearMinusFar=cameraNear-cameraFar;nearMulFar=cameraNear*cameraFar;farMinusNear=cameraFar-cameraNear;normalTexel.rgb=unpackRGBToNormal(normalTexel.rgb);float depth=fastGetViewZ(unpackedDepth);vec3 viewPos=getViewPosition(depth);vec3 viewDir=normalize(viewPos);vec3 viewNormal=normalTexel.xyz;vec3 worldPos=screenSpaceToWorldSpace(vUv,unpackedDepth);vec3 jitt=vec3(0.0);if(jitterRoughness!=0.0||jitter!=0.0){vec3 randomJitter=hash(50.0*samples*worldPos)-0.5;float spread=((2.0-specular)+roughness*jitterRoughness);float jitterMix=jitter*0.25+jitterRoughness*roughness;if(jitterMix>1.0)jitterMix=1.0;jitt=mix(vec3(0.0),randomJitter*spread,jitterMix);}viewNormal+=jitt;float fresnelFactor=fresnel_dielectric(viewDir,viewNormal,ior);vec3 iblRadiance=getIBLRadiance(-viewDir,viewNormal,0.)*fresnelFactor;float lastFrameAlpha=textureLod(accumulatedTexture,vUv,0.0).a;if(roughness>maxRoughness||(roughness>1.0-FLOAT_EPSILON&&roughnessFade>1.0-FLOAT_EPSILON)){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec3 reflected=reflect(viewDir,viewNormal);vec3 rayDir=reflected*-viewPos.z;vec3 hitPos=viewPos;float rayHitDepthDifference;vec2 coords=RayMarch(rayDir,hitPos,rayHitDepthDifference);if(coords.x==-1.0){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec4 SSRTexel=textureLod(inputTexture,coords.xy,0.0);vec4 SSRTexelReflected=textureLod(accumulatedTexture,coords.xy,0.0);vec3 SSR=SSRTexel.rgb+SSRTexelReflected.rgb;float roughnessFactor=mix(specular,1.0,max(0.0,1.0-roughnessFade));vec2 coordsNDC=(coords.xy*2.0-1.0);float screenFade=0.1;float maxDimension=min(1.0,max(abs(coordsNDC.x),abs(coordsNDC.y)));float reflectionIntensity=1.0-(max(0.0,maxDimension-screenFade)/(1.0-screenFade));reflectionIntensity=max(0.,reflectionIntensity);vec3 finalSSR=mix(iblRadiance,SSR,reflectionIntensity)*roughnessFactor;if(fade!=0.0){vec3 hitWorldPos=screenSpaceToWorldSpace(coords,rayHitDepthDifference);float reflectionDistance=distance(hitWorldPos,worldPos)+1.0;float opacity=1.0/(reflectionDistance*fade*0.1);if(opacity>1.0)opacity=1.0;finalSSR*=opacity;}finalSSR*=fresnelFactor*intensity;finalSSR=min(vec3(1.0),finalSSR);float alpha=hitPos.z==1.0 ? 1.0 : SSRTexelReflected.a;alpha=min(lastFrameAlpha,alpha);gl_FragColor=vec4(finalSSR,alpha);}vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){dir=normalize(dir);dir*=rayDistance/float(steps);float depth;vec4 projectedCoord;vec4 lastProjectedCoord;float unpackedDepth;vec4 depthTexel;for(int i=0;i<steps;i++){hitPos+=dir;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;
#ifndef missedRays
if(projectedCoord.x<0.0||projectedCoord.x>1.0||projectedCoord.y<0.0||projectedCoord.y>1.0){return INVALID_RAY_COORDS;}
#endif
depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;if(rayHitDepthDifference>=0.0&&rayHitDepthDifference<thickness){
#if refineSteps == 0
if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;
#else
return BinarySearch(dir,hitPos,rayHitDepthDifference);
#endif
}
#ifndef missedRays
if(hitPos.z>0.0){return INVALID_RAY_COORDS;}
#endif
lastProjectedCoord=projectedCoord;}hitPos.z=1.0;
#ifndef missedRays
return INVALID_RAY_COORDS;
#endif
rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){float depth;vec4 projectedCoord;vec2 lastMinProjectedCoordXY;float unpackedDepth;vec4 depthTexel;for(int i=0;i<refineSteps;i++){projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;dir*=0.5;if(rayHitDepthDifference>0.0){hitPos-=dir;}else{hitPos+=dir;}}if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;if(abs(rayHitDepthDifference)>maxDepthDifference)return INVALID_RAY_COORDS;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}float fastGetViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return nearMulFar/(farMinusNear*depth-cameraFar);
#else
return depth*nearMinusFar-cameraNear;
#endif
}
#include <common>
#include <cube_uv_reflection_fragment>
vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){
#if defined(ENVMAP_TYPE_CUBE_UV)
vec3 reflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));reflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*intensity;
#else
return vec3(0.0);
#endif
}`;class Dle extends Ot{constructor(){super({type:"ReflectionsMaterial",uniforms:{inputTexture:new he(null),accumulatedTexture:new he(null),normalTexture:new he(null),depthTexture:new he(null),_projectionMatrix:new he(new at),_inverseProjectionMatrix:new he(new at),cameraMatrixWorld:new he(new at),cameraNear:new he(0),cameraFar:new he(0),rayDistance:new he(0),intensity:new he(0),roughnessFade:new he(0),fade:new he(0),thickness:new he(0),ior:new he(0),maxDepthDifference:new he(0),jitter:new he(0),jitterRoughness:new he(0),maxRoughness:new he(0),samples:new he(0),envMap:new he(null),envMapPosition:new he(new B),envMapSize:new he(new B),viewMatrix:new he(new at)},defines:{steps:20,refineSteps:5,CUBEUV_TEXEL_WIDTH:0,CUBEUV_TEXEL_HEIGHT:0,CUBEUV_MAX_MIP:0,vWorldPosition:"worldPos"},fragmentShader:Ile.replace("#include <helperFunctions>",dF),vertexShader:Rle,toneMapped:!1,depthWrite:!1,depthTest:!1})}}const hF=t=>{const e=[t],n=[];for(;e.length!==0;){const r=e.shift();r.material&&n.push(r);for(const i of r.children)i.visible&&e.push(i)}return n},Lle=t=>{const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}},JI=(t,e,n)=>{t.uniforms.envMap.value=e;const r=Lle({envMapCubeUVHeight:n});t.defines.ENVMAP_TYPE_CUBE_UV="",t.defines.CUBEUV_TEXEL_WIDTH=r.texelWidth,t.defines.CUBEUV_TEXEL_HEIGHT=r.texelHeight,t.defines.CUBEUV_MAX_MIP=r.maxMip+".0",t.needsUpdate=!0},Ole=()=>{try{const t=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&t.getContext("webgl2"))}catch{return!1}};class kle extends fr{constructor(e,n={}){super("ReflectionsPass"),this.ssrEffect=void 0,this.cachedMaterials=new WeakMap,this.USE_MRT=!1,this.webgl1DepthPass=null,this.visibleMeshes=[],this.ssrEffect=e,this._scene=e._scene,this._camera=e._camera,this.fullscreenMaterial=new Dle,e._camera.isPerspectiveCamera&&(this.fullscreenMaterial.defines.PERSPECTIVE_CAMERA="");const r=n.width||typeof window<"u"?window.innerWidth:2e3,i=n.height||typeof window<"u"?window.innerHeight:1e3;this.renderTarget=new Lt(r,i,{minFilter:ot,magFilter:ot,type:wi,depthBuffer:!1}),this.renderPass=new id(this._scene,this._camera),this.USE_MRT=Ole(),this.USE_MRT?(this.gBuffersRenderTarget=new lO(r,i,2,{minFilter:ot,magFilter:ot}),this.normalTexture=this.gBuffersRenderTarget.texture[0],this.depthTexture=this.gBuffersRenderTarget.texture[1]):(this.webgl1DepthPass=new qE(this._scene,this._camera),this.webgl1DepthPass.renderTarget.minFilter=ot,this.webgl1DepthPass.renderTarget.magFilter=ot,this.webgl1DepthPass.renderTarget.texture.minFilter=ot,this.webgl1DepthPass.renderTarget.texture.magFilter=ot,this.webgl1DepthPass.setSize(typeof window<"u"?window.innerWidth:2e3,typeof window<"u"?window.innerHeight:1e3),this.gBuffersRenderTarget=new Lt(r,i,{minFilter:ot,magFilter:ot}),this.normalTexture=this.gBuffersRenderTarget.texture,this.depthTexture=this.webgl1DepthPass.texture),this.fullscreenMaterial.uniforms.normalTexture.value=this.normalTexture,this.fullscreenMaterial.uniforms.depthTexture.value=this.depthTexture,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.uniforms.cameraMatrixWorld.value=this._camera.matrixWorld,this.fullscreenMaterial.uniforms._projectionMatrix.value=this._camera.projectionMatrix,this.fullscreenMaterial.uniforms._inverseProjectionMatrix.value=this._camera.projectionMatrixInverse}setSize(e,n){this.renderTarget.setSize(e*this.ssrEffect.resolutionScale,n*this.ssrEffect.resolutionScale),this.gBuffersRenderTarget.setSize(e*this.ssrEffect.resolutionScale,n*this.ssrEffect.resolutionScale),this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.needsUpdate=!0}dispose(){this.renderTarget.dispose(),this.gBuffersRenderTarget.dispose(),this.renderPass.dispose(),this.USE_MRT||this.webgl1DepthPass.dispose(),this.fullscreenMaterial.dispose(),this.normalTexture=null,this.depthTexture=null,this.velocityTexture=null}keepMaterialMapUpdated(e,n,r,i){this.ssrEffect[i]?n[r]!==e[r]&&(e[r]=n[r],e.uniforms[r].value=n[r],n[r]?e.defines[i]="":delete e.defines[i],e.needsUpdate=!0):e[r]!==void 0&&(e[r]=void 0,e.uniforms[r].value=void 0,delete e.defines[i],e.needsUpdate=!0)}setMRTMaterialInScene(){this.visibleMeshes=hF(this._scene);for(const e of this.visibleMeshes)if(e.material){const n=e.material;let[r,i]=this.cachedMaterials.get(e)||[];if(n!==r){i&&i.dispose(),i=new Ale,this.USE_MRT&&(i.defines.USE_MRT=""),i.normalScale=n.normalScale,i.uniforms.normalScale.value=n.normalScale;const s=n.map||n.normalMap||n.roughnessMap||n.metalnessMap;s&&(i.uniforms.uvTransform.value=s.matrix),this.cachedMaterials.set(e,[n,i])}this.keepMaterialMapUpdated(i,n,"normalMap","useNormalMap"),this.keepMaterialMapUpdated(i,n,"roughnessMap","useRoughnessMap"),i.uniforms.roughness.value=this.ssrEffect.selection.size===0||this.ssrEffect.selection.has(e)?n.roughness||0:1e11,e.material=i}}unsetMRTMaterialInScene(){for(const n of this.visibleMeshes){var e;if(((e=n.material)==null?void 0:e.type)==="MRTMaterial"){n.visible=!0;const[r]=this.cachedMaterials.get(n);n.material=r}}}render(e,n){this.setMRTMaterialInScene(),e.setRenderTarget(this.gBuffersRenderTarget),this.renderPass.render(e,this.gBuffersRenderTarget),this.unsetMRTMaterialInScene(),this.USE_MRT||this.webgl1DepthPass.renderPass.render(e,this.webgl1DepthPass.renderTarget),this.fullscreenMaterial.uniforms.inputTexture.value=n.texture,this.fullscreenMaterial.uniforms.samples.value=this.ssrEffect.temporalResolvePass.samples,this.fullscreenMaterial.uniforms.cameraNear.value=this._camera.near,this.fullscreenMaterial.uniforms.cameraFar.value=this._camera.far,this.fullscreenMaterial.uniforms.viewMatrix.value.copy(this._camera.matrixWorldInverse),e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera)}}const eD={intensity:1,exponent:1,distance:10,fade:0,roughnessFade:1,thickness:10,ior:1.45,maxRoughness:1,maxDepthDifference:10,blend:.9,correction:1,correctionRadius:1,blur:.5,blurKernel:1,blurSharpness:10,jitter:0,jitterRoughness:0,steps:20,refineSteps:5,missedRays:!0,useNormalMap:!0,useRoughnessMap:!0,resolutionScale:1,velocityResolutionScale:1};var Ule=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,Nle=`#define GLSLIFY 1
uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D velocityTexture;uniform sampler2D lastVelocityTexture;uniform float blend;uniform float correction;uniform float exponent;uniform float samples;uniform vec2 invTexSize;uniform mat4 curInverseProjectionMatrix;uniform mat4 curCameraMatrixWorld;uniform mat4 prevInverseProjectionMatrix;uniform mat4 prevCameraMatrixWorld;varying vec2 vUv;
#define MAX_NEIGHBOR_DEPTH_DIFFERENCE 0.001
#define FLOAT_EPSILON 0.00001
#define FLOAT_ONE_MINUS_EPSILON 0.99999
vec3 transformexponent;vec3 undoColorTransformExponent;vec3 transformColor(vec3 color){if(exponent==1.0)return color;return pow(abs(color),transformexponent);}vec3 undoColorTransform(vec3 color){if(exponent==1.0)return color;return max(pow(abs(color),undoColorTransformExponent),vec3(0.0));}void main(){if(exponent!=1.0){transformexponent=vec3(1.0/exponent);undoColorTransformExponent=vec3(exponent);}vec4 inputTexel=textureLod(inputTexture,vUv,0.0);vec4 accumulatedTexel;vec3 inputColor=transformColor(inputTexel.rgb);vec3 accumulatedColor;float alpha=inputTexel.a;float velocityDisocclusion;bool didReproject=false;
#ifdef boxBlur
vec3 boxBlurredColor=inputTexel.rgb;
#endif
vec4 velocity=textureLod(velocityTexture,vUv,0.0);bool isMoving=alpha<1.0||dot(velocity.xy,velocity.xy)>0.0;if(isMoving){vec3 minNeighborColor=inputColor;vec3 maxNeighborColor=inputColor;vec3 col;vec2 neighborUv;vec2 reprojectedUv=vUv-velocity.xy;vec4 lastVelocity=textureLod(lastVelocityTexture,reprojectedUv,0.0);float depth=velocity.b;float closestDepth=depth;float lastClosestDepth=lastVelocity.b;float neighborDepth;float lastNeighborDepth;for(int x=-correctionRadius;x<=correctionRadius;x++){for(int y=-correctionRadius;y<=correctionRadius;y++){if(x!=0||y!=0){neighborUv=vUv+vec2(x,y)*invTexSize;vec4 neigborVelocity=textureLod(velocityTexture,neighborUv,0.0);neighborDepth=neigborVelocity.b;col=textureLod(inputTexture,neighborUv,0.0).xyz;int absX=abs(x);int absY=abs(y);
#ifdef dilation
if(absX==1&&absY==1){if(neighborDepth>closestDepth){velocity=neigborVelocity;closestDepth=neighborDepth;}vec4 lastNeighborVelocity=textureLod(velocityTexture,vUv+vec2(x,y)*invTexSize,0.0);lastNeighborDepth=lastNeighborVelocity.b;if(neighborDepth>closestDepth){lastVelocity=lastNeighborVelocity;lastClosestDepth=lastNeighborDepth;}}
#endif
if(abs(depth-neighborDepth)<MAX_NEIGHBOR_DEPTH_DIFFERENCE){
#ifdef boxBlur
if(absX<=2&&absY<=2)boxBlurredColor+=col;
#endif
col=transformColor(col);minNeighborColor=min(col,minNeighborColor);maxNeighborColor=max(col,maxNeighborColor);}}}}float velocityLength=length(lastVelocity.xy-velocity.xy);velocityDisocclusion=(velocityLength-0.000005)*10.0;velocityDisocclusion*=velocityDisocclusion;reprojectedUv=vUv-velocity.xy;
#ifdef boxBlur
float pxRadius=correctionRadius>5 ? 121.0 : pow(float(correctionRadius*2+1),2.0);boxBlurredColor/=pxRadius;boxBlurredColor=transformColor(boxBlurredColor);
#endif
if(reprojectedUv.x>=0.0&&reprojectedUv.x<=1.0&&reprojectedUv.y>=0.0&&reprojectedUv.y<=1.0){accumulatedTexel=textureLod(accumulatedTexture,reprojectedUv,0.0);accumulatedColor=transformColor(accumulatedTexel.rgb);vec3 clampedColor=clamp(accumulatedColor,minNeighborColor,maxNeighborColor);accumulatedColor=mix(accumulatedColor,clampedColor,correction);didReproject=true;}else{
#ifdef boxBlur
accumulatedColor=boxBlurredColor;
#else
accumulatedColor=inputColor;
#endif
}if(velocity.r>FLOAT_ONE_MINUS_EPSILON&&velocity.g>FLOAT_ONE_MINUS_EPSILON){alpha=0.0;velocityDisocclusion=1.0;}}else{accumulatedColor=transformColor(textureLod(accumulatedTexture,vUv,0.0).rgb);}vec3 outputColor=inputColor;
#include <custom_compose_shader>
gl_FragColor=vec4(undoColorTransform(outputColor),alpha);}`;class Fle extends Ot{constructor(e){const n=Nle.replace("#include <custom_compose_shader>",e);super({type:"TemporalResolveMaterial",uniforms:{inputTexture:new he(null),accumulatedTexture:new he(null),velocityTexture:new he(null),lastVelocityTexture:new he(null),samples:new he(1),blend:new he(.5),correction:new he(1),exponent:new he(1),invTexSize:new he(new ue)},defines:{correctionRadius:1},vertexShader:Ule,fragmentShader:n})}}const zle=`
		#ifdef USE_SKINNING
		#ifdef BONE_TEXTURE
			uniform sampler2D prevBoneTexture;
			mat4 getPrevBoneMatrix( const in float i ) {
				float j = i * 4.0;
				float x = mod( j, float( boneTextureSize ) );
				float y = floor( j / float( boneTextureSize ) );
				float dx = 1.0 / float( boneTextureSize );
				float dy = 1.0 / float( boneTextureSize );
				y = dy * ( y + 0.5 );
				vec4 v1 = texture2D( prevBoneTexture, vec2( dx * ( x + 0.5 ), y ) );
				vec4 v2 = texture2D( prevBoneTexture, vec2( dx * ( x + 1.5 ), y ) );
				vec4 v3 = texture2D( prevBoneTexture, vec2( dx * ( x + 2.5 ), y ) );
				vec4 v4 = texture2D( prevBoneTexture, vec2( dx * ( x + 3.5 ), y ) );
				mat4 bone = mat4( v1, v2, v3, v4 );
				return bone;
			}
		#else
			uniform mat4 prevBoneMatrices[ MAX_BONES ];
			mat4 getPrevBoneMatrix( const in float i ) {
				mat4 bone = prevBoneMatrices[ int(i) ];
				return bone;
			}
		#endif
		#endif
`,Ble=`
		vec3 transformed;

		// Get the normal
		${ut.skinbase_vertex}
		${ut.beginnormal_vertex}
		${ut.skinnormal_vertex}
		${ut.defaultnormal_vertex}

		// Get the current vertex position
		transformed = vec3( position );
		${ut.skinning_vertex}
		newPosition = velocityMatrix * vec4( transformed, 1.0 );

		// Get the previous vertex position
		transformed = vec3( position );
		${ut.skinbase_vertex.replace(/mat4 /g,"").replace(/getBoneMatrix/g,"getPrevBoneMatrix")}
		${ut.skinning_vertex.replace(/vec4 /g,"")}
		prevPosition = prevVelocityMatrix * vec4( transformed, 1.0 );

		gl_Position = newPosition;
`;class Hle extends Ot{constructor(){super({uniforms:{prevVelocityMatrix:{value:new at},velocityMatrix:{value:new at},prevBoneTexture:{value:null},interpolateGeometry:{value:0},intensity:{value:1},boneTexture:{value:null},alphaTest:{value:0},map:{value:null},alphaMap:{value:null},opacity:{value:1}},vertexShader:`
                    #define MAX_BONES 1024
                    
                    ${ut.skinning_pars_vertex}
                    ${zle}
        
                    uniform mat4 velocityMatrix;
                    uniform mat4 prevVelocityMatrix;
                    uniform float interpolateGeometry;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
					varying vec2 vHighPrecisionZW;
        
                    void main() {
        
                        ${Ble}

						vHighPrecisionZW = gl_Position.zw;
        
                    }`,fragmentShader:`
                    uniform float intensity;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
					varying vec2 vHighPrecisionZW;
        
                    void main() {
						#ifdef FULL_MOVEMENT
						gl_FragColor = vec4( 1., 1., 1. - gl_FragCoord.z, 0. );
						return;
						#endif

                        vec2 pos0 = (prevPosition.xy / prevPosition.w) * 0.5 + 0.5;
                        vec2 pos1 = (newPosition.xy / newPosition.w) * 0.5 + 0.5;
        
                        vec2 vel = pos1 - pos0;

						float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
                        
                        gl_FragColor = vec4( vel, 1. - fragCoordZ, 0. );
        
                    }`}),this.isVelocityMaterial=!0}}const Vle=new ze(0),Gle=["visible","wireframe","side"];class Wle extends fr{constructor(e,n){var r,i;super("VelocityPass"),this.cachedMaterials=new WeakMap,this.lastCameraTransform={position:new B,quaternion:new Wn},this.visibleMeshes=[],this.renderedMeshesThisFrame=0,this.renderedMeshesLastFrame=0,this._scene=e,this._camera=n,this.renderTarget=new Lt(((r=window)==null?void 0:r.innerWidth)||1e3,((i=window)==null?void 0:i.innerHeight)||1e3,{type:wi})}setVelocityMaterialInScene(){this.renderedMeshesThisFrame=0,this.visibleMeshes=hF(this._scene);for(const r of this.visibleMeshes){var e;const i=r.material;let[s,o]=this.cachedMaterials.get(r)||[];if(i!==s){var n;o=new Hle,o.lastMatrixWorld=new at,r.material=o,(n=r.skeleton)!=null&&n.boneTexture&&this.saveBoneTexture(r),this.cachedMaterials.set(r,[i,o])}if(o.uniforms.velocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,r.modelViewMatrix),r.userData.needsUpdatedReflections||i.map instanceof TO?("FULL_MOVEMENT"in o.defines||(o.needsUpdate=!0),o.defines.FULL_MOVEMENT=""):"FULL_MOVEMENT"in o.defines&&(delete o.defines.FULL_MOVEMENT,o.needsUpdate=!0),r.visible=this.cameraMovedThisFrame||!r.matrixWorld.equals(o.lastMatrixWorld)||r.skeleton||"FULL_MOVEMENT"in o.defines,r.material=o,!!r.visible){this.renderedMeshesThisFrame++;for(const a of Gle)o[a]=i[a];(e=r.skeleton)!=null&&e.boneTexture&&(o.defines.USE_SKINNING="",o.defines.BONE_TEXTURE="",o.uniforms.boneTexture.value=r.skeleton.boneTexture)}}}saveBoneTexture(e){let n=e.material.uniforms.prevBoneTexture.value;if(n&&n.image.width===e.skeleton.boneTexture.width)n=e.material.uniforms.prevBoneTexture.value,n.image.data.set(e.skeleton.boneTexture.image.data);else{var r;(r=n)==null||r.dispose();const i=e.skeleton.boneTexture.image.data.slice(),s=e.skeleton.boneTexture.image.width;n=new Jo(i,s,s,vn,Nn),e.material.uniforms.prevBoneTexture.value=n,n.needsUpdate=!0}}unsetVelocityMaterialInScene(){for(const n of this.visibleMeshes)if(n.material.isVelocityMaterial){var e;n.visible=!0,n.material.lastMatrixWorld.copy(n.matrixWorld),n.material.uniforms.prevVelocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,n.modelViewMatrix),(e=n.skeleton)!=null&&e.boneTexture&&this.saveBoneTexture(n),n.material=this.cachedMaterials.get(n)[0]}}setSize(e,n){this.renderTarget.setSize(e,n)}renderVelocity(e){if(e.setRenderTarget(this.renderTarget),this.renderedMeshesThisFrame>0){const{background:n}=this._scene;this._scene.background=Vle,e.render(this._scene,this._camera),this._scene.background=n}else e.clearColor()}checkCameraMoved(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),n=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));return e>1e-6||n>1e-6?(this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion),!0):!1}render(e){this.cameraMovedThisFrame=this.checkCameraMoved(),this.setVelocityMaterialInScene(),(this.renderedMeshesThisFrame>0||this.renderedMeshesLastFrame>0)&&this.renderVelocity(e),this.unsetVelocityMaterialInScene(),this.renderedMeshesLastFrame=this.renderedMeshesThisFrame}}const tD=new ue;class $le extends fr{constructor(e,n,r,i={}){super("TemporalResolvePass"),this.velocityPass=null,this.velocityResolutionScale=1,this.samples=1,this.lastCameraTransform={position:new B,quaternion:new Wn},this._scene=e,this._camera=n,this.renderTarget=new Lt(1,1,{minFilter:ot,magFilter:ot,type:wi,depthBuffer:!1}),this.velocityPass=new Wle(e,n),this.fullscreenMaterial=new Fle(r),this.fullscreenMaterial.defines.correctionRadius=i.correctionRadius||1,i.dilation&&(this.fullscreenMaterial.defines.dilation=""),i.boxBlur&&(this.fullscreenMaterial.defines.boxBlur=""),this.setupFramebuffers(1,1),this.checkCanUseSharedVelocityTexture()}dispose(){this._scene.userData.velocityTexture===this.velocityPass.renderTarget.texture&&(delete this._scene.userData.velocityTexture,delete this._scene.userData.lastVelocityTexture),this.renderTarget.dispose(),this.accumulatedTexture.dispose(),this.fullscreenMaterial.dispose(),this.velocityPass.dispose()}setSize(e,n){this.renderTarget.setSize(e,n),this.velocityPass.setSize(e*this.velocityResolutionScale,n*this.velocityResolutionScale),this.velocityPass.renderTarget.texture.minFilter=this.velocityResolutionScale===1?kt:ot,this.velocityPass.renderTarget.texture.magFilter=this.velocityResolutionScale===1?kt:ot,this.velocityPass.renderTarget.texture.needsUpdate=!0,this.fullscreenMaterial.uniforms.invTexSize.value.set(1/e,1/n),this.setupFramebuffers(e,n)}setupFramebuffers(e,n){this.accumulatedTexture&&this.accumulatedTexture.dispose(),this.lastVelocityTexture&&this.lastVelocityTexture.dispose(),this.accumulatedTexture=new Pw(e,n,vn),this.accumulatedTexture.minFilter=ot,this.accumulatedTexture.magFilter=ot,this.accumulatedTexture.type=wi,this.lastVelocityTexture=new Pw(e*this.velocityResolutionScale,n*this.velocityResolutionScale,vn),this.lastVelocityTexture.minFilter=this.velocityResolutionScale===1?kt:ot,this.lastVelocityTexture.magFilter=this.velocityResolutionScale===1?kt:ot,this.lastVelocityTexture.type=wi,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.accumulatedTexture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0}checkCanUseSharedVelocityTexture(){return this._scene.userData.velocityTexture&&this.velocityPass.renderTarget.texture!==this._scene.userData.velocityTexture?this.velocityPass.renderTarget.texture===this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this._scene.userData.lastVelocityTexture,this.fullscreenMaterial.uniforms.velocityTexture.value=this._scene.userData.velocityTexture,this.fullscreenMaterial.needsUpdate=!0):this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.velocityTexture.value=this.velocityPass.renderTarget.texture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0,this._scene.userData.velocityTexture||(this._scene.userData.velocityTexture=this.velocityPass.renderTarget.texture,this._scene.userData.lastVelocityTexture=this.lastVelocityTexture)),this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value}checkNeedsResample(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),n=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));(e>1e-6||n>1e-6)&&(this.samples=1,this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion))}render(e){this.samples++,this.checkNeedsResample(),this.fullscreenMaterial.uniforms.samples.value=this.samples,e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera),e.copyFramebufferToTexture(tD,this.accumulatedTexture),e.setRenderTarget(this.velocityPass.renderTarget),e.copyFramebufferToTexture(tD,this.lastVelocityTexture)}}const nD=function(e,n){let r=1,i=0;for(;e>0;)r/=n,i+=r*(e%n),e=~~(e/n);return i},jle=t=>{const e=[];let n=1;const r=n+t;for(;n<r;n++)e.push([nD(n,2)-.5,nD(n,3)-.5]);return e};function rD(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Xle=`
#if defined( USE_ENVMAP ) || defined(  ) || defined ( USE_SHADOWMAP )
    vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );

    #ifdef BOX_PROJECTED_ENV_MAP
        vWorldPosition = worldPosition.xyz;
    #endif
#endif
`,Kle=`
#ifdef BOX_PROJECTED_ENV_MAP
    uniform vec3 envMapSize;
    uniform vec3 envMapPosition;
    varying vec3 vWorldPosition;
    
    vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
        vec3 nDir = normalize( v );

        vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
        vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;

        vec3 rbminmax;

        rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
        rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
        rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;

        float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
        vec3 boxIntersection = vWorldPosition + nDir * correction;
        
        return boxIntersection - cubePos;
    }
#endif
`,Yle=`
#ifdef BOX_PROJECTED_ENV_MAP
    worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,qle=`
#ifdef BOX_PROJECTED_ENV_MAP
    reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function Zle(t,e,n){t.defines.BOX_PROJECTED_ENV_MAP="",t.uniforms.envMapPosition={value:e},t.uniforms.envMapSize={value:n};const r=new RegExp(rD("vec3 worldNormal = inverseTransformDirection ( normal , viewMatrix ) ;").replaceAll(" ","\\s*"),"g"),i=new RegExp(rD("reflectVec = inverseTransformDirection ( reflectVec , viewMatrix ) ;").replaceAll(" ","\\s*"),"g");t.vertexShader=`varying vec3 vWorldPosition;
`+t.vertexShader.replace("#include <worldpos_vertex>",Xle),t.fragmentShader=Kle+`
`+t.fragmentShader.replace("#include <envmap_physical_pars_fragment>",ut.envmap_physical_pars_fragment).replace(r,`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
                ${Yle}`).replace(i,`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                ${qle}`)}const Qle=Ple.replace("#include <helperFunctions>",dF).replace("#include <boxBlur>",Tle),Jle=["blur","blurSharpness","blurKernel"],eue=new py(1);let Tv;class tue extends Xi{constructor(e,n,r=eD){super("SSREffect",Qle,{type:"FinalSSRMaterial",uniforms:new Map([["reflectionsTexture",new he(null)],["blur",new he(0)],["blurSharpness",new he(0)],["blurKernel",new he(0)]]),defines:new Map([["RENDER_MODE","0"]])}),this.haltonSequence=jle(1024),this.haltonIndex=0,this.selection=new ZE,this.lastSize=void 0,this.cubeCamera=new IM(.001,1e3,eue),this.usingBoxProjectedEnvMap=!1,this._scene=e,this._camera=n,r=xb({},eD,r,{boxBlur:!0,dilation:!0}),this.temporalResolvePass=new $le(e,n,Cle,r),this.uniforms.get("reflectionsTexture").value=this.temporalResolvePass.renderTarget.texture,this.reflectionsPass=new kle(this,r),this.temporalResolvePass.fullscreenMaterial.uniforms.inputTexture.value=this.reflectionsPass.renderTarget.texture,this.lastSize={width:r.width,height:r.height,resolutionScale:r.resolutionScale,velocityResolutionScale:r.velocityResolutionScale},this.setSize(r.width,r.height),this.makeOptionsReactive(r)}makeOptionsReactive(e){let n=!1;const r=this.reflectionsPass.fullscreenMaterial.uniforms,i=Object.keys(r);for(const s of Object.keys(e))Object.defineProperty(this,s,{get(){return e[s]},set(o){if(!(e[s]===o&&n))switch(e[s]=o,Jle.includes(s)||this.setSize(this.lastSize.width,this.lastSize.height,!0),s){case"resolutionScale":this.setSize(this.lastSize.width,this.lastSize.height);break;case"velocityResolutionScale":this.temporalResolvePass.velocityResolutionScale=o,this.setSize(this.lastSize.width,this.lastSize.height,!0);break;case"blur":this.uniforms.get("blur").value=o;break;case"blurSharpness":this.uniforms.get("blurSharpness").value=o;break;case"blurKernel":this.uniforms.get("blurKernel").value=o;break;case"steps":this.reflectionsPass.fullscreenMaterial.defines.steps=parseInt(o),this.reflectionsPass.fullscreenMaterial.needsUpdate=n;break;case"refineSteps":this.reflectionsPass.fullscreenMaterial.defines.refineSteps=parseInt(o),this.reflectionsPass.fullscreenMaterial.needsUpdate=n;break;case"missedRays":o?this.reflectionsPass.fullscreenMaterial.defines.missedRays="":delete this.reflectionsPass.fullscreenMaterial.defines.missedRays,this.reflectionsPass.fullscreenMaterial.needsUpdate=n;break;case"correctionRadius":this.temporalResolvePass.fullscreenMaterial.defines.correctionRadius=Math.round(o),this.temporalResolvePass.fullscreenMaterial.needsUpdate=n;break;case"blend":this.temporalResolvePass.fullscreenMaterial.uniforms.blend.value=o;break;case"correction":this.temporalResolvePass.fullscreenMaterial.uniforms.correction.value=o;break;case"exponent":this.temporalResolvePass.fullscreenMaterial.uniforms.exponent.value=o;break;case"distance":r.rayDistance.value=o;default:i.includes(s)&&(r[s].value=o)}}}),this[s]=e[s];n=!0}setSize(e,n,r=!1){!r&&e===this.lastSize.width&&n===this.lastSize.height&&this.resolutionScale===this.lastSize.resolutionScale&&this.velocityResolutionScale===this.lastSize.velocityResolutionScale||(this.temporalResolvePass.setSize(e,n),this.reflectionsPass.setSize(e,n),this.lastSize={width:e,height:n,resolutionScale:this.resolutionScale,velocityResolutionScale:this.velocityResolutionScale})}generateBoxProjectedEnvMapFallback(e,n=new B,r=new B,i=512){this.cubeCamera.renderTarget.dispose(),this.cubeCamera.renderTarget=new py(i),this.cubeCamera.position.copy(n),this.cubeCamera.updateMatrixWorld(),this.cubeCamera.update(e,this._scene),Tv||(Tv=new R0(e),Tv.compileCubemapShader());const s=Tv.fromCubemap(this.cubeCamera.renderTarget.texture).texture;s.minFilter=ot,s.magFilter=ot;const o=this.reflectionsPass.fullscreenMaterial;return Zle(o,n,r),o.fragmentShader=o.fragmentShader.replace("vec3 worldPos","worldPos").replace("varying vec3 vWorldPosition;","vec3 worldPos;"),o.uniforms.envMapPosition.value.copy(n),o.uniforms.envMapSize.value.copy(r),JI(o,s,i),this.usingBoxProjectedEnvMap=!0,s}setIBLRadiance(e,n){this._scene.traverse(r=>{if(r.material){var i;const s=(i=n.properties.get(r.material))==null?void 0:i.uniforms;s&&"disableIBLRadiance"in s&&(s.disableIBLRadiance.value=e)}})}deleteBoxProjectedEnvMapFallback(){const e=this.reflectionsPass.fullscreenMaterial;e.uniforms.envMap.value=null,e.fragmentShader=e.fragmentShader.replace("worldPos = ","vec3 worldPos = "),delete e.defines.BOX_PROJECTED_ENV_MAP,e.needsUpdate=!0,this.usingBoxProjectedEnvMap=!1}dispose(){super.dispose(),this.reflectionsPass.dispose(),this.temporalResolvePass.dispose()}update(e,n){if(!this.usingBoxProjectedEnvMap&&this._scene.environment){const a=this.reflectionsPass.fullscreenMaterial;let l=null;if(this._scene.traverse(u=>{if(!l&&u.material&&!u.material.envMap){const d=e.properties.get(u.material);"envMap"in d&&d.envMap instanceof Bn&&(l=d.envMap)}}),l){const u=this._scene.environment.image.height;JI(a,l,u)}}this.haltonIndex=(this.haltonIndex+1)%this.haltonSequence.length;const[r,i]=this.haltonSequence[this.haltonIndex],{width:s,height:o}=this.lastSize;this.temporalResolvePass.velocityPass.render(e),this._camera.setViewOffset&&this._camera.setViewOffset(s,o,r,i,s,o),this.reflectionsPass.render(e,n),this.temporalResolvePass.render(e),this._camera.clearViewOffset()}static patchDirectEnvIntensity(e=0){e===0?ut.envmap_physical_pars_fragment=ut.envmap_physical_pars_fragment.replace("vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {","vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) { return vec3(0.0);"):ut.envmap_physical_pars_fragment=ut.envmap_physical_pars_fragment.replace("vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );","vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness ) * "+e.toFixed(5)+";")}}const yl=R.createContext(null),nue=Z.memo(R.forwardRef(({children:t,camera:e,scene:n,resolutionScale:r,enabled:i=!0,renderPriority:s=1,autoClear:o=!0,depthBuffer:a,disableNormalPass:l,stencilBuffer:u,multisampling:d=8,frameBufferType:h=wi},p)=>{const{gl:g,scene:v,camera:_,size:x}=ln(),m=n||v,S=e||_,[w,M,I]=R.useMemo(()=>{const T=Zj(),E=new mae(g,{depthBuffer:a,stencilBuffer:u,multisampling:d>0&&T?d:0,frameBufferType:h});E.addPass(new id(m,S));let O=null,N=null;return l||(N=new dae(m,S),N.enabled=!1,E.addPass(N),r!==void 0&&T&&(O=new uF({normalBuffer:N.texture,resolutionScale:r}),O.enabled=!1,E.addPass(O))),[E,N,O]},[S,g,a,u,d,h,m,l,r]);R.useEffect(()=>w==null?void 0:w.setSize(x.width,x.height),[w,x]),ml((T,E)=>{i&&(g.autoClear=o,w.render(E))},i?s:0);const P=R.useRef(null),D=Z$(P);R.useLayoutEffect(()=>{let T;return P.current&&D.current&&w&&(T=new lae(S,...D.current.objects),T.renderToScreen=!0,w.addPass(T),M&&(M.enabled=!0),I&&(I.enabled=!0)),()=>{T&&(w==null||w.removePass(T)),M&&(M.enabled=!1),I&&(I.enabled=!1)}},[w,t,S,M,I,D]);const A=R.useMemo(()=>({composer:w,normalPass:M,downSamplingPass:I,resolutionScale:r,camera:S,scene:m}),[w,M,I,r,S,m]);return R.useImperativeHandle(p,()=>w,[w]),Ie.jsx(yl.Provider,{value:A,children:Ie.jsx("group",{ref:P,children:t})})})),rue=R.forwardRef(function({target:e,depthTexture:n,...r},i){const s=ln(l=>l.invalidate),{camera:o}=R.useContext(yl),a=R.useMemo(()=>{const l=new ile(o,r),u=l.maskPass.getFullscreenMaterial();return u.maskFunction=Uh.MULTIPLY_RGB_SET_ALPHA,l},[o,r]);return R.useLayoutEffect(()=>{if(e&&typeof e!="number"){const l=e instanceof B?new B().set(e.x,e.y,e.z):new B().set(e[0],e[1],e[2]);a.target=l}n&&a.setDepthTexture(n.texture,n.packing),s()},[e,n,a]),Ie.jsx("primitive",{ref:i,object:a,dispose:null})});R.forwardRef(({target:t=void 0,mouse:e=!1,debug:n=void 0,manual:r=!1,smoothTime:i=.25,...s},o)=>{const a=R.useRef(null),l=R.useRef(null),u=R.useRef(null),d=ln(({scene:I})=>I),h=ln(({pointer:I})=>I),{composer:p,camera:g}=R.useContext(yl),[v]=R.useState(()=>new oae),[_]=R.useState(()=>new lF);R.useEffect(()=>(p.addPass(v),p.addPass(_),()=>{p.removePass(v),p.removePass(_)}),[p,v,_]),R.useEffect(()=>()=>{v.dispose(),_.dispose()},[v,_]);const[x]=R.useState(()=>new B(0,0,0)),[m]=R.useState(()=>new B(0,0,0)),S=R.useCallback(async(I,P)=>(m.x=I,m.y=P,m.z=await v.readDepth(m),m.z=m.z*2-1,1-m.z>1e-7?m.unproject(g):!1),[m,v,g]),w=R.useCallback(async(I,P=!0)=>{var D;if(t)x.set(...t);else{const{x:A,y:T}=e?h:{x:0,y:0},E=await S(A,T);E&&x.copy(E)}P&&(!((D=a.current)===null||D===void 0)&&D.target)&&(i>0&&I>0?tj.damp3(a.current.target,x,i,I):a.current.target.copy(x))},[t,x,e,S,i,h]);ml(async(I,P)=>{var D;r||w(P),l.current&&l.current.position.copy(x),u.current&&(!((D=a.current)===null||D===void 0)&&D.target)&&u.current.position.copy(a.current.target)});const M=R.useMemo(()=>({dofRef:a,hitpoint:x,update:w}),[x,w]);return R.useImperativeHandle(o,()=>M,[M]),Ie.jsxs(Ie.Fragment,{children:[n?n7(Ie.jsxs(Ie.Fragment,{children:[Ie.jsxs("mesh",{ref:l,children:[Ie.jsx("sphereGeometry",{args:[n,16,16]}),Ie.jsx("meshBasicMaterial",{color:"#00ff00",opacity:1,transparent:!0,depthWrite:!1})]}),Ie.jsxs("mesh",{ref:u,children:[Ie.jsx("sphereGeometry",{args:[n/2,16,16]}),Ie.jsx("meshBasicMaterial",{color:"#00ff00",opacity:.5,transparent:!0,depthWrite:!1})]})]}),d):null,Ie.jsx(rue,{ref:a,...s,target:x})]})});const Wa=t=>typeof t=="object"&&t!=null&&"current"in t?t.current:t;let iue=0;const iD=new WeakMap,sue=(t,e)=>Z.forwardRef(function({blendFunction:r=e==null?void 0:e.blendFunction,opacity:i=e==null?void 0:e.opacity,...s},o){let a=iD.get(t);if(!a){const d=`@react-three/postprocessing/${t.name}-${iue++}`;Yp({[d]:t}),iD.set(t,a=d)}const l=ln(d=>d.camera),u=Z.useMemo(()=>{var d,h;return[...(d=e==null?void 0:e.args)!==null&&d!==void 0?d:[],...(h=s.args)!==null&&h!==void 0?h:[{...e,...s}]]},[JSON.stringify(s)]);return Ie.jsx(a,{camera:l,"blendMode-blendFunction":r,"blendMode-opacity":i,...s,ref:o,args:u})}),t0=(t,e)=>{const n=t[e];return Z.useMemo(()=>typeof n=="number"?new ue(n,n):n?new ue(...n):new ue,[n])},oue=sue(cF,{blendFunction:gt.ADD});R.forwardRef(function(e,n){const r=t0(e,"offset"),i=R.useMemo(()=>new nle({...e,offset:r}),[r,e]);return Ie.jsx("primitive",{ref:n,object:i,dispose:null})});R.forwardRef(function({blendFunction:e=gt.NORMAL},n){const r=R.useMemo(()=>new Jae(e),[e]);return Ie.jsx("primitive",{ref:n,object:r,dispose:null})});R.forwardRef(function({active:e=!0,...n},r){const i=ln(u=>u.invalidate),s=t0(n,"delay"),o=t0(n,"duration"),a=t0(n,"strength"),l=R.useMemo(()=>new ale({...n,delay:s,duration:o,strength:a}),[s,o,n,a]);return R.useLayoutEffect(()=>{l.mode=e?n.mode||Kl.SPORADIC:Kl.DISABLED,i()},[e,l,i,n.mode]),Ie.jsx("primitive",{ref:r,object:l,dispose:null})});R.forwardRef(function(e,n){const{camera:r}=R.useContext(yl),i=R.useMemo(()=>new ule(r,Wa(e.sun),e),[r,e]);return R.useLayoutEffect(()=>void(i.lightSource=Wa(e.sun)),[i,e.sun]),Ie.jsx("primitive",{ref:n,object:i,dispose:null})});R.forwardRef(function({size:e,...n},r){const i=ln(o=>o.invalidate),s=R.useMemo(()=>new fle(n),[n]);return R.useLayoutEffect(()=>{e&&s.setSize(e.width,e.height),i()},[s,e]),Ie.jsx("primitive",{ref:r,object:s,dispose:null})});const QE=R.createContext(null);R.forwardRef(function({selection:e=[],selectionLayer:n=10,blendFunction:r,patternTexture:i,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:l,width:u,height:d,kernelSize:h,blur:p,xRay:g,...v},_){const x=ln(I=>I.invalidate),{scene:m,camera:S}=R.useContext(yl),w=R.useMemo(()=>new vle(m,S,{blendFunction:r,patternTexture:i,edgeStrength:s,pulseSpeed:o,visibleEdgeColor:a,hiddenEdgeColor:l,width:u,height:d,kernelSize:h,blur:p,xRay:g,...v}),[r,p,S,s,d,l,h,i,v,o,m,a,u,g]),M=R.useContext(QE);return R.useEffect(()=>{if(!M&&e)return w.selection.set(Array.isArray(e)?e.map(Wa):[Wa(e)]),x(),()=>{w.selection.clear(),x()}},[w,e,M,x]),R.useEffect(()=>{w.selectionLayer=n,x()},[w,x,n]),R.useRef(),R.useEffect(()=>{var I;if(M&&M.enabled&&!((I=M.selected)===null||I===void 0)&&I.length)return w.selection.set(M.selected),x(),()=>{w.selection.clear(),x()}},[M,w.selection,x]),Ie.jsx("primitive",{ref:_,object:w})});R.forwardRef(function({granularity:e=5},n){const r=R.useMemo(()=>new xle(e),[e]);return Ie.jsx("primitive",{ref:n,object:r,dispose:null})});const aue=(t,e)=>t.layers.enable(e.selection.layer),lue=(t,e)=>t.layers.disable(e.selection.layer);R.forwardRef(function({selection:e=[],selectionLayer:n=10,lights:r=[],luminanceThreshold:i,luminanceSmoothing:s,intensity:o,width:a,height:l,kernelSize:u,mipmapBlur:d,...h},p){r.length===0&&console.warn("SelectiveBloom requires lights to work.");const g=ln(S=>S.invalidate),{scene:v,camera:_}=R.useContext(yl),x=R.useMemo(()=>new _le(v,_,{blendFunction:gt.ADD,luminanceThreshold:i,luminanceSmoothing:s,intensity:o,width:a,height:l,kernelSize:u,mipmapBlur:d,...h}),[v,_,i,s,o,a,l,u,d,h]),m=R.useContext(QE);return R.useEffect(()=>{if(!m&&e)return x.selection.set(Array.isArray(e)?e.map(Wa):[Wa(e)]),g(),()=>{x.selection.clear(),g()}},[x,e,m,g]),R.useEffect(()=>{x.selection.layer=n,g()},[x,g,n]),R.useEffect(()=>{if(r&&r.length>0)return r.forEach(S=>aue(Wa(S),x)),g(),()=>{r.forEach(S=>lue(Wa(S),x)),g()}},[x,g,r,n]),R.useEffect(()=>{var S;if(m&&m.enabled&&!((S=m.selected)===null||S===void 0)&&S.length)return x.selection.set(m.selected),g(),()=>{x.selection.clear(),g()}},[m,x.selection,g]),Ie.jsx("primitive",{ref:p,object:x,dispose:null})});R.forwardRef(function(e,n){const{camera:r,normalPass:i,downSamplingPass:s,resolutionScale:o}=R.useContext(yl),a=R.useMemo(()=>i===null&&s===null?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),{}):new wle(r,i&&!s?i.texture:null,{blendFunction:gt.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:s?s.texture:null,resolutionScale:o??1,depthAwareUpsampling:!0,...e}),[r,i,e]);return Ie.jsx("primitive",{ref:n,object:a,dispose:null})});R.forwardRef(function({textureSrc:e,texture:n,...r},i){const s=bu(Pf,e);R.useLayoutEffect(()=>{s.encoding=ps,s.wrapS=s.wrapT=aa},[s]);const o=R.useMemo(()=>new Ele({...r,texture:s||n}),[r,s,n]);return Ie.jsx("primitive",{ref:i,object:o,dispose:null})});R.forwardRef(function({lut:e,tetrahedralInterpolation:n,...r},i){const s=R.useMemo(()=>new ple(e,r),[e,r]),o=ln(a=>a.invalidate);return R.useLayoutEffect(()=>{n&&(s.tetrahedralInterpolation=n),e&&(s.lut=e),o()},[s,o,e,n]),Ie.jsx("primitive",{ref:i,object:s,dispose:null})});R.forwardRef(function({ENABLE_BLUR:e=!0,USE_MRT:n=!0,...r},i){const{invalidate:s}=ln(),{scene:o,camera:a}=R.useContext(yl),l=R.useMemo(()=>new tue(o,a,{ENABLE_BLUR:e,USE_MRT:n,...r}),[o,a,e,n,r]),u=R.useContext(QE);return R.useEffect(()=>{var d;if(u&&u.enabled&&!((d=u.selected)===null||d===void 0)&&d.length)return l.selection.set(u.selected),s(),()=>{l.selection.clear(),s()}},[u]),Ie.jsx("primitive",{ref:i,object:l,...r})});function uue(){return Ie.jsx(nue,{children:Ie.jsx(oue,{luminanceThreshold:1,intensity:.85,levels:9,mipmapBlur:!0})})}function cue({progress:t}){return Ie.jsxs(Pk,{center:!0,children:[Ie.jsxs(Jv,{textAlign:"center",fontSize:".8rem",letterSpacing:1,mb:1,children:["Loading ",Math.round(t)," %"]}),Ie.jsx(Yse,{variant:"determinate",color:"primary",value:t,sx:{width:"300px",borderRadius:2}})]})}Yp({UnrealBloomPass:nu});function fue(){const{planetScale:t}=Jf(),{progress:e}=O7();return Ie.jsx(S7,{linear:!0,children:Ie.jsxs(R.Suspense,{fallback:Ie.jsx(cue,{progress:e}),children:[Ie.jsx(Gee,{diameter:X_.parent.diameter/t,base:X_.parent._3d.textures.base}),X_.planets.map((n,r)=>Ie.jsx(foe,{planet:n},n.name+r)),Ie.jsx(fX,{radius:1e4,depth:100,count:1e4,factor:4,saturation:0,speed:1}),Ie.jsx("pointLight",{position:[0,0,0],name:"sunlight",castShadow:!0}),Ie.jsx(doe,{}),Ie.jsx(uue,{})]})})}function due(){const{isOverview:t,setIsOverview:e,isOrbitLines:n,setIsOrbitLines:r,isCaptions:i,setIsCaptions:s}=Jf();return Ie.jsx(Rse,{position:"absolute",elevation:0,sx:{top:0},children:Ie.jsx(toe,{children:Ie.jsxs(dh,{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",children:[Ie.jsx(dh,{}),Ie.jsx(dh,{children:Ie.jsx(Jv,{color:"primary",children:"Solar System"})}),Ie.jsxs(dh,{display:"flex",gap:1,children:[Ie.jsx($I,{color:"primary",value:"check",selected:i,onChange:s,children:Ie.jsx(Jv,{fontSize:".6rem",children:"captions"})}),Ie.jsx($I,{color:"primary",value:"check",selected:n,onChange:r,children:Ie.jsx(Jv,{fontSize:".6rem",children:"orbits"})})]})]})})})}function hue(){return Ie.jsxs(Ie.Fragment,{children:[Ie.jsx(due,{}),Ie.jsx(fue,{})]})}const pue="/assets/Exo-VariableFont_wght-4bc5530e.ttf",mue=$E({palette:{mode:"dark",primary:{main:Wl.A400}},typography:{fontFamily:"Exo"},components:{MuiCssBaseline:{styleOverrides:`
        @font-face {
          font-family: 'Exo';
          font-style: normal;
          src: local('Raleway'), local('Raleway-Regular'), url(${pue}) format('woff2');
          unicodeRange: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC, U+2000-206F, U+2074, U+20AC, U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF;
        }
      `}}});rS.createRoot(document.getElementById("root")).render(Ie.jsx(Z.StrictMode,{children:Ie.jsxs(Nie,{theme:mue,children:[Ie.jsx(Nse,{}),Ie.jsx(hue,{})]})}));
